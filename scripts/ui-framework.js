!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return p.iterable&&(e[Symbol.iterator]=function(){return e}),e}function r(t){this.map={},t instanceof r?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function o(t){var e=new FileReader;return e.readAsArrayBuffer(t),a(e)}function h(t){var e=new FileReader;return e.readAsText(t),a(e)}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(p.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(p.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(o)},this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=s(this);return t?t:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var i=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new r(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new r(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function d(t){var e=new r,i=(t.getAllResponseHeaders()||"").trim().split("\n");return i.forEach(function(t){var i=t.trim().split(":"),n=i.shift().trim(),r=i.join(":").trim();e.append(n,r)}),e}function g(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof r?e.headers:new r(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var p={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};r.prototype.append=function(t,n){t=e(t),n=i(n);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(n)},r.prototype.delete=function(t){delete this.map[e(t)]},r.prototype.get=function(t){var i=this.map[e(t)];return i?i[0]:null},r.prototype.getAll=function(t){return this.map[e(t)]||[]},r.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},r.prototype.set=function(t,n){this.map[e(t)]=[i(n)]},r.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(n){t.call(e,n,i,this)},this)},this)},r.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),n(t)},r.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},r.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),n(t)},p.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},l.call(c.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];g.redirect=function(t,e){if(m.indexOf(e)===-1)throw new RangeError("Invalid status code");return new g(null,{status:e,headers:{location:t}})},t.Headers=r,t.Request=c,t.Response=g,t.fetch=function(t,e){return new Promise(function(i,n){function r(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var s;s=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:d(a),url:r()},e="response"in a?a.response:a.responseText;i(new g(e,t))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(s.method,s.url,!0),"include"===s.credentials&&(a.withCredentials=!0),"responseType"in a&&p.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);var fabric=fabric||{version:"1.6.3"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.document.createWindow?fabric.window=fabric.document.createWindow():fabric.window=fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",fabric.fontPaths={},fabric.charWidthsCache={},fabric.devicePixelRatio=fabric.window.devicePixelRatio||fabric.window.webkitDevicePixelRatio||fabric.window.mozDevicePixelRatio||1,function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:fabric.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(this.__eventListeners){if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}}function n(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter(function(t){return t!==!1}),this}}}fabric.Observable={observe:e,stopObserving:i,fire:n,on:e,off:i,trigger:n}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),i=0,n=arguments.length;i<n;i++)t=e.indexOf(arguments[i]),t!==-1&&(e.splice(t,1),this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=i.length;n--;)t.call(e,i[n],n,i);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,i=Math.atan2,n=Math.pow,r=Math.abs,s=Math.PI/180;fabric.util={removeFromArray:function(t,e){var i=t.indexOf(e);return i!==-1&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*s},radiansToDegrees:function(t){return t/s},rotatePoint:function(t,e,i){t.subtractEquals(e);var n=fabric.util.rotateVector(t,i);return new fabric.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=Math.sin(e),n=Math.cos(e),r=t.x*n-t.y*i,s=t.x*i+t.y*n;return{x:r,y:s}},transformPoint:function(t,e,i){return i?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t){var e=[t[0].x,t[1].x,t[2].x,t[3].x],i=fabric.util.array.min(e),n=fabric.util.array.max(e),r=Math.abs(i-n),s=[t[0].y,t[1].y,t[2].y,t[3].y],a=fabric.util.array.min(s),o=fabric.util.array.max(s),h=Math.abs(a-o);return{left:i,top:a,width:r,height:h}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],n=fabric.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),n=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*fabric.DPI/25.4;case"cm":return n*fabric.DPI/2.54;case"in":return n*fabric.DPI;case"pt":return n*fabric.DPI/72;case"pc":return n*fabric.DPI/72*12;case"em":return n*e;default:return n}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var i=e.split("."),n=i.length,r=t||fabric.window,s=0;s<n;++s)r=r[i[s]];return r},loadImage:function(t,e,i,n){if(!t)return void(e&&e.call(i,t));var r=fabric.util.createImage();r.onload=function(){e&&e.call(i,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(i,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&n&&(r.crossOrigin=n),r.src=t},enlivenObjects:function(t,e,i,n){function r(){++a===o&&e&&e(s)}t=t||[];var s=[],a=0,o=t.length;return o?void t.forEach(function(t,e){if(!t||!t.type)return void r();var a=fabric.util.getKlass(t.type,i);a.async?a.fromObject(t,function(i,a){a||(s[e]=i,n&&n(t,s[e])),r()}):(s[e]=a.fromObject(t),n&&n(t,s[e]),r())}):void(e&&e(s))},groupSVGElements:function(t,e,i){var n;return n=new fabric.PathGroup(t,e),"undefined"!=typeof i&&n.setSourcePath(i),n},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,r,s,a,o){var h=s-n,l=a-r,u=e(h*h+l*l),c=i(l,h),f=o.length,d=0,g=!0;for(t.save(),t.translate(n,r),t.moveTo(0,0),t.rotate(c),n=0;u>n;)n+=o[d++%f],n>u&&(n=u),t[g?"lineTo":"moveTo"](n,0),g=!g;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var n=e.stateProperties[i],r=n.charAt(0).toUpperCase()+n.slice(1),s="set"+r,a="get"+r;e[a]||(e[a]=function(t){return new Function('return this.get("'+t+'")')}(n)),e[s]||(e[s]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(n))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var r=i(t[1],t[0]),a=n(t[0],2)+n(t[1],2),o=e(a),h=(t[0]*t[3]-t[2]*t[1])/o,l=i(t[0]*t[2]+t[1]*t[3],a);return{angle:r/s,scaleX:o,scaleY:h,skewX:l/s,skewY:0,translateX:t[4],translateY:t[5]}},customTransformMatrix:function(t,e,i){var n=[1,0,r(Math.tan(i*s)),1],a=[r(t),0,0,r(e)];return fabric.util.multiplyTransformMatrices(a,n,!0)},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.setAngle(0)},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);for(var r=!0,s=t.getImageData(e,i,2*n||1,2*n||1),a=3,o=s.data.length;a<o;a+=4){var h=s.data[a];if(r=h<=0,r===!1)break}return s=null,r},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",r="Mid",s=t.split(" ");return s&&s.length&&(i=s.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):s.length&&(e=s.pop())),n="none"!==e?e.slice(1,4):"none",r="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:r}},clearFabricFontCache:function(t){fabric.charWidthsCache[t]&&(fabric.charWidthsCache[t]={})}}}("undefined"!=typeof exports?exports:this),function(){function t(t,n,s,a,h,l,u){var c=o.call(arguments);if(r[c])return r[c];var f=Math.PI,d=u*f/180,g=Math.sin(d),p=Math.cos(d),v=0,m=0;s=Math.abs(s),a=Math.abs(a);var y=-p*t*.5-g*n*.5,b=-p*n*.5+g*t*.5,x=s*s,_=a*a,w=b*b,C=y*y,S=x*_-x*w-_*C,O=0;if(S<0){var T=Math.sqrt(1-S/(x*_));s*=T,a*=T}else O=(h===l?-1:1)*Math.sqrt(S/(x*w+_*C));var k=O*s*b/a,M=-O*a*y/s,A=p*k-g*M+.5*t,D=g*k+p*M+.5*n,L=i(1,0,(y-k)/s,(b-M)/a),N=i((y-k)/s,(b-M)/a,(-y-k)/s,(-b-M)/a);0===l&&N>0?N-=2*f:1===l&&N<0&&(N+=2*f);for(var E=Math.ceil(Math.abs(N/f*2)),j=[],I=N/E,P=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),R=L+I,B=0;B<E;B++)j[B]=e(L,R,p,g,s,a,A,D,P,v,m),v=j[B][4],m=j[B][5],L=R,R+=I;return r[c]=j,j}function e(t,e,i,n,r,a,h,l,u,c,f){var d=o.call(arguments);if(s[d])return s[d];var g=Math.cos(t),p=Math.sin(t),v=Math.cos(e),m=Math.sin(e),y=i*r*v-n*a*m+h,b=n*r*v+i*a*m+l,x=c+u*(-i*r*p-n*a*g),_=f+u*(-n*r*p+i*a*g),w=y+u*(i*r*m+n*a*v),C=b+u*(n*r*m-i*a*v);return s[d]=[x,_,w,C,y,b],s[d]}function i(t,e,i,n){var r=Math.atan2(e,t),s=Math.atan2(n,i);return s>=r?s-r:2*Math.PI-(r-s)}function n(t,e,i,n,r,s,h,l){var u=o.call(arguments);if(a[u])return a[u];var c,f,d,g,p,v,m,y,b=Math.sqrt,x=Math.min,_=Math.max,w=Math.abs,C=[],S=[[],[]];f=6*t-12*i+6*r,c=-3*t+9*i-9*r+3*h,d=3*i-3*t;for(var O=0;O<2;++O)if(O>0&&(f=6*e-12*n+6*s,c=-3*e+9*n-9*s+3*l,d=3*n-3*e),w(c)<1e-12){if(w(f)<1e-12)continue;g=-d/f,0<g&&g<1&&C.push(g)}else m=f*f-4*d*c,m<0||(y=b(m),p=(-f+y)/(2*c),0<p&&p<1&&C.push(p),v=(-f-y)/(2*c),0<v&&v<1&&C.push(v));for(var T,k,M,A=C.length,D=A;A--;)g=C[A],M=1-g,T=M*M*M*t+3*M*M*g*i+3*M*g*g*r+g*g*g*h,S[0][A]=T,k=M*M*M*e+3*M*M*g*n+3*M*g*g*s+g*g*g*l,S[1][A]=k;S[0][D]=t,S[1][D]=e,S[0][D+1]=h,S[1][D+1]=l;var L=[{x:x.apply(null,S[0]),y:x.apply(null,S[1])},{x:_.apply(null,S[0]),y:_.apply(null,S[1])}];return a[u]=L,L}var r={},s={},a={},o=Array.prototype.join;fabric.util.drawArc=function(e,i,n,r){for(var s=r[0],a=r[1],o=r[2],h=r[3],l=r[4],u=r[5],c=r[6],f=[[],[],[],[]],d=t(u-i,c-n,s,a,h,l,o),g=0,p=d.length;g<p;g++)f[g][0]=d[g][0]+i,f[g][1]=d[g][1]+n,f[g][2]=d[g][2]+i,f[g][3]=d[g][3]+n,f[g][4]=d[g][4]+i,f[g][5]=d[g][5]+n,e.bezierCurveTo.apply(e,f[g])},fabric.util.getBoundsOfArc=function(e,i,r,s,a,o,h,l,u){for(var c=0,f=0,d=[],g=[],p=t(l-e,u-i,r,s,o,h,a),v=[[],[]],m=0,y=p.length;m<y;m++)d=n(c,f,p[m][0],p[m][1],p[m][2],p[m][3],p[m][4],p[m][5]),v[0].x=d[0].x+e,v[0].y=d[0].y+i,v[1].x=d[1].x+e,v[1].y=d[1].y+i,g.push(v[0]),g.push(v[1]),c=p[m][4],f=p[m][5];return g},fabric.util.getBoundsOfCurve=n}(),function(){function t(t,e){for(var i=s.call(arguments,2),n=[],r=0,a=t.length;r<a;r++)n[r]=i.length?t[r][e].apply(t[r],i):t[r][e].call(t[r]);return n}function e(t,e){return r(t,e,function(t,e){return t>=e})}function i(t,e){return r(t,e,function(t,e){return t<e})}function n(t,e){for(var i=t.length;i--;)t[i]=e;return t}function r(t,e,i){if(t&&0!==t.length){var n=t.length-1,r=e?t[n][e]:t[n];if(e)for(;n--;)i(t[n][e],r)&&(r=t[n][e]);else for(;n--;)i(t[n],r)&&(r=t[n]);return r}}var s=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var r=n>=0?n:Math.max(i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,r=this.length>>>0;n<r;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],r=0,s=this.length>>>0;r<s;r++)r in this&&(i=this[r],t.call(e,i,r,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(arguments.length>1)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={fill:n,invoke:t,min:i,max:e}}(),function(){function t(t,e){for(var i in e)t[i]=e[i];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:i}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,i=function(){};Function.prototype.bind||(Function.prototype.bind=function(n){var r,s=this,a=t.call(arguments,1);return r=a.length?function(){return e.call(s,this instanceof i?this:n,a.concat(t.call(arguments)))}:function(){return e.call(s,this instanceof i?this:n,arguments)},i.prototype=this.prototype,r.prototype=new i,r})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,n.call(arguments,1)):e.call(this)}function i(){function i(){this.initialize.apply(this,arguments)}var s=null,o=n.call(arguments,0);"function"==typeof o[0]&&(s=o.shift()),i.superclass=s,i.subclasses=[],s&&(t.prototype=s.prototype,i.prototype=new t,s.subclasses.push(i));for(var h=0,l=o.length;h<l;h++)a(i,o[h],s);return i.prototype.initialize||(i.prototype.initialize=r),i.prototype.constructor=i,i.prototype.callSuper=e,i}var n=Array.prototype.slice,r=function(){},s=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),a=function(t,e,i){for(var n in e)n in t.prototype&&"function"==typeof t.prototype[n]&&(e[n]+"").indexOf("callSuper")>-1?t.prototype[n]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(n):t.prototype[n]=e[n],s&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=i}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),r=n.length;for(i=0;i<r;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:i(t,e)}}function i(t,e){return function(i){e.call(a(t),i||fabric.window.event)}}function n(t,e){return function(i){if(p[t]&&p[t][e])for(var n=p[t][e],r=0,s=n.length;r<s;r++)n[r].call(this,i||fabric.window.event)}}function r(t){t||(t=fabric.window.event);var e=t.target||(typeof t.srcElement!==h?t.srcElement:null),i=fabric.util.getScrollLeftTop(e);return{x:v(t)+i.left,y:m(t)+i.top}}function s(t,e,i){var n="touchend"===t.type?"changedTouches":"touches";return t[n]&&t[n][0]?t[n][0][e]-(t[n][0][e]-t[n][0][i])||t[i]:t[i]}var a,o,h="unknown",l=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};a=function(e){return t[e]},o=function(e,i){t[e]=i}}();var u,c,f=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),d=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),g={},p={};f?(u=function(t,e,i){t.addEventListener(e,i,!1)},c=function(t,e,i){t.removeEventListener(e,i,!1)}):d?(u=function(t,i,n){var r=l(t);o(r,t),g[r]||(g[r]={}),g[r][i]||(g[r][i]=[]);var s=e(r,n);g[r][i].push(s),t.attachEvent("on"+i,s.wrappedHandler)},c=function(t,e,i){var n,r=l(t);if(g[r]&&g[r][e])for(var s=0,a=g[r][e].length;s<a;s++)n=g[r][e][s],n&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),g[r][e][s]=null)}):(u=function(t,e,i){var r=l(t);if(p[r]||(p[r]={}),!p[r][e]){p[r][e]=[];var s=t["on"+e];s&&p[r][e].push(s),t["on"+e]=n(r,e)}p[r][e].push(i)},c=function(t,e,i){var n=l(t);if(p[n]&&p[n][e])for(var r=p[n][e],s=0,a=r.length;s<a;s++)r[s]===i&&r.splice(s,1)}),fabric.util.addListener=u,fabric.util.removeListener=c;var v=function(t){return typeof t.clientX!==h?t.clientX:0},m=function(t){return typeof t.clientY!==h?t.clientY:0};fabric.isTouchSupported&&(v=function(t){return s(t,"pageX","clientX")},m=function(t){return s(t,"pageY","clientY")}),fabric.util.getPointer=r,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)s(t,e[n]);else{var r="float"===n||"cssFloat"===n?"undefined"==typeof i.styleFloat?"cssFloat":"styleFloat":n;i[r]=e[n]}return t}var e=fabric.document.createElement("div"),i="string"==typeof e.style.opacity,n="string"==typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};i?s=function(t,e){return t.style.opacity=e,t}:n&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),r.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(r,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function i(t,e){t&&(" "+t.className+" ").indexOf(" "+e+" ")===-1&&(t.className+=(t.className?" ":"")+e)}function n(t,i,n){return"string"==typeof i&&(i=e(i,n)),t.parentNode&&t.parentNode.replaceChild(i,t),i.appendChild(t),i}function r(t){for(var e=0,i=0,n=fabric.document.documentElement,r=fabric.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&(t=t.parentNode||t.host,t===fabric.document?(e=r.scrollLeft||n.scrollLeft||0,i=r.scrollTop||n.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||"fixed"!==fabric.util.getElementStyle(t,"position")););return{left:e,top:i}}function s(t){var e,i,n=t&&t.ownerDocument,s={left:0,top:0},a={left:0,top:0},o={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return a;for(var h in o)a[o[h]]+=parseInt(l(t,h),10)||0;return e=n.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=r(t),{left:s.left+i.left-(e.clientLeft||0)+a.left,top:s.top+i.top-(e.clientTop||0)+a.top}}var a,o=Array.prototype.slice,h=function(t){return o.call(t,0)};try{a=h(fabric.document.childNodes)instanceof Array}catch(t){}a||(h=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e});var l;l=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var i=fabric.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),r=!0;n.onload=n.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=h,fabric.util.makeElement=e,fabric.util.addClass=i,fabric.util.wrapElement=n,fabric.util.getScrollLeftTop=r,fabric.util.getElementOffset=s,fabric.util.getElementStyle=l}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,r){r||(r={});var s,a=r.method?r.method.toUpperCase():"GET",o=r.onComplete||function(){},h=n();return h.onreadystatechange=function(){4===h.readyState&&(o(h),h.onreadystatechange=e)},"GET"===a&&(s=null,"string"==typeof r.parameters&&(i=t(i,r.parameters))),h.open(a,i,!0),"POST"!==a&&"PUT"!==a||h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(s),h}var n=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var i=t[e]();if(i)return t[e]}catch(t){}}();fabric.util.request=i}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(i){t||(t={});var n,r=i||+new Date,s=t.duration||500,a=r+s,o=t.onChange||function(){},h=t.abort||function(){return!1},l=t.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},u="startValue"in t?t.startValue:0,c="endValue"in t?t.endValue:100,f=t.byValue||c-u;t.onStart&&t.onStart(),function i(c){n=c||+new Date;var d=n>a?s:n-r;return h()?void(t.onComplete&&t.onComplete()):(o(l(d,u,f,s)),n>a?void(t.onComplete&&t.onComplete()):void e(i))}(r)})}function e(){return i.apply(fabric.window,arguments)}var i=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function n(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function r(t,e,i,n){return i*(t/=n)*t*t*t+e}function s(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function a(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function o(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function h(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function l(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function u(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function c(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function f(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function d(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function g(t,e,i,n){return t===n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e}function p(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e)}function v(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function m(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function y(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function b(i,n,r,s){var a=1.70158,o=0,h=r;if(0===i)return n;if(i/=s,1===i)return n+r;o||(o=.3*s);var l=t(h,r,o,a);return-e(l,i,s)+n}function x(e,i,n,r){var s=1.70158,a=0,o=n;if(0===e)return i;if(e/=r,1===e)return i+n;a||(a=.3*r);var h=t(o,n,a,s);return h.a*Math.pow(2,-10*e)*Math.sin((e*r-h.s)*(2*Math.PI)/h.p)+h.c+i}function _(i,n,r,s){var a=1.70158,o=0,h=r;if(0===i)return n;if(i/=s/2,2===i)return n+r;o||(o=s*(.3*1.5));var l=t(h,r,o,a);return i<1?-.5*e(l,i,s)+n:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*s-l.s)*(2*Math.PI)/l.p)*.5+l.c+n}function w(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e}function C(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}function S(t,e,i,n,r){return void 0===r&&(r=1.70158),t/=n/2,t<1?i/2*(t*t*(((r*=1.525)+1)*t-r))+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e}function O(t,e,i,n){return i-T(n-t,0,i,n)+e}function T(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function k(t,e,i,n){return t<n/2?.5*O(2*t,0,i,n)+e:.5*T(2*t-n,0,i,n)+.5*i+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:n,
easeInQuart:r,easeOutQuart:s,easeInOutQuart:a,easeInQuint:o,easeOutQuint:h,easeInOutQuint:l,easeInSine:u,easeOutSine:c,easeInOutSine:f,easeInExpo:d,easeOutExpo:g,easeInOutExpo:p,easeInCirc:v,easeOutCirc:m,easeInOutCirc:y,easeInElastic:b,easeOutElastic:x,easeInOutElastic:_,easeInBack:w,easeOutBack:C,easeInOutBack:S,easeInBounce:O,easeOutBounce:T,easeInOutBounce:k}}(),function(t){"use strict";function e(t){return t in T?T[t]:t}function i(t,e,i,n){var r,s="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=i&&i.transformMatrix?_(i.transformMatrix,p.parseTransformAttribute(e)):p.parseTransformAttribute(e):"visible"===t?(e="none"!==e&&"hidden"!==e,i&&i.visible===!1&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":r=s?e.map(x):x(e,n):e="",!s&&isNaN(r)?e:r}function n(t){for(var e in k)if("undefined"!=typeof t[k[e]]&&""!==t[e]){if("undefined"==typeof t[e]){if(!p.Object.prototype[e])continue;t[e]=p.Object.prototype[e]}if(0!==t[e].indexOf("url(")){var i=new p.Color(t[e]);t[e]=i.setAlpha(b(i.getAlpha()*t[k[e]],2)).toRgba()}}return t}function r(t,n){var r,s;t.replace(/;\s*$/,"").split(";").forEach(function(t){var a=t.split(":");r=e(a[0].trim().toLowerCase()),s=i(r,a[1].trim()),n[r]=s})}function s(t,n){var r,s;for(var a in t)"undefined"!=typeof t[a]&&(r=e(a.toLowerCase()),s=i(r,t[a]),n[r]=s)}function a(t,e){var i={};for(var n in p.cssRules[e])if(o(t,n.split(" ")))for(var r in p.cssRules[e][n])i[r]=p.cssRules[e][n][r];return i}function o(t,e){var i,n=!0;return i=l(t,e.pop()),i&&e.length&&(n=h(t,e)),i&&n&&0===e.length}function h(t,e){for(var i,n=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)n&&(i=e.pop()),t=t.parentNode,n=l(t,i);return 0===e.length}function l(t,e){var i,n=t.nodeName,r=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+n,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),r&&e.length){r=r.split(" ");for(var a=r.length;a--;)i=new RegExp("\\."+r[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")}return 0===e.length}function u(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,r,s=t.getElementsByTagName("*");for(r=0;r<s.length;r++)if(n=s[r],e===n.getAttribute("id"))return n}function c(t){for(var e=t.getElementsByTagName("use"),i=0;e.length&&i<e.length;){var n,r,s,a,o,h=e[i],l=h.getAttribute("xlink:href").substr(1),c=h.getAttribute("x")||0,d=h.getAttribute("y")||0,g=u(t,l).cloneNode(!0),p=(g.getAttribute("transform")||"")+" translate("+c+", "+d+")",v=e.length;if(f(g),/^svg$/i.test(g.nodeName)){var m=g.ownerDocument.createElement("g");for(s=0,a=g.attributes,o=a.length;s<o;s++)r=a.item(s),m.setAttribute(r.nodeName,r.nodeValue);for(;null!=g.firstChild;)m.appendChild(g.firstChild);g=m}for(s=0,a=h.attributes,o=a.length;s<o;s++)r=a.item(s),"x"!==r.nodeName&&"y"!==r.nodeName&&"xlink:href"!==r.nodeName&&("transform"===r.nodeName?p=r.nodeValue+" "+p:g.setAttribute(r.nodeName,r.nodeValue));g.setAttribute("transform",p),g.setAttribute("instantiated_by_use","1"),g.removeAttribute("id"),n=h.parentNode,n.replaceChild(g,h),e.length===v&&i++}}function f(t){var e,i,n,r,s=t.getAttribute("viewBox"),a=1,o=1,h=0,l=0,u=t.getAttribute("width"),c=t.getAttribute("height"),f=t.getAttribute("x")||0,d=t.getAttribute("y")||0,g=t.getAttribute("preserveAspectRatio")||"",v=!s||!C.test(t.tagName)||!(s=s.match(M)),m=!u||!c||"100%"===u||"100%"===c,y=v&&m,b={},_="";if(b.width=0,b.height=0,b.toBeParsed=y,y)return b;if(v)return b.width=x(u),b.height=x(c),b;if(h=-parseFloat(s[1]),l=-parseFloat(s[2]),e=parseFloat(s[3]),i=parseFloat(s[4]),m?(b.width=e,b.height=i):(b.width=x(u),b.height=x(c),a=b.width/e,o=b.height/i),g=p.util.parsePreserveAspectRatioAttribute(g),"none"!==g.alignX&&(o=a=a>o?o:a),1===a&&1===o&&0===h&&0===l&&0===f&&0===d)return b;if((f||d)&&(_=" translate("+x(f)+" "+x(d)+") "),n=_+" matrix("+a+" 0 0 "+o+" "+h*a+" "+l*o+") ","svg"===t.tagName){for(r=t.ownerDocument.createElement("g");null!=t.firstChild;)r.appendChild(t.firstChild);t.appendChild(r)}else r=t,n=r.getAttribute("transform")+n;return r.setAttribute("transform",n),b}function d(t){var e=t.objects,i=t.options;return e=e.map(function(t){return p[m(t.type)].fromObject(t)}),{objects:e,options:i}}function g(t,e,i){e[i]&&e[i].toSVG&&t.push('\t<pattern x="0" y="0" id="',i,'Pattern" ','width="',e[i].source.width,'" height="',e[i].source.height,'" patternUnits="userSpaceOnUse">\n','\t\t<image x="0" y="0" ','width="',e[i].source.width,'" height="',e[i].source.height,'" xlink:href="',e[i].source.src,'"></image>\n\t</pattern>\n')}var p=t.fabric||(t.fabric={}),v=p.util.object.extend,m=p.util.string.capitalize,y=p.util.object.clone,b=p.util.toFixed,x=p.util.parseUnit,_=p.util.multiplyTransformMatrices,w=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/i,C=/^(symbol|image|marker|pattern|view|svg)$/i,S=/^(?:pattern|defs|symbol|metadata)$/i,O=/^(symbol|g|a|svg)$/i,T={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},k={stroke:"strokeOpacity",fill:"fillOpacity"};p.cssRules={},p.gradientDefs={},p.parseTransformAttribute=function(){function t(t,e){var i=e[0],n=3===e.length?e[1]:0,r=3===e.length?e[2]:0;t[0]=Math.cos(i),t[1]=Math.sin(i),t[2]=-Math.sin(i),t[3]=Math.cos(i),t[4]=n-(t[0]*n+t[2]*r),t[5]=r-(t[1]*n+t[3]*r)}function e(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function i(t,e){t[2]=Math.tan(p.util.degreesToRadians(e[0]))}function n(t,e){t[1]=Math.tan(p.util.degreesToRadians(e[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var s=[1,0,0,1,0,0],a=p.reNum,o="(?:\\s+,?\\s*|,\\s*)",h="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",l="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",u="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+o+"("+a+")"+o+"("+a+"))?\\s*\\))",c="(?:(scale)\\s*\\(\\s*("+a+")(?:"+o+"("+a+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+a+")(?:"+o+"("+a+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")"+o+"("+a+")\\s*\\))",g="(?:"+d+"|"+f+"|"+c+"|"+u+"|"+h+"|"+l+")",v="(?:"+g+"(?:"+o+"*"+g+")*)",m="^\\s*(?:"+v+"?)\\s*$",y=new RegExp(m),b=new RegExp(g,"g");return function(a){var o=s.concat(),h=[];if(!a||a&&!y.test(a))return o;a.replace(b,function(a){var l=new RegExp(g).exec(a).filter(function(t){return""!==t&&null!=t}),u=l[1],c=l.slice(2).map(parseFloat);switch(u){case"translate":r(o,c);break;case"rotate":c[0]=p.util.degreesToRadians(c[0]),t(o,c);break;case"scale":e(o,c);break;case"skewX":i(o,c);break;case"skewY":n(o,c);break;case"matrix":o=c}h.push(o.concat()),o=s.concat()});for(var l=h[0];h.length>1;)h.shift(),l=p.util.multiplyTransformMatrices(l,h[0]);return l}}();var M=new RegExp("^\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*,?\\s*("+p.reNum+"+)\\s*$");p.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}return function(e,i,n){if(e){c(e);var r=new Date,s=p.Object.__uid++,a=f(e),o=p.util.toArray(e.getElementsByTagName("*"));if(a.svgUid=s,0===o.length&&p.isLikelyNode){o=e.selectNodes('//*[name(.)!="svg"]');for(var h=[],l=0,u=o.length;l<u;l++)h[l]=o[l];o=h}var d=o.filter(function(e){return f(e),w.test(e.tagName)&&!t(e,S)});if(!d||d&&!d.length)return void(i&&i([],{}));p.gradientDefs[s]=p.getGradientDefs(e),p.cssRules[s]=p.getCSSRules(e),p.parseElements(d,function(t){p.documentParsingTime=new Date-r,i&&i(t,a)},y(a),n)}}}();var A={has:function(t,e){e(!1)},get:function(){},set:function(){}},D=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+p.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+p.reNum+"))?\\s+(.*)");v(p,{parseFontDeclaration:function(t,e){var i=t.match(D);if(i){var n=i[1],r=i[3],s=i[4],a=i[5],o=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=x(s)),o&&(e.fontFamily=o),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,i,n,r,s=t.getElementsByTagName("linearGradient"),a=t.getElementsByTagName("radialGradient"),o=0,h=[],l={},u={};for(h.length=s.length+a.length,i=s.length;i--;)h[o++]=s[i];for(i=a.length;i--;)h[o++]=a[i];for(;o--;)e=h[o],r=e.getAttribute("xlink:href"),n=e.getAttribute("id"),r&&(u[n]=r.substr(1)),l[n]=e;for(n in u){var c=l[u[n]].cloneNode(!0);for(e=l[n];c.firstChild;)e.appendChild(c.firstChild)}return l},parseAttributes:function(t,r,s){if(t){var o,h,l={};"undefined"==typeof s&&(s=t.getAttribute("svgUid")),t.parentNode&&O.test(t.parentNode.nodeName)&&(l=p.parseAttributes(t.parentNode,r,s)),h=l&&l.fontSize||t.getAttribute("font-size")||p.Text.DEFAULT_SVG_FONT_SIZE;var u=r.reduce(function(n,r){return o=t.getAttribute(r),o&&(r=e(r),o=i(r,o,l,h),n[r]=o),n},{});return u=v(u,v(a(t,s),p.parseStyleAttribute(t))),u.font&&p.parseFontDeclaration(u.font,u),n(v(l,u))}},parseElements:function(t,e,i,n){new p.ElementsParser(t,e,i,n).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"==typeof i?r(i,e):s(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){for(var n,r=t.getElementsByTagName("style"),s={},a=0,o=r.length;a<o;a++){var h=r[a].textContent||r[a].text;h=h.replace(/\/\*[\s\S]*?\*\//g,""),""!==h.trim()&&(n=h.match(/[^{]*\{[\s\S]*?\}/g),n=n.map(function(t){return t.trim()}),n.forEach(function(t){for(var n=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),r={},a=n[2].trim(),o=a.replace(/;$/,"").split(/\s*;\s*/),h=0,l=o.length;h<l;h++){var u=o[h].split(/\s*:\s*/),c=e(u[0]),f=i(c,u[1],u[0]);r[c]=f}t=n[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(s[t]=p.util.object.clone(r))})}))}return s},loadSVGFromURL:function(t,e,i){function n(n){var r=n.responseXML;r&&!r.documentElement&&p.window.ActiveXObject&&n.responseText&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),r&&r.documentElement||e&&e(null),p.parseSVGDocument(r.documentElement,function(i,n){A.set(t,{objects:p.util.array.invoke(i,"toObject"),options:n}),e&&e(i,n)},i)}t=t.replace(/^\n\s*/,"").trim(),A.has(t,function(i){i?A.get(t,function(t){var i=d(t);e(i.objects,i.options)}):new p.util.request(t,{method:"get",onComplete:n})})},loadSVGFromString:function(t,e,i){t=t.trim();var n;if("undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(n=r.parseFromString(t,"text/xml"))}else p.window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));p.parseSVGDocument(n.documentElement,function(t,i){e(t,i)},i)},createSVGFontFacesMarkup:function(t){for(var e,i,n,r,s,a,o,h="",l={},u=p.fontPaths,c=0,f=t.length;c<f;c++)if(e=t[c],i=e.fontFamily,e.type.indexOf("text")!==-1&&!l[i]&&u[i]&&(l[i]=!0,e.styles)){n=e.styles;for(s in n){r=n[s];for(o in r)a=r[o],i=a.fontFamily,!l[i]&&u[i]&&(l[i]=!0)}}for(var d in l)h+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",u[d],"');\n","\t\t}\n"].join("");return h&&(h=['\t<style type="text/css">',"<![CDATA[\n",h,"]]>","</style>\n"].join("")),h},createSVGRefElementsMarkup:function(t){var e=[];return g(e,t,"backgroundColor"),g(e,t,"overlayColor"),e.join("")}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,i,n){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;t<e;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var i=fabric[fabric.util.string.capitalize(t.tagName)];if(i&&i.fromElement)try{this._createObject(i,t,e)}catch(t){fabric.log(t)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,i){if(t.async)t.fromElement(e,this.createCallback(i,e),this.options);else{var n=t.fromElement(e,this.options);this.resolveGradient(n,"fill"),this.resolveGradient(n,"stroke"),this.reviver&&this.reviver(e,n),this.instances[i]=n,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var i=this;return function(n){i.resolveGradient(n,"fill"),i.resolveGradient(n,"stroke"),i.reviver&&i.reviver(e,n),i.instances[t]=n,i.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var i=t.get(e);if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);fabric.gradientDefs[this.svgUid][n]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][n],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var i=t.fabric||(t.fabric={});return i.Point?void i.warn("fabric.Point is already defined"):(i.Point=e,void(e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,i){return new e(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var i=t.fabric||(t.fabric={});return i.Intersection?void i.warn("fabric.Intersection is already defined"):(i.Intersection=e,i.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},i.Intersection.intersectLineLine=function(t,n,r,s){var a,o=(s.x-r.x)*(t.y-r.y)-(s.y-r.y)*(t.x-r.x),h=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),l=(s.y-r.y)*(n.x-t.x)-(s.x-r.x)*(n.y-t.y);if(0!==l){var u=o/l,c=h/l;0<=u&&u<=1&&0<=c&&c<=1?(a=new e("Intersection"),a.points.push(new i.Point(t.x+u*(n.x-t.x),t.y+u*(n.y-t.y)))):a=new e}else a=new e(0===o||0===h?"Coincident":"Parallel");return a},i.Intersection.intersectLinePolygon=function(t,i,n){for(var r=new e,s=n.length,a=0;a<s;a++){var o=n[a],h=n[(a+1)%s],l=e.intersectLineLine(t,i,o,h);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},i.Intersection.intersectPolygonPolygon=function(t,i){for(var n=new e,r=t.length,s=0;s<r;s++){var a=t[s],o=t[(s+1)%r],h=e.intersectLinePolygon(a,o,i);n.appendPoints(h.points)}return n.points.length>0&&(n.status="Intersection"),n},void(i.Intersection.intersectPolygonRectangle=function(t,n,r){var s=n.min(r),a=n.max(r),o=new i.Point(a.x,s.y),h=new i.Point(s.x,a.y),l=e.intersectLinePolygon(s,o,t),u=e.intersectLinePolygon(o,a,t),c=e.intersectLinePolygon(a,h,t),f=e.intersectLinePolygon(h,s,t),d=new e;return d.appendPoints(l.points),d.appendPoints(u.points),d.appendPoints(c.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var n=t.fabric||(t.fabric={});return n.Color?void n.warn("fabric.Color is already defined."):(n.Color=e,n.Color.prototype={_tryParsingColor:function(t){var i;t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t&&(i=[255,255,255,0]),i||(i=e.sourceFromHex(t)),i||(i=e.sourceFromRgb(t)),i||(i=e.sourceFromHsl(t)),i||(i=[0,0,0,1]),i&&this.setSource(i)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var r,s,a,o=n.util.array.max([t,e,i]),h=n.util.array.min([t,e,i]);if(a=(o+h)/2,o===h)r=s=0;else{var l=o-h;switch(s=a>.5?l/(2-o-h):l/(o+h),o){case t:r=(e-i)/l+(e<i?6:0);break;case e:r=(i-t)/l+2;break;case i:r=(t-e)/l+4}r/=6}return[Math.round(360*r),Math.round(100*s),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof e||(t=new e(t));for(var i=[],n=this.getAlpha(),r=.5,s=this.getSource(),a=t.getSource(),o=0;o<3;o++)i.push(Math.round(s[o]*(1-r)+a[o]*r));return i[3]=n,this.setSource(i),this}},n.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,n.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,n.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",grey:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},n.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},n.Color.sourceFromRgb=function(t){var i=t.match(e.reRGBa);if(i){var n=parseInt(i[1],10)/(/%$/.test(i[1])?100:1)*(/%$/.test(i[1])?255:1),r=parseInt(i[2],10)/(/%$/.test(i[2])?100:1)*(/%$/.test(i[2])?255:1),s=parseInt(i[3],10)/(/%$/.test(i[3])?100:1)*(/%$/.test(i[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(s,10),i[4]?parseFloat(i[4]):1]}},n.Color.fromRgba=e.fromRgb,n.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},n.Color.sourceFromHsl=function(t){var n=t.match(e.reHSLa);if(n){var r,s,a,o=(parseFloat(n[1])%360+360)%360/360,h=parseFloat(n[2])/(/%$/.test(n[2])?100:1),l=parseFloat(n[3])/(/%$/.test(n[3])?100:1);if(0===h)r=s=a=l;else{var u=l<=.5?l*(h+1):l+h-l*h,c=2*l-u;r=i(c,u,o+1/3),s=i(c,u,o),a=i(c,u,o-1/3)}return[Math.round(255*r),Math.round(255*s),Math.round(255*a),n[4]?parseFloat(n[4]):1]}},n.Color.fromHsla=e.fromHsl,n.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},n.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var i=t.slice(t.indexOf("#")+1),n=3===i.length,r=n?i.charAt(0)+i.charAt(0):i.substring(0,2),s=n?i.charAt(1)+i.charAt(1):i.substring(2,4),a=n?i.charAt(2)+i.charAt(2):i.substring(4,6);return[parseInt(r,16),parseInt(s,16),parseInt(a,16),1]}},void(n.Color.fromSource=function(t){var i=new e;return i.setSource(t),i}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,i,n,r=t.getAttribute("style"),s=t.getAttribute("offset")||0;if(s=parseFloat(s)/(/%$/.test(s)?100:1),s=s<0?0:s>1?1:s,r){var a=r.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var o=a.length;o--;){var h=a[o].split(/\s*:\s*/),l=h[0].trim(),u=h[1].trim();"stop-color"===l?e=u:"stop-opacity"===l&&(n=u)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),n||(n=t.getAttribute("stop-opacity")),e=new fabric.Color(e),i=e.getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=i,{offset:s,color:e.toRgb(),opacity:n}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function n(t,e,i){var n,r=0,s=1,a="";for(var o in e)n=parseFloat(e[o],10),s="string"==typeof e[o]&&/^\d+%$/.test(e[o])?.01:1,"x1"===o||"x2"===o||"r2"===o?(s*="objectBoundingBox"===i?t.width:1,r="objectBoundingBox"===i?t.left||0:0):"y1"!==o&&"y2"!==o||(s*="objectBoundingBox"===i?t.height:1,r="objectBoundingBox"===i?t.top||0:0),e[o]=n*s+r;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===i&&t.rx!==t.ry){var h=t.ry/t.rx;a=" scale(1, "+h+")",e.y1&&(e.y1/=h),e.y2&&(e.y2/=h)}return a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform}},toSVG:function(t){var e,i,n=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var r in n)"x1"===r||"x2"===r||"r2"===r?n[r]+=this.offsetX-t.width/2:"y1"!==r&&"y2"!==r||(n[r]+=this.offsetY-t.height/2);i='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(i+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",i,' x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",i,' cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">\n']);for(var s=0;s<this.colorStops.length;s++)e.push("<stop ",'offset="',100*this.colorStops[s].offset+"%",'" style="stop-color:',this.colorStops[s].color,null!=this.colorStops[s].opacity?";stop-opacity: "+this.colorStops[s].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var i,n,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(n in r)"x1"===n||"x2"===n?r[n]+=-this.offsetX+e.width/2:"y1"!==n&&"y2"!==n||(r[n]+=-this.offsetY+e.height/2);"linear"===this.type?i=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(i=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var s=0,a=this.colorStops.length;s<a;s++){var o=this.colorStops[s].color,h=this.colorStops[s].opacity,l=this.colorStops[s].offset;"undefined"!=typeof h&&(o=new fabric.Color(o).setAlpha(h).toRgba()),i.addColorStop(parseFloat(l),o)}return i}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(r,s){var a,o=r.getElementsByTagName("stop"),h="linearGradient"===r.nodeName?"linear":"radial",l=r.getAttribute("gradientUnits")||"objectBoundingBox",u=r.getAttribute("gradientTransform"),c=[],f={};"linear"===h?f=e(r):"radial"===h&&(f=i(r));for(var d=o.length;d--;)c.push(t(o[d]));a=n(s,f,l);var g=new fabric.Gradient({type:h,coords:f,colorStops:c,offsetX:-s.left,offsetY:-s.top});return(u||""!==a)&&(g.gradientTransform=fabric.parseTransformAttribute((u||"")+a)),g},forObject:function(t,e){return e||(e={}),n(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src?t=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(t=this.source.toDataURL()),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),n=e.height/t.getHeight(),r=this.offsetX/t.getWidth(),s=this.offsetY/t.getHeight(),a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+s+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var i in t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[],r=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,r=40,s=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),o=20;return t.width&&t.height&&(n=100*i((Math.abs(a.x)+this.blur)/t.width,s)+o,r=100*i((Math.abs(a.y)+this.blur)/t.height,s)+o),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(a.x,s)+'" dy="'+i(a.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+this.color+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke"].forEach(function(e){this[e]!==i[e]&&(t[e]=this[e])},this),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,i=fabric.util.removeFromArray,n=fabric.util.toFixed,r=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},_isRetinaScaling:function(){return 1!==fabric.devicePixelRatio&&this.enableRetinaScaling},_initRetinaScaling:function(){this._isRetinaScaling()&&(this.lowerCanvasEl.setAttribute("width",this.width*fabric.devicePixelRatio),this.lowerCanvasEl.setAttribute("height",this.height*fabric.devicePixelRatio),this.contextContainer.scale(fabric.devicePixelRatio,fabric.devicePixelRatio))},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,i,n){return"string"==typeof e?fabric.util.loadImage(e,function(e){e&&(this[t]=new fabric.Image(e,n)),
i&&i(e)},this,n&&n.crossOrigin):(n&&e.setOptions(n),this[t]=e,i&&i(e)),this},__setBgOverlayColor:function(t,e,i){if(e&&e.source){var n=this;fabric.util.loadImage(e.source,function(r){n[t]=new fabric.Pattern({source:r,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),i&&i()})}else this[t]=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw r;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),"undefined"==typeof t.getContext)throw r},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;e=e||{};for(var n in t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px"),e.backstoreOnly||this._setCssDimension(n,i);return this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),e.cssOnly||this.renderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var i=0,n=this._objects.length;i<n;i++)this._objects[i].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var i=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var n=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=i.x-n.x,this.viewportTransform[5]+=i.y-n.y,this.renderAll();for(var r=0,s=this._objects.length;r<s;r++)this._objects[r].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},_chooseObjectsToRender:function(){var t,e=this.getActiveGroup(),i=this.getActiveObject(),n=[],r=[];if(!e&&!i||this.preserveObjectStacking)n=this._objects;else{for(var s=0,a=this._objects.length;s<a;s++)t=this._objects[s],e&&e.contains(t)||t===i?r.push(t):n.push(t);e&&e._set("_objects",r)}return n},renderAll:function(){var t,e=this.contextContainer;return this.contextTop&&this.selection&&!this._groupSelector&&!this.isDrawingMode&&this.clearContext(this.contextTop),this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),e.save(),t=this._chooseObjectsToRender(),e.transform.apply(e,this.viewportTransform),this._renderObjects(e,t),this.preserveObjectStacking||(t=[this.getActiveGroup(),this.getActiveObject()],this._renderObjects(e,t)),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){for(var i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t):i,t.fillRect(i.offsetX||0,i.offsetY||0,this.width,this.height)),i=this[e+"Image"],i&&(this[e+"Vpt"]&&(t.save(),t.transform.apply(t,this.viewportTransform)),i.render(t),this[e+"Vpt"]&&t.restore())},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},renderTop:function(){var t=this.contextTop||this.contextContainer;return this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection(),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=fabric.util.invertTransform(this.viewportTransform);return fabric.util.transformPoint({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this.renderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var n={objects:this._toObjects(e,i)};return t(n,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this.getObjects().filter(function(t){return!t.excludeFromExport}).map(function(i){return this._toObject(i,t,e)},this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var r=this._realizeGroupTransformOnObject(t),s=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),this._unwindGroupTransformOnObject(t,r),s},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var i={};return e.forEach(function(e){i[e]=t[e]}),this.getActiveGroup().realizeTransform(t),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this._setSVGBgOverlayColor(i,"backgroundColor"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this._setSVGBgOverlayColor(i,"overlayColor"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,r=e.width||this.width,s=e.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',o=fabric.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+n(-i[4]/i[0],o)+" "+n(-i[5]/i[3],o)+" "+n(this.width/i[0],o)+" "+n(this.height/i[3],o)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",fabric.version,"</desc>\n","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>\n")},_setSVGObjects:function(t,e){for(var i,n,r=0,s=this.getObjects(),a=s.length;r<a;r++)i=s[r],i.excludeFromExport||(n=this._realizeGroupTransformOnObject(i),t.push(i.toSVG(e)),this._unwindGroupTransformOnObject(i,n))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>\n"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,r,s=this.getActiveGroup?this.getActiveGroup():null;if(t===s)for(r=s._objects,e=r.length;e--;)n=r[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderAll&&this.renderAll()},bringToFront:function(t){if(!t)return this;var e,n,r,s=this.getActiveGroup?this.getActiveGroup():null;if(t===s)for(r=s._objects,e=0;e<r.length;e++)n=r[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderAll&&this.renderAll()},sendBackwards:function(t,e){if(!t)return this;var n,r,s,a,o,h=this.getActiveGroup?this.getActiveGroup():null;if(t===h)for(o=h._objects,n=0;n<o.length;n++)r=o[n],s=this._objects.indexOf(r),0!==s&&(a=s-1,i(this._objects,r),this._objects.splice(a,0,r));else s=this._objects.indexOf(t),0!==s&&(a=this._findNewLowerIndex(t,s,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderAll&&this.renderAll(),this},_findNewLowerIndex:function(t,e,i){var n;if(i){n=e;for(var r=e-1;r>=0;--r){var s=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(s){n=r;break}}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,r,s,a,o,h=this.getActiveGroup?this.getActiveGroup():null;if(t===h)for(o=h._objects,n=o.length;n--;)r=o[n],s=this._objects.indexOf(r),s!==this._objects.length-1&&(a=s+1,i(this._objects,r),this._objects.splice(a,0,r));else s=this._objects.indexOf(t),s!==this._objects.length-1&&(a=this._findNewUpperIndex(t,s,e),i(this._objects,t),this._objects.splice(a,0,t));return this.renderAll&&this.renderAll(),this},_findNewUpperIndex:function(t,e,i){var n;if(i){n=e;for(var r=e+1;r<this._objects.length;++r){var s=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(s){n=r;break}}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return"undefined"!=typeof i.getImageData;case"setLineDash":return"undefined"!=typeof i.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5,n.x+=.5),t.moveTo(i.x,i.y);for(var r=1,s=this._points.length;r<s;r++){var a=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,a.x,a.y),i=this._points[r],n=this._points[r+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],i=new fabric.Point(t[0].x,t[0].y),n=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var r=1,s=t.length;r<s;r++){var a=i.midPointFrom(n);e.push("Q ",i.x," ",i.y," ",a.x," ",a.y," "),i=new fabric.Point(t[r].x,t[r].y),r+1<t.length&&(n=new fabric.Point(t[r+1].x,t[r+1].y))}return e.push("L ",i.x," ",i.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop,n=this.canvas.viewportTransform;i.save(),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill(),i.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var r=this.points[i],s=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&s.setShadow(this.shadow),e.push(s)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],s=0,a=r.length;s<a;s++){var o=new fabric.Rect({width:r[s].width,height:r[s].width,left:r[s].x+1,top:r[s].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&o.setShadow(this.shadow),e.push(o)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var h=new fabric.Group(e,{originX:"center",originY:"center"});h.canvas=this.canvas,this.canvas.add(h),this.canvas.fire("path:created",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,i={},n=0,r=t.length;n<r;n++)e=t[n].left+""+t[n].top,i[e]||(i[e]=t[n]);var s=[];for(e in i)s.push(i[e]);return s},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var i=0,n=this.sprayChunkPoints.length;i<n;i++){var r=this.sprayChunkPoints[i];"undefined"!=typeof r.opacity&&(t.globalAlpha=r.opacity),t.fillRect(r.x,r.y,r.width,r.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,i,n,r=this.width/2,s=0;s<this.density;s++){e=fabric.util.getRandomInt(t.x-r,t.x+r),i=fabric.util.getRandomInt(t.y-r,t.y+r),n=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,i);a.width=n,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=fabric.document.createElement("canvas"),n=i.getContext("2d");return i.width=i.height=t+e,n.fillStyle=this.color,n.beginPath(),n.arc(t/2,t/2,t/2,0,2*Math.PI,!1),n.closePath(),n.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,i=fabric.util.radiansToDegrees,n=Math.atan2,r=Math.abs,s=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",lastRenderedKey:"altKey",interactive:!0,selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(){var t=this._currentTransform;t.target.set({scaleX:t.original.scaleX,scaleY:t.original.scaleY,skewX:t.original.skewX,skewY:t.original.skewY,left:t.original.left,top:t.original.top}),this._shouldCenterTransform(t.target)?"rotate"===t.action?this._setOriginToCenter(t.target):("center"!==t.originX&&("right"===t.originX?t.mouseXSign=-1:t.mouseXSign=1),"center"!==t.originY&&("bottom"===t.originY?t.mouseYSign=-1:t.mouseYSign=1),t.originX="center",t.originY="center"):(t.originX=t.original.originX,t.originY=t.original.originY)},containsPoint:function(t,e,i){var n=i||this.getPointer(t,!0),r=this._normalizePointer(e,n);return r=e.group&&e.group===this.getActiveGroup()?this._normalizePointer(e.group,n):{x:n.x,y:n.y},e.containsPoint(r)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var i,n;return n=fabric.util.multiplyTransformMatrices(this.viewportTransform,t.calcTransformMatrix()),n=fabric.util.invertTransform(n),e=fabric.util.transformPoint(e,n,!1),i=fabric.util.transformPoint(t.getCenterPoint(),n,!1),e.x-=i.x,e.y-=i.y,{x:e.x,y:e.y}},isTargetTransparent:function(t,e,i){var n=t.hasBorders,r=t.transparentCorners,s=this.contextCache,a=t.group&&t.group===this.getActiveGroup();t.hasBorders=t.transparentCorners=!1,s.save(),s.transform.apply(s,this.viewportTransform),a&&s.transform.apply(s,t.group.calcTransformMatrix()),t.render(s),s.restore(),t.active&&t._renderControls(s),t.hasBorders=n,t.transparentCorners=r;var o=fabric.util.isTransparent(s,e,i,this.targetFindTolerance);return this.clearContext(s),o},_shouldClearSelection:function(t,e){var i=this.getActiveGroup(),n=this.getActiveObject();return!e||e&&i&&!i.contains(e)&&i!==e&&!t[this.selectionKey]||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t){if(t){var e,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?e=this.centeredScaling||t.centeredScaling:"rotate"===i.action&&(e=this.centeredRotation||t.centeredRotation),e?!i.altKey:i.altKey}},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i){if(!e)return"drag";switch(e){case"mtr":return"rotate";case"ml":case"mr":return i[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return i[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(t,i){if(i){var n=this.getPointer(t),r=i._findTargetCorner(this.getPointer(t,!0)),s=this._getActionFromCorner(i,r,t),a=this._getOriginFromCorner(i,r);this._currentTransform={target:i,action:s,corner:r,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:a.x,originY:a.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,left:i.left,top:i.top,theta:e(i.angle),width:i.width*i.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:t.shiftKey,altKey:t[this.centeredKey]},this._currentTransform.original={left:i.left,top:i.top,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,originX:a.x,originY:a.y},this._resetCurrentTransform()}},_translateObject:function(t,e){var i=this._currentTransform,n=i.target,r=t-i.offsetX,s=e-i.offsetY,a=!n.get("lockMovementX")&&n.left!==r,o=!n.get("lockMovementY")&&n.top!==s;return a&&n.set("left",r),o&&n.set("top",s),a||o},_changeSkewTransformOrigin:function(t,e,i){var n="originX",r={0:"center"},s=e.target.skewX,a="left",o="right",h="mt"===e.corner||"ml"===e.corner?1:-1,l=1;t=t>0?1:-1,"y"===i&&(s=e.target.skewY,a="top",o="bottom",n="originY"),r[-1]=a,r[1]=o,e.target.flipX&&(l*=-1),e.target.flipY&&(l*=-1),0===s?(e.skewSign=-h*t*l,e[n]=r[-t]):(s=s>0?1:-1,e.skewSign=s,e[n]=r[s*h*l])},_skewObject:function(t,e,i){var n=this._currentTransform,r=n.target,s=!1,a=r.get("lockSkewingX"),o=r.get("lockSkewingY");if(a&&"x"===i||o&&"y"===i)return!1;var h,l,u=r.getCenterPoint(),c=r.toLocalPoint(new fabric.Point(t,e),"center","center")[i],f=r.toLocalPoint(new fabric.Point(n.lastX,n.lastY),"center","center")[i],d=r._getTransformedDimensions();return this._changeSkewTransformOrigin(c-f,n,i),h=r.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY)[i],l=r.translateToOriginPoint(u,n.originX,n.originY),s=this._setObjectSkew(h,n,i,d),n.lastX=t,n.lastY=e,r.setPositionByOrigin(l,n.originX,n.originY),s},_setObjectSkew:function(t,e,i,n){var r,s,a,o,h,l,u,c,f,d=e.target,g=!1,p=e.skewSign;return"x"===i?(o="y",h="Y",l="X",c=0,f=d.skewY):(o="x",h="X",l="Y",c=d.skewX,f=0),a=d._getTransformedDimensions(c,f),u=2*Math.abs(t)-a[i],u<=2?r=0:(r=p*Math.atan(u/d["scale"+l]/(a[o]/d["scale"+h])),r=fabric.util.radiansToDegrees(r)),g=d["skew"+l]!==r,d.set("skew"+l,r),0!==d["skew"+h]&&(s=d._getTransformedDimensions(),r=n[o]/s[o]*d["scale"+h],d.set("scale"+h,r)),g},_scaleObject:function(t,e,i){var n=this._currentTransform,r=n.target,s=r.get("lockScalingX"),a=r.get("lockScalingY"),o=r.get("lockScalingFlip");if(s&&a)return!1;var h=r.translateToOriginPoint(r.getCenterPoint(),n.originX,n.originY),l=r.toLocalPoint(new fabric.Point(t,e),n.originX,n.originY),u=r._getTransformedDimensions(),c=!1;return this._setLocalMouse(l,n),c=this._setObjectScale(l,n,s,a,i,o,u),r.setPositionByOrigin(h,n.originX,n.originY),c},_setObjectScale:function(t,e,i,n,r,s,a){var o,h,l,u,c=e.target,f=!1,d=!1,g=!1;return l=t.x*c.scaleX/a.x,u=t.y*c.scaleY/a.y,o=c.scaleX!==l,h=c.scaleY!==u,s&&l<=0&&l<c.scaleX&&(f=!0),s&&u<=0&&u<c.scaleY&&(d=!0),"equally"!==r||i||n?r?"x"!==r||c.get("lockUniScaling")?"y"!==r||c.get("lockUniScaling")||d||n||c.set("scaleY",u)&&(g=g||h):f||i||c.set("scaleX",l)&&(g=g||o):(f||i||c.set("scaleX",l)&&(g=g||o),d||n||c.set("scaleY",u)&&(g=g||h)):f||d||(g=this._scaleObjectEqually(t,c,e,a)),e.newScaleX=l,e.newScaleY=u,f||d||this._flipObject(e,r),g},_scaleObjectEqually:function(t,e,i,n){var r,s=t.y+t.x,a=n.y*i.original.scaleY/e.scaleY+n.x*i.original.scaleX/e.scaleX;return i.newScaleX=i.original.scaleX*s/a,i.newScaleY=i.original.scaleY*s/a,r=i.newScaleX!==e.scaleX||i.newScaleY!==e.scaleY,e.set("scaleX",i.newScaleX),e.set("scaleY",i.newScaleY),r},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var i=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>i.padding?t.x<0?t.x+=i.padding:t.x-=i.padding:t.x=0,r(t.y)>i.padding?t.y<0?t.y+=i.padding:t.y-=i.padding:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform;if(r.target.get("lockRotation"))return!1;var s=n(r.ey-r.top,r.ex-r.left),a=n(e-r.top,t-r.left),o=i(a-s+r.theta);return o<0&&(o=360+o),r.target.angle=o%360,!0},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,n=e.top,a=r(i),o=r(n);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(i>0?0:-i),e.ey-(n>0?0:-n),a,o),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var h=e.ex+s-(i>0?0:a),l=e.ey+s-(n>0?0:o);t.beginPath(),fabric.util.drawDashedLine(t,h,l,h+a,l,this.selectionDashArray),fabric.util.drawDashedLine(t,h,l+o-1,h+a,l+o-1,this.selectionDashArray),fabric.util.drawDashedLine(t,h,l,h,l+o,this.selectionDashArray),fabric.util.drawDashedLine(t,h+a-1,l,h+a-1,l+o,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+s-(i>0?0:a),e.ey+s-(n>0?0:o),a,o)},_isLastRenderedObject:function(t,e){var i=this.lastRenderedWithControls;return(this.preserveObjectStacking||e[this.lastRenderedKey])&&i&&i.visible&&(this.containsPoint(null,i,t)||i._findTargetCorner(t))},findTarget:function(t,e){if(!this.skipTargetFind){var i=this.getPointer(t,!0),n=this.getActiveGroup();if(n&&!e&&this._checkTarget(i,n))return n;var r=this._objects;this.targets=[],this._isLastRenderedObject(i,t)&&(r=[this.lastRenderedWithControls]);var s=this._searchPossibleTargets(r,i);return this._fireOverOutEvents(s,t),s}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e){if(e&&e.visible&&e.evented&&this.containsPoint(null,e,t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,t.x,t.y);if(!i)return!0}},_searchPossibleTargets:function(t,e){for(var i,n,r,s=t.length;s--;)if(this._checkTarget(e,t[s])){i=t[s],"group"===i.type&&i.subTargetCheck&&(n=this._normalizePointer(i,e),r=this._searchPossibleTargets(i._objects,n),r&&this.targets.push(r));break}return i},getPointer:function(e,i,n){n||(n=this.upperCanvasEl);var r,s=t(e),a=n.getBoundingClientRect(),o=a.width||0,h=a.height||0;return o&&h||("top"in a&&"bottom"in a&&(h=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(o=Math.abs(a.right-a.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,i||(s=fabric.util.transformPoint(s,fabric.util.invertTransform(this.viewportTransform))),r=0===o||0===h?{width:1,height:1}:{width:n.width/o,height:n.height/h
},{x:s.x*r.width,y:s.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;e<i;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},dispose:function(){this.callSuper("dispose");var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),delete this.upperCanvasEl,t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,this},drawControls:function(t){var e=this.getActiveGroup();e?e._renderControls(t):this._drawObjectsControls(t)},_drawObjectsControls:function(t){for(var e=0,i=this._objects.length;e<i;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedWithControls=this._objects[e])},_onObjectRemoved:function(t){t===this.lastRenderedWithControls&&delete this.lastRenderedWithControls,this.callSuper("_onObjectRemoved",t)},clear:function(){return delete this.lastRenderedWithControls,this.callSuper("clear")}});for(var a in fabric.StaticCanvas)"prototype"!==a&&(fabric.Canvas[a]=fabric.StaticCanvas[a]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"mouseout",this._onMouseOut),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this)},removeListeners:function(){i(fabric.window,"resize",this._onResize),i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"mousewheel",this._onMouseWheel),i(this.upperCanvasEl,"mouseout",this._onMouseOut),i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t})},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?i(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),i(fabric.document,"mouseup",this._onMouseUp),i(fabric.document,"touchend",this._onMouseUp),i(fabric.document,"mousemove",this._onMouseMove),i(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var n=this;setTimeout(function(){e(n.upperCanvasEl,"mousedown",n._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==i)||!t&&i||!t&&!i&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e,i=!0,n=this._currentTransform,r=this._groupSelector,s=!r||0===r.left&&0===r.top;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);n&&(this._finalizeCurrentTransform(),i=!n.actionPerformed),e=i?this.findTarget(t,!0):n.target;var a=this._shouldRender(e,this.getPointer(t));e||!s?this._maybeGroupObjects(t):(this._groupSelector=null,this._currentTransform=null),e&&(e.isMoving=!1),this._handleCursorAndEvent(t,e,"up"),a&&this.renderAll()},_handleCursorAndEvent:function(t,e,i){this._setCursorFromEvent(t,e),this._handleEvent(t,i,e?e:null)},_handleEvent:function(t,e,i){var n=void 0===typeof i?this.findTarget(t):i,r=this.targets||[],s={e:t,target:n,subTargets:r};this.fire("mouse:"+e,s),n&&n.fire("mouse"+e,s);for(var a=0;a<r.length;a++)r[a].fire("mouse"+e,s)},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),(t.actionPerformed||this.stateful&&e.hasStateChanged())&&(this.fire("object:modified",{target:e}),e.fire("modified"))},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(i),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform),i=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(i)}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this._handleEvent(t,"up")},__onMouseDown:function(t){var e="which"in t?1===t.which:0===t.button;if(e||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var i=this.findTarget(t),n=this.getPointer(t,!0);this._previousPointer=n;var r=this._shouldRender(i,n),s=this._shouldGroup(t,i);this._shouldClearSelection(t,i)?this._clearSelection(t,i,n):s&&(this._handleGrouping(t,i),i=this.getActiveGroup()),i&&(!i.selectable||!i.__corner&&s||(this._beforeTransform(t,i),this._setupCurrentTransform(t,i)),i!==this.getActiveGroup()&&i!==this.getActiveObject()&&(this.deactivateAll(),i.selectable&&this.setActiveObject(i,t))),this._handleEvent(t,"down",i?i:null),r&&this.renderAll()}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e)},_clearSelection:function(t,e,i){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:i.x,ey:i.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var n=this._groupSelector;n?(i=this.getPointer(t,!0),n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),this._setCursorFromEvent(t,e)),this._handleEvent(t,"move",e?e:null)}},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.target.isMoving=!0,this._beforeScaleTransform(t,i),this._performTransformAction(t,i,e),this.renderAll()},_performTransformAction:function(t,e,i){var n=i.x,r=i.y,s=e.target,a=e.action,o=!1;"rotate"===a?(o=this._rotateObject(n,r))&&this._fire("rotating",s,t):"scale"===a?(o=this._onScale(t,e,n,r))&&this._fire("scaling",s,t):"scaleX"===a?(o=this._scaleObject(n,r,"x"))&&this._fire("scaling",s,t):"scaleY"===a?(o=this._scaleObject(n,r,"y"))&&this._fire("scaling",s,t):"skewX"===a?(o=this._skewObject(n,r,"x"))&&this._fire("skewing",s,t):"skewY"===a?(o=this._skewObject(n,r,"y"))&&this._fire("skewing",s,t):(o=this._translateObject(n,r),o&&(this._fire("moving",s,t),this.setCursor(s.moveCursor||this.moveCursor))),e.actionPerformed=o},_fire:function(t,e,i){this.fire("object:"+t,{target:e,e:i}),e.fire(t,{e:i})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var i=this._shouldCenterTransform(e.target);(i&&("center"!==e.originX||"center"!==e.originY)||!i&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(),e.reset=!0)}},_onScale:function(t,e,i,n){return!t[this.uniScaleKey]&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally")):(e.currentAction="scale",this._scaleObject(i,n))},_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor;if(e.selectable){var n=this.getActiveGroup(),r=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this._setCornerCursor(r,e,t):this.setCursor(i)}else this.setCursor(i);return!0},_setCornerCursor:function(e,i,n){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,i,n));else{if("mtr"!==e||!i.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,i,n){var r=Math.round(i.getAngle()%360/45);return r<0&&(r+=8),r+=t[e],n[this.altActionKey]&&t[e]%2===0&&(r+=2),r%=8,this.cursorMap[r]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var i=this.getActiveObject();return t[this.selectionKey]&&e&&e.selectable&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGrouping:function(t,e){var i=this.getActiveGroup();(e!==i||(e=this.findTarget(t,!0)))&&(i?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var i=this.getActiveGroup();if(i.contains(t)){if(i.removeWithUpdate(t),t.set("active",!1),1===i.size())return this.discardActiveGroup(e),void this.setActiveObject(i.item(0))}else i.addWithUpdate(t);this.fire("selection:created",{target:i,e:e}),i.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var i=this._createGroup(t);i.addWithUpdate(),this.setActiveGroup(i),this._activeObject=null,this.fire("selection:created",{target:i,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),i=e.indexOf(this._activeObject)<e.indexOf(t),n=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new fabric.Group(n,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var i,n=[],r=this._groupSelector.ex,s=this._groupSelector.ey,a=r+this._groupSelector.left,o=s+this._groupSelector.top,h=new fabric.Point(t(r,a),t(s,o)),l=new fabric.Point(e(r,a),e(s,o)),u=r===a&&s===o,c=this._objects.length;c--&&(i=this._objects[c],!(i&&i.selectable&&i.visible&&(i.intersectsWithRect(h,l)||i.isContainedWithinRect(h,l)||i.containsPoint(h)||i.containsPoint(l))&&(i.set("active",!0),n.push(i),u))););return n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,r={left:t.left,top:t.top,width:t.width,height:t.height};return this._isRetinaScaling()&&(n*=fabric.devicePixelRatio),1!==n?this.__toDataURLWithMultiplier(e,i,r,n):this.__toDataURL(e,i,r)},__toDataURL:function(t,e,i){this.renderAll();var n=this.contextContainer.canvas,r=this.__getCroppedCanvas(n,i);"jpg"===t&&(t="jpeg");var s=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||n).toDataURL("image/"+t,e):(r||n).toDataURL("image/"+t);return r&&(r=null),s},__getCroppedCanvas:function(t,e){var i,n,r="left"in e||"top"in e||"width"in e||"height"in e;return r&&(i=fabric.util.createCanvasElement(),n=i.getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,n.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,n){var r=this.getWidth(),s=this.getHeight(),a=r*n,o=s*n,h=this.getActiveObject(),l=this.getActiveGroup(),u=this.getZoom(),c=u*n/fabric.devicePixelRatio;n>1&&this.setDimensions({width:a,height:o}),this.setZoom(c),i.left&&(i.left*=n),i.top&&(i.top*=n),i.width?i.width*=n:n<1&&(i.width=a),i.height?i.height*=n:n<1&&(i.height=o),l?this._tempRemoveBordersControlsFromGroup(l):h&&this.deactivateAll&&this.deactivateAll();var f=this.__toDataURL(t,e,i);return l?this._restoreBordersControlsOnGroup(l):h&&this.setActiveObject&&this.setActiveObject(h),this.setZoom(u),this.setDimensions({width:r,height:s}),f},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):fabric.util.object.clone(t);this.clear();var r=this;return this._enlivenObjects(n.objects,function(){r._setBgOverlay(n,function(){delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay;for(var t in n)r[t]=n[t];e&&e()})},i),this}},_setBgOverlay:function(t,e){var i=this,n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var r=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&(i.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,r),this.__setBgOverlay("overlayImage",t.overlayImage,n,r),this.__setBgOverlay("backgroundColor",t.background,n,r),this.__setBgOverlay("overlayColor",t.overlay,n,r),r()},__setBgOverlay:function(t,e,i,n){var r=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){r[t]=e,i[t]=!0,n&&n()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){i[t]=!0,n&&n()})):void(i[t]=!0)},_enlivenObjects:function(t,e,i){var n=this;if(!t||0===t.length)return void(e&&e());var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e,!0)}),n.renderOnAddRemove=r,e&&e()},null,i)},_toDataURL:function(t,e){this.clone(function(i){e(i.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,i){this.clone(function(n){i(n.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(i,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.toFixed,r=e.util.string.capitalize,s=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor alignX alignY meetOrSlice skewX skewY".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill)),!t.stroke||!t.stroke.colorStops||t.stroke instanceof e.Gradient||this.set("stroke",new e.Gradient(t.stroke))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var i=e.util.getFunctionBody(t.clipTo);"undefined"!=typeof i&&(this.clipTo=new Function("ctx",i))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){this.group&&this.canvas.preserveObjectStacking&&this.group===this.canvas._activeGroup&&this.group.transform(t);var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(s(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),t.transform(1,0,Math.tan(s(this.skewX)),1,0,0),t.transform(1,Math.tan(s(this.skewY)),0,1,0,0)},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,i),top:n(this.top,i),width:n(this.width,i),height:n(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,i),scaleX:n(this.scaleX,i),scaleY:n(this.scaleY,i),angle:n(this.getAngle(),i),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():this.transformMatrix,skewX:n(this.skewX,i),skewY:n(this.skewY,i)};return this.includeDefaultValues||(r=this._removeDefaultValues(r)),e.util.populateWithProperties(this,r,t),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,n=i.stateProperties;return n.forEach(function(e){t[e]===i[e]&&delete t[e];var n="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e]);n&&0===t[e].length&&0===i[e].length&&delete t[e]}),t},toString:function(){return"#<fabric."+r(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,i){var n="scaleX"===t||"scaleY"===t;return n&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow||(i=new e.Shadow(i)),this[t]=i,"width"!==t&&"height"!==t||(this.minScaleLimit=Math.min(.1,1/Math.max(this.width,this.height))),this},setOnGroup:function(){},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,i){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),i||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,i),this.clipTo&&t.restore(),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_setLineDash:function(t,e,i){e&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t,i){if(!(!this.active||i||this.group&&this.group!==this.canvas.getActiveGroup())){var n,r=this.getViewportTransform(),a=this.calcTransformMatrix();a=e.util.multiplyTransformMatrices(r,a),n=e.util.qrDecompose(a),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1/this.borderScaleFactor,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.group&&this.group===this.canvas.getActiveGroup()?(t.rotate(s(n.angle)),this.drawBordersInGroup(t,n)):(t.rotate(s(this.angle)),this.drawBorders(t)),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var i=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1;this.canvas&&this.canvas._isRetinaScaling()&&(i*=e.devicePixelRatio,n*=e.devicePixelRatio),t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(i+n)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*i*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){var e=this.fill.gradientTransform;t.transform.apply(t,e)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore()}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this.stroke.gradientTransform){var e=this.stroke.gradientTransform;t.transform.apply(t,e)}this.stroke.toLive&&t.translate(-this.width/2+this.stroke.offsetX||0,-this.height/2+this.stroke.offsetY||0),t.stroke(),t.restore()}},clone:function(t,i){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(i),t):new e.Object(this.toObject(i))},cloneAsImage:function(t){var i=this.toDataURL();return e.util.loadImage(i,function(i){t&&t(new e.Image(i))}),this},toDataURL:function(t){t||(t={});var i=e.util.createCanvasElement(),n=this.getBoundingRect();i.width=n.width,i.height=n.height,e.util.wrapElement(i,"div");var r=new e.StaticCanvas(i);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(r.backgroundColor="#fff");var s={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(r.getWidth()/2,r.getHeight()/2),"center","center");var a=this.canvas;r.add(this);var o=r.toDataURL(t);return this.set(s).setCoords(),this.canvas=a,r.dispose(),r=null,o},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,i){i||(i={});var n={colorStops:[]};n.type=i.type||(i.r1||i.r2?"radial":"linear"),n.coords={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},(i.r1||i.r2)&&(n.coords.r1=i.r1,n.coords.r2=i.r2),i.gradientTransform&&(n.gradientTransform=i.gradientTransform);for(var r in i.colorStops){var s=new e.Color(i.colorStops[r]);n.colorStops.push({offset:r,color:s.toRgb(),opacity:s.getAlpha()})}return this.set(t,e.Gradient.forObject(this,n))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},remove:function(){return this.canvas&&this.canvas.remove(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),r=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,r,e.util.degreesToRadians(-this.angle))),{x:n.x-r.x,y:n.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians,e={
left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};fabric.util.object.extend(fabric.Object.prototype,{translateToGivenOrigin:function(t,n,r,s,a){var o,h=t.x,l=t.y,u=e[s]-e[n],c=i[a]-i[r];return(u||c)&&(o=this._getTransformedDimensions(),h=t.x+u*o.x,l=t.y+c*o.y),new fabric.Point(h,l)},translateToCenterPoint:function(e,i,n){var r=this.translateToGivenOrigin(e,i,n,"center","center");return this.angle?fabric.util.rotatePoint(r,e,t(this.angle)):r},translateToOriginPoint:function(e,i,n){var r=this.translateToGivenOrigin(e,"center","center",i,n);return this.angle?fabric.util.rotatePoint(r,e,t(this.angle)):r},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,n){var r,s,a=this.getCenterPoint();return r=i&&n?this.translateToGivenOrigin(a,"center","center",i,n):new fabric.Point(this.left,this.top),s=new fabric.Point(e.x,e.y),this.angle&&(s=fabric.util.rotatePoint(s,a,-t(this.angle))),s.subtractEquals(r)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(i){var n=t(this.angle),r=this.getWidth(),s=Math.cos(n)*r,a=Math.sin(n)*r;this.left+=s*(e[i]-e[this.originX]),this.top+=a*(e[i]-e[this.originX]),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new fabric.Point(t.tl.x,t.tl.y),new fabric.Point(t.tr.x,t.tr.y),new fabric.Point(t.br.x,t.br.y),new fabric.Point(t.bl.x,t.bl.y)]}var e=fabric.util.degreesToRadians,i=fabric.util.multiplyTransformMatrices;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(e,i){var n=t(this.oCoords),r=fabric.Intersection.intersectPolygonRectangle(n,e,i);return"Intersection"===r.status},intersectsWithObject:function(e){var i=fabric.Intersection.intersectPolygonPolygon(t(this.oCoords),t(e.oCoords));return"Intersection"===i.status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),n=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,n)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>=t.x&&i.left+i.width<=e.x&&i.top>=t.y&&i.top+i.height<=e.y},containsPoint:function(t){this.oCoords||this.setCoords();var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2===1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,s,a,o,h,l=0;for(var u in e)if(h=e[u],!(h.o.y<t.y&&h.d.y<t.y||h.o.y>=t.y&&h.d.y>=t.y||(h.o.x===h.d.x&&h.o.x>=t.x?(a=h.o.x,o=t.y):(i=0,n=(h.d.y-h.o.y)/(h.d.x-h.o.x),r=t.y-i*t.x,s=h.o.y-n*h.o.x,a=-(r-s)/(i-n),o=r+i*a),a>=t.x&&(l+=1),2!==l)))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){return this.oCoords||this.setCoords(),fabric.util.makeBoundingBoxFromPoints([this.oCoords.tl,this.oCoords.tr,this.oCoords.br,this.oCoords.bl])},getWidth:function(){return this._getTransformedDimensions().x},getHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),t<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRect().width/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRect().height/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var t=e(this.angle),i=this.getViewportTransform(),n=this._calculateCurrentDimensions(),r=n.x,s=n.y;r<0&&(r=Math.abs(r));var a=Math.sin(t),o=Math.cos(t),h=r>0?Math.atan(s/r):0,l=r/Math.cos(h)/2,u=Math.cos(h+t)*l,c=Math.sin(h+t)*l,f=fabric.util.transformPoint(this.getCenterPoint(),i),d=new fabric.Point(f.x-u,f.y-c),g=new fabric.Point(d.x+r*o,d.y+r*a),p=new fabric.Point(d.x-s*a,d.y+s*o),v=new fabric.Point(f.x+u,f.y+c),m=new fabric.Point((d.x+p.x)/2,(d.y+p.y)/2),y=new fabric.Point((g.x+d.x)/2,(g.y+d.y)/2),b=new fabric.Point((v.x+g.x)/2,(v.y+g.y)/2),x=new fabric.Point((v.x+p.x)/2,(v.y+p.y)/2),_=new fabric.Point(y.x+a*this.rotatingPointOffset,y.y-o*this.rotatingPointOffset);return this.oCoords={tl:d,tr:g,br:v,bl:p,ml:m,mt:y,mr:b,mb:x,mtr:_},this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){if(this.angle){var t=e(this.angle),i=Math.cos(t),n=Math.sin(t);return[i,n,-n,i,0,0]}return[1,0,0,1,0,0]},calcTransformMatrix:function(){var t=this.getCenterPoint(),e=[1,0,0,1,t.x,t.y],n=this._calcRotateMatrix(),r=this._calcDimensionsTransformMatrix(this.skewX,this.skewY,!0),s=this.group?this.group.calcTransformMatrix():[1,0,0,1,0,0];return s=i(s,e),s=i(s,n),s=i(s,r)},_calcDimensionsTransformMatrix:function(t,n,r){var s=[1,0,Math.tan(e(t)),1],a=[1,Math.tan(e(n)),0,1],o=this.scaleX*(r&&this.flipX?-1:1),h=this.scaleY*(r&&this.flipY?-1:1),l=[o,0,0,h],u=i(l,s,!0);return i(u,a,!0)}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new fabric.Color(e),n=t+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(n+=t+"-opacity: "+r.toString()+"; "),n}return t+": none; "}fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule,n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",h="undefined"!=typeof this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),c=t("fill",this.fill),f=t("stroke",this.stroke);return[f,"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",o,"; ",c,"fill-rule: ",i,"; ","opacity: ",h,";",u,l].join("")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgId:function(){return this.id?'id="'+this.id+'" ':""},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),i=this.getSkewX()%360,n=this.getSkewY()%360,r=this.getCenterPoint(),s=fabric.Object.NUM_FRACTION_DIGITS,a="path-group"===this.type?"":"translate("+t(r.x,s)+" "+t(r.y,s)+")",o=0!==e?" rotate("+t(e,s)+")":"",h=1===this.scaleX&&1===this.scaleY?"":" scale("+t(this.scaleX,s)+" "+t(this.scaleY,s)+")",l=0!==i?" skewX("+t(i,s)+")":"",u=0!==n?" skewY("+t(n,s)+")":"",c="path-group"===this.type?this.width:0,f=this.flipX?" matrix(-1 0 0 1 "+c+" 0) ":"",d="path-group"===this.type?this.height:0,g=this.flipY?" matrix(1 0 0 -1 0 "+d+")":"";return[a,o,h,f,g,l,u].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}})}(),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,i,n=t.x,r=t.y;this.__corner=0;for(var s in this.oCoords)if(this.isControlVisible(s)&&("mtr"!==s||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==s&&"mr"!==s&&"mb"!==s&&"ml"!==s)&&(i=this._getImageLines(this.oCoords[s].corner),e=this._findCrossPoints({x:n,y:r},i),0!==e&&e%2===1))return this.__corner=s,s;return!1},_setCornerCoords:function(){var e,i,n=this.oCoords,r=t(45-this.angle),s=.707106*this.cornerSize,a=s*Math.cos(r),o=s*Math.sin(r);for(var h in n)e=n[h].x,i=n[h].y,n[h].corner={tl:{x:e-o,y:i-a},tr:{x:e+a,y:i-o},bl:{x:e-a,y:i+o},br:{x:e+o,y:i+a}}},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width,i=this.height,n=!0,r=!0;return"line"===this.type&&"butt"===this.strokeLineCap&&(r=e,n=i),r&&(i+=i<0?-t:t),n&&(e+=e<0?-t:t),{x:e,y:i}},_getTransformedDimensions:function(t,e){"undefined"==typeof t&&(t=this.skewX),"undefined"==typeof e&&(e=this.skewY);var i,n,r=this._getNonTransformedDimensions(),s=r.x/2,a=r.y/2,o=[{x:-s,y:-a},{x:s,y:-a},{x:-s,y:a},{x:s,y:a}],h=this._calcDimensionsTransformMatrix(t,e,!1);for(i=0;i<o.length;i++)o[i]=fabric.util.transformPoint(o[i],h);return n=fabric.util.makeBoundingBoxFromPoints(o),{x:n.width,y:n.height}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),i=e.x,n=e.y,r=fabric.util.transformPoint(new fabric.Point(i,n),t,!0);return r.scalarAdd(2*this.padding)},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.group||this!==this.canvas.getActiveObject())return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t){if(!this.hasBorders)return this;var e=this._calculateCurrentDimensions(),i=1/this.borderScaleFactor,n=e.x+i,r=e.y+i;if(t.save(),t.strokeStyle=this.borderColor,this._setLineDash(t,this.borderDashArray,null),t.strokeRect(-n/2,-r/2,n,r),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var s=-r/2;t.beginPath(),t.moveTo(0,s),t.lineTo(0,s-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawBordersInGroup:function(t,e){if(!this.hasBorders)return this;var i=this._getNonTransformedDimensions(),n=fabric.util.customTransformMatrix(e.scaleX,e.scaleY,e.skewX),r=fabric.util.transformPoint(i,n),s=1/this.borderScaleFactor,a=r.x+s+2*this.padding,o=r.y+s+2*this.padding;return t.save(),this._setLineDash(t,this.borderDashArray,null),t.strokeStyle=this.borderColor,t.strokeRect(-a/2,-o/2,a,o),t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(),i=e.x,n=e.y,r=this.cornerSize,s=-(i+r)/2,a=-(n+r)/2,o=this.transparentCorners?"stroke":"fill";return t.save(),t.strokeStyle=t.fillStyle=this.cornerColor,this.transparentCorners||(t.strokeStyle=this.cornerStrokeColor),this._setLineDash(t,this.cornerDashArray,null),this._drawControl("tl",t,o,s,a),this._drawControl("tr",t,o,s+i,a),this._drawControl("bl",t,o,s,a+n),this._drawControl("br",t,o,s+i,a+n),this.get("lockUniScaling")||(this._drawControl("mt",t,o,s+i/2,a),this._drawControl("mb",t,o,s+i/2,a+n),this._drawControl("mr",t,o,s+i,a+n/2),this._drawControl("ml",t,o,s,a+n/2)),this.hasRotatingPoint&&this._drawControl("mtr",t,o,s+i/2,a-this.rotatingPointOffset),t.restore(),this},_drawControl:function(t,i,n,r,s){if(this.isControlVisible(t)){var a=this.cornerSize,o=!this.transparentCorners&&this.cornerStrokeColor;switch(this.cornerStyle){case"circle":i.beginPath(),i.arc(r+a/2,s+a/2,a/2,0,2*Math.PI,!1),i[n](),o&&i.stroke();break;default:e()||this.transparentCorners||i.clearRect(r,s,a,a),i[n+"Rect"](r,s,a,a),o&&i.strokeRect(r,s,a,a)}}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.renderAll(),r()},onComplete:function(){t.setCoords(),n()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},n=e.onComplete||i,r=e.onChange||i,s=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),s.renderAll(),r()},onComplete:function(){s.remove(t),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,n){var r,s=this;e=e.toString(),i=i?fabric.util.object.clone(i):{},~t.indexOf(".")&&(r=t.split("."));var a=r?this.get(r[0])[r[1]]:this.get(t);"from"in i||(i.from=a),e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(s)},onChange:function(e){r?s[r[0]][r[1]]=e:s.set(t,e),n||i.onChange&&i.onChange()},onComplete:function(){n||(s.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";function e(t,e){var i=t.origin,n=t.axis1,r=t.axis2,s=t.dimension,a=e.nearest,o=e.center,h=e.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(n),this.get(r));case o:return Math.min(this.get(n),this.get(r))+.5*this.get(s);case h:return Math.max(this.get(n),this.get(r))}}}var i=t.fabric||(t.fabric={}),n=i.util.object.extend,r={x1:1,x2:1,y1:1,y2:1},s=i.StaticCanvas.supports("setLineDash");return i.Line?void i.warn("fabric.Line is already defined"):(i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var i=this.getCenterPoint();t.translate(i.x-this.strokeWidth/2,i.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&s){var n=this.calcLinePoints();t.moveTo(n.x1,n.y1),t.lineTo(n.x2,n.y2)}t.lineWidth=this.strokeWidth;var r=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),i.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5,r=t*this.width*-.5,s=e*this.height*-.5;return{x1:i,x2:r,y1:n,y2:s}},toSVG:function(t){var e=this._createBaseSVGMarkup(),i={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(i=this.calcLinePoints()),e.push("<line ",this.getSvgId(),'x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(t,e){var r=i.parseAttributes(t,i.Line.ATTRIBUTE_NAMES),s=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];return new i.Line(s,n(r,e))},void(i.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new i.Line(e,t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var i=t.fabric||(t.fabric={}),n=Math.PI,r=i.util.object.extend;return i.Circle?void i.warn("fabric.Circle is already defined."):(i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return r(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,r=0,s=(this.endAngle-this.startAngle)%(2*n);if(0===s)this.group&&"path-group"===this.group.type&&(i=this.left+this.radius,r=this.top+this.radius),e.push("<circle ",this.getSvgId(),'cx="'+i+'" cy="'+r+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var a=Math.cos(this.startAngle)*this.radius,o=Math.sin(this.startAngle)*this.radius,h=Math.cos(this.endAngle)*this.radius,l=Math.sin(this.endAngle)*this.radius,u=s>n?"1":"0";e.push('<path d="M '+a+" "+o," A "+this.radius+" "+this.radius," 0 ",+u+" 1"," "+h+" "+l,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(t,n){n||(n={});var s=i.parseAttributes(t,i.Circle.ATTRIBUTE_NAMES);if(!e(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=s.left||0,s.top=s.top||0;var a=new i.Circle(r(s,n));return a.left-=a.radius,a.top-=a.radius,a},void(i.Circle.fromObject=function(t){return new i.Circle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.width/2,n=this.height/2,r=[-i+" "+n,"0 "+-n,i+" "+n].join(",");return e.push("<polygon ",this.getSvgId(),'points="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),void(e.Triangle.fromObject=function(t){return new e.Triangle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI,n=e.util.object.extend;return e.Ellipse?void e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return n(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=0,n=0;return this.group&&"path-group"===this.group.type&&(i=this.left+this.rx,n=this.top+this.ry),e.push("<ellipse ",this.getSvgId(),'cx="',i,'" cy="',n,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,i,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){i||(i={});var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var s=new e.Ellipse(n(r,i));return s.top-=s.ry,s.left-=s.rx,s},void(e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;if(e.Rect)return void e.warn("fabric.Rect is already defined");var n=e.Object.prototype.stateProperties.concat();n.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:n,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(-.5,-.5,1,1);var i=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,s=this.height,a=e?this.left:-this.width/2,o=e?this.top:-this.height/2,h=0!==i||0!==n,l=.4477152502;t.beginPath(),t.moveTo(a+i,o),t.lineTo(a+r-i,o),h&&t.bezierCurveTo(a+r-l*i,o,a+r,o+l*n,a+r,o+n),t.lineTo(a+r,o+s-n),h&&t.bezierCurveTo(a+r,o+s-l*n,a+r-l*i,o+s,a+r-i,o+s),t.lineTo(a+i,o+s),h&&t.bezierCurveTo(a+l*i,o+s,a,o+s-l*n,a,o+s-n),t.lineTo(a,o+n),h&&t.bezierCurveTo(a,o+l*n,a+l*i,o,a+i,o),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,r=this.width,s=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+r,n,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n,i+r,n+s,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n+s,i,n+s,this.strokeDashArray),e.util.drawDashedLine(t,i,n+s,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){var e=i(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this.left,n=this.top;return this.group&&"path-group"===this.group.type||(i=-this.width/2,n=-this.height/2),e.push("<rect ",this.getSvgId(),'x="',i,'" y="',n,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n){if(!t)return null;n=n||{};var r=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var s=new e.Rect(i(n?e.util.object.clone(n):{},r));return s.visible=s.width>0&&s.height>0,s},e.Rect.fromObject=function(t){return new e.Rect(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Polyline?void e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,i){return e.Polygon.prototype.initialize.call(this,t,i)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t,i){e.Polygon.prototype.commonRender.call(this,t,i)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var r=0,s=this.points.length;r<s;r++)i=this.points[r],n=this.points[r+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,i){if(!t)return null;i||(i={});var n=e.parsePointsAttribute(t.getAttribute("points")),r=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(n,e.util.object.extend(r,i))},void(e.Polyline.fromObject=function(t){var i=t.points;return new e.Polyline(i,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,s=e.util.toFixed;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX),this.pathOffset={x:this.minX+this.width/2,y:this.minY+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x"),i=n(t,"y"),s=r(t,"x"),a=r(t,"y");this.width=s-e||0,this.height=a-i||0,this.minX=e||0,this.minY=i||0},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e,i=[],n=this._createBaseSVGMarkup(),r=0,a=this.points.length;r<a;r++)i.push(s(this.points[r].x,2),",",s(this.points[r].y,2)," ");return this.group&&"path-group"===this.group.type||(e=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<",this.type," ",this.getSvgId(),'points="',i.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),e," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},_render:function(t,e){this.commonRender(t,e)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t,e){var i,n=this.points.length;if(!n||isNaN(this.points[n-1].y))return!1;e||t.translate(-this.pathOffset.x,-this.pathOffset.y),t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var r=0;r<n;r++)i=this.points[r],t.lineTo(i.x,i.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,n){if(!t)return null;n||(n={});var r=e.parsePointsAttribute(t.getAttribute("points")),s=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(r,i(s,n))},void(e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,r=e.util.object.extend,s=Object.prototype.toString,a=e.util.drawArc,o={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};return e.Path?void e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.setOptions(e),t||(t=[]);var i="[object Array]"===s.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,"undefined"==typeof t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),"undefined"==typeof t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,i,n,r=null,s=0,o=0,h=0,l=0,u=0,c=0,f=-this.pathOffset.x,d=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(f=0,d=0),t.beginPath();for(var g=0,p=this.path.length;g<p;++g){switch(e=this.path[g],e[0]){case"l":h+=e[1],l+=e[2],t.lineTo(h+f,l+d);break;case"L":h=e[1],l=e[2],t.lineTo(h+f,l+d);break;case"h":h+=e[1],t.lineTo(h+f,l+d);break;case"H":h=e[1],t.lineTo(h+f,l+d);break;case"v":l+=e[1],t.lineTo(h+f,l+d);break;case"V":l=e[1],t.lineTo(h+f,l+d);break;case"m":h+=e[1],l+=e[2],s=h,o=l,t.moveTo(h+f,l+d);break;case"M":h=e[1],l=e[2],s=h,o=l,t.moveTo(h+f,l+d);break;case"c":i=h+e[5],n=l+e[6],u=h+e[3],c=l+e[4],t.bezierCurveTo(h+e[1]+f,l+e[2]+d,u+f,c+d,i+f,n+d),h=i,l=n;break;case"C":h=e[5],l=e[6],u=e[3],c=e[4],t.bezierCurveTo(e[1]+f,e[2]+d,u+f,c+d,h+f,l+d);break;case"s":i=h+e[3],n=l+e[4],null===r[0].match(/[CcSs]/)?(u=h,c=l):(u=2*h-u,c=2*l-c),t.bezierCurveTo(u+f,c+d,h+e[1]+f,l+e[2]+d,i+f,n+d),
u=h+e[1],c=l+e[2],h=i,l=n;break;case"S":i=e[3],n=e[4],null===r[0].match(/[CcSs]/)?(u=h,c=l):(u=2*h-u,c=2*l-c),t.bezierCurveTo(u+f,c+d,e[1]+f,e[2]+d,i+f,n+d),h=i,l=n,u=e[1],c=e[2];break;case"q":i=h+e[3],n=l+e[4],u=h+e[1],c=l+e[2],t.quadraticCurveTo(u+f,c+d,i+f,n+d),h=i,l=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+f,e[2]+d,i+f,n+d),h=i,l=n,u=e[1],c=e[2];break;case"t":i=h+e[1],n=l+e[2],null===r[0].match(/[QqTt]/)?(u=h,c=l):(u=2*h-u,c=2*l-c),t.quadraticCurveTo(u+f,c+d,i+f,n+d),h=i,l=n;break;case"T":i=e[1],n=e[2],null===r[0].match(/[QqTt]/)?(u=h,c=l):(u=2*h-u,c=2*l-c),t.quadraticCurveTo(u+f,c+d,i+f,n+d),h=i,l=n;break;case"a":a(t,h+f,l+d,[e[1],e[2],e[3],e[4],e[5],e[6]+h+f,e[7]+l+d]),h+=e[6],l+=e[7];break;case"A":a(t,h+f,l+d,[e[1],e[2],e[3],e[4],e[5],e[6]+f,e[7]+d]),h=e[6],l=e[7];break;case"z":case"Z":h=s,l=o,t.closePath()}r=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],i=this._createBaseSVGMarkup(),n="",r=0,s=this.path.length;r<s;r++)e.push(this.path[r].join(" "));var a=e.join(" ");return this.group&&"path-group"===this.group.type||(n=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),i.push("<path ",this.getSvgId(),'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),n,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(i.join("")):i.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,r,s=[],a=[],l=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u=0,c=this.path.length;u<c;u++){for(t=this.path[u],n=t.slice(1).trim(),a.length=0;i=l.exec(n);)a.push(i[0]);r=[t.charAt(0)];for(var f=0,d=a.length;f<d;f++)e=parseFloat(a[f]),isNaN(e)||r.push(e);var g=r[0],p=o[g.toLowerCase()],v=h[g]||g;if(r.length-1>p)for(var m=1,y=r.length;m<y;m+=p)s.push([g].concat(r.slice(m,m+p))),g=v;else s.push(r)}return s},_parseDimensions:function(){for(var t,r,s,a,o=[],h=[],l=null,u=0,c=0,f=0,d=0,g=0,p=0,v=0,m=this.path.length;v<m;++v){switch(t=this.path[v],t[0]){case"l":f+=t[1],d+=t[2],a=[];break;case"L":f=t[1],d=t[2],a=[];break;case"h":f+=t[1],a=[];break;case"H":f=t[1],a=[];break;case"v":d+=t[1],a=[];break;case"V":d=t[1],a=[];break;case"m":f+=t[1],d+=t[2],u=f,c=d,a=[];break;case"M":f=t[1],d=t[2],u=f,c=d,a=[];break;case"c":r=f+t[5],s=d+t[6],g=f+t[3],p=d+t[4],a=e.util.getBoundsOfCurve(f,d,f+t[1],d+t[2],g,p,r,s),f=r,d=s;break;case"C":f=t[5],d=t[6],g=t[3],p=t[4],a=e.util.getBoundsOfCurve(f,d,t[1],t[2],g,p,f,d);break;case"s":r=f+t[3],s=d+t[4],null===l[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),a=e.util.getBoundsOfCurve(f,d,g,p,f+t[1],d+t[2],r,s),g=f+t[1],p=d+t[2],f=r,d=s;break;case"S":r=t[3],s=t[4],null===l[0].match(/[CcSs]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),a=e.util.getBoundsOfCurve(f,d,g,p,t[1],t[2],r,s),f=r,d=s,g=t[1],p=t[2];break;case"q":r=f+t[3],s=d+t[4],g=f+t[1],p=d+t[2],a=e.util.getBoundsOfCurve(f,d,g,p,g,p,r,s),f=r,d=s;break;case"Q":g=t[1],p=t[2],a=e.util.getBoundsOfCurve(f,d,g,p,g,p,t[3],t[4]),f=t[3],d=t[4];break;case"t":r=f+t[1],s=d+t[2],null===l[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),a=e.util.getBoundsOfCurve(f,d,g,p,g,p,r,s),f=r,d=s;break;case"T":r=t[1],s=t[2],null===l[0].match(/[QqTt]/)?(g=f,p=d):(g=2*f-g,p=2*d-p),a=e.util.getBoundsOfCurve(f,d,g,p,g,p,r,s),f=r,d=s;break;case"a":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6]+f,t[7]+d),f+=t[6],d+=t[7];break;case"A":a=e.util.getBoundsOfArc(f,d,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),f=t[6],d=t[7];break;case"z":case"Z":f=u,d=c}l=t,a.forEach(function(t){o.push(t.x),h.push(t.y)}),o.push(f),h.push(d)}var y=i(o)||0,b=i(h)||0,x=n(o)||0,_=n(h)||0,w=x-y,C=_-b,S={left:y,top:b,width:w,height:C};return S}}),e.Path.fromObject=function(t,i){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(n){var r=n[0],s=t.path;delete t.path,e.util.object.extend(r,t),r.setSourcePath(s),i(r)}):i(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var s=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);i&&i(new e.Path(s.d,r(s,n)))},void(e.Path.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.invoke,r=e.Object.prototype.toObject;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var i,n,r,s,a,o,h=[],l=[],u=this.paths.length;u--;){r=this.paths[u],s=r.height+r.strokeWidth,a=r.width+r.strokeWidth,i=[{x:r.left,y:r.top},{x:r.left+a,y:r.top},{x:r.left,y:r.top+s},{x:r.left+a,y:r.top+s}],o=this.paths[u].transformMatrix;for(var c=0;c<i.length;c++)n=i[c],o&&(n=e.util.transformPoint(n,o,!1)),h.push(n.x),l.push(n.y)}t.width=Math.max.apply(null,h),t.height=Math.max.apply(null,l)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var i=0,n=this.paths.length;i<n;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=i(r.call(this,t),{paths:n(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){var e=this.getObjects(),i=this.getPointByOrigin("left","top"),n="translate("+i.x+" "+i.y+")",r=this._createBaseSVGMarkup();r.push("<g ",this.getSvgId(),'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),n,this.getSvgTransform(),'" ',">\n");for(var s=0,a=e.length;s<a;s++)r.push("\t",e[s].toSVG(t));return r.push("</g>\n"),t?t(r.join("")):r.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=this.getObjects()[0].get("fill")||"";return"string"==typeof t&&(t=t.toLowerCase(),this.getObjects().every(function(e){var i=e.get("fill")||"";return"string"==typeof i&&i.toLowerCase()===t}))},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,i){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(n){var r=t.paths;delete t.paths;var s=e.util.groupSVGElements(n,t,r);i(s)}):e.util.enlivenObjects(t.paths,function(n){delete t.paths,i(new e.PathGroup(n,t))})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,s=e.util.array.invoke;if(!e.Group){var a={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),i?this._updateObjectsCoords(!0):(this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e)),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(t){for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){if(t.__origHasControls=t.hasControls,t.hasControls=!1,!e){var i=t.getLeft(),n=t.getTop(),r=this.getCenterPoint();t.set({originalLeft:i,originalTop:n,left:i-r.x,top:n-r.y}),t.setCoords()}},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,stroke:!0,strokeWidth:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){var i=this._objects.length;if(this.delegatedProperties[t]||"canvas"===t)for(;i--;)this._objects[i].set(t,e);else for(;i--;)this._objects[i].setOnGroup(t,e);this.callSuper("_set",t,e)},toObject:function(t){return i(this.callSuper("toObject",t),{objects:s(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t);for(var i=0,n=this._objects.length;i<n;i++)this._renderObject(this._objects[i],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var i=0,n=this._objects.length;i<n;i++)this._objects[i]._renderControls(t)},_renderObject:function(t,e){if(t.visible){var i=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=i}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){var i=t.calcTransformMatrix(),n=e.util.qrDecompose(i),r=new e.Point(n.translateX,n.translateY);return t.scaleX=n.scaleX,t.scaleY=n.scaleY,t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.flipX=!1,t.flipY=!1,t.setPositionByOrigin(r,"center","center"),t},_restoreObjectState:function(t){return this.realizeTransform(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,i,n,r=[],s=[],a=["tr","br","bl","tl"],o=0,h=this._objects.length,l=a.length;o<h;++o)for(e=this._objects[o],e.setCoords(),n=0;n<l;n++)i=a[n],r.push(e.oCoords[i].x),s.push(e.oCoords[i].y);this.set(this._getBounds(r,s,t))},_getBounds:function(t,i,s){var a=e.util.invertTransform(this.getViewportTransform()),o=e.util.transformPoint(new e.Point(n(t),n(i)),a),h=e.util.transformPoint(new e.Point(r(t),r(i)),a),l={width:h.x-o.x||0,height:h.y-o.y||0};return s||(l.left=o.x||0,l.top=o.y||0,"center"===this.originX&&(l.left+=l.width/2),"right"===this.originX&&(l.left+=l.width),"center"===this.originY&&(l.top+=l.height/2),"bottom"===this.originY&&(l.top+=l.height)),l},toSVG:function(t){var e=this._createBaseSVGMarkup();e.push("<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" style="',this.getSvgFilter(),'">\n');for(var i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in a){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,i){e.util.enlivenObjects(t.objects,function(n){delete t.objects,i&&i(new e.Group(n,t,!0))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;return t.fabric||(t.fabric={}),t.fabric.Image?void fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",strokeWidth:0,_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element},setElement:function(t,e,i){return this._element=t,this._originalElement=t,this._initConfig(i),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[],n=[],r=this._originalElement,s=1,a=1;this.filters.forEach(function(t){t&&("Resize"===t.type&&(s*=t.scaleX,a*=t.scaleY),i.push(t.toObject()))}),this.resizeFilters.forEach(function(t){t&&n.push(t.toObject())});var o=e(this.callSuper("toObject",t),{src:r?r.src||r._src:"",filters:i,resizeFilters:n,crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice});return o.width/=s,o.height/=a,this.includeDefaultValues||this._removeDefaultValues(o),o},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=-this.width/2,n=-this.height/2,r="none";if(this.group&&"path-group"===this.group.type&&(i=this.left,n=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',"<image ",this.getSvgId(),'xlink:href="',this.getSvgSrc(),'" x="',i,'" y="',n,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,e.push("<rect ",'x="',i,'" y="',n,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=s}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},setSrc:function(t,e,i){fabric.util.loadImage(t,function(t){return this.setElement(t,e,i)},this,i&&i.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,i,n){if(e=e||this.filters,i=i||this._originalElement){var r=i,s=fabric.util.createCanvasElement(),a=fabric.util.createImage(),o=this;return s.width=r.width,s.height=r.height,s.getContext("2d").drawImage(r,0,0,r.width,r.height),0===e.length?(this._element=i,t&&t(),s):(e.forEach(function(t){t&&t.applyTo(s,t.scaleX||o.scaleX,t.scaleY||o.scaleY),!n&&t&&"Resize"===t.type&&(o.width*=t.scaleX,o.height*=t.scaleY)}),a.width=s.width,a.height=s.height,fabric.isLikelyNode?(a.src=s.toBuffer(void 0,fabric.Image.pngCompression),o._element=a,!n&&(o._filteredEl=a),t&&t()):(a.onload=function(){o._element=a,!n&&(o._filteredEl=a),t&&t(),a.onload=s=r=null},a.src=s.toDataURL("image/png")),s)}},_render:function(t,e){var i,n,r,s=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,i+s.marginX,n+s.marginY,s.width,s.height),this._stroke(t),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,i=this.width,n=this.height,r=0,s=0;return"none"===this.alignX&&"none"===this.alignY||(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),i=this._element.width*e,n=this._element.height*e,"Mid"===this.alignX&&(r=(this.width-i)/2),"Max"===this.alignX&&(r=this.width-i),"Mid"===this.alignY&&(s=(this.height-n)/2),"Max"===this.alignY&&(s=this.height-n)),{width:i,height:n,marginX:r,marginY:s}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t,e){this.setElement(fabric.util.getById(t),null,e),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){fabric.Image.prototype._initFilters.call(t,t.filters,function(n){t.filters=n||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(n){t.resizeFilters=n||[];var r=new fabric.Image(i,t);e&&e(r)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,i))},null,i&&i.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,i,n){var r,s=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);s.preserveAspectRatio&&(r=fabric.util.parsePreserveAspectRatioAttribute(s.preserveAspectRatio),e(s,r)),fabric.Image.fromURL(s["xlink:href"],i,e(n?fabric.util.object.clone(n):{},s))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,n=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),n()},onComplete:function(){r.setCoords(),i()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.brightness,s=0,a=n.length;s<a;s+=4)n[s]+=r,n[s+1]+=r,n[s+2]+=r;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0]},applyTo:function(t){for(var e,i,n,r,s,a,o,h,l,u=this.matrix,c=t.getContext("2d"),f=c.getImageData(0,0,t.width,t.height),d=Math.round(Math.sqrt(u.length)),g=Math.floor(d/2),p=f.data,v=f.width,m=f.height,y=c.createImageData(v,m),b=y.data,x=this.opaque?1:0,_=0;_<m;_++)for(var w=0;w<v;w++){s=4*(_*v+w),e=0,i=0,n=0,r=0;for(var C=0;C<d;C++)for(var S=0;S<d;S++)o=_+C-g,a=w+S-g,o<0||o>m||a<0||a>v||(h=4*(o*v+a),l=u[C*d+S],e+=p[h]*l,i+=p[h+1]*l,n+=p[h+2]*l,r+=p[h+3]*l);b[s]=e,b[s+1]=i,b[s+2]=n,b[s+3]=r+x*(255-r)}c.putImageData(y,0,0)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.threshold,s=n.length,a=0,o=n.length;a<o;a+=4)n[a+3]=r+255*(s-a)/s;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,s=n.width*n.height*4,a=0;a<s;)e=(r[a]+r[a+1]+r[a+2])/3,r[a]=e,r[a+1]=e,r[a+2]=e,a+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,s=r.length;for(e=0;e<s;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),s=r.data,a=this.mask.getElement(),o=e.util.createCanvasElement(),h=this.channel,l=r.width*r.height*4;o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(a,0,0,t.width,t.height);var u=o.getContext("2d").getImageData(0,0,t.width,t.height),c=u.data;for(i=0;i<l;i+=4)s[i+3]=c[i+h];n.putImageData(r,0,0)}},toObject:function(){return i(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,i){e.util.loadImage(t.mask.src,function(n){t.mask=new e.Image(n,t.mask),i&&i(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,s=this.noise,a=0,o=r.length;a<o;a+=4)e=(.5-Math.random())*s,r[a]+=e,r[a+1]+=e,r[a+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,r,s,a,o,h=t.getContext("2d"),l=h.getImageData(0,0,t.width,t.height),u=l.data,c=l.height,f=l.width;for(i=0;i<c;i+=this.blocksize)for(n=0;n<f;n+=this.blocksize){e=4*i*f+4*n,r=u[e],s=u[e+1],a=u[e+2],o=u[e+3];for(var d=i,g=i+this.blocksize;d<g;d++)for(var p=n,v=n+this.blocksize;p<v;p++)e=4*d*f+4*p,u[e]=r,u[e+1]=s,u[e+2]=a,u[e+3]=o}h.putImageData(l,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,r=t.getContext("2d"),s=r.getImageData(0,0,t.width,t.height),a=s.data,o=this.threshold,h=this.distance,l=255-o,u=Math.abs,c=0,f=a.length;c<f;c+=4)e=a[c],i=a[c+1],n=a[c+2],e>l&&i>l&&n>l&&u(e-i)<h&&u(e-n)<h&&u(i-n)<h&&(a[c+3]=0);r.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),s=r.data,a=s.length;for(e=0;e<a;e+=4)i=.3*s[e]+.59*s[e+1]+.11*s[e+2],s[e]=i+100,s[e+1]=i+50,s[e+2]=i+255;n.putImageData(r,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,r,s=t.getContext("2d"),a=s.getImageData(0,0,t.width,t.height),o=a.data,h=o.length;for(e=0;e<h;e+=4)i=o[e],n=o[e+1],r=o[e+2],o[e]=(.393*i+.769*n+.189*r)/1.351,o[e+1]=(.349*i+.686*n+.168*r)/1.203,o[e+2]=(.272*i+.534*n+.131*r)/2.14;s.putImageData(a,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var i,n,r,s,a,o,h,l,u,c=t.getContext("2d"),f=c.getImageData(0,0,t.width,t.height),d=f.data,g=d.length;for(u=new e.Color(this.color).getSource(),n=u[0]*this.opacity,r=u[1]*this.opacity,s=u[2]*this.opacity,l=1-this.opacity,i=0;i<g;i+=4)a=d[i],o=d[i+1],h=d[i+2],d[i]=n+a*l,d[i+1]=r+o*l,d[i+2]=s+h*l;c.putImageData(f,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var i,n,r=t.getContext("2d"),s=r.getImageData(0,0,t.width,t.height),a=s.data,o=a.length;for(n=new e.Color(this.color).getSource(),i=0;i<o;i+=4)a[i]*=n[0]/255,a[i+1]*=n[1]/255,a[i+2]*=n[2]/255;r.putImageData(s,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric;e.Image.filters.Blend=e.util.createClass(e.Image.filters.BaseFilter,{type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var i,n,r,s,a,o,h,l,u,c,f=t.getContext("2d"),d=f.getImageData(0,0,t.width,t.height),g=d.data,p=!1;if(this.image){p=!0;var v=e.util.createCanvasElement();v.width=this.image.width,v.height=this.image.height;var m=new e.StaticCanvas(v);m.add(this.image);var y=m.getContext("2d");c=y.getImageData(0,0,m.width,m.height).data}else c=new e.Color(this.color).getSource(),i=c[0]*this.alpha,n=c[1]*this.alpha,r=c[2]*this.alpha;for(var b=0,x=g.length;b<x;b+=4)switch(s=g[b],a=g[b+1],o=g[b+2],p&&(i=c[b]*this.alpha,n=c[b+1]*this.alpha,r=c[b+2]*this.alpha),this.mode){case"multiply":g[b]=s*i/255,g[b+1]=a*n/255,g[b+2]=o*r/255;break;case"screen":g[b]=1-(1-s)*(1-i),g[b+1]=1-(1-a)*(1-n),g[b+2]=1-(1-o)*(1-r);break;case"add":g[b]=Math.min(255,s+i),g[b+1]=Math.min(255,a+n),g[b+2]=Math.min(255,o+r);break;case"diff":case"difference":g[b]=Math.abs(s-i),g[b+1]=Math.abs(a-n),g[b+2]=Math.abs(o-r);break;case"subtract":h=s-i,l=a-n,u=o-r,g[b]=h<0?0:h,g[b+1]=l<0?0:l,g[b+2]=u<0?0:u;break;case"darken":g[b]=Math.min(s,i),g[b+1]=Math.min(a,n),g[b+2]=Math.min(o,r);break;case"lighten":g[b]=Math.max(s,i),g[b+1]=Math.max(a,n),g[b+2]=Math.max(o,r)}f.putImageData(d,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,s=Math.abs,a=Math.max,o=Math.round,h=Math.sin,l=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,i){this.rcpScaleX=1/e,this.rcpScaleY=1/i;var n,r=t.width,s=t.height,a=o(r*e),h=o(s*i);"sliceHack"===this.resizeType&&(n=this.sliceByTwo(t,r,s,a,h)),"hermite"===this.resizeType&&(n=this.hermiteFastResize(t,r,s,a,h)),"bilinear"===this.resizeType&&(n=this.bilinearFiltering(t,r,s,a,h)),"lanczos"===this.resizeType&&(n=this.lanczosResize(t,r,s,a,h)),
t.width=a,t.height=h,t.getContext("2d").putImageData(n,0,0)},sliceByTwo:function(t,i,r,s,o){var h,l=t.getContext("2d"),u=.5,c=.5,f=1,d=1,g=!1,p=!1,v=i,m=r,y=e.util.createCanvasElement(),b=y.getContext("2d");for(s=n(s),o=n(o),y.width=a(s,i),y.height=a(o,r),s>i&&(u=2,f=-1),o>r&&(c=2,d=-1),h=l.getImageData(0,0,i,r),t.width=a(s,i),t.height=a(o,r),l.putImageData(h,0,0);!g||!p;)i=v,r=m,s*f<n(v*u*f)?v=n(v*u):(v=s,g=!0),o*d<n(m*c*d)?m=n(m*c):(m=o,p=!0),h=l.getImageData(0,0,i,r),b.putImageData(h,0,0),l.clearRect(0,0,v,m),l.drawImage(y,0,0,i,r,0,0,v,m);return l.getImageData(0,0,s,o)},lanczosResize:function(t,e,a,o,u){function c(t){return function(e){if(e>t)return 0;if(e*=Math.PI,s(e)<1e-16)return 1;var i=e/t;return h(e)*h(i)/e/i}}function f(t){var h,l,c,d,g,M,A,D,L,N,E;for(T.x=(t+.5)*b,k.x=n(T.x),h=0;h<u;h++){for(T.y=(h+.5)*x,k.y=n(T.y),g=0,M=0,A=0,D=0,L=0,l=k.x-C;l<=k.x+C;l++)if(!(l<0||l>=e)){N=n(1e3*s(l-T.x)),O[N]||(O[N]={});for(var j=k.y-S;j<=k.y+S;j++)j<0||j>=a||(E=n(1e3*s(j-T.y)),O[N][E]||(O[N][E]=y(r(i(N*_,2)+i(E*w,2))/1e3)),c=O[N][E],c>0&&(d=4*(j*e+l),g+=c,M+=c*v[d],A+=c*v[d+1],D+=c*v[d+2],L+=c*v[d+3]))}d=4*(h*o+t),m[d]=M/g,m[d+1]=A/g,m[d+2]=D/g,m[d+3]=L/g}return++t<o?f(t):p}var d=t.getContext("2d"),g=d.getImageData(0,0,e,a),p=d.getImageData(0,0,o,u),v=g.data,m=p.data,y=c(this.lanczosLobes),b=this.rcpScaleX,x=this.rcpScaleY,_=2/this.rcpScaleX,w=2/this.rcpScaleY,C=l(b*this.lanczosLobes/2),S=l(x*this.lanczosLobes/2),O={},T={},k={};return f(0)},bilinearFiltering:function(t,e,i,r,s){var a,o,h,l,u,c,f,d,g,p,v,m,y,b=0,x=this.rcpScaleX,_=this.rcpScaleY,w=t.getContext("2d"),C=4*(e-1),S=w.getImageData(0,0,e,i),O=S.data,T=w.getImageData(0,0,r,s),k=T.data;for(f=0;f<s;f++)for(d=0;d<r;d++)for(u=n(x*d),c=n(_*f),g=x*d-u,p=_*f-c,y=4*(c*e+u),v=0;v<4;v++)a=O[y+v],o=O[y+4+v],h=O[y+C+v],l=O[y+C+4+v],m=a*(1-g)*(1-p)+o*g*(1-p)+h*p*(1-g)+l*g*p,k[b++]=m;return T},hermiteFastResize:function(t,e,i,a,o){for(var h=this.rcpScaleX,u=this.rcpScaleY,c=l(h/2),f=l(u/2),d=t.getContext("2d"),g=d.getImageData(0,0,e,i),p=g.data,v=d.getImageData(0,0,a,o),m=v.data,y=0;y<o;y++)for(var b=0;b<a;b++){for(var x=4*(b+y*a),_=0,w=0,C=0,S=0,O=0,T=0,k=0,M=(y+.5)*u,A=n(y*u);A<(y+1)*u;A++)for(var D=s(M-(A+.5))/f,L=(b+.5)*h,N=D*D,E=n(b*h);E<(b+1)*h;E++){var j=s(L-(E+.5))/c,I=r(N+j*j);I>1&&I<-1||(_=2*I*I*I-3*I*I+1,_>0&&(j=4*(E+A*e),k+=_*p[j+3],C+=_,p[j+3]<255&&(_=_*p[j+3]/250),S+=_*p[j],O+=_*p[j+1],T+=_*p[j+2],w+=_))}m[x]=S/w,m[x+1]=O/w,m[x+2]=T/w,m[x+3]=k/C}return v},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(t){return new e.Image.filters.Resize(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,s=e.StaticCanvas.supports("setLineDash"),a=e.Object.NUM_FRACTION_DIGITS;if(e.Text)return void e.warn("fabric.Text is already defined");var o=e.Object.prototype.stateProperties.concat();o.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:o,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this._splitTextIntoLines(),this._clearCache(),this.width=this._getTextWidth(t),this.height=this._getTextHeight(t))},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextBackground(t),this._setStrokeStyles(t),this._setFillStyles(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){this._translateForTextAlign(t),this._renderTextFill(t),this._renderTextStroke(t),this._translateForTextAlign(t,!0)},_translateForTextAlign:function(t,e){if("left"!==this.textAlign&&"justify"!==this.textAlign){var i=e?-1:1;t.translate("center"===this.textAlign?i*this.width/2:i*this.width,0)}},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._getHeightOfSingleLine()+(this._textLines.length-1)*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),i=1,n=this._textLines.length;i<n;i++){var r=this._getLineWidth(t,i);r>e&&(e=r)}return e},_getNonTransformedDimensions:function(){return{x:this.width,y:this.height}},_renderChars:function(t,e,i,n,r){var s=t.slice(0,-4);if(this[s].toLive){var a=-this.width/2+this[s].offsetX||0,o=-this.height/2+this[s].offsetY||0;e.save(),e.translate(a,o),n-=a,r-=o}e[t](i,n,r),this[s].toLive&&e.restore()},_renderTextLine:function(t,e,i,n,r,s){r-=this.fontSize*this._fontSizeFraction;var a=this._getLineWidth(e,s);if("justify"!==this.textAlign||this.width<a)return void this._renderChars(t,e,i,n,r,s);for(var o,h=i.split(/\s+/),l=0,u=this._getWidthOfWords(e,i,s,0),c=this.width-u,f=h.length-1,d=f>0?c/f:0,g=0,p=0,v=h.length;p<v;p++){for(;" "===i[l]&&l<i.length;)l++;o=h[p],this._renderChars(t,e,o,n+g,r,s,l),g+=this._getWidthOfWords(e,o,s,l)+d,l+=o.length}},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},isEmptyStyles:function(){return!0},_renderTextFill:function(t){if(this.fill||!this.isEmptyStyles())for(var e=0,i=0,n=this._textLines.length;i<n;i++){var r=this._getHeightOfLine(t,i),s=r/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+s,i),e+=r}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles()){var e=0;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),s&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var i=0,n=this._textLines.length;i<n;i++){var r=this._getHeightOfLine(t,i),a=r/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[i],this._getLeftOffset(),this._getTopOffset()+e+a,i),e+=r}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this._getHeightOfSingleLine()*this.lineHeight},_getHeightOfSingleLine:function(){return this.fontSize*this._fontSizeMult},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),this._removeShadow(t))},_renderTextLinesBackground:function(t){if(this.textBackgroundColor){var e,i,n,r=0;t.fillStyle=this.textBackgroundColor;for(var s=0,a=this._textLines.length;s<a;s++)e=this._getHeightOfLine(t,s),i=this._getLineWidth(t,s),i>0&&(n=this._getLineLeftOffset(i),t.fillRect(this._getLeftOffset()+n,this._getTopOffset()+r,i,e/this.lineHeight)),r+=e;this._removeShadow(t)}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[]},_shouldClearCache:function(){var t=!1;if(this._forceClearCache)return this._forceClearCache=!1,!0;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){if(this.__lineWidths[e])return this.__lineWidths[e]===-1?this.width:this.__lineWidths[e];var i,n,r=this._textLines[e];return i=""===r?0:this._measureLine(t,e),this.__lineWidths[e]=i,i&&"justify"===this.textAlign&&(n=r.split(/\s+/),n.length>1&&(this.__lineWidths[e]=-1)),i},_measureLine:function(t,e){return t.measureText(this._textLines[e]).width},_renderTextDecoration:function(t){function e(e){var r,s,a,o,h,l,u,c=0;for(r=0,s=n._textLines.length;r<s;r++){for(h=n._getLineWidth(t,r),l=n._getLineLeftOffset(h),u=n._getHeightOfLine(t,r),a=0,o=e.length;a<o;a++)t.fillRect(n._getLeftOffset()+l,c+(n._fontSizeMult-1+e[a])*n.fontSize-i,h,n.fontSize/15);c+=u}}if(this.textDecoration){var i=this.height/2,n=this,r=[];this.textDecoration.indexOf("underline")>-1&&r.push(.85),this.textDecoration.indexOf("line-through")>-1&&r.push(.43),this.textDecoration.indexOf("overline")>-1&&r.push(-.12),r.length>0&&e(r)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),this.drawSelectionBackground(t),e||this.transform(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},_splitTextIntoLines:function(){return this.text.split(this._reNewline)},toObject:function(t){var e=i(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),i=this._getSVGLeftTopOffsets(this.ctx),n=this._getSVGTextAndBg(i.textTop,i.textLeft);return this._wrapSVGTextAndBg(e,n),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),i=-this.width/2,n=0;return{textLeft:i+(this.group&&"path-group"===this.group.type?this.left:0),textTop:n+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){var i=!0,n=this.getSvgFilter(),r=""===n?"":' style="'+n+'"';t.push("\t<g ",this.getSvgId(),'transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"',r,">\n",e.textBgRects.join(""),"\t\t<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(i),'" >\n',e.textSpans.join(""),"\t\t</text>\n","\t</g>\n")},_getSVGTextAndBg:function(t,e){var i=[],n=[],r=0;this._setSVGBg(n);for(var s=0,a=this._textLines.length;s<a;s++)this.textBackgroundColor&&this._setSVGTextLineBg(n,s,e,t,r),this._setSVGTextLineText(s,i,r,e,t,n),r+=this._getHeightOfLine(this.ctx,s);return{textSpans:i,textBgRects:n}},_setSVGTextLineText:function(t,i,n,s,o){var h=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-o+n-this.height/2;return"justify"===this.textAlign?void this._setSVGTextLineJustifed(t,i,h,s):void i.push('\t\t\t<tspan x="',r(s+this._getLineLeftOffset(this._getLineWidth(this.ctx,t)),a),'" ','y="',r(h,a),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>\n")},_setSVGTextLineJustifed:function(t,i,n,s){var o=e.util.createCanvasElement().getContext("2d");this._setTextStyles(o);var h,l,u=this._textLines[t],c=u.split(/\s+/),f=this._getWidthOfWords(o,u),d=this.width-f,g=c.length-1,p=g>0?d/g:0,v=this._getFillAttributes(this.fill);for(s+=this._getLineLeftOffset(this._getLineWidth(o,t)),t=0,l=c.length;t<l;t++)h=c[t],i.push('\t\t\t<tspan x="',r(s,a),'" ','y="',r(n,a),'" ',v,">",e.util.string.escapeXml(h),"</tspan>\n"),s+=this._getWidthOfWords(o,h)+p},_setSVGTextLineBg:function(t,e,i,n,s){t.push("\t\t<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',r(i+this._getLineLeftOffset(this._getLineWidth(this.ctx,e)),a),'" y="',r(s-this.height/2,a),'" width="',r(this._getLineWidth(this.ctx,e),a),'" height="',r(this._getHeightOfLine(this.ctx,e)/this.lineHeight,a),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,a),'" y="',r(-this.height/2,a),'" width="',r(this.width,a),'" height="',r(this.height,a),'"></rect>\n')},_getFillAttributes:function(t){var i=t&&"string"==typeof t?new e.Color(t):"";return i&&i.getSource()&&1!==i.getAlpha()?'opacity="'+i.getAlpha()+'" fill="'+i.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i){if(!t)return null;var n=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);i=e.util.object.extend(i?e.util.object.clone(i):{},n),i.top=i.top||0,i.left=i.left||0,"dx"in n&&(i.left+=n.dx),"dy"in n&&(i.top+=n.dy),"fontSize"in i||(i.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),i.originX||(i.originX="left");var r="";"textContent"in t?r=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(r=t.firstChild.data),r=r.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var s=new e.Text(r,i),a=s.getHeight()/s.height,o=(s.height+s.strokeWidth)*s.lineHeight-s.height,h=o*a,l=s.getHeight()+h,u=0;return"left"===s.originX&&(u=s.getWidth()/2),"right"===s.originX&&(u=-s.getWidth()/2),s.set({left:s.getLeft()+u,top:s.getTop()-l/2+s.fontSize*(.18+s._fontSizeFraction)/s.lineHeight}),s},e.Text.fromObject=function(t){return new e.Text(t.text,n(t))},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var i in t[e])for(var n in t[e][i])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var i=[],n=t;n<e;n++)i.push(this.getSelectionStyles(n));return i}var r=this.get2DCursorLocation(t),s=this._getStyleDeclaration(r.lineIndex,r.charIndex);return s||{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._forceClearCache=!0,this},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex,{}),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),fabric.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},_render:function(t){this.oldWidth=this.width,this.oldHeight=this.height,this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active&&this.isEditing){var t,e,i=this.text.split("");this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this._clearTextArea(e)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(i,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(i,"selection"),this.renderSelection(i,t,e)),e.restore()}},_clearTextArea:function(t){var e=this.oldWidth+4,i=this.oldHeight+4;t.clearRect(-e/2,-i/2,e,i)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0;i<e;i++){if(t<=this._textLines[i].length)return{lineIndex:i,charIndex:t};t-=this._textLines[i].length+1}return{lineIndex:i-1,charIndex:this._textLines[i-1].length<t?this._textLines[i-1].length:t}},getCurrentCharStyle:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return{fontSize:i&&i.fontSize||this.fontSize,fill:i&&i.fill||this.fill,textBackgroundColor:i&&i.textBackgroundColor||this.textBackgroundColor,textDecoration:i&&i.textDecoration||this.textDecoration,fontFamily:i&&i.fontFamily||this.fontFamily,fontWeight:i&&i.fontWeight||this.fontWeight,fontStyle:i&&i.fontStyle||this.fontStyle,stroke:i&&i.stroke||this.stroke,strokeWidth:i&&i.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fontSize?i.fontSize:this.fontSize},getCurrentCharColor:function(t,e){var i=this._getStyleDeclaration(t,0===e?0:e-1);return i&&i.fill?i.fill:this.cursorColor},_getCursorBoundaries:function(t,e){var i=Math.round(this._getLeftOffset()),n=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:i,top:n,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,r=0,s=0,a=0,o=0;o<this.selectionStart;o++)"\n"===t[o]?(a=0,s+=this._getHeightOfLine(this.ctx,n),n++,r=0):(a+=this._getWidthOfChar(this.ctx,t[o],n,r),r++),i=this._getLineLeftOffset(this._getLineWidth(this.ctx,n));return"cursor"===e&&(s+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,n)/this.lineHeight-this.getCurrentCharFontSize(n,r)*(1-this._fontSizeFraction)),{top:s,left:a,lineLeft:i}},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex,s=this.getCurrentCharFontSize(n,r),a=0===n&&0===r?this._getLineLeftOffset(this._getLineWidth(e,n)):t.leftOffset,o=this.scaleX*this.canvas.getZoom(),h=this.cursorWidth/o;e.fillStyle=this.getCurrentCharColor(n,r),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+a-h/2,t.top+t.topOffset,h,s)},renderSelection:function(t,e,i){i.fillStyle=this.selectionColor;for(var n=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),s=n.lineIndex,a=r.lineIndex,o=s;o<=a;o++){var h=this._getLineLeftOffset(this._getLineWidth(i,o))||0,l=this._getHeightOfLine(this.ctx,o),u=0,c=this._textLines[o];if(o===s)for(var f=0,d=c.length;f<d;f++)f>=n.charIndex&&(o!==a||f<r.charIndex)&&(u+=this._getWidthOfChar(i,c[f],o,f)),f<n.charIndex&&(h+=this._getWidthOfChar(i,c[f],o,f));else if(o>s&&o<a)u+=this._getLineWidth(i,o)||5;else if(o===a)for(var g=0,p=r.charIndex;g<p;g++)u+=this._getWidthOfChar(i,c[g],o,g);i.fillRect(e.left+h,e.top+e.topOffset,u,l),e.topOffset+=l}},_renderChars:function(t,e,i,n,r,s,a){if(this.isEmptyStyles())return this._renderCharsFast(t,e,i,n,r);a=a||0,this.skipTextAlign=!0,n-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var o,h,l=this._getHeightOfLine(e,s),u=this._getLineLeftOffset(this._getLineWidth(e,s)),c="";n+=u||0,e.save(),r-=l/this.lineHeight*this._fontSizeFraction;for(var f=a,d=i.length+a;f<=d;f++)o=o||this.getCurrentCharStyle(s,f),h=this.getCurrentCharStyle(s,f+1),(this._hasStyleChanged(o,h)||f===d)&&(this._renderChar(t,e,s,f-1,c,n,r,l),c="",o=h),c+=i[f-a];e.restore()},_renderCharsFast:function(t,e,i,n,r){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,i,n,r),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,i,n,r)},_renderChar:function(t,e,i,n,r,s,a,o){var h,l,u,c,f,d,g=this._getStyleDeclaration(i,n);g?(l=this._getHeightOfChar(e,r,i,n),c=g.stroke,u=g.fill,d=g.textDecoration):l=this.fontSize,c=(c||this.stroke)&&"strokeText"===t,u=(u||this.fill)&&"fillText"===t,g&&e.save(),h=this._applyCharStylesGetWidth(e,r,i,n,g||{}),d=d||this.textDecoration,g&&g.textBackgroundColor&&this._removeShadow(e),u&&e.fillText(r,s,a),c&&e.strokeText(r,s,a),(d||""!==d)&&(f=this._fontSizeFraction*o/this.lineHeight,this._renderCharDecoration(e,d,s,a,f,h,l)),g&&e.restore(),e.translate(h,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,i,n,r,s,a){if(e){var o,h,l=a/15,u={underline:n+a/10,"line-through":n-a*(this._fontSizeFraction+this._fontSizeMult-1)+l,overline:n-(this._fontSizeMult-this._fontSizeFraction)*a},c=["underline","line-through","overline"];for(o=0;o<c.length;o++)h=c[o],e.indexOf(h)>-1&&t.fillRect(i,u[h],s,l)}},_renderTextLine:function(t,e,i,n,r,s){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,i,n,r,s)},_renderTextDecoration:function(t){if(this.isEmptyStyles())return this.callSuper("_renderTextDecoration",t)},_renderTextLinesBackground:function(t){this.callSuper("_renderTextLinesBackground",t);for(var e,i,n,r,s,a,o=0,h=this._getLeftOffset(),l=this._getTopOffset(),u=0,c=this._textLines.length;u<c;u++)if(e=this._getHeightOfLine(t,u),r=this._textLines[u],""!==r&&this.styles&&this._getLineStyle(u)){i=this._getLineWidth(t,u),n=this._getLineLeftOffset(i);for(var f=0,d=r.length;f<d;f++)a=this._getStyleDeclaration(u,f),a&&a.textBackgroundColor&&(s=r[f],t.fillStyle=a.textBackgroundColor,t.fillRect(h+n+this._getWidthOfCharsAt(t,u,f),l+o,this._getWidthOfChar(t,s,u,f)+1,e/this.lineHeight));o+=e}else o+=e},_getCacheProp:function(t,e){return t+e.fontSize+e.fontWeight+e.fontStyle},_getFontCache:function(t){return fabric.charWidthsCache[t]||(fabric.charWidthsCache[t]={}),fabric.charWidthsCache[t]},_applyCharStylesGetWidth:function(e,i,n,r,s){var a,o,h,l=this._getStyleDeclaration(n,r),u=s&&t(s)||t(l);if(this._applyFontStyles(u),h=this._getFontCache(u.fontFamily),o=this._getCacheProp(i,u),!l&&h[o]&&this.caching)return h[o];"string"==typeof u.shadow&&(u.shadow=new fabric.Shadow(u.shadow));var c=u.fill||this.fill;return e.fillStyle=c.toLive?c.toLive(e,this):c,u.stroke&&(e.strokeStyle=u.stroke&&u.stroke.toLive?u.stroke.toLive(e,this):u.stroke),e.lineWidth=u.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(u),u.shadow&&(u.scaleX=this.scaleX,u.scaleY=this.scaleY,u.canvas=this.canvas,this._setShadow.call(u,e)),this.caching&&h[o]?h[o]:(a=e.measureText(i).width,this.caching&&(h[o]=a),a)},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,i,n){return n?this.styles[e]&&this.styles[e][i]?t(this.styles[e][i]):{}:this.styles[e]&&this.styles[e][i]?this.styles[e][i]:null},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return this.styles[t]},_setLineStyle:function(t,e){this.styles[t]=e},_deleteLineStyle:function(t){delete this.styles[t]},_getWidthOfChar:function(t,e,i,n){if(!this._isMeasuring&&"justify"===this.textAlign&&this._reSpacesAndTabs.test(e))return this._getWidthOfSpace(t,i);var r,s,a=this._getStyleDeclaration(i,n,!0);if(this._applyFontStyles(a),r=this._getFontCache(a.fontFamily),s=this._getCacheProp(e,a),r[s]&&this.caching)return r[s];if(t){t.save();var o=this._applyCharStylesGetWidth(t,e,i,n);return t.restore(),o}},_getHeightOfChar:function(t,e,i){var n=this._getStyleDeclaration(e,i);return n&&n.fontSize?n.fontSize:this.fontSize},_getWidthOfCharsAt:function(t,e,i){var n,r,s=0;for(n=0;n<i;n++)r=this._textLines[e][n],s+=this._getWidthOfChar(t,r,e,n);return s},_measureLine:function(t,e){this._isMeasuring=!0;var i=this._getWidthOfCharsAt(t,e,this._textLines[e].length);return this._isMeasuring=!1,i},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var i=this._textLines[e],n=this._getWidthOfWords(t,i,e,0),r=this.width-n,s=i.length-i.replace(this._reSpacesAndTabs,"").length,a=Math.max(r/s,t.measureText(" ").width);return this.__widthOfSpace[e]=a,a},_getWidthOfWords:function(t,e,i,n){for(var r=0,s=0;s<e.length;s++){var a=e[s];a.match(/\s/)||(r+=this._getWidthOfChar(t,a,i,s+n))}return r},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var i=this._textLines[e],n=this._getHeightOfChar(t,e,0),r=1,s=i.length;r<s;r++){var a=this._getHeightOfChar(t,e,r);a>n&&(n=a)}return this.__lineHeights[e]=n*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=this._getHeightOfLine(t,0)/this.lineHeight,i=1,n=this._textLines.length;i<n;i++)e+=this._getHeightOfLine(t,i);return e},toObject:function(e){var i,n,r,s={};for(i in this.styles){r=this.styles[i],s[i]={};for(n in r)s[i][n]=t(r[n])}return fabric.util.object.extend(this.callSuper("toObject",e),{styles:s})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t))})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){r.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},i)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i--;for(;/\S/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this.text.charAt(i)))for(;this._reSpace.test(this.text.charAt(i));)e++,i++;for(;/\S/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\n/.test(this.text.charAt(i))&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\n/.test(this.text.charAt(i))&&i<this.text.length;)e++,i++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,i=0,n=t.length;i<n;i++)"\n"===t[i]&&e++;return e},searchWordBoundary:function(t,e){for(var i=this._reSpace.test(this.text.charAt(t))?t-1:t,n=this.text.charAt(i),r=/[ \n\.,;!\?\-]/;!r.test(n)&&i>0&&i<this.text.length;)i+=e,n=this.text.charAt(i);return r.test(n)&&"\n"!==n&&(i+=1===e?0:1),i},selectWord:function(t){var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.setSelectionStart(e),this.setSelectionEnd(i)},selectLine:function(t){var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);this.setSelectionStart(e),this.setSelectionEnd(i)},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler.bind(this))},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e);e!==this.__selectionStartOnMouseDown&&(e>this.__selectionStartOnMouseDown?(this.setSelectionStart(this.__selectionStartOnMouseDown),this.setSelectionEnd(e)):(this.setSelectionStart(e),this.setSelectionEnd(this.__selectionStartOnMouseDown)),this.renderCursorOrSelection())}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){if(this.hiddenTextarea&&!this.inCompositionMode&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd,this.selectionStart===this.selectionEnd)){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top,this.hiddenTextarea.style.fontSize=t.fontSize;
}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.text.split(""),e=this._getCursorBoundaries(t,"cursor"),i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex,s=this.getCurrentCharFontSize(n,r),a=0===n&&0===r?this._getLineLeftOffset(this._getLineWidth(this.ctx,n)):e.leftOffset,o=this.calcTransformMatrix(),h={x:e.left+a,y:e.top+e.topOffset+s},l=this.canvas.upperCanvasEl,u=l.width-s,c=l.height-s;return h=fabric.util.transformPoint(h,o),h=fabric.util.transformPoint(h,this.canvas.viewportTransform),h.x<0&&(h.x=0),h.x>u&&(h.x=u),h.y<0&&(h.y=0),h.y>c&&(h.y=c),{left:h.x+"px",top:h.y+"px",fontSize:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text;return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.setSelectionStart(t)},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],i=e?t:t-1;this.removeStyleObject(e,i),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this._splitTextIntoLines()},insertChars:function(t,e){var i;if(this.selectionEnd-this.selectionStart>1&&(this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart)),!e&&this.isEmptyStyles())return void this.insertChar(t,!1);for(var n=0,r=t.length;n<r;n++)e&&(i=fabric.copiedTextStyle[n]),this.insertChar(t[n],n<r-1,i)},insertChar:function(t,e,i){var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this._textLines=this._splitTextIntoLines(),this.insertStyleObjects(t,n,i),this.selectionStart+=t.length,this.selectionEnd=this.selectionStart,e||(this._updateTextarea(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this}))},insertNewlineStyleObject:function(e,i,n){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var r={},s={};if(this.styles[e]&&this.styles[e][i-1]&&(r=this.styles[e][i-1]),n)s[0]=t(r),this.styles[e+1]=s;else{for(var a in this.styles[e])parseInt(a,10)>=i&&(s[parseInt(a,10)-i]=this.styles[e][a],delete this.styles[e][a]);this.styles[e+1]=s}this._forceClearCache=!0},insertCharStyleObject:function(e,i,n){var r=this.styles[e],s=t(r);0!==i||n||(i=1);for(var a in s){var o=parseInt(a,10);o>=i&&(r[o+1]=s[o],s[o-1]||delete r[o])}this.styles[e][i]=n||t(r[i-1]),this._forceClearCache=!0},insertStyleObjects:function(t,e,i){var n=this.get2DCursorLocation(),r=n.lineIndex,s=n.charIndex;this._getLineStyle(r)||this._setLineStyle(r,{}),"\n"===t?this.insertNewlineStyleObject(r,s,e):this.insertCharStyleObject(r,s,i)},shiftLineStyles:function(e,i){var n=t(this.styles);for(var r in this.styles){var s=parseInt(r,10);s>e&&(this.styles[s+i]=n[s],n[s-i]||delete this.styles[s])}},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=i.lineIndex,r=i.charIndex;this._removeStyleObject(t,i,n,r)},_getTextOnPreviousLine:function(t){return this._textLines[t-1]},_removeStyleObject:function(e,i,n,r){if(e){var s=this._getTextOnPreviousLine(i.lineIndex),a=s?s.length:0;this.styles[n-1]||(this.styles[n-1]={});for(r in this.styles[n])this.styles[n-1][parseInt(r,10)+a]=this.styles[n][r];this.shiftLineStyles(i.lineIndex,-1)}else{var o=this.styles[n];o&&delete o[r];var h=t(o);for(var l in h){var u=parseInt(l,10);u>=r&&0!==u&&(o[u-1]=h[u],delete o[u])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){if(this.editable){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))}})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this.editable&&!this._isObjectMoved(t.e)&&(this.__lastSelected&&!this.__corner&&(this.enterEditing(t.e),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},getSelectionStartFromPointer:function(t){for(var e,i,n=this.getLocalPointer(t),r=0,s=0,a=0,o=0,h=0,l=this._textLines.length;h<l;h++){i=this._textLines[h],a+=this._getHeightOfLine(this.ctx,h)*this.scaleY;var u=this._getLineWidth(this.ctx,h),c=this._getLineLeftOffset(u);s=c*this.scaleX;for(var f=0,d=i.length;f<d;f++){if(r=s,s+=this._getWidthOfChar(this.ctx,i[f],h,this.flipX?d-f:f)*this.scaleX,!(a<=n.y||s<=n.x))return this._getNewSelectionStartFromOffset(n,r,s,o+h,d);o++}if(n.y<a)return this._getNewSelectionStartFromOffset(n,r,s,o+h-1,d)}if("undefined"==typeof e)return this.text.length},_getNewSelectionStartFromOffset:function(t,e,i,n,r){var s=t.x-e,a=i-t.x,o=a>s?0:1,h=n+o;return this.flipX&&(h=r-h),h>this.text.length&&(h=this.text.length),h}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; opacity: 0; width: 0px; height: 0px; z-index: -999;",this.canvas?this.canvas.lowerCanvasEl.parentNode.appendChild(this.hiddenTextarea):fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),fabric.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"cut",this.cut.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),fabric.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMapUp:{67:"copy",88:"cut"},_ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMapDown&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},onKeyUp:function(t){return!this.isEditing||this._copyDone?void(this._copyDone=!1):void(t.keyCode in this._ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this._ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()))},onInput:function(t){if(this.isEditing&&!this.inCompositionMode){var e,i,n,r=this.selectionStart||0,s=this.selectionEnd||0,a=this.text.length,o=this.hiddenTextarea.value.length;o>a?(n="left"===this._selectionDirection?s:r,e=o-a,i=this.hiddenTextarea.value.slice(n,n+e)):(e=o-a+s-r,i=this.hiddenTextarea.value.slice(r,r+e)),this.insertChars(i),t.stopPropagation()}},onCompositionStart:function(){this.inCompositionMode=!0,this.prevCompositionLength=0,this.compositionStart=this.selectionStart},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){var e=t.data;this.selectionStart=this.compositionStart,this.selectionEnd=this.selectionEnd===this.selectionStart?this.compositionStart+this.prevCompositionLength:this.selectionEnd,this.insertChars(e,!1),this.prevCompositionLength=e.length},forwardDelete:function(t){if(this.selectionStart===this.selectionEnd){if(this.selectionStart===this.text.length)return;this.moveCursorRight(t)}this.removeChars(t)},copy:function(t){if(this.selectionStart!==this.selectionEnd){var e=this.getSelectedText(),i=this._getClipboardData(t);i&&i.setData("text",e),fabric.copiedText=e,fabric.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd),t.stopImmediatePropagation(),t.preventDefault(),this._copyDone=!0}},paste:function(t){var e=null,i=this._getClipboardData(t),n=!0;i?(e=i.getData("text").replace(/\r/g,""),fabric.copiedTextStyle&&fabric.copiedText===e||(n=!1)):e=fabric.copiedText,e&&this.insertChars(e,n),t.stopImmediatePropagation(),t.preventDefault()},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(t),this.removeChars(t))},_getClipboardData:function(t){return t&&t.clipboardData||fabric.window.clipboardData},getDownCursorOffset:function(t,e){var i,n,r=e?this.selectionEnd:this.selectionStart,s=this.get2DCursorLocation(r),a=s.lineIndex,o=this._textLines[a].slice(0,s.charIndex),h=this._textLines[a].slice(s.charIndex),l=this._textLines[a+1]||"";if(a===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-r;var u=this._getLineWidth(this.ctx,a);n=this._getLineLeftOffset(u);for(var c=n,f=0,d=o.length;f<d;f++)i=o[f],c+=this._getWidthOfChar(this.ctx,i,a,f);var g=this._getIndexOnNextLine(s,l,c);return h.length+1+g},_getIndexOnNextLine:function(t,e,i){for(var n,r=t.lineIndex+1,s=this._getLineWidth(this.ctx,r),a=this._getLineLeftOffset(s),o=a,h=0,l=0,u=e.length;l<u;l++){var c=e[l],f=this._getWidthOfChar(this.ctx,c,r,l);if(o+=f,o>i){n=!0;var d=o-f,g=o,p=Math.abs(d-i),v=Math.abs(g-i);h=v<p?l+1:l;break}}return n||(h=e.length),h},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var i=e?this.selectionEnd:this.selectionStart,n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return i;for(var s,a=this._textLines[r].slice(0,n.charIndex),o=this._textLines[r-1]||"",h=this._getLineWidth(this.ctx,n.lineIndex),l=this._getLineLeftOffset(h),u=l,c=0,f=a.length;c<f;c++)s=a[c],u+=this._getWidthOfChar(this.ctx,s,r,c);var d=this._getIndexOnPrevLine(n,o,u);return o.length-d+a.length},_getIndexOnPrevLine:function(t,e,i){for(var n,r=t.lineIndex-1,s=this._getLineWidth(this.ctx,r),a=this._getLineLeftOffset(s),o=a,h=0,l=0,u=e.length;l<u;l++){var c=e[l],f=this._getWidthOfChar(this.ctx,c,r,l);if(o+=f,o>i){n=!0;var d=o-f,g=o,p=Math.abs(d-i),v=Math.abs(g-i);h=v<p?l:l-1;break}}return n||(h=e.length-1),h},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,i){var n="selectionStart"===e?"setSelectionStart":"setSelectionEnd";t.altKey?this[n](this["findWordBoundary"+i](this[e])):t.metaKey||35===t.keyCode||36===t.keyCode?this[n](this["findLineBoundary"+i](this[e])):this[n](this[e]+("Left"===i?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var i=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(i,this.selectionStart),this.setSelectionStart(i)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,i,n,r,s){this._getLineStyle(t)?this._setSVGTextLineChars(t,e,i,n,s):fabric.Text.prototype._setSVGTextLineText.call(this,t,e,i,n,r)},_setSVGTextLineChars:function(t,e,i,n,r){for(var s=this._textLines[t],a=0,o=this._getLineLeftOffset(this._getLineWidth(this.ctx,t))-this.width/2,h=this._getSVGLineTopOffset(t),l=this._getHeightOfLine(this.ctx,t),u=0,c=s.length;u<c;u++){var f=this._getStyleDeclaration(t,u)||{};e.push(this._createTextCharSpan(s[u],f,o,h.lineTop+h.offset,a));var d=this._getWidthOfChar(this.ctx,s[u],t,u);f.textBackgroundColor&&r.push(this._createTextCharBg(f,o,h.lineTop,l,d,a)),a+=d}},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;n<t;n++)e+=this._getHeightOfLine(this.ctx,n);return i=this._getHeightOfLine(this.ctx,n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(i,n,r,s,a,o){return['\t\t<rect fill="',i.textBackgroundColor,'" x="',t(n+o,e),'" y="',t(r-this.height/2,e),'" width="',t(a,e),'" height="',t(s/this.lineHeight,e),'"></rect>\n'].join("")},_createTextCharSpan:function(i,n,r,s,a){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text",getSvgFilter:fabric.Object.prototype.getSvgFilter},n));return['\t\t\t<tspan x="',t(r+a,e),'" y="',t(s-this.height/2,e),'" ',n.fontFamily?'font-family="'+n.fontFamily.replace(/"/g,"'")+'" ':"",n.fontSize?'font-size="'+n.fontSize+'" ':"",n.fontStyle?'font-style="'+n.fontStyle+'" ':"",n.fontWeight?'font-weight="'+n.fontWeight+'" ':"",n.textDecoration?'text-decoration="'+n.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(i),"</tspan>\n"].join("")}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.clone;e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:0,__cachedLines:null,lockScalingY:!0,lockScalingFlip:!0,initialize:function(t,i){this.ctx=e.util.createCanvasElement().getContext("2d"),this.callSuper("initialize",t,i),this.setControlsVisibility(e.Textbox.getTextboxControlVisibility()),this._dimensionAffectingProps.width=!0},_initDimensions:function(t){this.__skipDimension||(t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this.dynamicMinWidth=0,this._textLines=this._splitTextIntoLines(),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this._clearCache(),this.height=this._getTextHeight(t))},_generateStyleMap:function(){for(var t=0,e=0,i=0,n={},r=0;r<this._textLines.length;r++)"\n"===this.text[i]?(e=0,i++,t++):" "===this.text[i]&&(e++,i++),n[r]={line:t,offset:e},i+=this._textLines[r].length,e+=this._textLines[r].length;return n},_getStyleDeclaration:function(t,e,i){if(this._styleMap){var n=this._styleMap[t];if(!n)return i?{}:null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e,i)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return this.styles[e.line]},_setLineStyle:function(t,e){var i=this._styleMap[t];this.styles[i.line]=e},_deleteLineStyle:function(t){var e=this._styleMap[t];delete this.styles[e.line]},_wrapText:function(t,e){var i,n=e.split(this._reNewline),r=[];for(i=0;i<n.length;i++)r=r.concat(this._wrapLine(t,n[i],i));return r},_measureText:function(t,e,i,n){var r=0;n=n||0;for(var s=0,a=e.length;s<a;s++)r+=this._getWidthOfChar(t,e[s],i,s+n);return r},_wrapLine:function(t,e,i){for(var n=0,r=[],s="",a=e.split(" "),o="",h=0,l=" ",u=0,c=0,f=0,d=!0,g=0;g<a.length;g++)o=a[g],u=this._measureText(t,o,i,h),h+=o.length,n+=c+u,n>=this.width&&!d&&(r.push(s),s="",n=u,d=!0),d||(s+=l),s+=o,c=this._measureText(t,l,i,h),h++,d=!1,u>f&&(f=u);return g&&r.push(s),f>this.dynamicMinWidth&&(this.dynamicMinWidth=f),r},_splitTextIntoLines:function(){var t=this.textAlign;this.ctx.save(),this._setTextStyles(this.ctx),this.textAlign="left";var e=this._wrapText(this.ctx,this.text);return this.textAlign=t,this.ctx.restore(),this._textLines=e,this._styleMap=this._generateStyleMap(),e},setOnGroup:function(t,e){"scaleX"===t&&(this.set("scaleX",Math.abs(1/e)),this.set("width",this.get("width")*e/("undefined"==typeof this.__oldScaleX?1:this.__oldScaleX)),this.__oldScaleX=e)},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,i=0,n=0;n<e;n++){var r=this._textLines[n],s=r.length;if(t<=i+s)return{lineIndex:n,charIndex:t-i};i+=s,"\n"!==this.text[i]&&" "!==this.text[i]||i++}return{lineIndex:e-1,charIndex:this._textLines[e-1].length}},_getCursorBoundariesOffsets:function(t,e){for(var i=0,n=0,r=this.get2DCursorLocation(),s=this._textLines[r.lineIndex].split(""),a=this._getLineLeftOffset(this._getLineWidth(this.ctx,r.lineIndex)),o=0;o<r.charIndex;o++)n+=this._getWidthOfChar(this.ctx,s[o],r.lineIndex,o);for(o=0;o<r.lineIndex;o++)i+=this._getHeightOfLine(this.ctx,o);return"cursor"===e&&(i+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,r.lineIndex)/this.lineHeight-this.getCurrentCharFontSize(r.lineIndex,r.charIndex)*(1-this._fontSizeFraction)),{top:i,left:n,lineLeft:a}},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t),{minWidth:this.minWidth})}}),e.Textbox.fromObject=function(t){return new e.Textbox(t.text,i(t))},e.Textbox.getTextboxControlVisibility=function(){return{tl:!1,tr:!1,br:!1,bl:!1,ml:!0,mt:!1,mr:!0,mb:!1,mtr:!0}}}("undefined"!=typeof exports?exports:this),function(){var t=fabric.Canvas.prototype._setObjectScale;fabric.Canvas.prototype._setObjectScale=function(e,i,n,r,s,a,o){var h=i.target;if(!(h instanceof fabric.Textbox))return t.call(fabric.Canvas.prototype,e,i,n,r,s,a,o);var l=h.width*(e.x/i.scaleX/(h.width+h.strokeWidth));return l>=h.getMinWidth()?(h.set("width",l),!0):void 0},fabric.Group.prototype._refreshControlsVisibility=function(){if("undefined"!=typeof fabric.Textbox)for(var t=this._objects.length;t--;)if(this._objects[t]instanceof fabric.Textbox)return void this.setControlsVisibility(fabric.Textbox.getTextboxControlVisibility())};var e=fabric.util.object.clone;fabric.util.object.extend(fabric.Textbox.prototype,{_removeExtraneousStyles:function(){for(var t in this._styleMap)this._textLines[t]||delete this.styles[this._styleMap[t].line]},insertCharStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertCharStyleObject.apply(this,[t,e,i])},insertNewlineStyleObject:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,fabric.IText.prototype.insertNewlineStyleObject.apply(this,[t,e,i])},shiftLineStyles:function(t,i){var n=e(this.styles),r=this._styleMap[t];t=r.line;for(var s in this.styles){var a=parseInt(s,10);a>t&&(this.styles[a+i]=n[a],n[a-i]||delete this.styles[a])}},_getTextOnPreviousLine:function(t){for(var e=this._textLines[t-1];this._styleMap[t-2]&&this._styleMap[t-2].line===this._styleMap[t-1].line;)e=this._textLines[t-2]+e,t--;return e},removeStyleObject:function(t,e){var i=this.get2DCursorLocation(e),n=this._styleMap[i.lineIndex],r=n.line,s=n.offset+i.charIndex;this._removeStyleObject(t,i,r,s)}})}(),function(){var t=fabric.IText.prototype._getNewSelectionStartFromOffset;fabric.IText.prototype._getNewSelectionStartFromOffset=function(e,i,n,r,s){r=t.call(this,e,i,n,r,s);for(var a=0,o=0,h=0;h<this._textLines.length&&(a+=this._textLines[h].length,!(a+o>=r));h++)"\n"!==this.text[a+o]&&" "!==this.text[a+o]||o++;return r-h+o}}(),function(){function request(t,e,i){var n=URL.parse(t);n.port||(n.port=0===n.protocol.indexOf("https:")?443:80);var r=0===n.protocol.indexOf("https:")?HTTPS:HTTP,s=r.request({hostname:n.hostname,port:n.port,path:n.path,method:"GET"},function(t){var n="";e&&t.setEncoding(e),t.on("end",function(){i(n)}),t.on("data",function(e){200===t.statusCode&&(n+=e)})});s.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+n.hostname+":"+n.port):fabric.log(t.message),i(null)}),s.end()}function requestFs(t,e){var i=require("fs");i.readFile(t,function(t,i){if(t)throw fabric.log(t),t;e(i)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,i){function n(n){n?(r.src=new Buffer(n,"binary"),r._src=t,e&&e.call(i,r)):(r=null,e&&e.call(i,null,!0))}var r=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(r.src=r._src=t,e&&e.call(i,r)):t&&0!==t.indexOf("http")?requestFs(t,n):t?request(t,"binary",n):e&&e.call(i,t)},fabric.loadSVGFromURL=function(t,e,i){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,e,i){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,i){e&&e(t,i)},i)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(i){var n=new fabric.Image(i);n._initConfig(t),n._initFilters(t.filters,function(i){n.filters=i||[],n._initFilters(t.resizeFilters,function(t){n.resizeFilters=t||[],e&&e(n)})})})},fabric.createCanvasForNode=function(t,e,i,n){n=n||i;var r=fabric.document.createElement("canvas"),s=new Canvas(t||600,e||600,n);r.style={},r.width=s.width,r.height=s.height;var a=fabric.Canvas||fabric.StaticCanvas,o=new a(r,i);return o.contextContainer=s.getContext("2d"),o.nodeCanvas=s,o.Font=Canvas.Font,o},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return origSetWidth.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return origSetHeight.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}(),define("text",["module"],function(t){"use strict";var e,i,n,r,s,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,u=l&&location.protocol&&location.protocol.replace(/\:/,""),c=l&&location.hostname,f=l&&(location.port||void 0),d={},g=t.config&&t.config()||{};return e={version:"2.0.14",strip:function(t){if(t){t=t.replace(o,"");var e=t.match(h);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=a[e];try{t=new ActiveXObject(i)}catch(t){}if(t){a=[i];break}}return t},parseName:function(t){var e,i,n,r=!1,s=t.lastIndexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return s!==-1&&(!a||s>1)?(e=t.substring(0,s),i=t.substring(s+1)):e=t,n=i||e,s=n.indexOf("!"),s!==-1&&(r="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:e=n),{moduleName:e,ext:i,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,i,n,r){var s,a,o,h=e.xdRegExp.exec(t);return!h||(s=h[2],a=h[3],a=a.split(":"),o=a[1],a=a[0],!(s&&s!==i||a&&a.toLowerCase()!==n.toLowerCase()||(o||a)&&o!==r))},finishLoad:function(t,i,n,r){n=i?e.strip(n):n,g.isBuild&&(d[t]=n),r(n)},load:function(t,i,n,r){if(r&&r.isBuild&&!r.inlineText)return void n();g.isBuild=r&&r.isBuild;var s=e.parseName(t),a=s.moduleName+(s.ext?"."+s.ext:""),o=i.toUrl(a),h=g.useXhr||e.useXhr;return 0===o.indexOf("empty:")?void n():void(!l||h(o,u,c,f)?e.get(o,function(i){e.finishLoad(t,s.strip,i,n)},function(t){n.error&&n.error(t)}):i([a],function(t){e.finishLoad(s.moduleName+"."+s.ext,s.strip,t,n)}))},write:function(t,i,n,r){if(d.hasOwnProperty(i)){var s=e.jsEscape(d[i]);n.asModule(t+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,i,n,r,s){var a=e.parseName(i),o=a.ext?"."+a.ext:"",h=a.moduleName+o,l=n.toUrl(a.moduleName+o)+".js";e.load(h,n,function(i){var n=function(t){return r(l,t)};n.asModule=function(t,e){return r.asModule(t,l,e)},e.write(t,h,n,s)},s)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),e.get=function(t,e,n){try{var r=i.readFileSync(t,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),e(r)}catch(t){n&&n(t)}}):"xhr"===g.env||!g.env&&e.createXhr()?e.get=function(t,i,n,r){var s,a=e.createXhr();if(a.open("GET",t,!0),r)for(s in r)r.hasOwnProperty(s)&&a.setRequestHeader(s.toLowerCase(),r[s]);g.onXhr&&g.onXhr(a,t),a.onreadystatechange=function(e){var r,s;4===a.readyState&&(r=a.status||0,r>399&&r<600?(s=new Error(t+" HTTP status: "+r),s.xhr=a,n&&n(s)):i(a.responseText),g.onXhrComplete&&g.onXhrComplete(a,t))},
a.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var i,n,r="utf-8",s=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),h="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(a),i.append(n);h=String(i.toString())}finally{o.close()}e(h)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,r=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in n,e.get=function(t,e){var i,a,o,h={};s&&(t=t.replace(/\//g,"\\")),o=new FileUtils.File(t);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),i.init(o,1,0,!1),a=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(i,"utf-8",i.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(i.available(),h),a.close(),i.close(),e(h.value)}catch(t){throw new Error((o&&o.path||"")+": "+t)}}),e}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function i(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function n(t,e,i,n){for(var r=-1,s=t?t.length:0;++r<s;){var a=t[r];e(n,a,i(a),t)}return n}function r(t,e){for(var i=-1,n=t?t.length:0;++i<n&&e(t[i],i,t)!==!1;);return t}function s(t,e){for(var i=t?t.length:0;i--&&e(t[i],i,t)!==!1;);return t}function a(t,e){for(var i=-1,n=t?t.length:0;++i<n;)if(!e(t[i],i,t))return!1;return!0}function o(t,e){for(var i=-1,n=t?t.length:0,r=0,s=[];++i<n;){var a=t[i];e(a,i,t)&&(s[r++]=a)}return s}function h(t,e){var i=t?t.length:0;return!!i&&b(t,e,0)>-1}function l(t,e,i){for(var n=-1,r=t?t.length:0;++n<r;)if(i(e,t[n]))return!0;return!1}function u(t,e){for(var i=-1,n=t?t.length:0,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function c(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function f(t,e,i,n){var r=-1,s=t?t.length:0;for(n&&s&&(i=t[++r]);++r<s;)i=e(i,t[r],r,t);return i}function d(t,e,i,n){var r=t?t.length:0;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function g(t,e){for(var i=-1,n=t?t.length:0;++i<n;)if(e(t[i],i,t))return!0;return!1}function p(t){return t.split("")}function v(t){return t.match(Me)||[]}function m(t,e,i){var n;return i(t,function(t,i,r){if(e(t,i,r))return n=i,!1}),n}function y(t,e,i,n){for(var r=t.length,s=i+(n?1:-1);n?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function b(t,e,i){if(e!==e)return y(t,_,i);for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}function x(t,e,i,n){for(var r=i-1,s=t.length;++r<s;)if(n(t[r],e))return r;return-1}function _(t){return t!==t}function w(t,e){var i=t?t.length:0;return i?k(t,e)/i:kt}function C(t){return function(e){return null==e?Q:e[t]}}function S(t){return function(e){return null==t?Q:t[e]}}function O(t,e,i,n,r){return r(t,function(t,r,s){i=n?(n=!1,t):e(i,t,r,s)}),i}function T(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}function k(t,e){for(var i,n=-1,r=t.length;++n<r;){var s=e(t[n]);s!==Q&&(i=i===Q?s:i+s)}return i}function M(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function A(t,e){return u(e,function(e){return[e,t[e]]})}function D(t){return function(e){return t(e)}}function L(t,e){return u(e,function(e){return t[e]})}function N(t,e){return t.has(e)}function E(t,e){for(var i=-1,n=t.length;++i<n&&b(e,t[i],0)>-1;);return i}function j(t,e){for(var i=t.length;i--&&b(e,t[i],0)>-1;);return i}function I(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&n++;return n}function P(t){return"\\"+Ri[t]}function R(t,e){return null==t?Q:t[e]}function B(t){return Mi.test(t)}function F(t){return Ai.test(t)}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function Y(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}function W(t){var e=-1,i=Array(t.size);return t.forEach(function(t,n){i[++e]=[n,t]}),i}function G(t,e){return function(i){return t(e(i))}}function H(t,e){for(var i=-1,n=t.length,r=0,s=[];++i<n;){var a=t[i];a!==e&&a!==rt||(t[i]=rt,s[r++]=i)}return s}function V(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function X(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}function U(t){return B(t)?Z(t):tn(t)}function q(t){return B(t)?$(t):p(t)}function Z(t){for(var e=Ti.lastIndex=0;Ti.test(t);)e++;return e}function $(t){return t.match(Ti)||[]}function K(t){return t.match(ki)||[]}function J(p){function S(t){if(Ro(t)&&!Wc(t)&&!(t instanceof Me)){if(t instanceof $)return t;if(Zl.call(t,"__wrapped__"))return Ns(t)}return new $(t)}function Z(){}function $(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Q}function Me(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Mt,this.__views__=[]}function Ye(){var t=new Me(this.__wrapped__);return t.__actions__=Sr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Sr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Sr(this.__views__),t}function We(){if(this.__filtered__){var t=new Me(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ge(){var t=this.__wrapped__.value(),e=this.__dir__,i=Wc(t),n=e<0,r=i?t.length:0,s=os(0,r,this.__views__),a=s.start,o=s.end,h=o-a,l=n?o:a-1,u=this.__iteratees__,c=u.length,f=0,d=_u(h,this.__takeCount__);if(!i||r<et||r==h&&d==h)return sr(t,this.__actions__);var g=[];t:for(;h--&&f<d;){l+=e;for(var p=-1,v=t[l];++p<c;){var m=u[p],y=m.iteratee,b=m.type,x=y(v);if(b==wt)v=x;else if(!x){if(b==_t)continue t;break t}}g[f++]=v}return g}function He(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ve(){this.__data__=Du?Du(null):{}}function Xe(t){return this.has(t)&&delete this.__data__[t]}function Ue(t){var e=this.__data__;if(Du){var i=e[t];return i===nt?Q:i}return Zl.call(e,t)?e[t]:Q}function qe(t){var e=this.__data__;return Du?e[t]!==Q:Zl.call(e,t)}function Ze(t,e){var i=this.__data__;return i[t]=Du&&e===Q?nt:e,this}function $e(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ke(){this.__data__=[]}function Je(t){var e=this.__data__,i=_i(e,t);if(i<0)return!1;var n=e.length-1;return i==n?e.pop():hu.call(e,i,1),!0}function Qe(t){var e=this.__data__,i=_i(e,t);return i<0?Q:e[i][1]}function ti(t){return _i(this.__data__,t)>-1}function ei(t,e){var i=this.__data__,n=_i(i,t);return n<0?i.push([t,e]):i[n][1]=e,this}function ii(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function ni(){this.__data__={hash:new He,map:new(Tu||$e),string:new He}}function ri(t){return rs(this,t).delete(t)}function si(t){return rs(this,t).get(t)}function ai(t){return rs(this,t).has(t)}function oi(t,e){return rs(this,t).set(t,e),this}function hi(t){var e=-1,i=t?t.length:0;for(this.__data__=new ii;++e<i;)this.add(t[e])}function li(t){return this.__data__.set(t,nt),this}function ui(t){return this.__data__.has(t)}function ci(t){this.__data__=new $e(t)}function fi(){this.__data__=new $e}function di(t){return this.__data__.delete(t)}function gi(t){return this.__data__.get(t)}function pi(t){return this.__data__.has(t)}function vi(t,e){var i=this.__data__;if(i instanceof $e){var n=i.__data__;if(!Tu||n.length<et-1)return n.push([t,e]),this;i=this.__data__=new ii(n)}return i.set(t,e),this}function mi(t,e){var i=Wc(t)||Co(t)?M(t.length,Yl):[],n=i.length,r=!!n;for(var s in t)!e&&!Zl.call(t,s)||r&&("length"==s||ps(s,n))||i.push(s);return i}function yi(t,e,i,n){return t===Q||wo(t,Vl[i])&&!Zl.call(n,i)?e:t}function bi(t,e,i){(i===Q||wo(t[e],i))&&("number"!=typeof e||i!==Q||e in t)||(t[e]=i)}function xi(t,e,i){var n=t[e];Zl.call(t,e)&&wo(n,i)&&(i!==Q||e in t)||(t[e]=i)}function _i(t,e){for(var i=t.length;i--;)if(wo(t[i][0],e))return i;return-1}function wi(t,e,i,n){return Gu(t,function(t,r,s){e(n,t,i(t),s)}),n}function Ci(t,e){return t&&Or(e,yh(e),t)}function Ti(t,e){for(var i=-1,n=null==t,r=e.length,s=jl(r);++i<r;)s[i]=n?Q:ph(t,e[i]);return s}function ki(t,e,i){return t===t&&(i!==Q&&(t=t<=i?t:i),e!==Q&&(t=t>=e?t:e)),t}function Mi(t,e,i,n,s,a,o){var h;if(n&&(h=a?n(t,s,a,o):n(t)),h!==Q)return h;if(!Po(t))return t;var l=Wc(t);if(l){if(h=us(t),!e)return Sr(t,h)}else{var u=Qu(t),c=u==Rt||u==Bt;if(Hc(t))return fr(t,e);if(u==Yt||u==Nt||c&&!a){if(z(t))return a?t:{};if(h=cs(c?{}:t),!e)return Tr(t,Ci(h,t))}else{if(!Ei[u])return a?t:{};h=fs(t,u,Mi,e)}}o||(o=new ci);var f=o.get(t);if(f)return f;if(o.set(t,h),!l)var d=i?Qr(t):yh(t);return r(d||t,function(r,s){d&&(s=r,r=t[s]),xi(h,s,Mi(r,e,i,n,s,t,o))}),h}function Ai(t){var e=yh(t);return function(i){return ji(i,t,e)}}function ji(t,e,i){var n=i.length;if(null==t)return!n;for(t=Fl(t);n--;){var r=i[n],s=e[r],a=t[r];if(a===Q&&!(r in t)||!s(a))return!1}return!0}function Ii(t){return Po(t)?au(t):{}}function Pi(t,e,i){if("function"!=typeof t)throw new Wl(it);return ic(function(){t.apply(Q,i)},e)}function Ri(t,e,i,n){var r=-1,s=h,a=!0,o=t.length,c=[],f=e.length;if(!o)return c;i&&(e=u(e,D(i))),n?(s=l,a=!1):e.length>=et&&(s=N,a=!1,e=new hi(e));t:for(;++r<o;){var d=t[r],g=i?i(d):d;if(d=n||0!==d?d:0,a&&g===g){for(var p=f;p--;)if(e[p]===g)continue t;c.push(d)}else s(e,g,n)||c.push(d)}return c}function zi(t,e){var i=!0;return Gu(t,function(t,n,r){return i=!!e(t,n,r)}),i}function Yi(t,e,i){for(var n=-1,r=t.length;++n<r;){var s=t[n],a=e(s);if(null!=a&&(o===Q?a===a&&!qo(a):i(a,o)))var o=a,h=s}return h}function Gi(t,e,i,n){var r=t.length;for(i=th(i),i<0&&(i=-i>r?0:r+i),n=n===Q||n>r?r:th(n),n<0&&(n+=r),n=i>n?0:eh(n);i<n;)t[i++]=e;return t}function Hi(t,e){var i=[];return Gu(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i}function Xi(t,e,i,n,r){var s=-1,a=t.length;for(i||(i=gs),r||(r=[]);++s<a;){var o=t[s];e>0&&i(o)?e>1?Xi(o,e-1,i,n,r):c(r,o):n||(r[r.length]=o)}return r}function Ui(t,e){return t&&Vu(t,e,yh)}function tn(t,e){return t&&Xu(t,e,yh)}function an(t,e){return o(e,function(e){return Eo(t[e])})}function on(t,e){e=ms(e,t)?[e]:ur(e);for(var i=0,n=e.length;null!=t&&i<n;)t=t[As(e[i++])];return i&&i==n?t:Q}function hn(t,e,i){var n=e(t);return Wc(t)?n:c(n,i(t))}function ln(t){return Jl.call(t)}function un(t,e){return t>e}function cn(t,e){return null!=t&&Zl.call(t,e)}function fn(t,e){return null!=t&&e in Fl(t)}function dn(t,e,i){return t>=_u(e,i)&&t<xu(e,i)}function gn(t,e,i){for(var n=i?l:h,r=t[0].length,s=t.length,a=s,o=jl(s),c=1/0,f=[];a--;){var d=t[a];a&&e&&(d=u(d,D(e))),c=_u(d.length,c),o[a]=!i&&(e||r>=120&&d.length>=120)?new hi(a&&d):Q}d=t[0];var g=-1,p=o[0];t:for(;++g<r&&f.length<c;){var v=d[g],m=e?e(v):v;if(v=i||0!==v?v:0,!(p?N(p,m):n(f,m,i))){for(a=s;--a;){var y=o[a];if(!(y?N(y,m):n(t[a],m,i)))continue t}p&&p.push(m),f.push(v)}}return f}function pn(t,e,i,n){return Ui(t,function(t,r,s){e(n,i(t),r,s)}),n}function vn(t,e,n){ms(e,t)||(e=ur(e),t=ks(t,e),e=Ks(e));var r=null==t?t:t[As(e)];return null==r?Q:i(r,t,n)}function mn(t){return Ro(t)&&Jl.call(t)==Zt}function yn(t){return Ro(t)&&Jl.call(t)==It}function bn(t,e,i,n,r){return t===e||(null==t||null==e||!Po(t)&&!Ro(e)?t!==t&&e!==e:xn(t,e,bn,i,n,r))}function xn(t,e,i,n,r,s){var a=Wc(t),o=Wc(e),h=Et,l=Et;a||(h=Qu(t),h=h==Nt?Yt:h),o||(l=Qu(e),l=l==Nt?Yt:l);var u=h==Yt&&!z(t),c=l==Yt&&!z(e),f=h==l;if(f&&!u)return s||(s=new ci),a||Zc(t)?$r(t,e,i,n,r,s):Kr(t,e,h,i,n,r,s);if(!(r&vt)){var d=u&&Zl.call(t,"__wrapped__"),g=c&&Zl.call(e,"__wrapped__");if(d||g){var p=d?t.value():t,v=g?e.value():e;return s||(s=new ci),i(p,v,n,r,s)}}return!!f&&(s||(s=new ci),Jr(t,e,i,n,r,s))}function _n(t){return Ro(t)&&Qu(t)==Ft}function wn(t,e,i,n){var r=i.length,s=r,a=!n;if(null==t)return!s;for(t=Fl(t);r--;){var o=i[r];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<s;){o=i[r];var h=o[0],l=t[h],u=o[1];if(a&&o[2]){if(l===Q&&!(h in t))return!1}else{var c=new ci;if(n)var f=n(l,u,h,t,e,c);if(!(f===Q?bn(u,l,n,pt|vt,c):f))return!1}}return!0}function Cn(t){if(!Po(t)||xs(t))return!1;var e=Eo(t)||z(t)?tu:Ie;return e.test(Ds(t))}function Sn(t){return Po(t)&&Jl.call(t)==Gt}function On(t){return Ro(t)&&Qu(t)==Ht}function Tn(t){return Ro(t)&&Io(t.length)&&!!Ni[Jl.call(t)]}function kn(t){return"function"==typeof t?t:null==t?hl:"object"==typeof t?Wc(t)?En(t[0],t[1]):Nn(t):vl(t)}function Mn(t){if(!_s(t))return bu(t);var e=[];for(var i in Fl(t))Zl.call(t,i)&&"constructor"!=i&&e.push(i);return e}function An(t){if(!Po(t))return Ts(t);var e=_s(t),i=[];for(var n in t)("constructor"!=n||!e&&Zl.call(t,n))&&i.push(n);return i}function Dn(t,e){return t<e}function Ln(t,e){var i=-1,n=So(t)?jl(t.length):[];return Gu(t,function(t,r,s){n[++i]=e(t,r,s)}),n}function Nn(t){var e=ss(t);return 1==e.length&&e[0][2]?Cs(e[0][0],e[0][1]):function(i){return i===t||wn(i,t,e)}}function En(t,e){return ms(t)&&ws(e)?Cs(As(t),e):function(i){var n=ph(i,t);return n===Q&&n===e?mh(i,t):bn(e,n,Q,pt|vt)}}function jn(t,e,i,n,s){if(t!==e){if(!Wc(e)&&!Zc(e))var a=An(e);r(a||e,function(r,o){if(a&&(o=r,r=e[o]),Po(r))s||(s=new ci),In(t,e,o,i,jn,n,s);else{var h=n?n(t[o],r,o+"",t,e,s):Q;h===Q&&(h=r),bi(t,o,h)}})}}function In(t,e,i,n,r,s,a){var o=t[i],h=e[i],l=a.get(h);if(l)return void bi(t,i,l);var u=s?s(o,h,i+"",t,e,a):Q,c=u===Q;c&&(u=h,Wc(h)||Zc(h)?Wc(o)?u=o:Oo(o)?u=Sr(o):(c=!1,u=Mi(h,!0)):Vo(h)||Co(h)?Co(o)?u=nh(o):!Po(o)||n&&Eo(o)?(c=!1,u=Mi(h,!0)):u=o:c=!1),c&&(a.set(h,u),r(u,h,n,s,a),a.delete(h)),bi(t,i,u)}function Pn(t,e){var i=t.length;if(i)return e+=e<0?i:0,ps(e,i)?t[e]:Q}function Rn(t,e,i){var n=-1;e=u(e.length?e:[hl],D(ns()));var r=Ln(t,function(t,i,r){var s=u(e,function(e){return e(t)});return{criteria:s,index:++n,value:t}});return T(r,function(t,e){return _r(t,e,i)})}function Bn(t,e){return t=Fl(t),Fn(t,e,function(e,i){return i in t})}function Fn(t,e,i){for(var n=-1,r=e.length,s={};++n<r;){var a=e[n],o=t[a];i(o,a)&&(s[a]=o)}return s}function zn(t){return function(e){return on(e,t)}}function Yn(t,e,i,n){var r=n?x:b,s=-1,a=e.length,o=t;for(t===e&&(e=Sr(e)),i&&(o=u(t,D(i)));++s<a;)for(var h=0,l=e[s],c=i?i(l):l;(h=r(o,c,h,n))>-1;)o!==t&&hu.call(o,h,1),hu.call(t,h,1);return t}function Wn(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==s){var s=r;if(ps(r))hu.call(t,r,1);else if(ms(r,t))delete t[As(r)];else{var a=ur(r),o=ks(t,a);null!=o&&delete o[As(Ks(a))]}}}return t}function Gn(t,e){return t+gu(Cu()*(e-t+1))}function Hn(t,e,i,n){for(var r=-1,s=xu(du((e-t)/(i||1)),0),a=jl(s);s--;)a[n?s:++r]=t,t+=i;return a}function Vn(t,e){var i="";if(!t||e<1||e>Ot)return i;do e%2&&(i+=t),e=gu(e/2),e&&(t+=t);while(e);return i}function Xn(t,e){return e=xu(e===Q?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=xu(n.length-e,0),a=jl(s);++r<s;)a[r]=n[e+r];r=-1;for(var o=jl(e+1);++r<e;)o[r]=n[r];return o[e]=a,i(t,this,o)}}function Un(t,e,i,n){if(!Po(t))return t;e=ms(e,t)?[e]:ur(e);for(var r=-1,s=e.length,a=s-1,o=t;null!=o&&++r<s;){var h=As(e[r]),l=i;if(r!=a){var u=o[h];l=n?n(u,h,o):Q,l===Q&&(l=Po(u)?u:ps(e[r+1])?[]:{})}xi(o,h,l),o=o[h]}return t}function qn(t,e,i){var n=-1,r=t.length;e<0&&(e=-e>r?0:r+e),i=i>r?r:i,i<0&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0;for(var s=jl(r);++n<r;)s[n]=t[n+e];return s}function Zn(t,e){var i;return Gu(t,function(t,n,r){return i=e(t,n,r),!i}),!!i}function $n(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e===e&&r<=Dt){for(;n<r;){var s=n+r>>>1,a=t[s];null!==a&&!qo(a)&&(i?a<=e:a<e)?n=s+1:r=s}return r}return Kn(t,e,hl,i)}function Kn(t,e,i,n){e=i(e);for(var r=0,s=t?t.length:0,a=e!==e,o=null===e,h=qo(e),l=e===Q;r<s;){var u=gu((r+s)/2),c=i(t[u]),f=c!==Q,d=null===c,g=c===c,p=qo(c);if(a)var v=n||g;else v=l?g&&(n||f):o?g&&f&&(n||!d):h?g&&f&&!d&&(n||!p):!d&&!p&&(n?c<=e:c<e);v?r=u+1:s=u}return _u(s,At)}function Jn(t,e){for(var i=-1,n=t.length,r=0,s=[];++i<n;){var a=t[i],o=e?e(a):a;if(!i||!wo(o,h)){var h=o;s[r++]=0===a?0:a}}return s}function Qn(t){return"number"==typeof t?t:qo(t)?kt:+t}function tr(t){if("string"==typeof t)return t;if(qo(t))return Wu?Wu.call(t):"";var e=t+"";return"0"==e&&1/t==-St?"-0":e}function er(t,e,i){var n=-1,r=h,s=t.length,a=!0,o=[],u=o;if(i)a=!1,r=l;else if(s>=et){var c=e?null:Zu(t);if(c)return V(c);a=!1,r=N,u=new hi}else u=e?[]:o;t:for(;++n<s;){var f=t[n],d=e?e(f):f;if(f=i||0!==f?f:0,a&&d===d){for(var g=u.length;g--;)if(u[g]===d)continue t;e&&u.push(d),o.push(f)}else r(u,d,i)||(u!==o&&u.push(d),o.push(f))}return o}function ir(t,e){e=ms(e,t)?[e]:ur(e),t=ks(t,e);var i=As(Ks(e));return!(null!=t&&Zl.call(t,i))||delete t[i]}function nr(t,e,i,n){return Un(t,e,i(on(t,e)),n)}function rr(t,e,i,n){for(var r=t.length,s=n?r:-1;(n?s--:++s<r)&&e(t[s],s,t););return i?qn(t,n?0:s,n?s+1:r):qn(t,n?s+1:0,n?r:s)}function sr(t,e){var i=t;return i instanceof Me&&(i=i.value()),f(e,function(t,e){return e.func.apply(e.thisArg,c([t],e.args))},i)}function ar(t,e,i){for(var n=-1,r=t.length;++n<r;)var s=s?c(Ri(s,t[n],e,i),Ri(t[n],s,e,i)):t[n];return s&&s.length?er(s,e,i):[]}function or(t,e,i){for(var n=-1,r=t.length,s=e.length,a={};++n<r;){var o=n<s?e[n]:Q;i(a,t[n],o)}return a}function hr(t){return Oo(t)?t:[]}function lr(t){return"function"==typeof t?t:hl}function ur(t){return Wc(t)?t:rc(t)}function cr(t,e,i){var n=t.length;return i=i===Q?n:i,!e&&i>=n?t:qn(t,e,i)}function fr(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}function dr(t){var e=new t.constructor(t.byteLength);return new nu(e).set(new nu(t)),e}function gr(t,e){var i=e?dr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function pr(e,i,n){var r=i?n(W(e),!0):W(e);return f(r,t,new e.constructor)}function vr(t){var e=new t.constructor(t.source,Le.exec(t));return e.lastIndex=t.lastIndex,e}function mr(t,i,n){var r=i?n(V(t),!0):V(t);return f(r,e,new t.constructor)}function yr(t){return Yu?Fl(Yu.call(t)):{}}function br(t,e){var i=e?dr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function xr(t,e){if(t!==e){var i=t!==Q,n=null===t,r=t===t,s=qo(t),a=e!==Q,o=null===e,h=e===e,l=qo(e);if(!o&&!l&&!s&&t>e||s&&a&&h&&!o&&!l||n&&a&&h||!i&&h||!r)return 1;if(!n&&!s&&!l&&t<e||l&&i&&r&&!n&&!s||o&&i&&r||!a&&r||!h)return-1}return 0}function _r(t,e,i){for(var n=-1,r=t.criteria,s=e.criteria,a=r.length,o=i.length;++n<a;){var h=xr(r[n],s[n]);if(h){if(n>=o)return h;var l=i[n];return h*("desc"==l?-1:1)}}return t.index-e.index}function wr(t,e,i,n){for(var r=-1,s=t.length,a=i.length,o=-1,h=e.length,l=xu(s-a,0),u=jl(h+l),c=!n;++o<h;)u[o]=e[o];for(;++r<a;)(c||r<s)&&(u[i[r]]=t[r]);for(;l--;)u[o++]=t[r++];return u}function Cr(t,e,i,n){for(var r=-1,s=t.length,a=-1,o=i.length,h=-1,l=e.length,u=xu(s-o,0),c=jl(u+l),f=!n;++r<u;)c[r]=t[r];for(var d=r;++h<l;)c[d+h]=e[h];for(;++a<o;)(f||r<s)&&(c[d+i[a]]=t[r++]);return c}function Sr(t,e){var i=-1,n=t.length;for(e||(e=jl(n));++i<n;)e[i]=t[i];return e}function Or(t,e,i,n){i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],o=n?n(i[a],t[a],a,i,t):Q;xi(i,a,o===Q?t[a]:o)}return i}function Tr(t,e){return Or(t,Ku(t),e)}function kr(t,e){return function(i,r){var s=Wc(i)?n:wi,a=e?e():{};return s(i,t,ns(r,2),a)}}function Mr(t){return Xn(function(e,i){var n=-1,r=i.length,s=r>1?i[r-1]:Q,a=r>2?i[2]:Q;for(s=t.length>3&&"function"==typeof s?(r--,s):Q,a&&vs(i[0],i[1],a)&&(s=r<3?Q:s,r=1),e=Fl(e);++n<r;){var o=i[n];o&&t(e,o,n,s)}return e})}function Ar(t,e){return function(i,n){if(null==i)return i;if(!So(i))return t(i,n);for(var r=i.length,s=e?r:-1,a=Fl(i);(e?s--:++s<r)&&n(a[s],s,a)!==!1;);return i}}function Dr(t){return function(e,i,n){for(var r=-1,s=Fl(e),a=n(e),o=a.length;o--;){var h=a[t?o:++r];if(i(s[h],h,s)===!1)break}return e}}function Lr(t,e,i){function n(){var e=this&&this!==Wi&&this instanceof n?s:t;return e.apply(r?i:this,arguments)}var r=e&st,s=jr(t);return n}function Nr(t){return function(e){e=sh(e);var i=B(e)?q(e):Q,n=i?i[0]:e.charAt(0),r=i?cr(i,1).join(""):e.slice(1);return n[t]()+r}}function Er(t){return function(e){return f(nl(Rh(e).replace(Si,"")),t,"")}}function jr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ii(t.prototype),n=t.apply(i,e);return Po(n)?n:i}}function Ir(t,e,n){function r(){for(var a=arguments.length,o=jl(a),h=a,l=is(r);h--;)o[h]=arguments[h];var u=a<3&&o[0]!==l&&o[a-1]!==l?[]:H(o,l);if(a-=u.length,a<n)return Xr(t,e,Br,r.placeholder,Q,o,u,Q,Q,n-a);var c=this&&this!==Wi&&this instanceof r?s:t;return i(c,this,o)}var s=jr(t);return r}function Pr(t){return function(e,i,n){var r=Fl(e);if(!So(e)){var s=ns(i,3);e=yh(e),i=function(t){return s(r[t],t,r)}}var a=t(e,i,n);return a>-1?r[s?e[a]:a]:Q}}function Rr(t){return Xn(function(e){e=Xi(e,1);var i=e.length,n=i,r=$.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new Wl(it);if(r&&!a&&"wrapper"==es(s))var a=new $([],!0)}for(n=a?n:i;++n<i;){s=e[n];var o=es(s),h="wrapper"==o?$u(s):Q;a=h&&bs(h[0])&&h[1]==(ft|ht|ut|dt)&&!h[4].length&&1==h[9]?a[es(h[0])].apply(a,h[3]):1==s.length&&bs(s)?a[o]():a.thru(s)}return function(){var t=arguments,n=t[0];if(a&&1==t.length&&Wc(n)&&n.length>=et)return a.plant(n).value();for(var r=0,s=i?e[r].apply(this,t):n;++r<i;)s=e[r].call(this,s);return s}})}function Br(t,e,i,n,r,s,a,o,h,l){function u(){for(var m=arguments.length,y=jl(m),b=m;b--;)y[b]=arguments[b];if(g)var x=is(u),_=I(y,x);if(n&&(y=wr(y,n,r,g)),s&&(y=Cr(y,s,a,g)),m-=_,g&&m<l){var w=H(y,x);return Xr(t,e,Br,u.placeholder,i,y,w,o,h,l-m)}var C=f?i:this,S=d?C[t]:t;return m=y.length,o?y=Ms(y,o):p&&m>1&&y.reverse(),c&&h<m&&(y.length=h),this&&this!==Wi&&this instanceof u&&(S=v||jr(S)),S.apply(C,y)}var c=e&ft,f=e&st,d=e&at,g=e&(ht|lt),p=e&gt,v=d?Q:jr(t);return u}function Fr(t,e){return function(i,n){return pn(i,t,e(n),{})}}function zr(t,e){return function(i,n){var r;if(i===Q&&n===Q)return e;if(i!==Q&&(r=i),n!==Q){if(r===Q)return n;"string"==typeof i||"string"==typeof n?(i=tr(i),n=tr(n)):(i=Qn(i),n=Qn(n)),r=t(i,n)}return r}}function Yr(t){return Xn(function(e){return e=1==e.length&&Wc(e[0])?u(e[0],D(ns())):u(Xi(e,1),D(ns())),Xn(function(n){var r=this;return t(e,function(t){return i(t,r,n)})})})}function Wr(t,e){e=e===Q?" ":tr(e);var i=e.length;if(i<2)return i?Vn(e,t):e;var n=Vn(e,du(t/U(e)));return B(e)?cr(q(n),0,t).join(""):n.slice(0,t)}function Gr(t,e,n,r){function s(){for(var e=-1,h=arguments.length,l=-1,u=r.length,c=jl(u+h),f=this&&this!==Wi&&this instanceof s?o:t;++l<u;)c[l]=r[l];for(;h--;)c[l++]=arguments[++e];return i(f,a?n:this,c)}var a=e&st,o=jr(t);return s}function Hr(t){return function(e,i,n){return n&&"number"!=typeof n&&vs(e,i,n)&&(i=n=Q),e=Qo(e),i===Q?(i=e,e=0):i=Qo(i),n=n===Q?e<i?1:-1:Qo(n),Hn(e,i,n,t)}}function Vr(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=ih(e),i=ih(i)),t(e,i)}}function Xr(t,e,i,n,r,s,a,o,h,l){var u=e&ht,c=u?a:Q,f=u?Q:a,d=u?s:Q,g=u?Q:s;e|=u?ut:ct,e&=~(u?ct:ut),e&ot||(e&=~(st|at));var p=[t,e,r,d,c,g,f,o,h,l],v=i.apply(Q,p);return bs(t)&&ec(v,p),v.placeholder=n,nc(v,t,e)}function Ur(t){var e=Bl[t];return function(t,i){if(t=ih(t),i=_u(th(i),292)){var n=(sh(t)+"e").split("e"),r=e(n[0]+"e"+(+n[1]+i));return n=(sh(r)+"e").split("e"),+(n[0]+"e"+(+n[1]-i))}return e(t)}}function qr(t){return function(e){var i=Qu(e);return i==Ft?W(e):i==Ht?X(e):A(e,t(e))}}function Zr(t,e,i,n,r,s,a,o){var h=e&at;if(!h&&"function"!=typeof t)throw new Wl(it);var l=n?n.length:0;if(l||(e&=~(ut|ct),n=r=Q),a=a===Q?a:xu(th(a),0),o=o===Q?o:th(o),l-=r?r.length:0,e&ct){var u=n,c=r;n=r=Q}var f=h?Q:$u(t),d=[t,e,i,n,r,u,c,s,a,o];if(f&&Ss(d,f),t=d[0],e=d[1],i=d[2],n=d[3],r=d[4],o=d[9]=null==d[9]?h?0:t.length:xu(d[9]-l,0),!o&&e&(ht|lt)&&(e&=~(ht|lt)),e&&e!=st)g=e==ht||e==lt?Ir(t,e,o):e!=ut&&e!=(st|ut)||r.length?Br.apply(Q,d):Gr(t,e,i,n);else var g=Lr(t,e,i);var p=f?Uu:ec;return nc(p(g,d),t,e)}function $r(t,e,i,n,r,s){var a=r&vt,o=t.length,h=e.length;if(o!=h&&!(a&&h>o))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var u=-1,c=!0,f=r&pt?new hi:Q;for(s.set(t,e),s.set(e,t);++u<o;){var d=t[u],p=e[u];if(n)var v=a?n(p,d,u,e,t,s):n(d,p,u,t,e,s);if(v!==Q){if(v)continue;c=!1;break}if(f){if(!g(e,function(t,e){if(!f.has(e)&&(d===t||i(d,t,n,r,s)))return f.add(e)})){c=!1;break}}else if(d!==p&&!i(d,p,n,r,s)){c=!1;break}}return s.delete(t),s.delete(e),c}function Kr(t,e,i,n,r,s,a){switch(i){case $t:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Zt:return!(t.byteLength!=e.byteLength||!n(new nu(t),new nu(e)));case jt:case It:case zt:return wo(+t,+e);case Pt:return t.name==e.name&&t.message==e.message;case Gt:case Vt:return t==e+"";case Ft:var o=W;case Ht:var h=s&vt;if(o||(o=V),t.size!=e.size&&!h)return!1;var l=a.get(t);if(l)return l==e;s|=pt,a.set(t,e);var u=$r(o(t),o(e),n,r,s,a);return a.delete(t),u;case Xt:if(Yu)return Yu.call(t)==Yu.call(e)}return!1}function Jr(t,e,i,n,r,s){var a=r&vt,o=yh(t),h=o.length,l=yh(e),u=l.length;if(h!=u&&!a)return!1;for(var c=h;c--;){var f=o[c];if(!(a?f in e:Zl.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var g=!0;s.set(t,e),s.set(e,t);for(var p=a;++c<h;){f=o[c];var v=t[f],m=e[f];if(n)var y=a?n(m,v,f,e,t,s):n(v,m,f,t,e,s);if(!(y===Q?v===m||i(v,m,n,r,s):y)){g=!1;break}p||(p="constructor"==f)}if(g&&!p){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x)&&(g=!1)}return s.delete(t),s.delete(e),g}function Qr(t){return hn(t,yh,Ku)}function ts(t){return hn(t,bh,Ju)}function es(t){for(var e=t.name+"",i=ju[e],n=Zl.call(ju,e)?i.length:0;n--;){var r=i[n],s=r.func;if(null==s||s==t)return r.name}return e}function is(t){var e=Zl.call(S,"placeholder")?S:t;return e.placeholder}function ns(){var t=S.iteratee||ll;return t=t===ll?kn:t,arguments.length?t(arguments[0],arguments[1]):t}function rs(t,e){var i=t.__data__;return ys(e)?i["string"==typeof e?"string":"hash"]:i.map}function ss(t){for(var e=yh(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,ws(r)]}return e}function as(t,e){var i=R(t,e);return Cn(i)?i:Q}function os(t,e,i){for(var n=-1,r=i.length;++n<r;){var s=i[n],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=_u(e,t+a);break;case"takeRight":t=xu(t,e-a)}}return{start:t,end:e}}function hs(t){var e=t.match(Te);return e?e[1].split(ke):[]}function ls(t,e,i){e=ms(e,t)?[e]:ur(e);for(var n,r=-1,s=e.length;++r<s;){var a=As(e[r]);if(!(n=null!=t&&i(t,a)))break;t=t[a]}if(n)return n;var s=t?t.length:0;return!!s&&Io(s)&&ps(a,s)&&(Wc(t)||Co(t))}function us(t){var e=t.length,i=t.constructor(e);return e&&"string"==typeof t[0]&&Zl.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function cs(t){return"function"!=typeof t.constructor||_s(t)?{}:Ii(ru(t))}function fs(t,e,i,n){var r=t.constructor;switch(e){case Zt:return dr(t);case jt:case It:return new r(+t);case $t:return gr(t,n);case Kt:case Jt:case Qt:case te:case ee:case ie:case ne:case re:case se:return br(t,n);case Ft:return pr(t,n,i);case zt:case Vt:return new r(t);case Gt:return vr(t);case Ht:return mr(t,n,i);case Xt:return yr(t)}}function ds(t,e){var i=e.length,n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(Oe,"{\n/* [wrapped with "+e+"] */\n")}function gs(t){return Wc(t)||Co(t)||!!(lu&&t&&t[lu])}function ps(t,e){return e=null==e?Ot:e,!!e&&("number"==typeof t||Re.test(t))&&t>-1&&t%1==0&&t<e}function vs(t,e,i){if(!Po(i))return!1;var n=typeof e;return!!("number"==n?So(i)&&ps(e,i.length):"string"==n&&e in i)&&wo(i[e],t)}function ms(t,e){if(Wc(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!qo(t))||(me.test(t)||!ve.test(t)||null!=e&&t in Fl(e))}function ys(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function bs(t){var e=es(t),i=S[e];if("function"!=typeof i||!(e in Me.prototype))return!1;if(t===i)return!0;var n=$u(i);return!!n&&t===n[0]}function xs(t){return!!Ul&&Ul in t}function _s(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||Vl;return t===i}function ws(t){return t===t&&!Po(t)}function Cs(t,e){return function(i){return null!=i&&(i[t]===e&&(e!==Q||t in Fl(i)))}}function Ss(t,e){var i=t[1],n=e[1],r=i|n,s=r<(st|at|ft),a=n==ft&&i==ht||n==ft&&i==dt&&t[7].length<=e[8]||n==(ft|dt)&&e[7].length<=e[8]&&i==ht;if(!s&&!a)return t;n&st&&(t[2]=e[2],r|=i&st?0:ot);var o=e[3];if(o){var h=t[3];t[3]=h?wr(h,o,e[4]):o,t[4]=h?H(t[3],rt):e[4]}return o=e[5],o&&(h=t[5],t[5]=h?Cr(h,o,e[6]):o,t[6]=h?H(t[5],rt):e[6]),o=e[7],o&&(t[7]=o),n&ft&&(t[8]=null==t[8]?e[8]:_u(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Os(t,e,i,n,r,s){return Po(t)&&Po(e)&&(s.set(e,t),jn(t,e,Q,Os,s),s.delete(e)),t}function Ts(t){var e=[];if(null!=t)for(var i in Fl(t))e.push(i);return e}function ks(t,e){return 1==e.length?t:on(t,qn(e,0,-1))}function Ms(t,e){for(var i=t.length,n=_u(e.length,i),r=Sr(t);n--;){var s=e[n];t[n]=ps(s,i)?r[s]:Q}return t}function As(t){if("string"==typeof t||qo(t))return t;var e=t+"";return"0"==e&&1/t==-St?"-0":e}function Ds(t){if(null!=t){try{return ql.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ls(t,e){return r(Lt,function(i){var n="_."+i[0];e&i[1]&&!h(t,n)&&t.push(n)}),t.sort()}function Ns(t){if(t instanceof Me)return t.clone();var e=new $(t.__wrapped__,t.__chain__);return e.__actions__=Sr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Es(t,e,i){e=(i?vs(t,e,i):e===Q)?1:xu(th(e),0);var n=t?t.length:0;if(!n||e<1)return[];for(var r=0,s=0,a=jl(du(n/e));r<n;)a[s++]=qn(t,r,r+=e);return a}function js(t){for(var e=-1,i=t?t.length:0,n=0,r=[];++e<i;){var s=t[e];s&&(r[n++]=s)}return r}function Is(){for(var t=arguments.length,e=jl(t?t-1:0),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return t?c(Wc(i)?Sr(i):[i],Xi(e,1)):[]}function Ps(t,e,i){var n=t?t.length:0;return n?(e=i||e===Q?1:th(e),qn(t,e<0?0:e,n)):[]}function Rs(t,e,i){var n=t?t.length:0;return n?(e=i||e===Q?1:th(e),e=n-e,qn(t,0,e<0?0:e)):[]}function Bs(t,e){return t&&t.length?rr(t,ns(e,3),!0,!0):[]}function Fs(t,e){return t&&t.length?rr(t,ns(e,3),!0):[]}function zs(t,e,i,n){var r=t?t.length:0;return r?(i&&"number"!=typeof i&&vs(t,e,i)&&(i=0,n=r),Gi(t,e,i,n)):[]}function Ys(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=null==i?0:th(i);return r<0&&(r=xu(n+r,0)),y(t,ns(e,3),r)}function Ws(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n-1;return i!==Q&&(r=th(i),r=i<0?xu(n+r,0):_u(r,n-1)),y(t,ns(e,3),r,!0)}function Gs(t){var e=t?t.length:0;return e?Xi(t,1):[]}function Hs(t){var e=t?t.length:0;return e?Xi(t,St):[]}function Vs(t,e){var i=t?t.length:0;return i?(e=e===Q?1:th(e),Xi(t,e)):[]}function Xs(t){for(var e=-1,i=t?t.length:0,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n}function Us(t){return t&&t.length?t[0]:Q}function qs(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=null==i?0:th(i);return r<0&&(r=xu(n+r,0)),b(t,e,r)}function Zs(t){var e=t?t.length:0;return e?qn(t,0,-1):[]}function $s(t,e){return t?yu.call(t,e):""}function Ks(t){var e=t?t.length:0;return e?t[e-1]:Q}function Js(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if(i!==Q&&(r=th(i),r=(r<0?xu(n+r,0):_u(r,n-1))+1),e!==e)return y(t,_,r-1,!0);for(;r--;)if(t[r]===e)return r;return-1}function Qs(t,e){return t&&t.length?Pn(t,th(e)):Q}function ta(t,e){return t&&t.length&&e&&e.length?Yn(t,e):t}function ea(t,e,i){return t&&t.length&&e&&e.length?Yn(t,e,ns(i,2)):t}function ia(t,e,i){return t&&t.length&&e&&e.length?Yn(t,e,Q,i):t}function na(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],s=t.length;for(e=ns(e,3);++n<s;){var a=t[n];e(a,n,t)&&(i.push(a),r.push(n))}return Wn(t,r),i}function ra(t){return t?Su.call(t):t}function sa(t,e,i){
var n=t?t.length:0;return n?(i&&"number"!=typeof i&&vs(t,e,i)?(e=0,i=n):(e=null==e?0:th(e),i=i===Q?n:th(i)),qn(t,e,i)):[]}function aa(t,e){return $n(t,e)}function oa(t,e,i){return Kn(t,e,ns(i,2))}function ha(t,e){var i=t?t.length:0;if(i){var n=$n(t,e);if(n<i&&wo(t[n],e))return n}return-1}function la(t,e){return $n(t,e,!0)}function ua(t,e,i){return Kn(t,e,ns(i,2),!0)}function ca(t,e){var i=t?t.length:0;if(i){var n=$n(t,e,!0)-1;if(wo(t[n],e))return n}return-1}function fa(t){return t&&t.length?Jn(t):[]}function da(t,e){return t&&t.length?Jn(t,ns(e,2)):[]}function ga(t){var e=t?t.length:0;return e?qn(t,1,e):[]}function pa(t,e,i){return t&&t.length?(e=i||e===Q?1:th(e),qn(t,0,e<0?0:e)):[]}function va(t,e,i){var n=t?t.length:0;return n?(e=i||e===Q?1:th(e),e=n-e,qn(t,e<0?0:e,n)):[]}function ma(t,e){return t&&t.length?rr(t,ns(e,3),!1,!0):[]}function ya(t,e){return t&&t.length?rr(t,ns(e,3)):[]}function ba(t){return t&&t.length?er(t):[]}function xa(t,e){return t&&t.length?er(t,ns(e,2)):[]}function _a(t,e){return t&&t.length?er(t,Q,e):[]}function wa(t){if(!t||!t.length)return[];var e=0;return t=o(t,function(t){if(Oo(t))return e=xu(t.length,e),!0}),M(e,function(e){return u(t,C(e))})}function Ca(t,e){if(!t||!t.length)return[];var n=wa(t);return null==e?n:u(n,function(t){return i(e,Q,t)})}function Sa(t,e){return or(t||[],e||[],xi)}function Oa(t,e){return or(t||[],e||[],Un)}function Ta(t){var e=S(t);return e.__chain__=!0,e}function ka(t,e){return e(t),t}function Ma(t,e){return e(t)}function Aa(){return Ta(this)}function Da(){return new $(this.value(),this.__chain__)}function La(){this.__values__===Q&&(this.__values__=Jo(this.value()));var t=this.__index__>=this.__values__.length,e=t?Q:this.__values__[this.__index__++];return{done:t,value:e}}function Na(){return this}function Ea(t){for(var e,i=this;i instanceof Z;){var n=Ns(i);n.__index__=0,n.__values__=Q,e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e}function ja(){var t=this.__wrapped__;if(t instanceof Me){var e=t;return this.__actions__.length&&(e=new Me(this)),e=e.reverse(),e.__actions__.push({func:Ma,args:[ra],thisArg:Q}),new $(e,this.__chain__)}return this.thru(ra)}function Ia(){return sr(this.__wrapped__,this.__actions__)}function Pa(t,e,i){var n=Wc(t)?a:zi;return i&&vs(t,e,i)&&(e=Q),n(t,ns(e,3))}function Ra(t,e){var i=Wc(t)?o:Hi;return i(t,ns(e,3))}function Ba(t,e){return Xi(Ha(t,e),1)}function Fa(t,e){return Xi(Ha(t,e),St)}function za(t,e,i){return i=i===Q?1:th(i),Xi(Ha(t,e),i)}function Ya(t,e){var i=Wc(t)?r:Gu;return i(t,ns(e,3))}function Wa(t,e){var i=Wc(t)?s:Hu;return i(t,ns(e,3))}function Ga(t,e,i,n){t=So(t)?t:Lh(t),i=i&&!n?th(i):0;var r=t.length;return i<0&&(i=xu(r+i,0)),Uo(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&b(t,e,i)>-1}function Ha(t,e){var i=Wc(t)?u:Ln;return i(t,ns(e,3))}function Va(t,e,i,n){return null==t?[]:(Wc(e)||(e=null==e?[]:[e]),i=n?Q:i,Wc(i)||(i=null==i?[]:[i]),Rn(t,e,i))}function Xa(t,e,i){var n=Wc(t)?f:O,r=arguments.length<3;return n(t,ns(e,4),i,r,Gu)}function Ua(t,e,i){var n=Wc(t)?d:O,r=arguments.length<3;return n(t,ns(e,4),i,r,Hu)}function qa(t,e){var i=Wc(t)?o:Hi;return i(t,ho(ns(e,3)))}function Za(t){var e=So(t)?t:Lh(t),i=e.length;return i>0?e[Gn(0,i-1)]:Q}function $a(t,e,i){var n=-1,r=Jo(t),s=r.length,a=s-1;for(e=(i?vs(t,e,i):e===Q)?1:ki(th(e),0,s);++n<e;){var o=Gn(n,a),h=r[o];r[o]=r[n],r[n]=h}return r.length=e,r}function Ka(t){return $a(t,Mt)}function Ja(t){if(null==t)return 0;if(So(t))return Uo(t)?U(t):t.length;var e=Qu(t);return e==Ft||e==Ht?t.size:Mn(t).length}function Qa(t,e,i){var n=Wc(t)?g:Zn;return i&&vs(t,e,i)&&(e=Q),n(t,ns(e,3))}function to(t,e){if("function"!=typeof e)throw new Wl(it);return t=th(t),function(){if(--t<1)return e.apply(this,arguments)}}function eo(t,e,i){return e=i?Q:e,e=t&&null==e?t.length:e,Zr(t,ft,Q,Q,Q,Q,e)}function io(t,e){var i;if("function"!=typeof e)throw new Wl(it);return t=th(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=Q),i}}function no(t,e,i){e=i?Q:e;var n=Zr(t,ht,Q,Q,Q,Q,Q,e);return n.placeholder=no.placeholder,n}function ro(t,e,i){e=i?Q:e;var n=Zr(t,lt,Q,Q,Q,Q,Q,e);return n.placeholder=ro.placeholder,n}function so(t,e,i){function n(e){var i=f,n=d;return f=d=Q,y=e,p=t.apply(n,i)}function r(t){return y=t,v=ic(o,e),b?n(t):p}function s(t){var i=t-m,n=t-y,r=e-i;return x?_u(r,g-n):r}function a(t){var i=t-m,n=t-y;return m===Q||i>=e||i<0||x&&n>=g}function o(){var t=Lc();return a(t)?h(t):void(v=ic(o,s(t)))}function h(t){return v=Q,_&&f?n(t):(f=d=Q,p)}function l(){v!==Q&&qu(v),y=0,f=m=d=v=Q}function u(){return v===Q?p:h(Lc())}function c(){var t=Lc(),i=a(t);if(f=arguments,d=this,m=t,i){if(v===Q)return r(m);if(x)return v=ic(o,e),n(m)}return v===Q&&(v=ic(o,e)),p}var f,d,g,p,v,m,y=0,b=!1,x=!1,_=!0;if("function"!=typeof t)throw new Wl(it);return e=ih(e)||0,Po(i)&&(b=!!i.leading,x="maxWait"in i,g=x?xu(ih(i.maxWait)||0,e):g,_="trailing"in i?!!i.trailing:_),c.cancel=l,c.flush=u,c}function ao(t){return Zr(t,gt)}function oo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Wl(it);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var a=t.apply(this,n);return i.cache=s.set(r,a),a};return i.cache=new(oo.Cache||ii),i}function ho(t){if("function"!=typeof t)throw new Wl(it);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function lo(t){return io(2,t)}function uo(t,e){if("function"!=typeof t)throw new Wl(it);return e=e===Q?e:th(e),Xn(t,e)}function co(t,e){if("function"!=typeof t)throw new Wl(it);return e=e===Q?0:xu(th(e),0),Xn(function(n){var r=n[e],s=cr(n,0,e);return r&&c(s,r),i(t,this,s)})}function fo(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Wl(it);return Po(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),so(t,e,{leading:n,maxWait:e,trailing:r})}function go(t){return eo(t,1)}function po(t,e){return e=null==e?hl:e,Rc(e,t)}function vo(){if(!arguments.length)return[];var t=arguments[0];return Wc(t)?t:[t]}function mo(t){return Mi(t,!1,!0)}function yo(t,e){return Mi(t,!1,!0,e)}function bo(t){return Mi(t,!0,!0)}function xo(t,e){return Mi(t,!0,!0,e)}function _o(t,e){return null==e||ji(t,e,yh(e))}function wo(t,e){return t===e||t!==t&&e!==e}function Co(t){return Oo(t)&&Zl.call(t,"callee")&&(!ou.call(t,"callee")||Jl.call(t)==Nt)}function So(t){return null!=t&&Io(t.length)&&!Eo(t)}function Oo(t){return Ro(t)&&So(t)}function To(t){return t===!0||t===!1||Ro(t)&&Jl.call(t)==jt}function ko(t){return!!t&&1===t.nodeType&&Ro(t)&&!Vo(t)}function Mo(t){if(So(t)&&(Wc(t)||"string"==typeof t||"function"==typeof t.splice||Hc(t)||Co(t)))return!t.length;var e=Qu(t);if(e==Ft||e==Ht)return!t.size;if(Eu||_s(t))return!bu(t).length;for(var i in t)if(Zl.call(t,i))return!1;return!0}function Ao(t,e){return bn(t,e)}function Do(t,e,i){i="function"==typeof i?i:Q;var n=i?i(t,e):Q;return n===Q?bn(t,e,i):!!n}function Lo(t){return!!Ro(t)&&(Jl.call(t)==Pt||"string"==typeof t.message&&"string"==typeof t.name)}function No(t){return"number"==typeof t&&mu(t)}function Eo(t){var e=Po(t)?Jl.call(t):"";return e==Rt||e==Bt}function jo(t){return"number"==typeof t&&t==th(t)}function Io(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ot}function Po(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ro(t){return!!t&&"object"==typeof t}function Bo(t,e){return t===e||wn(t,e,ss(e))}function Fo(t,e,i){return i="function"==typeof i?i:Q,wn(t,e,ss(e),i)}function zo(t){return Ho(t)&&t!=+t}function Yo(t){if(tc(t))throw new Pl("This method is not supported with core-js. Try https://github.com/es-shims.");return Cn(t)}function Wo(t){return null===t}function Go(t){return null==t}function Ho(t){return"number"==typeof t||Ro(t)&&Jl.call(t)==zt}function Vo(t){if(!Ro(t)||Jl.call(t)!=Yt||z(t))return!1;var e=ru(t);if(null===e)return!0;var i=Zl.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ql.call(i)==Kl}function Xo(t){return jo(t)&&t>=-Ot&&t<=Ot}function Uo(t){return"string"==typeof t||!Wc(t)&&Ro(t)&&Jl.call(t)==Vt}function qo(t){return"symbol"==typeof t||Ro(t)&&Jl.call(t)==Xt}function Zo(t){return t===Q}function $o(t){return Ro(t)&&Qu(t)==Ut}function Ko(t){return Ro(t)&&Jl.call(t)==qt}function Jo(t){if(!t)return[];if(So(t))return Uo(t)?q(t):Sr(t);if(su&&t[su])return Y(t[su]());var e=Qu(t),i=e==Ft?W:e==Ht?V:Lh;return i(t)}function Qo(t){if(!t)return 0===t?t:0;if(t=ih(t),t===St||t===-St){var e=t<0?-1:1;return e*Tt}return t===t?t:0}function th(t){var e=Qo(t),i=e%1;return e===e?i?e-i:e:0}function eh(t){return t?ki(th(t),0,Mt):0}function ih(t){if("number"==typeof t)return t;if(qo(t))return kt;if(Po(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Po(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(we,"");var i=je.test(t);return i||Pe.test(t)?Fi(t.slice(2),i?2:8):Ee.test(t)?kt:+t}function nh(t){return Or(t,bh(t))}function rh(t){return ki(th(t),-Ot,Ot)}function sh(t){return null==t?"":tr(t)}function ah(t,e){var i=Ii(t);return e?Ci(i,e):i}function oh(t,e){return m(t,ns(e,3),Ui)}function hh(t,e){return m(t,ns(e,3),tn)}function lh(t,e){return null==t?t:Vu(t,ns(e,3),bh)}function uh(t,e){return null==t?t:Xu(t,ns(e,3),bh)}function ch(t,e){return t&&Ui(t,ns(e,3))}function fh(t,e){return t&&tn(t,ns(e,3))}function dh(t){return null==t?[]:an(t,yh(t))}function gh(t){return null==t?[]:an(t,bh(t))}function ph(t,e,i){var n=null==t?Q:on(t,e);return n===Q?i:n}function vh(t,e){return null!=t&&ls(t,e,cn)}function mh(t,e){return null!=t&&ls(t,e,fn)}function yh(t){return So(t)?mi(t):Mn(t)}function bh(t){return So(t)?mi(t,!0):An(t)}function xh(t,e){var i={};return e=ns(e,3),Ui(t,function(t,n,r){i[e(t,n,r)]=t}),i}function _h(t,e){var i={};return e=ns(e,3),Ui(t,function(t,n,r){i[n]=e(t,n,r)}),i}function wh(t,e){return Ch(t,ho(ns(e)))}function Ch(t,e){return null==t?{}:Fn(t,ts(t),ns(e))}function Sh(t,e,i){e=ms(e,t)?[e]:ur(e);var n=-1,r=e.length;for(r||(t=Q,r=1);++n<r;){var s=null==t?Q:t[As(e[n])];s===Q&&(n=r,s=i),t=Eo(s)?s.call(t):s}return t}function Oh(t,e,i){return null==t?t:Un(t,e,i)}function Th(t,e,i,n){return n="function"==typeof n?n:Q,null==t?t:Un(t,e,i,n)}function kh(t,e,i){var n=Wc(t)||Zc(t);if(e=ns(e,4),null==i)if(n||Po(t)){var s=t.constructor;i=n?Wc(t)?new s:[]:Eo(s)?Ii(ru(t)):{}}else i={};return(n?r:Ui)(t,function(t,n,r){return e(i,t,n,r)}),i}function Mh(t,e){return null==t||ir(t,e)}function Ah(t,e,i){return null==t?t:nr(t,e,lr(i))}function Dh(t,e,i,n){return n="function"==typeof n?n:Q,null==t?t:nr(t,e,lr(i),n)}function Lh(t){return t?L(t,yh(t)):[]}function Nh(t){return null==t?[]:L(t,bh(t))}function Eh(t,e,i){return i===Q&&(i=e,e=Q),i!==Q&&(i=ih(i),i=i===i?i:0),e!==Q&&(e=ih(e),e=e===e?e:0),ki(ih(t),e,i)}function jh(t,e,i){return e=Qo(e),i===Q?(i=e,e=0):i=Qo(i),t=ih(t),dn(t,e,i)}function Ih(t,e,i){if(i&&"boolean"!=typeof i&&vs(t,e,i)&&(e=i=Q),i===Q&&("boolean"==typeof e?(i=e,e=Q):"boolean"==typeof t&&(i=t,t=Q)),t===Q&&e===Q?(t=0,e=1):(t=Qo(t),e===Q?(e=t,t=0):e=Qo(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var r=Cu();return _u(t+r*(e-t+Bi("1e-"+((r+"").length-1))),e)}return Gn(t,e)}function Ph(t){return wf(sh(t).toLowerCase())}function Rh(t){return t=sh(t),t&&t.replace(Be,en).replace(Oi,"")}function Bh(t,e,i){t=sh(t),e=tr(e);var n=t.length;i=i===Q?n:ki(th(i),0,n);var r=i;return i-=e.length,i>=0&&t.slice(i,r)==e}function Fh(t){return t=sh(t),t&&fe.test(t)?t.replace(ue,nn):t}function zh(t){return t=sh(t),t&&_e.test(t)?t.replace(xe,"\\$&"):t}function Yh(t,e,i){t=sh(t),e=th(e);var n=e?U(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Wr(gu(r),i)+t+Wr(du(r),i)}function Wh(t,e,i){t=sh(t),e=th(e);var n=e?U(t):0;return e&&n<e?t+Wr(e-n,i):t}function Gh(t,e,i){t=sh(t),e=th(e);var n=e?U(t):0;return e&&n<e?Wr(e-n,i)+t:t}function Hh(t,e,i){return i||null==e?e=0:e&&(e=+e),t=sh(t).replace(we,""),wu(t,e||(Ne.test(t)?16:10))}function Vh(t,e,i){return e=(i?vs(t,e,i):e===Q)?1:th(e),Vn(sh(t),e)}function Xh(){var t=arguments,e=sh(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function Uh(t,e,i){return i&&"number"!=typeof i&&vs(t,e,i)&&(e=i=Q),(i=i===Q?Mt:i>>>0)?(t=sh(t),t&&("string"==typeof e||null!=e&&!Uc(e))&&(e=tr(e),!e&&B(t))?cr(q(t),0,i):t.split(e,i)):[]}function qh(t,e,i){return t=sh(t),i=ki(th(i),0,t.length),e=tr(e),t.slice(i,i+e.length)==e}function Zh(t,e,i){var n=S.templateSettings;i&&vs(t,e,i)&&(e=Q),t=sh(t),e=tf({},e,n,yi);var r,s,a=tf({},e.imports,n.imports,yi),o=yh(a),h=L(a,o),l=0,u=e.interpolate||Fe,c="__p += '",f=zl((e.escape||Fe).source+"|"+u.source+"|"+(u===pe?De:Fe).source+"|"+(e.evaluate||Fe).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Li+"]")+"\n";t.replace(f,function(e,i,n,a,o,h){return n||(n=a),c+=t.slice(l,h).replace(ze,P),i&&(r=!0,c+="' +\n__e("+i+") +\n'"),o&&(s=!0,c+="';\n"+o+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=h+e.length,e}),c+="';\n";var g=e.variable;g||(c="with (obj) {\n"+c+"\n}\n"),c=(s?c.replace(ae,""):c).replace(oe,"$1").replace(he,"$1;"),c="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var p=Cf(function(){return Rl(o,d+"return "+c).apply(Q,h)});if(p.source=c,Lo(p))throw p;return p}function $h(t){return sh(t).toLowerCase()}function Kh(t){return sh(t).toUpperCase()}function Jh(t,e,i){if(t=sh(t),t&&(i||e===Q))return t.replace(we,"");if(!t||!(e=tr(e)))return t;var n=q(t),r=q(e),s=E(n,r),a=j(n,r)+1;return cr(n,s,a).join("")}function Qh(t,e,i){if(t=sh(t),t&&(i||e===Q))return t.replace(Se,"");if(!t||!(e=tr(e)))return t;var n=q(t),r=j(n,q(e))+1;return cr(n,0,r).join("")}function tl(t,e,i){if(t=sh(t),t&&(i||e===Q))return t.replace(Ce,"");if(!t||!(e=tr(e)))return t;var n=q(t),r=E(n,q(e));return cr(n,r).join("")}function el(t,e){var i=mt,n=yt;if(Po(e)){var r="separator"in e?e.separator:r;i="length"in e?th(e.length):i,n="omission"in e?tr(e.omission):n}t=sh(t);var s=t.length;if(B(t)){var a=q(t);s=a.length}if(i>=s)return t;var o=i-U(n);if(o<1)return n;var h=a?cr(a,0,o).join(""):t.slice(0,o);if(r===Q)return h+n;if(a&&(o+=h.length-o),Uc(r)){if(t.slice(o).search(r)){var l,u=h;for(r.global||(r=zl(r.source,sh(Le.exec(r))+"g")),r.lastIndex=0;l=r.exec(u);)var c=l.index;h=h.slice(0,c===Q?o:c)}}else if(t.indexOf(tr(r),o)!=o){var f=h.lastIndexOf(r);f>-1&&(h=h.slice(0,f))}return h+n}function il(t){return t=sh(t),t&&ce.test(t)?t.replace(le,rn):t}function nl(t,e,i){return t=sh(t),e=i?Q:e,e===Q?F(t)?K(t):v(t):t.match(e)||[]}function rl(t){var e=t?t.length:0,n=ns();return t=e?u(t,function(t){if("function"!=typeof t[1])throw new Wl(it);return[n(t[0]),t[1]]}):[],Xn(function(n){for(var r=-1;++r<e;){var s=t[r];if(i(s[0],this,n))return i(s[1],this,n)}})}function sl(t){return Ai(Mi(t,!0))}function al(t){return function(){return t}}function ol(t,e){return null==t||t!==t?e:t}function hl(t){return t}function ll(t){return kn("function"==typeof t?t:Mi(t,!0))}function ul(t){return Nn(Mi(t,!0))}function cl(t,e){return En(t,Mi(e,!0))}function fl(t,e,i){var n=yh(e),s=an(e,n);null!=i||Po(e)&&(s.length||!n.length)||(i=e,e=t,t=this,s=an(e,yh(e)));var a=!(Po(i)&&"chain"in i&&!i.chain),o=Eo(t);return r(s,function(i){var n=e[i];t[i]=n,o&&(t.prototype[i]=function(){var e=this.__chain__;if(a||e){var i=t(this.__wrapped__),r=i.__actions__=Sr(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,c([this.value()],arguments))})}),t}function dl(){return Wi._===this&&(Wi._=Ql),this}function gl(){}function pl(t){return t=th(t),Xn(function(e){return Pn(e,t)})}function vl(t){return ms(t)?C(As(t)):zn(t)}function ml(t){return function(e){return null==t?Q:on(t,e)}}function yl(){return[]}function bl(){return!1}function xl(){return{}}function _l(){return""}function wl(){return!0}function Cl(t,e){if(t=th(t),t<1||t>Ot)return[];var i=Mt,n=_u(t,Mt);e=ns(e),t-=Mt;for(var r=M(n,e);++i<t;)e(i);return r}function Sl(t){return Wc(t)?u(t,As):qo(t)?[t]:Sr(rc(t))}function Ol(t){var e=++$l;return sh(t)+e}function Tl(t){return t&&t.length?Yi(t,hl,un):Q}function kl(t,e){return t&&t.length?Yi(t,ns(e,2),un):Q}function Ml(t){return w(t,hl)}function Al(t,e){return w(t,ns(e,2))}function Dl(t){return t&&t.length?Yi(t,hl,Dn):Q}function Ll(t,e){return t&&t.length?Yi(t,ns(e,2),Dn):Q}function Nl(t){return t&&t.length?k(t,hl):0}function El(t,e){return t&&t.length?k(t,ns(e,2)):0}p=p?sn.defaults(Wi.Object(),p,sn.pick(Wi,Di)):Wi;var jl=p.Array,Il=p.Date,Pl=p.Error,Rl=p.Function,Bl=p.Math,Fl=p.Object,zl=p.RegExp,Yl=p.String,Wl=p.TypeError,Gl=jl.prototype,Hl=Rl.prototype,Vl=Fl.prototype,Xl=p["__core-js_shared__"],Ul=function(){var t=/[^.]+$/.exec(Xl&&Xl.keys&&Xl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ql=Hl.toString,Zl=Vl.hasOwnProperty,$l=0,Kl=ql.call(Fl),Jl=Vl.toString,Ql=Wi._,tu=zl("^"+ql.call(Zl).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eu=Vi?p.Buffer:Q,iu=p.Symbol,nu=p.Uint8Array,ru=G(Fl.getPrototypeOf,Fl),su=iu?iu.iterator:Q,au=Fl.create,ou=Vl.propertyIsEnumerable,hu=Gl.splice,lu=iu?iu.isConcatSpreadable:Q,uu=p.clearTimeout!==Wi.clearTimeout&&p.clearTimeout,cu=Il&&Il.now!==Wi.Date.now&&Il.now,fu=p.setTimeout!==Wi.setTimeout&&p.setTimeout,du=Bl.ceil,gu=Bl.floor,pu=Fl.getOwnPropertySymbols,vu=eu?eu.isBuffer:Q,mu=p.isFinite,yu=Gl.join,bu=G(Fl.keys,Fl),xu=Bl.max,_u=Bl.min,wu=p.parseInt,Cu=Bl.random,Su=Gl.reverse,Ou=as(p,"DataView"),Tu=as(p,"Map"),ku=as(p,"Promise"),Mu=as(p,"Set"),Au=as(p,"WeakMap"),Du=as(Fl,"create"),Lu=function(){var t=as(Fl,"defineProperty"),e=as.name;return e&&e.length>2?t:Q}(),Nu=Au&&new Au,Eu=!ou.call({valueOf:1},"valueOf"),ju={},Iu=Ds(Ou),Pu=Ds(Tu),Ru=Ds(ku),Bu=Ds(Mu),Fu=Ds(Au),zu=iu?iu.prototype:Q,Yu=zu?zu.valueOf:Q,Wu=zu?zu.toString:Q;S.templateSettings={escape:de,evaluate:ge,interpolate:pe,variable:"",imports:{_:S}},S.prototype=Z.prototype,S.prototype.constructor=S,$.prototype=Ii(Z.prototype),$.prototype.constructor=$,Me.prototype=Ii(Z.prototype),Me.prototype.constructor=Me,He.prototype.clear=Ve,He.prototype.delete=Xe,He.prototype.get=Ue,He.prototype.has=qe,He.prototype.set=Ze,$e.prototype.clear=Ke,$e.prototype.delete=Je,$e.prototype.get=Qe,$e.prototype.has=ti,$e.prototype.set=ei,ii.prototype.clear=ni,ii.prototype.delete=ri,ii.prototype.get=si,ii.prototype.has=ai,ii.prototype.set=oi,hi.prototype.add=hi.prototype.push=li,hi.prototype.has=ui,ci.prototype.clear=fi,ci.prototype.delete=di,ci.prototype.get=gi,ci.prototype.has=pi,ci.prototype.set=vi;var Gu=Ar(Ui),Hu=Ar(tn,!0),Vu=Dr(),Xu=Dr(!0),Uu=Nu?function(t,e){return Nu.set(t,e),t}:hl,qu=uu||function(t){return Wi.clearTimeout(t)},Zu=Mu&&1/V(new Mu([,-0]))[1]==St?function(t){return new Mu(t)}:gl,$u=Nu?function(t){return Nu.get(t)}:gl,Ku=pu?G(pu,Fl):yl,Ju=pu?function(t){for(var e=[];t;)c(e,Ku(t)),t=ru(t);return e}:yl,Qu=ln;(Ou&&Qu(new Ou(new ArrayBuffer(1)))!=$t||Tu&&Qu(new Tu)!=Ft||ku&&Qu(ku.resolve())!=Wt||Mu&&Qu(new Mu)!=Ht||Au&&Qu(new Au)!=Ut)&&(Qu=function(t){var e=Jl.call(t),i=e==Yt?t.constructor:Q,n=i?Ds(i):Q;if(n)switch(n){case Iu:return $t;case Pu:return Ft;case Ru:return Wt;case Bu:return Ht;case Fu:return Ut}return e});var tc=Xl?Eo:bl,ec=function(){var t=0,e=0;return function(i,n){var r=Lc(),s=xt-(r-e);if(e=r,s>0){if(++t>=bt)return i}else t=0;return Uu(i,n)}}(),ic=fu||function(t,e){return Wi.setTimeout(t,e)},nc=Lu?function(t,e,i){var n=e+"";return Lu(t,"toString",{configurable:!0,enumerable:!1,value:al(ds(n,Ls(hs(n),i)))})}:hl,rc=oo(function(t){t=sh(t);var e=[];return ye.test(t)&&e.push(""),t.replace(be,function(t,i,n,r){e.push(n?r.replace(Ae,"$1"):i||t)}),e}),sc=Xn(function(t,e){return Oo(t)?Ri(t,Xi(e,1,Oo,!0)):[]}),ac=Xn(function(t,e){var i=Ks(e);return Oo(i)&&(i=Q),Oo(t)?Ri(t,Xi(e,1,Oo,!0),ns(i,2)):[]}),oc=Xn(function(t,e){var i=Ks(e);return Oo(i)&&(i=Q),Oo(t)?Ri(t,Xi(e,1,Oo,!0),Q,i):[]}),hc=Xn(function(t){var e=u(t,hr);return e.length&&e[0]===t[0]?gn(e):[]}),lc=Xn(function(t){var e=Ks(t),i=u(t,hr);return e===Ks(i)?e=Q:i.pop(),i.length&&i[0]===t[0]?gn(i,ns(e,2)):[]}),uc=Xn(function(t){var e=Ks(t),i=u(t,hr);return e===Ks(i)?e=Q:i.pop(),i.length&&i[0]===t[0]?gn(i,Q,e):[]}),cc=Xn(ta),fc=Xn(function(t,e){e=Xi(e,1);var i=t?t.length:0,n=Ti(t,e);return Wn(t,u(e,function(t){return ps(t,i)?+t:t}).sort(xr)),n}),dc=Xn(function(t){return er(Xi(t,1,Oo,!0))}),gc=Xn(function(t){var e=Ks(t);return Oo(e)&&(e=Q),er(Xi(t,1,Oo,!0),ns(e,2))}),pc=Xn(function(t){var e=Ks(t);return Oo(e)&&(e=Q),er(Xi(t,1,Oo,!0),Q,e)}),vc=Xn(function(t,e){return Oo(t)?Ri(t,e):[]}),mc=Xn(function(t){return ar(o(t,Oo))}),yc=Xn(function(t){var e=Ks(t);return Oo(e)&&(e=Q),ar(o(t,Oo),ns(e,2))}),bc=Xn(function(t){var e=Ks(t);return Oo(e)&&(e=Q),ar(o(t,Oo),Q,e)}),xc=Xn(wa),_c=Xn(function(t){var e=t.length,i=e>1?t[e-1]:Q;return i="function"==typeof i?(t.pop(),i):Q,Ca(t,i)}),wc=Xn(function(t){t=Xi(t,1);var e=t.length,i=e?t[0]:0,n=this.__wrapped__,r=function(e){return Ti(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Me&&ps(i)?(n=n.slice(i,+i+(e?1:0)),n.__actions__.push({func:Ma,args:[r],thisArg:Q}),new $(n,this.__chain__).thru(function(t){return e&&!t.length&&t.push(Q),t})):this.thru(r)}),Cc=kr(function(t,e,i){Zl.call(t,i)?++t[i]:t[i]=1}),Sc=Pr(Ys),Oc=Pr(Ws),Tc=kr(function(t,e,i){Zl.call(t,i)?t[i].push(e):t[i]=[e]}),kc=Xn(function(t,e,n){var r=-1,s="function"==typeof e,a=ms(e),o=So(t)?jl(t.length):[];return Gu(t,function(t){var h=s?e:a&&null!=t?t[e]:Q;o[++r]=h?i(h,t,n):vn(t,e,n)}),o}),Mc=kr(function(t,e,i){t[i]=e}),Ac=kr(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),Dc=Xn(function(t,e){if(null==t)return[];var i=e.length;return i>1&&vs(t,e[0],e[1])?e=[]:i>2&&vs(e[0],e[1],e[2])&&(e=[e[0]]),Rn(t,Xi(e,1),[])}),Lc=cu||function(){return Wi.Date.now()},Nc=Xn(function(t,e,i){var n=st;if(i.length){var r=H(i,is(Nc));n|=ut}return Zr(t,n,e,i,r)}),Ec=Xn(function(t,e,i){var n=st|at;if(i.length){var r=H(i,is(Ec));n|=ut}return Zr(e,n,t,i,r)}),jc=Xn(function(t,e){return Pi(t,1,e)}),Ic=Xn(function(t,e,i){return Pi(t,ih(e)||0,i)});oo.Cache=ii;var Pc=Xn(function(t,e){e=1==e.length&&Wc(e[0])?u(e[0],D(ns())):u(Xi(e,1),D(ns()));var n=e.length;return Xn(function(r){for(var s=-1,a=_u(r.length,n);++s<a;)r[s]=e[s].call(this,r[s]);return i(t,this,r)})}),Rc=Xn(function(t,e){var i=H(e,is(Rc));return Zr(t,ut,Q,e,i)}),Bc=Xn(function(t,e){var i=H(e,is(Bc));return Zr(t,ct,Q,e,i)}),Fc=Xn(function(t,e){return Zr(t,dt,Q,Q,Q,Xi(e,1))}),zc=Vr(un),Yc=Vr(function(t,e){return t>=e}),Wc=jl.isArray,Gc=qi?D(qi):mn,Hc=vu||bl,Vc=Zi?D(Zi):yn,Xc=$i?D($i):_n,Uc=Ki?D(Ki):Sn,qc=Ji?D(Ji):On,Zc=Qi?D(Qi):Tn,$c=Vr(Dn),Kc=Vr(function(t,e){return t<=e}),Jc=Mr(function(t,e){if(Eu||_s(e)||So(e))return void Or(e,yh(e),t);for(var i in e)Zl.call(e,i)&&xi(t,i,e[i])}),Qc=Mr(function(t,e){Or(e,bh(e),t)}),tf=Mr(function(t,e,i,n){Or(e,bh(e),t,n)}),ef=Mr(function(t,e,i,n){Or(e,yh(e),t,n)}),nf=Xn(function(t,e){return Ti(t,Xi(e,1))}),rf=Xn(function(t){return t.push(Q,yi),i(tf,Q,t)}),sf=Xn(function(t){return t.push(Q,Os),i(uf,Q,t)}),af=Fr(function(t,e,i){t[e]=i},al(hl)),of=Fr(function(t,e,i){Zl.call(t,e)?t[e].push(i):t[e]=[i]},ns),hf=Xn(vn),lf=Mr(function(t,e,i){jn(t,e,i)}),uf=Mr(function(t,e,i,n){jn(t,e,i,n)}),cf=Xn(function(t,e){return null==t?{}:(e=u(Xi(e,1),As),Bn(t,Ri(ts(t),e)))}),ff=Xn(function(t,e){return null==t?{}:Bn(t,u(Xi(e,1),As))}),df=qr(yh),gf=qr(bh),pf=Er(function(t,e,i){return e=e.toLowerCase(),t+(i?Ph(e):e)}),vf=Er(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),mf=Er(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),yf=Nr("toLowerCase"),bf=Er(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),xf=Er(function(t,e,i){return t+(i?" ":"")+wf(e)}),_f=Er(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),wf=Nr("toUpperCase"),Cf=Xn(function(t,e){try{return i(t,Q,e)}catch(t){return Lo(t)?t:new Pl(t)}}),Sf=Xn(function(t,e){return r(Xi(e,1),function(e){e=As(e),t[e]=Nc(t[e],t)}),t}),Of=Rr(),Tf=Rr(!0),kf=Xn(function(t,e){return function(i){return vn(i,t,e)}}),Mf=Xn(function(t,e){return function(i){return vn(t,i,e)}}),Af=Yr(u),Df=Yr(a),Lf=Yr(g),Nf=Hr(),Ef=Hr(!0),jf=zr(function(t,e){return t+e},0),If=Ur("ceil"),Pf=zr(function(t,e){return t/e},1),Rf=Ur("floor"),Bf=zr(function(t,e){return t*e},1),Ff=Ur("round"),zf=zr(function(t,e){return t-e},0);return S.after=to,S.ary=eo,S.assign=Jc,S.assignIn=Qc,S.assignInWith=tf,S.assignWith=ef,S.at=nf,S.before=io,S.bind=Nc,S.bindAll=Sf,S.bindKey=Ec,S.castArray=vo,S.chain=Ta,S.chunk=Es,S.compact=js,S.concat=Is,S.cond=rl,S.conforms=sl,S.constant=al,S.countBy=Cc,S.create=ah,S.curry=no,S.curryRight=ro,S.debounce=so,S.defaults=rf,S.defaultsDeep=sf,S.defer=jc,S.delay=Ic,S.difference=sc,S.differenceBy=ac,S.differenceWith=oc,S.drop=Ps,S.dropRight=Rs,S.dropRightWhile=Bs,S.dropWhile=Fs,S.fill=zs,S.filter=Ra,S.flatMap=Ba,S.flatMapDeep=Fa,S.flatMapDepth=za,S.flatten=Gs,S.flattenDeep=Hs,S.flattenDepth=Vs,S.flip=ao,S.flow=Of,S.flowRight=Tf,S.fromPairs=Xs,S.functions=dh,S.functionsIn=gh,S.groupBy=Tc,S.initial=Zs,S.intersection=hc,S.intersectionBy=lc,S.intersectionWith=uc,S.invert=af,S.invertBy=of,S.invokeMap=kc,S.iteratee=ll,S.keyBy=Mc,S.keys=yh,S.keysIn=bh,S.map=Ha,S.mapKeys=xh,S.mapValues=_h,S.matches=ul,S.matchesProperty=cl,S.memoize=oo,S.merge=lf,S.mergeWith=uf,S.method=kf,S.methodOf=Mf,S.mixin=fl,S.negate=ho,S.nthArg=pl,S.omit=cf,S.omitBy=wh,S.once=lo,S.orderBy=Va,S.over=Af,S.overArgs=Pc,S.overEvery=Df,S.overSome=Lf,S.partial=Rc,S.partialRight=Bc,S.partition=Ac,S.pick=ff,S.pickBy=Ch,S.property=vl,S.propertyOf=ml,S.pull=cc,S.pullAll=ta,S.pullAllBy=ea,S.pullAllWith=ia,S.pullAt=fc,S.range=Nf,S.rangeRight=Ef,S.rearg=Fc,S.reject=qa,S.remove=na,S.rest=uo,S.reverse=ra,S.sampleSize=$a,S.set=Oh,S.setWith=Th,S.shuffle=Ka,S.slice=sa,S.sortBy=Dc,S.sortedUniq=fa,S.sortedUniqBy=da,S.split=Uh,S.spread=co,S.tail=ga,S.take=pa,S.takeRight=va,S.takeRightWhile=ma,S.takeWhile=ya,S.tap=ka,S.throttle=fo,S.thru=Ma,S.toArray=Jo,S.toPairs=df,S.toPairsIn=gf,S.toPath=Sl,S.toPlainObject=nh,S.transform=kh,S.unary=go,S.union=dc,S.unionBy=gc,S.unionWith=pc,S.uniq=ba,S.uniqBy=xa,S.uniqWith=_a,S.unset=Mh,S.unzip=wa,S.unzipWith=Ca,S.update=Ah,S.updateWith=Dh,S.values=Lh,S.valuesIn=Nh,S.without=vc,S.words=nl,S.wrap=po,S.xor=mc,S.xorBy=yc,S.xorWith=bc,S.zip=xc,S.zipObject=Sa,S.zipObjectDeep=Oa,S.zipWith=_c,S.entries=df,S.entriesIn=gf,S.extend=Qc,S.extendWith=tf,fl(S,S),S.add=jf,S.attempt=Cf,S.camelCase=pf,S.capitalize=Ph,S.ceil=If,S.clamp=Eh,S.clone=mo,S.cloneDeep=bo,S.cloneDeepWith=xo,S.cloneWith=yo,S.conformsTo=_o,S.deburr=Rh,S.defaultTo=ol,S.divide=Pf,S.endsWith=Bh,S.eq=wo,S.escape=Fh,S.escapeRegExp=zh,S.every=Pa,S.find=Sc,S.findIndex=Ys,S.findKey=oh,S.findLast=Oc,S.findLastIndex=Ws,S.findLastKey=hh,S.floor=Rf,S.forEach=Ya,S.forEachRight=Wa,S.forIn=lh,S.forInRight=uh,S.forOwn=ch,S.forOwnRight=fh,S.get=ph,S.gt=zc,S.gte=Yc,S.has=vh,S.hasIn=mh,S.head=Us,S.identity=hl,S.includes=Ga,S.indexOf=qs,S.inRange=jh,S.invoke=hf,S.isArguments=Co,S.isArray=Wc,S.isArrayBuffer=Gc,S.isArrayLike=So,S.isArrayLikeObject=Oo,S.isBoolean=To,S.isBuffer=Hc,S.isDate=Vc,S.isElement=ko,S.isEmpty=Mo,S.isEqual=Ao,S.isEqualWith=Do,S.isError=Lo,S.isFinite=No,S.isFunction=Eo,S.isInteger=jo,S.isLength=Io,S.isMap=Xc,S.isMatch=Bo,S.isMatchWith=Fo,S.isNaN=zo,S.isNative=Yo,S.isNil=Go,S.isNull=Wo,S.isNumber=Ho,S.isObject=Po,S.isObjectLike=Ro,S.isPlainObject=Vo,S.isRegExp=Uc,S.isSafeInteger=Xo,S.isSet=qc,S.isString=Uo,S.isSymbol=qo,S.isTypedArray=Zc,S.isUndefined=Zo,S.isWeakMap=$o,S.isWeakSet=Ko,S.join=$s,S.kebabCase=vf,S.last=Ks,S.lastIndexOf=Js,S.lowerCase=mf,S.lowerFirst=yf,S.lt=$c,S.lte=Kc,S.max=Tl,S.maxBy=kl,S.mean=Ml,S.meanBy=Al,S.min=Dl,S.minBy=Ll,S.stubArray=yl,S.stubFalse=bl,S.stubObject=xl,S.stubString=_l,S.stubTrue=wl,S.multiply=Bf,S.nth=Qs,S.noConflict=dl,S.noop=gl,S.now=Lc,S.pad=Yh,S.padEnd=Wh,S.padStart=Gh,S.parseInt=Hh,S.random=Ih,S.reduce=Xa,S.reduceRight=Ua,S.repeat=Vh,S.replace=Xh,S.result=Sh,S.round=Ff,S.runInContext=J,S.sample=Za,S.size=Ja,S.snakeCase=bf,S.some=Qa,S.sortedIndex=aa,S.sortedIndexBy=oa,S.sortedIndexOf=ha,S.sortedLastIndex=la,S.sortedLastIndexBy=ua,S.sortedLastIndexOf=ca,S.startCase=xf,S.startsWith=qh,S.subtract=zf,S.sum=Nl,S.sumBy=El,S.template=Zh,S.times=Cl,S.toFinite=Qo,S.toInteger=th,S.toLength=eh,S.toLower=$h,S.toNumber=ih,S.toSafeInteger=rh,S.toString=sh,S.toUpper=Kh,S.trim=Jh,S.trimEnd=Qh,S.trimStart=tl,S.truncate=el,S.unescape=il,S.uniqueId=Ol,S.upperCase=_f,S.upperFirst=wf,S.each=Ya,S.eachRight=Wa,S.first=Us,fl(S,function(){var t={};return Ui(S,function(e,i){Zl.call(S.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),S.VERSION=tt,r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){S[t].placeholder=S}),r(["drop","take"],function(t,e){Me.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new Me(this);i=i===Q?1:xu(th(i),0);var r=this.clone();return n?r.__takeCount__=_u(i,r.__takeCount__):r.__views__.push({size:_u(i,Mt),type:t+(r.__dir__<0?"Right":"")}),r},Me.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),r(["filter","map","takeWhile"],function(t,e){var i=e+1,n=i==_t||i==Ct;Me.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ns(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}}),r(["head","last"],function(t,e){var i="take"+(e?"Right":"");Me.prototype[t]=function(){return this[i](1).value()[0]}}),r(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");Me.prototype[t]=function(){return this.__filtered__?new Me(this):this[i](1)}}),Me.prototype.compact=function(){return this.filter(hl)},Me.prototype.find=function(t){return this.filter(t).head()},Me.prototype.findLast=function(t){return this.reverse().find(t)},Me.prototype.invokeMap=Xn(function(t,e){return"function"==typeof t?new Me(this):this.map(function(i){return vn(i,t,e)})}),Me.prototype.reject=function(t){return this.filter(ho(ns(t)))},Me.prototype.slice=function(t,e){t=th(t);var i=this;return i.__filtered__&&(t>0||e<0)?new Me(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==Q&&(e=th(e),i=e<0?i.dropRight(-e):i.take(e-t)),i)},Me.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Me.prototype.toArray=function(){return this.take(Mt)},Ui(Me.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),r=S[n?"take"+("last"==e?"Right":""):e],s=n||/^find/.test(e);r&&(S.prototype[e]=function(){var e=this.__wrapped__,a=n?[1]:arguments,o=e instanceof Me,h=a[0],l=o||Wc(e),u=function(t){var e=r.apply(S,c([t],a));return n&&f?e[0]:e};l&&i&&"function"==typeof h&&1!=h.length&&(o=l=!1);var f=this.__chain__,d=!!this.__actions__.length,g=s&&!f,p=o&&!d;if(!s&&l){e=p?e:new Me(this);var v=t.apply(e,a);return v.__actions__.push({func:Ma,args:[u],thisArg:Q}),new $(v,f)}return g&&p?t.apply(this,a):(v=this.thru(u),g?n?v.value()[0]:v.value():v)})}),r(["pop","push","shift","sort","splice","unshift"],function(t){var e=Gl[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);S.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Wc(r)?r:[],t)}return this[i](function(i){return e.apply(Wc(i)?i:[],t)})}}),Ui(Me.prototype,function(t,e){var i=S[e];if(i){var n=i.name+"",r=ju[n]||(ju[n]=[]);r.push({name:e,func:i})}}),ju[Br(Q,at).name]=[{name:"wrapper",func:Q}],Me.prototype.clone=Ye,Me.prototype.reverse=We,Me.prototype.value=Ge,S.prototype.at=wc,S.prototype.chain=Aa,S.prototype.commit=Da,S.prototype.next=La,S.prototype.plant=Ea,S.prototype.reverse=ja,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=Ia,S.prototype.first=S.prototype.head,su&&(S.prototype[su]=Na),S}var Q,tt="4.15.0",et=200,it="Expected a function",nt="__lodash_hash_undefined__",rt="__lodash_placeholder__",st=1,at=2,ot=4,ht=8,lt=16,ut=32,ct=64,ft=128,dt=256,gt=512,pt=1,vt=2,mt=30,yt="...",bt=150,xt=16,_t=1,wt=2,Ct=3,St=1/0,Ot=9007199254740991,Tt=1.7976931348623157e308,kt=NaN,Mt=4294967295,At=Mt-1,Dt=Mt>>>1,Lt=[["ary",ft],["bind",st],["bindKey",at],["curry",ht],["curryRight",lt],["flip",gt],["partial",ut],["partialRight",ct],["rearg",dt]],Nt="[object Arguments]",Et="[object Array]",jt="[object Boolean]",It="[object Date]",Pt="[object Error]",Rt="[object Function]",Bt="[object GeneratorFunction]",Ft="[object Map]",zt="[object Number]",Yt="[object Object]",Wt="[object Promise]",Gt="[object RegExp]",Ht="[object Set]",Vt="[object String]",Xt="[object Symbol]",Ut="[object WeakMap]",qt="[object WeakSet]",Zt="[object ArrayBuffer]",$t="[object DataView]",Kt="[object Float32Array]",Jt="[object Float64Array]",Qt="[object Int8Array]",te="[object Int16Array]",ee="[object Int32Array]",ie="[object Uint8Array]",ne="[object Uint8ClampedArray]",re="[object Uint16Array]",se="[object Uint32Array]",ae=/\b__p \+= '';/g,oe=/\b(__p \+=) '' \+/g,he=/(__e\(.*?\)|\b__t\)) \+\n'';/g,le=/&(?:amp|lt|gt|quot|#39|#96);/g,ue=/[&<>"'`]/g,ce=RegExp(le.source),fe=RegExp(ue.source),de=/<%-([\s\S]+?)%>/g,ge=/<%([\s\S]+?)%>/g,pe=/<%=([\s\S]+?)%>/g,ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,ye=/^\./,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,_e=RegExp(xe.source),we=/^\s+|\s+$/g,Ce=/^\s+/,Se=/\s+$/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Te=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ae=/\\(\\)?/g,De=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Ne=/^0x/i,Ee=/^[-+]0x[0-9a-f]+$/i,je=/^0b[01]+$/i,Ie=/^\[object .+?Constructor\]$/,Pe=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fe=/($^)/,ze=/['\n\r\u2028\u2029\\]/g,Ye="\\ud800-\\udfff",We="\\u0300-\\u036f\\ufe20-\\ufe23",Ge="\\u20d0-\\u20f0",He="\\u2700-\\u27bf",Ve="a-z\\xdf-\\xf6\\xf8-\\xff",Xe="\\xac\\xb1\\xd7\\xf7",Ue="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qe="\\u2000-\\u206f",Ze=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$e="A-Z\\xc0-\\xd6\\xd8-\\xde",Ke="\\ufe0e\\ufe0f",Je=Xe+Ue+qe+Ze,Qe="[']",ti="["+Ye+"]",ei="["+Je+"]",ii="["+We+Ge+"]",ni="\\d+",ri="["+He+"]",si="["+Ve+"]",ai="[^"+Ye+Je+ni+He+Ve+$e+"]",oi="\\ud83c[\\udffb-\\udfff]",hi="(?:"+ii+"|"+oi+")",li="[^"+Ye+"]",ui="(?:\\ud83c[\\udde6-\\uddff]){2}",ci="[\\ud800-\\udbff][\\udc00-\\udfff]",fi="["+$e+"]",di="\\u200d",gi="(?:"+si+"|"+ai+")",pi="(?:"+fi+"|"+ai+")",vi="(?:"+Qe+"(?:d|ll|m|re|s|t|ve))?",mi="(?:"+Qe+"(?:D|LL|M|RE|S|T|VE))?",yi=hi+"?",bi="["+Ke+"]?",xi="(?:"+di+"(?:"+[li,ui,ci].join("|")+")"+bi+yi+")*",_i=bi+yi+xi,wi="(?:"+[ri,ui,ci].join("|")+")"+_i,Ci="(?:"+[li+ii+"?",ii,ui,ci,ti].join("|")+")",Si=RegExp(Qe,"g"),Oi=RegExp(ii,"g"),Ti=RegExp(oi+"(?="+oi+")|"+Ci+_i,"g"),ki=RegExp([fi+"?"+si+"+"+vi+"(?="+[ei,fi,"$"].join("|")+")",pi+"+"+mi+"(?="+[ei,fi+gi,"$"].join("|")+")",fi+"?"+gi+"+"+vi,fi+"+"+mi,ni,wi].join("|"),"g"),Mi=RegExp("["+di+Ye+We+Ge+Ke+"]"),Ai=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Di=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Li=-1,Ni={};
Ni[Kt]=Ni[Jt]=Ni[Qt]=Ni[te]=Ni[ee]=Ni[ie]=Ni[ne]=Ni[re]=Ni[se]=!0,Ni[Nt]=Ni[Et]=Ni[Zt]=Ni[jt]=Ni[$t]=Ni[It]=Ni[Pt]=Ni[Rt]=Ni[Ft]=Ni[zt]=Ni[Yt]=Ni[Gt]=Ni[Ht]=Ni[Vt]=Ni[Ut]=!1;var Ei={};Ei[Nt]=Ei[Et]=Ei[Zt]=Ei[$t]=Ei[jt]=Ei[It]=Ei[Kt]=Ei[Jt]=Ei[Qt]=Ei[te]=Ei[ee]=Ei[Ft]=Ei[zt]=Ei[Yt]=Ei[Gt]=Ei[Ht]=Ei[Vt]=Ei[Xt]=Ei[ie]=Ei[ne]=Ei[re]=Ei[se]=!0,Ei[Pt]=Ei[Rt]=Ei[Ut]=!1;var ji={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"ss"},Ii={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pi={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ri={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bi=parseFloat,Fi=parseInt,zi="object"==typeof global&&global&&global.Object===Object&&global,Yi="object"==typeof self&&self&&self.Object===Object&&self,Wi=zi||Yi||Function("return this")(),Gi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Hi=Gi&&"object"==typeof module&&module&&!module.nodeType&&module,Vi=Hi&&Hi.exports===Gi,Xi=Vi&&zi.process,Ui=function(){try{return Xi&&Xi.binding("util")}catch(t){}}(),qi=Ui&&Ui.isArrayBuffer,Zi=Ui&&Ui.isDate,$i=Ui&&Ui.isMap,Ki=Ui&&Ui.isRegExp,Ji=Ui&&Ui.isSet,Qi=Ui&&Ui.isTypedArray,tn=C("length"),en=S(ji),nn=S(Ii),rn=S(Pi),sn=J();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Wi._=sn,define("lodash",[],function(){return sn})):Hi?((Hi.exports=sn)._=sn,Gi._=sn):Wi._=sn}.call(this),function(){function t(t){this._value=t}function e(t,e,i,n){var r,s,a=Math.pow(10,e);return s=(i(t*a)/a).toFixed(e),n&&(r=new RegExp("0{1,"+n+"}$"),s=s.replace(r,"")),s}function i(t,e,i){var n;return n=e.indexOf("$")>-1?r(t,e,i):e.indexOf("%")>-1?s(t,e,i):e.indexOf(":")>-1?a(t,e):h(t._value,e,i)}function n(t,e){var i,n,r,s,a,h=e,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(e.indexOf(":")>-1)t._value=o(e);else if(e===v)t._value=0;else{for("."!==g[p].delimiters.decimal&&(e=e.replace(/\./g,"").replace(g[p].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+g[p].abbreviations.thousand+"(?:\\)|(\\"+g[p].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+g[p].abbreviations.million+"(?:\\)|(\\"+g[p].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+g[p].abbreviations.billion+"(?:\\)|(\\"+g[p].currency.symbol+")?(?:\\))?)?$"),s=new RegExp("[^a-zA-Z]"+g[p].abbreviations.trillion+"(?:\\)|(\\"+g[p].currency.symbol+")?(?:\\))?)?$"),a=0;a<=l.length&&!(u=e.indexOf(l[a])>-1&&Math.pow(1024,a+1));a++);t._value=(u?u:1)*(h.match(i)?Math.pow(10,3):1)*(h.match(n)?Math.pow(10,6):1)*(h.match(r)?Math.pow(10,9):1)*(h.match(s)?Math.pow(10,12):1)*(e.indexOf("%")>-1?.01:1)*((e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1)*Number(e.replace(/[^0-9\.]+/g,"")),t._value=u?Math.ceil(t._value):t._value}return t._value}function r(t,e,i){var n,r,s=e.indexOf("$"),a=e.indexOf("("),o=e.indexOf("-"),l="";return e.indexOf(" $")>-1?(l=" ",e=e.replace(" $","")):e.indexOf("$ ")>-1?(l=" ",e=e.replace("$ ","")):e=e.replace("$",""),r=h(t._value,e,i),s<=1?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),n=1,(s<a||s<o)&&(n=0),r.splice(n,0,g[p].currency.symbol+l),r=r.join("")):r=g[p].currency.symbol+l+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,l+g[p].currency.symbol),r=r.join("")):r=r+l+g[p].currency.symbol,r}function s(t,e,i){var n,r="",s=100*t._value;return e.indexOf(" %")>-1?(r=" ",e=e.replace(" %","")):e=e.replace("%",""),n=h(s,e,i),n.indexOf(")")>-1?(n=n.split(""),n.splice(-1,0,r+"%"),n=n.join("")):n=n+r+"%",n}function a(t){var e=Math.floor(t._value/60/60),i=Math.floor((t._value-60*e*60)/60),n=Math.round(t._value-60*e*60-60*i);return e+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function o(t){var e=t.split(":"),i=0;return 3===e.length?(i+=60*Number(e[0])*60,i+=60*Number(e[1]),i+=Number(e[2])):2===e.length&&(i+=60*Number(e[0]),i+=Number(e[1])),Number(i)}function h(t,i,n){var r,s,a,o,h,l,u=!1,c=!1,f=!1,d="",m=!1,y=!1,b=!1,x=!1,_=!1,w="",C="",S=Math.abs(t),O=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",k=!1;if(0===t&&null!==v)return v;if(i.indexOf("(")>-1?(u=!0,i=i.slice(1,-1)):i.indexOf("+")>-1&&(c=!0,i=i.replace(/\+/g,"")),i.indexOf("a")>-1&&(m=i.indexOf("aK")>=0,y=i.indexOf("aM")>=0,b=i.indexOf("aB")>=0,x=i.indexOf("aT")>=0,_=m||y||b||x,i.indexOf(" a")>-1?(d=" ",i=i.replace(" a","")):i=i.replace("a",""),S>=Math.pow(10,12)&&!_||x?(d+=g[p].abbreviations.trillion,t/=Math.pow(10,12)):S<Math.pow(10,12)&&S>=Math.pow(10,9)&&!_||b?(d+=g[p].abbreviations.billion,t/=Math.pow(10,9)):S<Math.pow(10,9)&&S>=Math.pow(10,6)&&!_||y?(d+=g[p].abbreviations.million,t/=Math.pow(10,6)):(S<Math.pow(10,6)&&S>=Math.pow(10,3)&&!_||m)&&(d+=g[p].abbreviations.thousand,t/=Math.pow(10,3))),i.indexOf("b")>-1)for(i.indexOf(" b")>-1?(w=" ",i=i.replace(" b","")):i=i.replace("b",""),a=0;a<=O.length;a++)if(r=Math.pow(1024,a),s=Math.pow(1024,a+1),t>=r&&t<s){w+=O[a],r>0&&(t/=r);break}return i.indexOf("o")>-1&&(i.indexOf(" o")>-1?(C=" ",i=i.replace(" o","")):i=i.replace("o",""),C+=g[p].ordinal(t)),i.indexOf("[.]")>-1&&(f=!0,i=i.replace("[.]",".")),o=t.toString().split(".")[0],h=i.split(".")[1],l=i.indexOf(","),h?(h.indexOf("[")>-1?(h=h.replace("]",""),h=h.split("["),T=e(t,h[0].length+h[1].length,n,h[1].length)):T=e(t,h.length,n),o=T.split(".")[0],T=T.split(".")[1].length?g[p].delimiters.decimal+T.split(".")[1]:"",f&&0===Number(T.slice(1))&&(T="")):o=e(t,null,n),o.indexOf("-")>-1&&(o=o.slice(1),k=!0),l>-1&&(o=o.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g[p].delimiters.thousands)),0===i.indexOf(".")&&(o=""),(u&&k?"(":"")+(!u&&k?"-":"")+(!k&&c?"+":"")+o+T+(C?C:"")+(d?d:"")+(w?w:"")+(u&&k?")":"")}function l(t,e){g[t]=e}function u(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)}function c(){var t=Array.prototype.slice.call(arguments);return t.reduce(function(t,e){var i=u(t),n=u(e);return i>n?i:n},-(1/0))}var f,d="1.5.3",g={},p="en",v=null,m="0,0",y="undefined"!=typeof module&&module.exports;f=function(e){return f.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=f.fn.unformat(e)),new t(Number(e))},f.version=d,f.isNumeral=function(e){return e instanceof t},f.language=function(t,e){if(!t)return p;if(t&&!e){if(!g[t])throw new Error("Unknown language : "+t);p=t}return!e&&g[t]||l(t,e),f},f.languageData=function(t){if(!t)return g[p];if(!g[t])throw new Error("Unknown language : "+t);return g[t]},f.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),f.zeroFormat=function(t){v="string"==typeof t?t:null},f.defaultFormat=function(t){m="string"==typeof t?t:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var i,n,r=this.length>>>0,s=!1;for(1<arguments.length&&(n=e,s=!0),i=0;r>i;++i)this.hasOwnProperty(i)&&(s?n=t(n,this[i],i,this):(n=this[i],s=!0));if(!s)throw new TypeError("Reduce of empty array with no initial value");return n}),f.fn=t.prototype={clone:function(){return f(this)},format:function(t,e){return i(this,t?t:m,void 0!==e?e:Math.round)},unformat:function(t){return"[object Number]"===Object.prototype.toString.call(t)?t:n(this,t?t:m)},value:function(){return this._value},valueOf:function(){return this._value},set:function(t){return this._value=Number(t),this},add:function(t){function e(t,e,n,r){return t+i*e}var i=c.call(null,this._value,t);return this._value=[this._value,t].reduce(e,0)/i,this},subtract:function(t){function e(t,e,n,r){return t-i*e}var i=c.call(null,this._value,t);return this._value=[t].reduce(e,this._value*i)/i,this},multiply:function(t){function e(t,e,i,n){var r=c(t,e);return t*r*(e*r)/(r*r)}return this._value=[this._value,t].reduce(e,1),this},divide:function(t){function e(t,e,i,n){var r=c(t,e);return t*r/(e*r)}return this._value=[this._value,t].reduce(e),this},difference:function(t){return Math.abs(f(this._value).subtract(t).value())}},y&&(module.exports=f),"undefined"==typeof ender&&(this.numeral=f),"function"==typeof define&&define.amd&&define("numeral",[],function(){return f})}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("moment",e):t.moment=e()}(this,function(){"use strict";function t(){return dn.apply(null,arguments)}function e(t){dn=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return"[object Object]"===Object.prototype.toString.call(t)}function r(t){var e;for(e in t)return!1;return!0}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function a(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function o(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)o(e,i)&&(t[i]=e[i]);return o(e,"toString")&&(t.toString=e.toString),o(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,i,n){return ve(t,e,i,n,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(t){return null==t._pf&&(t._pf=u()),t._pf}function f(t){if(null==t._isValid){var e=c(t),i=gn.call(e.parsedDateParts,function(t){return null!=t});t._isValid=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function d(t){var e=l(NaN);return null!=t?h(c(e),t):c(e).userInvalidated=!0,e}function g(t){return void 0===t}function p(t,e){var i,n,r;if(g(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),g(e._i)||(t._i=e._i),g(e._f)||(t._f=e._f),g(e._l)||(t._l=e._l),g(e._strict)||(t._strict=e._strict),g(e._tzm)||(t._tzm=e._tzm),g(e._isUTC)||(t._isUTC=e._isUTC),g(e._offset)||(t._offset=e._offset),g(e._pf)||(t._pf=c(e)),g(e._locale)||(t._locale=e._locale),pn.length>0)for(i in pn)n=pn[i],r=e[n],g(r)||(t[n]=r);return t}function v(e){p(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),vn===!1&&(vn=!0,t.updateOffset(this),vn=!1)}function m(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=y(e)),i}function x(t,e,i){var n,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(n=0;n<r;n++)(i&&t[n]!==e[n]||!i&&b(t[n])!==b(e[n]))&&a++;return a+s}function _(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(e,i){var n=!0;return h(function(){return null!=t.deprecationHandler&&t.deprecationHandler(null,e),n&&(_(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),i.apply(this,arguments)},i)}function C(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),mn[e]||(_(i),mn[e]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function O(t){var e,i;for(i in t)e=t[i],S(e)?this[i]=e:this["_"+i]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function T(t,e){var i,r=h({},t);for(i in e)o(e,i)&&(n(t[i])&&n(e[i])?(r[i]={},h(r[i],t[i]),h(r[i],e[i])):null!=e[i]?r[i]=e[i]:delete r[i]);for(i in t)o(t,i)&&!o(e,i)&&n(t[i])&&(r[i]=h({},r[i]));return r}function k(t){null!=t&&this.set(t)}function M(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return S(n)?n.call(e,i):n}function A(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function D(){return this._invalidDate}function L(t){return this._ordinal.replace("%d",t)}function N(t,e,i,n){var r=this._relativeTime[i];return S(r)?r(t,e,i,n):r.replace(/%d/i,t)}function E(t,e){var i=this._relativeTime[t>0?"future":"past"];return S(i)?i(e):i.replace(/%s/i,e)}function j(t,e){var i=t.toLowerCase();Tn[i]=Tn[i+"s"]=Tn[e]=t}function I(t){return"string"==typeof t?Tn[t]||Tn[t.toLowerCase()]:void 0}function P(t){var e,i,n={};for(i in t)o(t,i)&&(e=I(i),e&&(n[e]=t[i]));return n}function R(t,e){kn[t]=e}function B(t){var e=[];for(var i in t)e.push({unit:i,priority:kn[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function F(e,i){return function(n){return null!=n?(Y(this,e,n),t.updateOffset(this,i),this):z(this,e)}}function z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Y(t,e,i){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](i)}function W(t){return t=I(t),S(this[t])?this[t]():this}function G(t,e){if("object"==typeof t){t=P(t);for(var i=B(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=I(t),S(this[t]))return this[t](e);return this}function H(t,e,i){var n=""+Math.abs(t),r=e-n.length,s=t>=0;return(s?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function V(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(Ln[t]=r),e&&(Ln[e[0]]=function(){return H(r.apply(this,arguments),e[1],e[2])}),i&&(Ln[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function X(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function U(t){var e,i,n=t.match(Mn);for(e=0,i=n.length;e<i;e++)Ln[n[e]]?n[e]=Ln[n[e]]:n[e]=X(n[e]);return function(e){var r,s="";for(r=0;r<i;r++)s+=n[r]instanceof Function?n[r].call(e,t):n[r];return s}}function q(t,e){return t.isValid()?(e=Z(e,t.localeData()),Dn[e]=Dn[e]||U(e),Dn[e](t)):t.localeData().invalidDate()}function Z(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(An.lastIndex=0;n>=0&&An.test(t);)t=t.replace(An,i),An.lastIndex=0,n-=1;return t}function $(t,e,i){Zn[t]=S(e)?e:function(t,n){return t&&i?i:e}}function K(t,e){return o(Zn,t)?Zn[t](e._strict,e._locale):new RegExp(J(t))}function J(t){return Q(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tt(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(n=function(t,i){i[e]=b(t)}),i=0;i<t.length;i++)$n[t[i]]=n}function et(t,e){tt(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function it(t,e,i){null!=e&&o($n,t)&&$n[t](e,i._a,i,t)}function nt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function rt(t,e){return i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||ar).test(e)?"format":"standalone"][t.month()]}function st(t,e){return i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[ar.test(e)?"format":"standalone"][t.month()]}function at(t,e,i){var n,r,s,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=l([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?(r=bn.call(this._shortMonthsParse,a),r!==-1?r:null):(r=bn.call(this._longMonthsParse,a),r!==-1?r:null):"MMM"===e?(r=bn.call(this._shortMonthsParse,a),r!==-1?r:(r=bn.call(this._longMonthsParse,a),r!==-1?r:null)):(r=bn.call(this._longMonthsParse,a),r!==-1?r:(r=bn.call(this._shortMonthsParse,a),r!==-1?r:null))}function ot(t,e,i){var n,r,s;if(this._monthsParseExact)return at.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=l([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ht(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return i=Math.min(t.date(),nt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function lt(e){return null!=e?(ht(this,e),t.updateOffset(this,!0),this):z(this,"Month")}function ut(){return nt(this.year(),this.month())}function ct(t){return this._monthsParseExact?(o(this,"_monthsRegex")||dt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=lr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(t){return this._monthsParseExact?(o(this,"_monthsRegex")||dt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=ur),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function dt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],s=[];for(e=0;e<12;e++)i=l([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),s.sort(t),e=0;e<12;e++)n[e]=Q(n[e]),r[e]=Q(r[e]);for(e=0;e<24;e++)s[e]=Q(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function gt(t){return pt(t)?366:365}function pt(t){return t%4===0&&t%100!==0||t%400===0}function vt(){return pt(this.year())}function mt(t,e,i,n,r,s,a){var o=new Date(t,e,i,n,r,s,a);return t<100&&t>=0&&isFinite(o.getFullYear())&&o.setFullYear(t),o}function yt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,i){var n=7+e-i,r=(7+yt(t,0,n).getUTCDay()-e)%7;return-r+n-1}function xt(t,e,i,n,r){var s,a,o=(7+i-n)%7,h=bt(t,n,r),l=1+7*(e-1)+o+h;return l<=0?(s=t-1,a=gt(s)+l):l>gt(t)?(s=t+1,a=l-gt(t)):(s=t,a=l),{year:s,dayOfYear:a}}function _t(t,e,i){var n,r,s=bt(t.year(),e,i),a=Math.floor((t.dayOfYear()-s-1)/7)+1;return a<1?(r=t.year()-1,n=a+wt(r,e,i)):a>wt(t.year(),e,i)?(n=a-wt(t.year(),e,i),r=t.year()+1):(r=t.year(),n=a),{week:n,year:r}}function wt(t,e,i){var n=bt(t,e,i),r=bt(t+1,e,i);return(gt(t)-n+r)/7}function Ct(t){return _t(t,this._week.dow,this._week.doy).week}function St(){return this._week.dow}function Ot(){return this._week.doy}function Tt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function kt(t){var e=_t(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Mt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function At(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Dt(t,e){return i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function Lt(t){return this._weekdaysShort[t.day()]}function Nt(t){return this._weekdaysMin[t.day()]}function Et(t,e,i){var n,r,s,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=l([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?(r=bn.call(this._weekdaysParse,a),r!==-1?r:null):"ddd"===e?(r=bn.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=bn.call(this._minWeekdaysParse,a),r!==-1?r:null):"dddd"===e?(r=bn.call(this._weekdaysParse,a),r!==-1?r:(r=bn.call(this._shortWeekdaysParse,a),r!==-1?r:(r=bn.call(this._minWeekdaysParse,a),r!==-1?r:null))):"ddd"===e?(r=bn.call(this._shortWeekdaysParse,a),r!==-1?r:(r=bn.call(this._weekdaysParse,a),r!==-1?r:(r=bn.call(this._minWeekdaysParse,a),r!==-1?r:null))):(r=bn.call(this._minWeekdaysParse,a),r!==-1?r:(r=bn.call(this._weekdaysParse,a),r!==-1?r:(r=bn.call(this._shortWeekdaysParse,a),r!==-1?r:null)))}function jt(t,e,i){var n,r,s;if(this._weekdaysParseExact)return Et.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=l([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function It(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Mt(t,this.localeData()),this.add(t-e,"d")):e}function Pt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Rt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=At(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Bt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=vr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ft(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=mr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zt(t){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Yt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=yr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Yt(){function t(t,e){return e.length-t.length}var e,i,n,r,s,a=[],o=[],h=[],u=[];for(e=0;e<7;e++)i=l([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),s=this.weekdays(i,""),a.push(n),o.push(r),h.push(s),u.push(n),u.push(r),u.push(s);for(a.sort(t),o.sort(t),h.sort(t),u.sort(t),e=0;e<7;e++)o[e]=Q(o[e]),h[e]=Q(h[e]),u[e]=Q(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Wt(){return this.hours()%12||12}function Gt(){return this.hours()||24}function Ht(t,e){V(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Vt(t,e){return e._meridiemParse}function Xt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Ut(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function qt(t){return t?t.toLowerCase().replace("_","-"):t}function Zt(t){for(var e,i,n,r,s=0;s<t.length;){for(r=qt(t[s]).split("-"),e=r.length,i=qt(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=$t(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&x(r,i,!0)>=e-1)break;e--}s++}return null}function $t(t){var e=null;if(!Cr[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=br._abbr,require("./locale/"+t),Kt(e)}catch(t){}return Cr[t]}function Kt(t,e){var i;return t&&(i=g(e)?te(t):Jt(t,e),i&&(br=i)),br._abbr}function Jt(t,e){if(null!==e){var i=wr;return e.abbr=t,null!=Cr[t]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Cr[t]._config):null!=e.parentLocale&&(null!=Cr[e.parentLocale]?i=Cr[e.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Cr[t]=new k(T(i,e)),Kt(t),Cr[t]}return delete Cr[t],null}function Qt(t,e){if(null!=e){var i,n=wr;null!=Cr[t]&&(n=Cr[t]._config),e=T(n,e),i=new k(e),i.parentLocale=Cr[t],Cr[t]=i,Kt(t)}else null!=Cr[t]&&(null!=Cr[t].parentLocale?Cr[t]=Cr[t].parentLocale:null!=Cr[t]&&delete Cr[t]);return Cr[t]}function te(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return br;if(!i(t)){if(e=$t(t))return e;t=[t]}return Zt(t)}function ee(){return yn(Cr)}function ie(t){var e,i=t._a;return i&&c(t).overflow===-2&&(e=i[Jn]<0||i[Jn]>11?Jn:i[Qn]<1||i[Qn]>nt(i[Kn],i[Jn])?Qn:i[tr]<0||i[tr]>24||24===i[tr]&&(0!==i[er]||0!==i[ir]||0!==i[nr])?tr:i[er]<0||i[er]>59?er:i[ir]<0||i[ir]>59?ir:i[nr]<0||i[nr]>999?nr:-1,c(t)._overflowDayOfYear&&(e<Kn||e>Qn)&&(e=Qn),c(t)._overflowWeeks&&e===-1&&(e=rr),c(t)._overflowWeekday&&e===-1&&(e=sr),c(t).overflow=e),t}function ne(t){var e,i,n,r,s,a,o=t._i,h=Sr.exec(o)||Or.exec(o);if(h){for(c(t).iso=!0,e=0,i=kr.length;e<i;e++)if(kr[e][1].exec(h[1])){r=kr[e][0],n=kr[e][2]!==!1;break}if(null==r)return void(t._isValid=!1);if(h[3]){for(e=0,i=Mr.length;e<i;e++)if(Mr[e][1].exec(h[3])){s=(h[2]||" ")+Mr[e][0];break}if(null==s)return void(t._isValid=!1)}if(!n&&null!=s)return void(t._isValid=!1);if(h[4]){if(!Tr.exec(h[4]))return void(t._isValid=!1);a="Z"}t._f=r+(s||"")+(a||""),le(t)}else t._isValid=!1}function re(e){var i=Ar.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(ne(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function se(t,e,i){return null!=t?t:null!=e?e:i}function ae(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function oe(t){var e,i,n,r,s=[];if(!t._d){for(n=ae(t),t._w&&null==t._a[Qn]&&null==t._a[Jn]&&he(t),t._dayOfYear&&(r=se(t._a[Kn],n[Kn]),t._dayOfYear>gt(r)&&(c(t)._overflowDayOfYear=!0),i=yt(r,0,t._dayOfYear),t._a[Jn]=i.getUTCMonth(),t._a[Qn]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[tr]&&0===t._a[er]&&0===t._a[ir]&&0===t._a[nr]&&(t._nextDay=!0,t._a[tr]=0),t._d=(t._useUTC?yt:mt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[tr]=24)}}function he(t){var e,i,n,r,s,a,o,h;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,a=4,i=se(e.GG,t._a[Kn],_t(me(),1,4).year),n=se(e.W,1),r=se(e.E,1),(r<1||r>7)&&(h=!0)):(s=t._locale._week.dow,a=t._locale._week.doy,i=se(e.gg,t._a[Kn],_t(me(),s,a).year),n=se(e.w,1),null!=e.d?(r=e.d,(r<0||r>6)&&(h=!0)):null!=e.e?(r=e.e+s,(e.e<0||e.e>6)&&(h=!0)):r=s),n<1||n>wt(i,s,a)?c(t)._overflowWeeks=!0:null!=h?c(t)._overflowWeekday=!0:(o=xt(i,n,r,s,a),t._a[Kn]=o.year,t._dayOfYear=o.dayOfYear)}function le(e){if(e._f===t.ISO_8601)return void ne(e);e._a=[],c(e).empty=!0;var i,n,r,s,a,o=""+e._i,h=o.length,l=0;for(r=Z(e._f,e._locale).match(Mn)||[],i=0;i<r.length;i++)s=r[i],n=(o.match(K(s,e))||[])[0],n&&(a=o.substr(0,o.indexOf(n)),a.length>0&&c(e).unusedInput.push(a),o=o.slice(o.indexOf(n)+n.length),l+=n.length),Ln[s]?(n?c(e).empty=!1:c(e).unusedTokens.push(s),it(s,n,e)):e._strict&&!n&&c(e).unusedTokens.push(s);c(e).charsLeftOver=h-l,o.length>0&&c(e).unusedInput.push(o),e._a[tr]<=12&&c(e).bigHour===!0&&e._a[tr]>0&&(c(e).bigHour=void 0),c(e).parsedDateParts=e._a.slice(0),c(e).meridiem=e._meridiem,e._a[tr]=ue(e._locale,e._a[tr],e._meridiem),oe(e),ie(e)}function ue(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function ce(t){var e,i,n,r,s;if(0===t._f.length)return c(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],le(e),f(e)&&(s+=c(e).charsLeftOver,s+=10*c(e).unusedTokens.length,c(e).score=s,(null==n||s<n)&&(n=s,i=e));h(t,i||e)}function fe(t){if(!t._d){var e=P(t._i);t._a=a([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),oe(t)}}function de(t){var e=new v(ie(ge(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function ge(t){var e=t._i,n=t._f;return t._locale=t._locale||te(t._l),null===e||void 0===n&&""===e?d({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),m(e)?new v(ie(e)):(i(n)?ce(t):s(e)?t._d=e:n?le(t):pe(t),f(t)||(t._d=null),t))}function pe(e){var n=e._i;void 0===n?e._d=new Date(t.now()):s(n)?e._d=new Date(n.valueOf()):"string"==typeof n?re(e):i(n)?(e._a=a(n.slice(0),function(t){return parseInt(t,10)}),oe(e)):"object"==typeof n?fe(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function ve(t,e,s,a,o){var h={};return"boolean"==typeof s&&(a=s,s=void 0),(n(t)&&r(t)||i(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=o,h._l=s,h._i=t,h._f=e,h._strict=a,de(h)}function me(t,e,i,n){return ve(t,e,i,n,!1)}function ye(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return me();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function be(){var t=[].slice.call(arguments,0);return ye("isBefore",t)}function xe(){var t=[].slice.call(arguments,0);return ye("isAfter",t)}function _e(t){var e=P(t),i=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||0,a=e.day||0,o=e.hour||0,h=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*h+1e3*o*60*60,this._days=+a+7*s,this._months=+r+3*n+12*i,this._data={},this._locale=te(),this._bubble()}function we(t){return t instanceof _e}function Ce(t,e){V(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,
i="-"),i+H(~~(t/60),2)+e+H(~~t%60,2)})}function Se(t,e){var i=(e||"").match(t)||[],n=i[i.length-1]||[],r=(n+"").match(Er)||["-",0,0],s=+(60*r[1])+b(r[2]);return"+"===r[0]?s:-s}function Oe(e,i){var n,r;return i._isUTC?(n=i.clone(),r=(m(e)||s(e)?e.valueOf():me(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),t.updateOffset(n,!1),n):me(e).local()}function Te(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function ke(e,i){var n,r=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Se(Xn,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&i&&(n=Te(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!i||this._changeInProgress?He(this,Be(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Te(this):null!=e?this:NaN}function Me(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ae(t){return this.utcOffset(0,t)}function De(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Te(this),"m")),this}function Le(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Se(Vn,this._i)),this}function Ne(t){return!!this.isValid()&&(t=t?me(t).utcOffset():0,(this.utcOffset()-t)%60===0)}function Ee(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function je(){if(!g(this._isDSTShifted))return this._isDSTShifted;var t={};if(p(t,this),t=ge(t),t._a){var e=t._isUTC?l(t._a):me(t._a);this._isDSTShifted=this.isValid()&&x(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ie(){return!!this.isValid()&&!this._isUTC}function Pe(){return!!this.isValid()&&this._isUTC}function Re(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Be(t,e){var i,n,r,s=t,a=null;return we(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(s={},e?s[e]=t:s.milliseconds=t):(a=jr.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:b(a[Qn])*i,h:b(a[tr])*i,m:b(a[er])*i,s:b(a[ir])*i,ms:b(a[nr])*i}):(a=Ir.exec(t))?(i="-"===a[1]?-1:1,s={y:Fe(a[2],i),M:Fe(a[3],i),w:Fe(a[4],i),d:Fe(a[5],i),h:Fe(a[6],i),m:Fe(a[7],i),s:Fe(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Ye(me(s.from),me(s.to)),s={},s.ms=r.milliseconds,s.M=r.months),n=new _e(s),we(t)&&o(t,"_locale")&&(n._locale=t._locale),n}function Fe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function ze(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ye(t,e){var i;return t.isValid()&&e.isValid()?(e=Oe(e,t),t.isBefore(e)?i=ze(t,e):(i=ze(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function We(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Ge(t,e){return function(i,n){var r,s;return null===n||isNaN(+n)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=i,i=n,n=s),i="string"==typeof i?+i:i,r=Be(i,n),He(this,r,t),this}}function He(e,i,n,r){var s=i._milliseconds,a=We(i._days),o=We(i._months);e.isValid()&&(r=null==r||r,s&&e._d.setTime(e._d.valueOf()+s*n),a&&Y(e,"Date",z(e,"Date")+a*n),o&&ht(e,z(e,"Month")+o*n),r&&t.updateOffset(e,a||o))}function Ve(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Xe(e,i){var n=e||me(),r=Oe(n,this).startOf("day"),s=t.calendarFormat(this,r)||"sameElse",a=i&&(S(i[s])?i[s].call(this,n):i[s]);return this.format(a||this.localeData().calendar(s,this,me(n)))}function Ue(){return new v(this)}function qe(t,e){var i=m(t)?t:me(t);return!(!this.isValid()||!i.isValid())&&(e=I(g(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function Ze(t,e){var i=m(t)?t:me(t);return!(!this.isValid()||!i.isValid())&&(e=I(g(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function $e(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function Ke(t,e){var i,n=m(t)?t:me(t);return!(!this.isValid()||!n.isValid())&&(e=I(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function Je(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Qe(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ti(t,e,i){var n,r,s,a;return this.isValid()?(n=Oe(t,this),n.isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),e=I(e),"year"===e||"month"===e||"quarter"===e?(a=ei(this,n),"quarter"===e?a/=3:"year"===e&&(a/=12)):(s=this-n,a="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-r)/864e5:"week"===e?(s-r)/6048e5:s),i?a:y(a)):NaN):NaN}function ei(t,e){var i,n,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return e-s<0?(i=t.clone().add(r-1,"months"),n=(e-s)/(s-i)):(i=t.clone().add(r+1,"months"),n=(e-s)/(i-s)),-(r+n)||0}function ii(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ni(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?S(Date.prototype.toISOString)?this.toDate().toISOString():q(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):q(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ri(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=q(this,e);return this.localeData().postformat(i)}function si(t,e){return this.isValid()&&(m(t)&&t.isValid()||me(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ai(t){return this.from(me(),t)}function oi(t,e){return this.isValid()&&(m(t)&&t.isValid()||me(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function hi(t){return this.to(me(),t)}function li(t){var e;return void 0===t?this._locale._abbr:(e=te(t),null!=e&&(this._locale=e),this)}function ui(){return this._locale}function ci(t){switch(t=I(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function fi(t){return t=I(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function di(){return this._d.valueOf()-6e4*(this._offset||0)}function gi(){return Math.floor(this.valueOf()/1e3)}function pi(){return new Date(this.valueOf())}function vi(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function mi(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function yi(){return this.isValid()?this.toISOString():null}function bi(){return f(this)}function xi(){return h({},c(this))}function _i(){return c(this).overflow}function wi(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(t,e){V(0,[t,t.length],0,e)}function Si(t){return Mi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Oi(t){return Mi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Ti(){return wt(this.year(),1,4)}function ki(){var t=this.localeData()._week;return wt(this.year(),t.dow,t.doy)}function Mi(t,e,i,n,r){var s;return null==t?_t(this,n,r).year:(s=wt(t,n,r),e>s&&(e=s),Ai.call(this,t,e,i,n,r))}function Ai(t,e,i,n,r){var s=xt(t,e,i,n,r),a=yt(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Di(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Li(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Ni(t,e){e[nr]=b(1e3*("0."+t))}function Ei(){return this._isUTC?"UTC":""}function ji(){return this._isUTC?"Coordinated Universal Time":""}function Ii(t){return me(1e3*t)}function Pi(){return me.apply(null,arguments).parseZone()}function Ri(t){return t}function Bi(t,e,i,n){var r=te(),s=l().set(n,e);return r[i](s,t)}function Fi(t,e,i){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Bi(t,e,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Bi(t,n,i,"month");return r}function zi(t,e,i,n){"boolean"==typeof t?("number"==typeof e&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,"number"==typeof e&&(i=e,e=void 0),e=e||"");var r=te(),s=t?r._week.dow:0;if(null!=i)return Bi(e,(i+s)%7,n,"day");var a,o=[];for(a=0;a<7;a++)o[a]=Bi(e,(a+s)%7,n,"day");return o}function Yi(t,e){return Fi(t,e,"months")}function Wi(t,e){return Fi(t,e,"monthsShort")}function Gi(t,e,i){return zi(t,e,i,"weekdays")}function Hi(t,e,i){return zi(t,e,i,"weekdaysShort")}function Vi(t,e,i){return zi(t,e,i,"weekdaysMin")}function Xi(){var t=this._data;return this._milliseconds=Ur(this._milliseconds),this._days=Ur(this._days),this._months=Ur(this._months),t.milliseconds=Ur(t.milliseconds),t.seconds=Ur(t.seconds),t.minutes=Ur(t.minutes),t.hours=Ur(t.hours),t.months=Ur(t.months),t.years=Ur(t.years),this}function Ui(t,e,i,n){var r=Be(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function qi(t,e){return Ui(this,t,e,1)}function Zi(t,e){return Ui(this,t,e,-1)}function $i(t){return t<0?Math.floor(t):Math.ceil(t)}function Ki(){var t,e,i,n,r,s=this._milliseconds,a=this._days,o=this._months,h=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*$i(Qi(o)+a),a=0,o=0),h.milliseconds=s%1e3,t=y(s/1e3),h.seconds=t%60,e=y(t/60),h.minutes=e%60,i=y(e/60),h.hours=i%24,a+=y(i/24),r=y(Ji(a)),o+=r,a-=$i(Qi(r)),n=y(o/12),o%=12,h.days=a,h.months=o,h.years=n,this}function Ji(t){return 4800*t/146097}function Qi(t){return 146097*t/4800}function tn(t){var e,i,n=this._milliseconds;if(t=I(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+Ji(e),"month"===t?i:i/12;switch(e=this._days+Math.round(Qi(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function en(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12)}function nn(t){return function(){return this.as(t)}}function rn(t){return t=I(t),this[t+"s"]()}function sn(t){return function(){return this._data[t]}}function an(){return y(this.days()/7)}function on(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function hn(t,e,i){var n=Be(t).abs(),r=ls(n.as("s")),s=ls(n.as("m")),a=ls(n.as("h")),o=ls(n.as("d")),h=ls(n.as("M")),l=ls(n.as("y")),u=r<us.s&&["s",r]||s<=1&&["m"]||s<us.m&&["mm",s]||a<=1&&["h"]||a<us.h&&["hh",a]||o<=1&&["d"]||o<us.d&&["dd",o]||h<=1&&["M"]||h<us.M&&["MM",h]||l<=1&&["y"]||["yy",l];return u[2]=e,u[3]=+t>0,u[4]=i,on.apply(null,u)}function ln(t){return void 0===t?ls:"function"==typeof t&&(ls=t,!0)}function un(t,e){return void 0!==us[t]&&(void 0===e?us[t]:(us[t]=e,!0))}function cn(t){var e=this.localeData(),i=hn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function fn(){var t,e,i,n=cs(this._milliseconds)/1e3,r=cs(this._days),s=cs(this._months);t=y(n/60),e=y(t/60),n%=60,t%=60,i=y(s/12),s%=12;var a=i,o=s,h=r,l=e,u=t,c=n,f=this.asSeconds();return f?(f<0?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(h?h+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var dn,gn;gn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var pn=t.momentProperties=[],vn=!1,mn={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var yn;yn=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)o(t,e)&&i.push(e);return i};var bn,xn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},_n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},wn="Invalid date",Cn="%d",Sn=/\d{1,2}/,On={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Tn={},kn={},Mn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,An=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Dn={},Ln={},Nn=/\d/,En=/\d\d/,jn=/\d{3}/,In=/\d{4}/,Pn=/[+-]?\d{6}/,Rn=/\d\d?/,Bn=/\d\d\d\d?/,Fn=/\d\d\d\d\d\d?/,zn=/\d{1,3}/,Yn=/\d{1,4}/,Wn=/[+-]?\d{1,6}/,Gn=/\d+/,Hn=/[+-]?\d+/,Vn=/Z|[+-]\d\d:?\d\d/gi,Xn=/Z|[+-]\d\d(?::?\d\d)?/gi,Un=/[+-]?\d+(\.\d{1,3})?/,qn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zn={},$n={},Kn=0,Jn=1,Qn=2,tr=3,er=4,ir=5,nr=6,rr=7,sr=8;bn=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),V("MMMM",0,0,function(t){return this.localeData().months(this,t)}),j("month","M"),R("month",8),$("M",Rn),$("MM",Rn,En),$("MMM",function(t,e){return e.monthsShortRegex(t)}),$("MMMM",function(t,e){return e.monthsRegex(t)}),tt(["M","MM"],function(t,e){e[Jn]=b(t)-1}),tt(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[Jn]=r:c(i).invalidMonth=t});var ar=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,or="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),hr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),lr=qn,ur=qn;V("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),j("year","y"),R("year",1),$("Y",Hn),$("YY",Rn,En),$("YYYY",Yn,In),$("YYYYY",Wn,Pn),$("YYYYYY",Wn,Pn),tt(["YYYYY","YYYYYY"],Kn),tt("YYYY",function(e,i){i[Kn]=2===e.length?t.parseTwoDigitYear(e):b(e)}),tt("YY",function(e,i){i[Kn]=t.parseTwoDigitYear(e)}),tt("Y",function(t,e){e[Kn]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)};var cr=F("FullYear",!0);V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),j("week","w"),j("isoWeek","W"),R("week",5),R("isoWeek",5),$("w",Rn),$("ww",Rn,En),$("W",Rn),$("WW",Rn,En),et(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=b(t)});var fr={dow:0,doy:6};V("d",0,"do","day"),V("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),V("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),V("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),j("day","d"),j("weekday","e"),j("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),$("d",Rn),$("e",Rn),$("E",Rn),$("dd",function(t,e){return e.weekdaysMinRegex(t)}),$("ddd",function(t,e){return e.weekdaysShortRegex(t)}),$("dddd",function(t,e){return e.weekdaysRegex(t)}),et(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:c(i).invalidWeekday=t}),et(["d","e","E"],function(t,e,i,n){e[n]=b(t)});var dr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),gr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),pr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),vr=qn,mr=qn,yr=qn;V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Wt),V("k",["kk",2],0,Gt),V("hmm",0,0,function(){return""+Wt.apply(this)+H(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Wt.apply(this)+H(this.minutes(),2)+H(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+H(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+H(this.minutes(),2)+H(this.seconds(),2)}),Ht("a",!0),Ht("A",!1),j("hour","h"),R("hour",13),$("a",Vt),$("A",Vt),$("H",Rn),$("h",Rn),$("HH",Rn,En),$("hh",Rn,En),$("hmm",Bn),$("hmmss",Fn),$("Hmm",Bn),$("Hmmss",Fn),tt(["H","HH"],tr),tt(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),tt(["h","hh"],function(t,e,i){e[tr]=b(t),c(i).bigHour=!0}),tt("hmm",function(t,e,i){var n=t.length-2;e[tr]=b(t.substr(0,n)),e[er]=b(t.substr(n)),c(i).bigHour=!0}),tt("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[tr]=b(t.substr(0,n)),e[er]=b(t.substr(n,2)),e[ir]=b(t.substr(r)),c(i).bigHour=!0}),tt("Hmm",function(t,e,i){var n=t.length-2;e[tr]=b(t.substr(0,n)),e[er]=b(t.substr(n))}),tt("Hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[tr]=b(t.substr(0,n)),e[er]=b(t.substr(n,2)),e[ir]=b(t.substr(r))});var br,xr=/[ap]\.?m?\.?/i,_r=F("Hours",!0),wr={calendar:xn,longDateFormat:_n,invalidDate:wn,ordinal:Cn,ordinalParse:Sn,relativeTime:On,months:or,monthsShort:hr,week:fr,weekdays:dr,weekdaysMin:pr,weekdaysShort:gr,meridiemParse:xr},Cr={},Sr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Or=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Tr=/Z|[+-]\d\d(?::?\d\d)?/,kr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Mr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ar=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=w("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){};var Dr=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=me.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:d()}),Lr=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=me.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:d()}),Nr=function(){return Date.now?Date.now():+new Date};Ce("Z",":"),Ce("ZZ",""),$("Z",Xn),$("ZZ",Xn),tt(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Se(Xn,t)});var Er=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var jr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Ir=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Be.fn=_e.prototype;var Pr=Ge(1,"add"),Rr=Ge(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Br=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ci("gggg","weekYear"),Ci("ggggg","weekYear"),Ci("GGGG","isoWeekYear"),Ci("GGGGG","isoWeekYear"),j("weekYear","gg"),j("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),$("G",Hn),$("g",Hn),$("GG",Rn,En),$("gg",Rn,En),$("GGGG",Yn,In),$("gggg",Yn,In),$("GGGGG",Wn,Pn),$("ggggg",Wn,Pn),et(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=b(t)}),et(["gg","GG"],function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)}),V("Q",0,"Qo","quarter"),j("quarter","Q"),R("quarter",7),$("Q",Nn),tt("Q",function(t,e){e[Jn]=3*(b(t)-1)}),V("D",["DD",2],"Do","date"),j("date","D"),R("date",9),$("D",Rn),$("DD",Rn,En),$("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),tt(["D","DD"],Qn),tt("Do",function(t,e){e[Qn]=b(t.match(Rn)[0],10)});var Fr=F("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),j("dayOfYear","DDD"),R("dayOfYear",4),$("DDD",zn),$("DDDD",jn),tt(["DDD","DDDD"],function(t,e,i){i._dayOfYear=b(t)}),V("m",["mm",2],0,"minute"),j("minute","m"),R("minute",14),$("m",Rn),$("mm",Rn,En),tt(["m","mm"],er);var zr=F("Minutes",!1);V("s",["ss",2],0,"second"),j("second","s"),R("second",15),$("s",Rn),$("ss",Rn,En),tt(["s","ss"],ir);var Yr=F("Seconds",!1);V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),j("millisecond","ms"),R("millisecond",16),$("S",zn,Nn),$("SS",zn,En),$("SSS",zn,jn);var Wr;for(Wr="SSSS";Wr.length<=9;Wr+="S")$(Wr,Gn);for(Wr="S";Wr.length<=9;Wr+="S")tt(Wr,Ni);var Gr=F("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var Hr=v.prototype;Hr.add=Pr,Hr.calendar=Xe,Hr.clone=Ue,Hr.diff=ti,Hr.endOf=fi,Hr.format=ri,Hr.from=si,Hr.fromNow=ai,Hr.to=oi,Hr.toNow=hi,Hr.get=W,Hr.invalidAt=_i,Hr.isAfter=qe,Hr.isBefore=Ze,Hr.isBetween=$e,Hr.isSame=Ke,Hr.isSameOrAfter=Je,Hr.isSameOrBefore=Qe,Hr.isValid=bi,Hr.lang=Br,Hr.locale=li,Hr.localeData=ui,Hr.max=Lr,Hr.min=Dr,Hr.parsingFlags=xi,Hr.set=G,Hr.startOf=ci,Hr.subtract=Rr,Hr.toArray=vi,Hr.toObject=mi,Hr.toDate=pi,Hr.toISOString=ni,Hr.toJSON=yi,Hr.toString=ii,Hr.unix=gi,Hr.valueOf=di,Hr.creationData=wi,Hr.year=cr,Hr.isLeapYear=vt,Hr.weekYear=Si,Hr.isoWeekYear=Oi,Hr.quarter=Hr.quarters=Di,Hr.month=lt,Hr.daysInMonth=ut,Hr.week=Hr.weeks=Tt,Hr.isoWeek=Hr.isoWeeks=kt,Hr.weeksInYear=ki,Hr.isoWeeksInYear=Ti,Hr.date=Fr,Hr.day=Hr.days=It,Hr.weekday=Pt,Hr.isoWeekday=Rt,Hr.dayOfYear=Li,Hr.hour=Hr.hours=_r,Hr.minute=Hr.minutes=zr,Hr.second=Hr.seconds=Yr,Hr.millisecond=Hr.milliseconds=Gr,Hr.utcOffset=ke,Hr.utc=Ae,Hr.local=De,Hr.parseZone=Le,Hr.hasAlignedHourOffset=Ne,Hr.isDST=Ee,Hr.isLocal=Ie,Hr.isUtcOffset=Pe,Hr.isUtc=Re,Hr.isUTC=Re,Hr.zoneAbbr=Ei,Hr.zoneName=ji,Hr.dates=w("dates accessor is deprecated. Use date instead.",Fr),Hr.months=w("months accessor is deprecated. Use month instead",lt),Hr.years=w("years accessor is deprecated. Use year instead",cr),Hr.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Me),Hr.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",je);var Vr=Hr,Xr=k.prototype;Xr.calendar=M,Xr.longDateFormat=A,Xr.invalidDate=D,Xr.ordinal=L,Xr.preparse=Ri,Xr.postformat=Ri,Xr.relativeTime=N,Xr.pastFuture=E,Xr.set=O,Xr.months=rt,Xr.monthsShort=st,Xr.monthsParse=ot,Xr.monthsRegex=ft,Xr.monthsShortRegex=ct,Xr.week=Ct,Xr.firstDayOfYear=Ot,Xr.firstDayOfWeek=St,Xr.weekdays=Dt,Xr.weekdaysMin=Nt,Xr.weekdaysShort=Lt,Xr.weekdaysParse=jt,Xr.weekdaysRegex=Bt,Xr.weekdaysShortRegex=Ft,Xr.weekdaysMinRegex=zt,Xr.isPM=Xt,Xr.meridiem=Ut,Kt("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=w("moment.lang is deprecated. Use moment.locale instead.",Kt),t.langData=w("moment.langData is deprecated. Use moment.localeData instead.",te);var Ur=Math.abs,qr=nn("ms"),Zr=nn("s"),$r=nn("m"),Kr=nn("h"),Jr=nn("d"),Qr=nn("w"),ts=nn("M"),es=nn("y"),is=sn("milliseconds"),ns=sn("seconds"),rs=sn("minutes"),ss=sn("hours"),as=sn("days"),os=sn("months"),hs=sn("years"),ls=Math.round,us={s:45,m:45,h:22,d:26,M:11},cs=Math.abs,fs=_e.prototype;fs.abs=Xi,fs.add=qi,fs.subtract=Zi,fs.as=tn,fs.asMilliseconds=qr,fs.asSeconds=Zr,fs.asMinutes=$r,fs.asHours=Kr,fs.asDays=Jr,fs.asWeeks=Qr,fs.asMonths=ts,fs.asYears=es,fs.valueOf=en,fs._bubble=Ki,fs.get=rn,fs.milliseconds=is,fs.seconds=ns,fs.minutes=rs,fs.hours=ss,fs.days=as,fs.weeks=an,fs.months=os,fs.years=hs,fs.humanize=cn,fs.toISOString=fn,fs.toString=fn,fs.toJSON=fn,fs.locale=li,fs.localeData=ui,fs.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fn),fs.lang=Br,V("X",0,0,"unix"),V("x",0,0,"valueOf"),$("x",Hn),$("X",Un),tt("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),tt("x",function(t,e,i){i._d=new Date(b(t))}),t.version="2.14.1",e(me),t.fn=Vr,t.min=be,t.max=xe,t.now=Nr,t.utc=l,t.unix=Ii,t.months=Yi,t.isDate=s,t.locale=Kt,t.invalid=d,t.duration=Be,t.isMoment=m,t.weekdays=Gi,t.parseZone=Pi,t.localeData=te,t.isDuration=we,t.monthsShort=Wi,t.weekdaysMin=Vi,t.defineLocale=Jt,t.updateLocale=Qt,t.locales=ee,t.weekdaysShort=Hi,t.normalizeUnits=I,t.relativeTimeRounding=ln,t.relativeTimeThreshold=un,t.calendarFormat=Ve,t.prototype=Vr;var ds=t;return ds}),function(t,e){"use strict";var i,n,r,s=t,a=s.document,o=s.navigator,h=s.setTimeout,l=s.clearTimeout,u=s.setInterval,c=s.clearInterval,f=s.getComputedStyle,d=s.encodeURIComponent,g=s.ActiveXObject,p=s.Error,v=s.Number.parseInt||s.parseInt,m=s.Number.parseFloat||s.parseFloat,y=s.Number.isNaN||s.isNaN,b=s.Date.now,x=s.Object.keys,_=s.Object.defineProperty,w=s.Object.prototype.hasOwnProperty,C=s.Array.prototype.slice,S=function(){var t=function(t){return t};if("function"==typeof s.wrap&&"function"==typeof s.unwrap)try{var e=a.createElement("div"),i=s.unwrap(e);1===e.nodeType&&i&&1===i.nodeType&&(t=s.unwrap)}catch(t){}return t}(),O=function(t){return C.call(t,0)},T=function(){var t,i,n,r,s,a,o=O(arguments),h=o[0]||{};for(t=1,i=o.length;t<i;t++)if(null!=(n=o[t]))for(r in n)w.call(n,r)&&(s=h[r],a=n[r],h!==a&&a!==e&&(h[r]=a));return h},k=function(t){var e,i,n,r;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if("number"==typeof t.length)for(e=[],i=0,n=t.length;i<n;i++)w.call(t,i)&&(e[i]=k(t[i]));else{e={};for(r in t)w.call(t,r)&&(e[r]=k(t[r]))}return e},M=function(t,e){for(var i={},n=0,r=e.length;n<r;n++)e[n]in t&&(i[e[n]]=t[e[n]]);return i},A=function(t,e){var i={};for(var n in t)e.indexOf(n)===-1&&(i[n]=t[n]);return i},D=function(t){if(t)for(var e in t)w.call(t,e)&&delete t[e];return t},L=function(t,e){if(t&&1===t.nodeType&&t.ownerDocument&&e&&(1===e.nodeType&&e.ownerDocument&&e.ownerDocument===t.ownerDocument||9===e.nodeType&&!e.ownerDocument&&e===t.ownerDocument))do{if(t===e)return!0;t=t.parentNode}while(t);return!1},N=function(t){var e;return"string"==typeof t&&t&&(e=t.split("#")[0].split("?")[0],e=t.slice(0,t.lastIndexOf("/")+1)),e},E=function(t){var e,i;return"string"==typeof t&&t&&(i=t.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]?e=i[1]:(i=t.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),i&&i[1]&&(e=i[1]))),e},j=function(){var t,e;try{throw new p}catch(t){e=t}return e&&(t=e.sourceURL||e.fileName||E(e.stack)),t},I=function(){var t,i,n;if(a.currentScript&&(t=a.currentScript.src))return t;if(i=a.getElementsByTagName("script"),1===i.length)return i[0].src||e;if("readyState"in i[0])for(n=i.length;n--;)if("interactive"===i[n].readyState&&(t=i[n].src))return t;return"loading"===a.readyState&&(t=i[i.length-1].src)?t:(t=j())?t:e},P=function(){var t,i,n,r=a.getElementsByTagName("script");for(t=r.length;t--;){if(!(n=r[t].src)){i=null;break}if(n=N(n),null==i)i=n;else if(i!==n){i=null;break}}return i||e},R=function(){var t=N(I())||P()||"";return t+"ZeroClipboard.swf"},B=function(){return null==t.opener&&(!!t.top&&t!=t.top||!!t.parent&&t!=t.parent)}(),F={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},z="11.0.0",Y={},W={},G=null,H=0,V=0,X={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},U=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],q=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Z=new RegExp("^flash-("+q.map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),$=new RegExp("^flash-("+q.slice(1).map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),K={swfPath:R(),trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},J=function(t){if("object"==typeof t&&null!==t)for(var e in t)if(w.call(t,e))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(e))K[e]=t[e];else if(null==F.bridge)if("containerId"===e||"swfObjectId"===e){if(!dt(t[e]))throw new Error("The specified `"+e+"` value is not valid as an HTML4 Element ID");K[e]=t[e]}else K[e]=t[e];{if("string"!=typeof t||!t)return k(K);if(w.call(K,t))return K[t]}},Q=function(){return Vt(),{browser:M(o,["userAgent","platform","appName"]),flash:A(F,["bridge"]),zeroclipboard:{version:Ut.version,config:Ut.config()}}},tt=function(){return!!(F.disabled||F.outdated||F.sandboxed||F.unavailable||F.degraded||F.deactivated)},et=function(t,n){var r,s,a,o={};if("string"==typeof t&&t)a=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof n)for(r in t)w.call(t,r)&&"string"==typeof r&&r&&"function"==typeof t[r]&&Ut.on(r,t[r]);if(a&&a.length){for(r=0,s=a.length;r<s;r++)t=a[r].replace(/^on/,""),o[t]=!0,Y[t]||(Y[t]=[]),Y[t].push(n);if(o.ready&&F.ready&&Ut.emit({
type:"ready"}),o.error){for(r=0,s=q.length;r<s;r++)if(F[q[r].replace(/^flash-/,"")]===!0){Ut.emit({type:"error",name:q[r]});break}i!==e&&Ut.version!==i&&Ut.emit({type:"error",name:"version-mismatch",jsVersion:Ut.version,swfVersion:i})}}return Ut},it=function(t,e){var i,n,r,s,a;if(0===arguments.length)s=x(Y);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(i in t)w.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&Ut.off(i,t[i]);if(s&&s.length)for(i=0,n=s.length;i<n;i++)if(t=s[i].toLowerCase().replace(/^on/,""),a=Y[t],a&&a.length)if(e)for(r=a.indexOf(e);r!==-1;)a.splice(r,1),r=a.indexOf(e,r);else a.length=0;return Ut},nt=function(t){var e;return e="string"==typeof t&&t?k(Y[t])||null:k(Y)},rt=function(t){var e,i,n;if(t=gt(t),t&&!_t(t))return"ready"===t.type&&F.overdue===!0?Ut.emit({type:"error",name:"flash-overdue"}):(e=T({},t),bt.call(this,e),"copy"===t.type&&(n=At(W),i=n.data,G=n.formatMap),i)},st=function(){var t=F.sandboxed;if(Vt(),"boolean"!=typeof F.ready&&(F.ready=!1),F.sandboxed!==t&&F.sandboxed===!0)F.ready=!1,Ut.emit({type:"error",name:"flash-sandboxed"});else if(!Ut.isFlashUnusable()&&null===F.bridge){var e=K.flashLoadTimeout;"number"==typeof e&&e>=0&&(H=h(function(){"boolean"!=typeof F.deactivated&&(F.deactivated=!0),F.deactivated===!0&&Ut.emit({type:"error",name:"flash-deactivated"})},e)),F.overdue=!1,kt()}},at=function(){Ut.clearData(),Ut.blur(),Ut.emit("destroy"),Mt(),Ut.off()},ot=function(t,e){var i;if("object"==typeof t&&t&&"undefined"==typeof e)i=t,Ut.clearData();else{if("string"!=typeof t||!t)return;i={},i[t]=e}for(var n in i)"string"==typeof n&&n&&w.call(i,n)&&"string"==typeof i[n]&&i[n]&&(W[n]=i[n])},ht=function(t){"undefined"==typeof t?(D(W),G=null):"string"==typeof t&&w.call(W,t)&&delete W[t]},lt=function(t){return"undefined"==typeof t?k(W):"string"==typeof t&&w.call(W,t)?W[t]:void 0},ut=function(t){if(t&&1===t.nodeType){n&&(Rt(n,K.activeClass),n!==t&&Rt(n,K.hoverClass)),n=t,Pt(t,K.hoverClass);var e=t.getAttribute("title")||K.title;if("string"==typeof e&&e){var i=Tt(F.bridge);i&&i.setAttribute("title",e)}var r=K.forceHandCursor===!0||"pointer"===Bt(t,"cursor");Gt(r),Wt()}},ct=function(){var t=Tt(F.bridge);t&&(t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px"),n&&(Rt(n,K.hoverClass),Rt(n,K.activeClass),n=null)},ft=function(){return n||null},dt=function(t){return"string"==typeof t&&t&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(t)},gt=function(t){var e;if("string"==typeof t&&t?(e=t,t={}):"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(e=t.type),e){e=e.toLowerCase(),!t.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&"clipboard-error"===t.name)&&(t.target=r),T(t,{type:e,target:t.target||n||null,relatedTarget:t.relatedTarget||null,currentTarget:F&&F.bridge||null,timeStamp:t.timeStamp||b()||null});var i=X[t.type];return"error"===t.type&&t.name&&i&&(i=i[t.name]),i&&(t.message=i),"ready"===t.type&&T(t,{target:null,version:F.version}),"error"===t.type&&(Z.test(t.name)&&T(t,{target:null,minimumVersion:z}),$.test(t.name)&&T(t,{version:F.version})),"copy"===t.type&&(t.clipboardData={setData:Ut.setData,clearData:Ut.clearData}),"aftercopy"===t.type&&(t=Dt(t,G)),t.target&&!t.relatedTarget&&(t.relatedTarget=pt(t.target)),vt(t)}},pt=function(t){var e=t&&t.getAttribute&&t.getAttribute("data-clipboard-target");return e?a.getElementById(e):null},vt=function(t){if(t&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)){var i=t.target,n="_mouseover"===t.type&&t.relatedTarget?t.relatedTarget:e,r="_mouseout"===t.type&&t.relatedTarget?t.relatedTarget:e,o=Ft(i),h=s.screenLeft||s.screenX||0,l=s.screenTop||s.screenY||0,u=a.body.scrollLeft+a.documentElement.scrollLeft,c=a.body.scrollTop+a.documentElement.scrollTop,f=o.left+("number"==typeof t._stageX?t._stageX:0),d=o.top+("number"==typeof t._stageY?t._stageY:0),g=f-u,p=d-c,v=h+g,m=l+p,y="number"==typeof t.movementX?t.movementX:0,b="number"==typeof t.movementY?t.movementY:0;delete t._stageX,delete t._stageY,T(t,{srcElement:i,fromElement:n,toElement:r,screenX:v,screenY:m,pageX:f,pageY:d,clientX:g,clientY:p,x:g,y:p,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return t},mt=function(t){var e=t&&"string"==typeof t.type&&t.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(e)},yt=function(t,e,i,n){n?h(function(){t.apply(e,i)},0):t.apply(e,i)},bt=function(t){if("object"==typeof t&&t&&t.type){var e=mt(t),i=Y["*"]||[],n=Y[t.type]||[],r=i.concat(n);if(r&&r.length){var a,o,h,l,u,c=this;for(a=0,o=r.length;a<o;a++)h=r[a],l=c,"string"==typeof h&&"function"==typeof s[h]&&(h=s[h]),"object"==typeof h&&h&&"function"==typeof h.handleEvent&&(l=h,h=h.handleEvent),"function"==typeof h&&(u=T({},t),yt(h,l,[u],e))}return this}},xt=function(t){var e=null;return(B===!1||t&&"error"===t.type&&t.name&&U.indexOf(t.name)!==-1)&&(e=!1),e},_t=function(t){var e=t.target||n||null,s="swf"===t._source;switch(delete t._source,t.type){case"error":var a="flash-sandboxed"===t.name||xt(t);"boolean"==typeof a&&(F.sandboxed=a),q.indexOf(t.name)!==-1?T(F,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,degraded:"flash-degraded"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1}):"version-mismatch"===t.name&&(i=t.swfVersion,T(F,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Yt();break;case"ready":i=t.swfVersion;var o=F.deactivated===!0;T(F,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:o,ready:!o}),Yt();break;case"beforecopy":r=e;break;case"copy":var h,l,u=t.relatedTarget;!W["text/html"]&&!W["text/plain"]&&u&&(l=u.value||u.outerHTML||u.innerHTML)&&(h=u.value||u.textContent||u.innerText)?(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",h),l!==h&&t.clipboardData.setData("text/html",l)):!W["text/plain"]&&t.target&&(h=t.target.getAttribute("data-clipboard-text"))&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",h));break;case"aftercopy":wt(t),Ut.clearData(),e&&e!==It()&&e.focus&&e.focus();break;case"_mouseover":Ut.focus(e),K.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!L(t.relatedTarget,e)&&Ct(T({},t,{type:"mouseenter",bubbles:!1,cancelable:!1})),Ct(T({},t,{type:"mouseover"})));break;case"_mouseout":Ut.blur(),K.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!L(t.relatedTarget,e)&&Ct(T({},t,{type:"mouseleave",bubbles:!1,cancelable:!1})),Ct(T({},t,{type:"mouseout"})));break;case"_mousedown":Pt(e,K.activeClass),K.bubbleEvents===!0&&s&&Ct(T({},t,{type:t.type.slice(1)}));break;case"_mouseup":Rt(e,K.activeClass),K.bubbleEvents===!0&&s&&Ct(T({},t,{type:t.type.slice(1)}));break;case"_click":r=null,K.bubbleEvents===!0&&s&&Ct(T({},t,{type:t.type.slice(1)}));break;case"_mousemove":K.bubbleEvents===!0&&s&&Ct(T({},t,{type:t.type.slice(1)}))}if(/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type))return!0},wt=function(t){if(t.errors&&t.errors.length>0){var e=k(t);T(e,{type:"error",name:"clipboard-error"}),delete e.success,h(function(){Ut.emit(e)},0)}},Ct=function(t){if(t&&"string"==typeof t.type&&t){var e,i=t.target||null,n=i&&i.ownerDocument||a,r={view:n.defaultView||s,canBubble:!0,cancelable:!0,detail:"click"===t.type?1:0,button:"number"==typeof t.which?t.which-1:"number"==typeof t.button?t.button:n.createEvent?0:1},o=T(r,t);i&&n.createEvent&&i.dispatchEvent&&(o=[o.type,o.canBubble,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget],e=n.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,o),e._source="js",i.dispatchEvent(e)))}},St=function(){var t=K.flashLoadTimeout;if("number"==typeof t&&t>=0){var e=Math.min(1e3,t/10),i=K.swfObjectId+"_fallbackContent";V=u(function(){var t=a.getElementById(i);zt(t)&&(Yt(),F.deactivated=null,Ut.emit({type:"error",name:"swf-not-found"}))},e)}},Ot=function(){var t=a.createElement("div");return t.id=K.containerId,t.className=K.containerClass,t.style.position="absolute",t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",t.style.zIndex=""+Ht(K.zIndex),t},Tt=function(t){for(var e=t&&t.parentNode;e&&"OBJECT"===e.nodeName&&e.parentNode;)e=e.parentNode;return e||null},kt=function(){var t,e=F.bridge,i=Tt(e);if(!e){var n=jt(s.location.host,K),r="never"===n?"none":"all",o=Nt(T({jsVersion:Ut.version},K)),h=K.swfPath+Lt(K.swfPath,K);i=Ot();var l=a.createElement("div");i.appendChild(l),a.body.appendChild(i);var u=a.createElement("div"),c="activex"===F.pluginType;u.innerHTML='<object id="'+K.swfObjectId+'" name="'+K.swfObjectId+'" width="100%" height="100%" '+(c?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+h+'"')+">"+(c?'<param name="movie" value="'+h+'"/>':"")+'<param name="allowScriptAccess" value="'+n+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+o+'"/><div id="'+K.swfObjectId+'_fallbackContent">&nbsp;</div></object>',e=u.firstChild,u=null,S(e).ZeroClipboard=Ut,i.replaceChild(e,l),St()}return e||(e=a[K.swfObjectId],e&&(t=e.length)&&(e=e[t-1]),!e&&i&&(e=i.firstChild)),F.bridge=e||null,e},Mt=function(){var t=F.bridge;if(t){var n=Tt(t);n&&("activex"===F.pluginType&&"readyState"in t?(t.style.display="none",function e(){if(4===t.readyState){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode&&t.parentNode.removeChild(t),n.parentNode&&n.parentNode.removeChild(n)}else h(e,10)}()):(t.parentNode&&t.parentNode.removeChild(t),n.parentNode&&n.parentNode.removeChild(n))),Yt(),F.ready=null,F.bridge=null,F.deactivated=null,i=e}},At=function(t){var e={},i={};if("object"==typeof t&&t){for(var n in t)if(n&&w.call(t,n)&&"string"==typeof t[n]&&t[n])switch(n.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=t[n],i.text=n;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=t[n],i.html=n;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=t[n],i.rtf=n}return{data:e,formatMap:i}}},Dt=function(t,e){if("object"!=typeof t||!t||"object"!=typeof e||!e)return t;var i={};for(var n in t)if(w.call(t,n))if("errors"===n){i[n]=t[n]?t[n].slice():[];for(var r=0,s=i[n].length;r<s;r++)i[n][r].format=e[i[n][r].format]}else if("success"!==n&&"data"!==n)i[n]=t[n];else{i[n]={};var a=t[n];for(var o in a)o&&w.call(a,o)&&w.call(e,o)&&(i[n][e[o]]=a[o])}return i},Lt=function(t,e){var i=null==e||e&&e.cacheBust===!0;return i?(t.indexOf("?")===-1?"?":"&")+"noCache="+b():""},Nt=function(t){var e,i,n,r,a="",o=[];if(t.trustedDomains&&("string"==typeof t.trustedDomains?r=[t.trustedDomains]:"object"==typeof t.trustedDomains&&"length"in t.trustedDomains&&(r=t.trustedDomains)),r&&r.length)for(e=0,i=r.length;e<i;e++)if(w.call(r,e)&&r[e]&&"string"==typeof r[e]){if(n=Et(r[e]),!n)continue;if("*"===n){o.length=0,o.push(n);break}o.push.apply(o,[n,"//"+n,s.location.protocol+"//"+n])}return o.length&&(a+="trustedOrigins="+d(o.join(","))),t.forceEnhancedClipboard===!0&&(a+=(a?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof t.swfObjectId&&t.swfObjectId&&(a+=(a?"&":"")+"swfObjectId="+d(t.swfObjectId)),"string"==typeof t.jsVersion&&t.jsVersion&&(a+=(a?"&":"")+"jsVersion="+d(t.jsVersion)),a},Et=function(t){if(null==t||""===t)return null;if(t=t.replace(/^\s+|\s+$/g,""),""===t)return null;var e=t.indexOf("//");t=e===-1?t:t.slice(e+2);var i=t.indexOf("/");return t=i===-1?t:e===-1||0===i?null:t.slice(0,i),t&&".swf"===t.slice(-4).toLowerCase()?null:t||null},jt=function(){var t=function(t){var e,i,n,r=[];if("string"==typeof t&&(t=[t]),"object"!=typeof t||!t||"number"!=typeof t.length)return r;for(e=0,i=t.length;e<i;e++)if(w.call(t,e)&&(n=Et(t[e]))){if("*"===n){r.length=0,r.push("*");break}r.indexOf(n)===-1&&r.push(n)}return r};return function(e,i){var n=Et(i.swfPath);null===n&&(n=e);var r=t(i.trustedDomains),s=r.length;if(s>0){if(1===s&&"*"===r[0])return"always";if(r.indexOf(e)!==-1)return 1===s&&e===n?"sameDomain":"always"}return"never"}}(),It=function(){try{return a.activeElement}catch(t){return null}},Pt=function(t,e){var i,n,r,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList)for(i=0,n=s.length;i<n;i++)t.classList.add(s[i]);else if(t.hasOwnProperty("className")){for(r=" "+t.className+" ",i=0,n=s.length;i<n;i++)r.indexOf(" "+s[i]+" ")===-1&&(r+=s[i]+" ");t.className=r.replace(/^\s+|\s+$/g,"")}return t},Rt=function(t,e){var i,n,r,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList&&t.classList.length>0)for(i=0,n=s.length;i<n;i++)t.classList.remove(s[i]);else if(t.className){for(r=(" "+t.className+" ").replace(/[\r\n\t]/g," "),i=0,n=s.length;i<n;i++)r=r.replace(" "+s[i]+" "," ");t.className=r.replace(/^\s+|\s+$/g,"")}return t},Bt=function(t,e){var i=f(t,null).getPropertyValue(e);return"cursor"!==e||i&&"auto"!==i||"A"!==t.nodeName?i:"pointer"},Ft=function(t){var e={left:0,top:0,width:0,height:0};if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),n=s.pageXOffset,r=s.pageYOffset,o=a.documentElement.clientLeft||0,h=a.documentElement.clientTop||0,l=0,u=0;if("relative"===Bt(a.body,"position")){var c=a.body.getBoundingClientRect(),f=a.documentElement.getBoundingClientRect();l=c.left-f.left||0,u=c.top-f.top||0}e.left=i.left+n-o-l,e.top=i.top+r-h-u,e.width="width"in i?i.width:i.right-i.left,e.height="height"in i?i.height:i.bottom-i.top}return e},zt=function(t){if(!t)return!1;var e=f(t,null),i=m(e.height)>0,n=m(e.width)>0,r=m(e.top)>=0,s=m(e.left)>=0,a=i&&n&&r&&s,o=a?null:Ft(t),h="none"!==e.display&&"collapse"!==e.visibility&&(a||!!o&&(i||o.height>0)&&(n||o.width>0)&&(r||o.top>=0)&&(s||o.left>=0));return h},Yt=function(){l(H),H=0,c(V),V=0},Wt=function(){var t;if(n&&(t=Tt(F.bridge))){var e=Ft(n);T(t.style,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",zIndex:""+Ht(K.zIndex)})}},Gt=function(t){F.ready===!0&&(F.bridge&&"function"==typeof F.bridge.setHandCursor?F.bridge.setHandCursor(t):F.ready=!1)},Ht=function(t){if(/^(?:auto|inherit)$/.test(t))return t;var e;return"number"!=typeof t||y(t)?"string"==typeof t&&(e=Ht(v(t,10))):e=t,"number"==typeof e?e:"auto"},Vt=function(e){var i,n,r,s=F.sandboxed,a=null;if(e=e===!0,B===!1)a=!1;else{try{n=t.frameElement||null}catch(t){r={name:t.name,message:t.message}}if(n&&1===n.nodeType&&"IFRAME"===n.nodeName)try{a=n.hasAttribute("sandbox")}catch(t){a=null}else{try{i=document.domain||null}catch(t){i=null}(null===i||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(a=!0)}}return F.sandboxed=a,s===a||e||Xt(g),a},Xt=function(t){function e(t){var e=t.match(/[\d]+/g);return e.length=3,e.join(".")}function i(t){return!!t&&(t=t.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(t)||"chrome.plugin"===t.slice(-13))}function n(t){t&&(h=!0,t.version&&(c=e(t.version)),!c&&t.description&&(c=e(t.description)),t.filename&&(u=i(t.filename)))}var r,s,a,h=!1,l=!1,u=!1,c="";if(o.plugins&&o.plugins.length)r=o.plugins["Shockwave Flash"],n(r),o.plugins["Shockwave Flash 2.0"]&&(h=!0,c="2.0.0.11");else if(o.mimeTypes&&o.mimeTypes.length)a=o.mimeTypes["application/x-shockwave-flash"],r=a&&a.enabledPlugin,n(r);else if("undefined"!=typeof t){l=!0;try{s=new t("ShockwaveFlash.ShockwaveFlash.7"),h=!0,c=e(s.GetVariable("$version"))}catch(i){try{s=new t("ShockwaveFlash.ShockwaveFlash.6"),h=!0,c="6.0.21"}catch(i){try{s=new t("ShockwaveFlash.ShockwaveFlash"),h=!0,c=e(s.GetVariable("$version"))}catch(t){l=!1}}}}F.disabled=h!==!0,F.outdated=c&&m(c)<m(z),F.version=c||"0.0.0",F.pluginType=u?"pepper":l?"activex":h?"netscape":"unknown"};Xt(g),Vt(!0);var Ut=function(){return this instanceof Ut?void("function"==typeof Ut._createClient&&Ut._createClient.apply(this,O(arguments))):new Ut};_(Ut,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Ut.config=function(){return J.apply(this,O(arguments))},Ut.state=function(){return Q.apply(this,O(arguments))},Ut.isFlashUnusable=function(){return tt.apply(this,O(arguments))},Ut.on=function(){return et.apply(this,O(arguments))},Ut.off=function(){return it.apply(this,O(arguments))},Ut.handlers=function(){return nt.apply(this,O(arguments))},Ut.emit=function(){return rt.apply(this,O(arguments))},Ut.create=function(){return st.apply(this,O(arguments))},Ut.destroy=function(){return at.apply(this,O(arguments))},Ut.setData=function(){return ot.apply(this,O(arguments))},Ut.clearData=function(){return ht.apply(this,O(arguments))},Ut.getData=function(){return lt.apply(this,O(arguments))},Ut.focus=Ut.activate=function(){return ut.apply(this,O(arguments))},Ut.blur=Ut.deactivate=function(){return ct.apply(this,O(arguments))},Ut.activeElement=function(){return ft.apply(this,O(arguments))};var qt=0,Zt={},$t=0,Kt={},Jt={};T(K,{autoActivate:!0});var Qt=function(t){var e=this;e.id=""+qt++,Zt[e.id]={instance:e,elements:[],handlers:{}},t&&e.clip(t),Ut.on("*",function(t){return e.emit(t)}),Ut.on("destroy",function(){e.destroy()}),Ut.create()},te=function(t,n){var r,s,a,o={},h=Zt[this.id],l=h&&h.handlers;if(!h)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof t&&t)a=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof n)for(r in t)w.call(t,r)&&"string"==typeof r&&r&&"function"==typeof t[r]&&this.on(r,t[r]);if(a&&a.length){for(r=0,s=a.length;r<s;r++)t=a[r].replace(/^on/,""),o[t]=!0,l[t]||(l[t]=[]),l[t].push(n);if(o.ready&&F.ready&&this.emit({type:"ready",client:this}),o.error){for(r=0,s=q.length;r<s;r++)if(F[q[r].replace(/^flash-/,"")]){this.emit({type:"error",name:q[r],client:this});break}i!==e&&Ut.version!==i&&this.emit({type:"error",name:"version-mismatch",jsVersion:Ut.version,swfVersion:i})}}return this},ee=function(t,e){var i,n,r,s,a,o=Zt[this.id],h=o&&o.handlers;if(!h)return this;if(0===arguments.length)s=x(h);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(i in t)w.call(t,i)&&"string"==typeof i&&i&&"function"==typeof t[i]&&this.off(i,t[i]);if(s&&s.length)for(i=0,n=s.length;i<n;i++)if(t=s[i].toLowerCase().replace(/^on/,""),a=h[t],a&&a.length)if(e)for(r=a.indexOf(e);r!==-1;)a.splice(r,1),r=a.indexOf(e,r);else a.length=0;return this},ie=function(t){var e=null,i=Zt[this.id]&&Zt[this.id].handlers;return i&&(e="string"==typeof t&&t?i[t]?i[t].slice(0):[]:k(i)),e},ne=function(t){if(he.call(this,t)){"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(t=T({},t));var e=T({},gt(t),{client:this});le.call(this,e)}return this},re=function(t){if(!Zt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");t=ue(t);for(var e=0;e<t.length;e++)if(w.call(t,e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?Kt[t[e].zcClippingId].indexOf(this.id)===-1&&Kt[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+$t++,Kt[t[e].zcClippingId]=[this.id],K.autoActivate===!0&&ce(t[e]));var i=Zt[this.id]&&Zt[this.id].elements;i.indexOf(t[e])===-1&&i.push(t[e])}return this},se=function(t){var e=Zt[this.id];if(!e)return this;var i,n=e.elements;t="undefined"==typeof t?n.slice(0):ue(t);for(var r=t.length;r--;)if(w.call(t,r)&&t[r]&&1===t[r].nodeType){for(i=0;(i=n.indexOf(t[r],i))!==-1;)n.splice(i,1);var s=Kt[t[r].zcClippingId];if(s){for(i=0;(i=s.indexOf(this.id,i))!==-1;)s.splice(i,1);0===s.length&&(K.autoActivate===!0&&fe(t[r]),delete t[r].zcClippingId)}}return this},ae=function(){var t=Zt[this.id];return t&&t.elements?t.elements.slice(0):[]},oe=function(){Zt[this.id]&&(this.unclip(),this.off(),delete Zt[this.id])},he=function(t){if(!t||!t.type)return!1;if(t.client&&t.client!==this)return!1;var e=Zt[this.id],i=e&&e.elements,n=!!i&&i.length>0,r=!t.target||n&&i.indexOf(t.target)!==-1,s=t.relatedTarget&&n&&i.indexOf(t.relatedTarget)!==-1,a=t.client&&t.client===this;return!(!e||!(r||s||a))},le=function(t){var e=Zt[this.id];if("object"==typeof t&&t&&t.type&&e){var i=mt(t),n=e&&e.handlers["*"]||[],r=e&&e.handlers[t.type]||[],a=n.concat(r);if(a&&a.length){var o,h,l,u,c,f=this;for(o=0,h=a.length;o<h;o++)l=a[o],u=f,"string"==typeof l&&"function"==typeof s[l]&&(l=s[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=T({},t),yt(l,u,[c],i))}}},ue=function(t){return"string"==typeof t&&(t=[]),"number"!=typeof t.length?[t]:t},ce=function(t){if(t&&1===t.nodeType){var e=function(t){(t||(t=s.event))&&("js"!==t._source&&(t.stopImmediatePropagation(),t.preventDefault()),delete t._source)},i=function(i){(i||(i=s.event))&&(e(i),Ut.focus(t))};t.addEventListener("mouseover",i,!1),t.addEventListener("mouseout",e,!1),t.addEventListener("mouseenter",e,!1),t.addEventListener("mouseleave",e,!1),t.addEventListener("mousemove",e,!1),Jt[t.zcClippingId]={mouseover:i,mouseout:e,mouseenter:e,mouseleave:e,mousemove:e}}},fe=function(t){if(t&&1===t.nodeType){var e=Jt[t.zcClippingId];if("object"==typeof e&&e){for(var i,n,r=["move","leave","enter","out","over"],s=0,a=r.length;s<a;s++)i="mouse"+r[s],n=e[i],"function"==typeof n&&t.removeEventListener(i,n,!1);delete Jt[t.zcClippingId]}}};Ut._createClient=function(){Qt.apply(this,O(arguments))},Ut.prototype.on=function(){return te.apply(this,O(arguments))},Ut.prototype.off=function(){return ee.apply(this,O(arguments))},Ut.prototype.handlers=function(){return ie.apply(this,O(arguments))},Ut.prototype.emit=function(){return ne.apply(this,O(arguments))},Ut.prototype.clip=function(){return re.apply(this,O(arguments))},Ut.prototype.unclip=function(){return se.apply(this,O(arguments))},Ut.prototype.elements=function(){return ae.apply(this,O(arguments))},Ut.prototype.destroy=function(){return oe.apply(this,O(arguments))},Ut.prototype.setText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("text/plain",t),this},Ut.prototype.setHtml=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("text/html",t),this},Ut.prototype.setRichText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData("application/rtf",t),this},Ut.prototype.setData=function(){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.setData.apply(this,O(arguments)),this},Ut.prototype.clearData=function(){if(!Zt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.clearData.apply(this,O(arguments)),this},Ut.prototype.getData=function(){if(!Zt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Ut.getData.apply(this,O(arguments))},"function"==typeof define&&define.amd?define("zeroclipboard",[],function(){return Ut}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Ut:t.ZeroClipboard=Ut}(function(){return this||window}()),define("aurelia-fetch-client",["exports"],function(t){"use strict";function e(t){return new Blob([JSON.stringify(t)],{type:"application/json"})}function i(t){if(!t.ok)throw t;return t}function n(){this.isRequesting=!!++this.activeRequestCount}function r(){this.isRequesting=!!--this.activeRequestCount}function s(t){var e=r.bind(this);return t.then(e,e),t}function a(t){var e={};for(var i in t||{})t.hasOwnProperty(i)&&(e[i]="function"==typeof t[i]?t[i]():t[i]);return e}function o(t,e){var i=this.defaults||{},n=void 0,r=void 0,s=void 0,o=a(i.headers);if(Request.prototype.isPrototypeOf(t))n=t,s=new Headers(n.headers).get("Content-Type");else{e||(e={}),r=e.body;var u=r?{body:r}:null,c=Object.assign({},i,{headers:{}},e,u);s=new Headers(c.headers).get("Content-Type"),n=new Request(h(this.baseUrl,t),c)}return!s&&new Headers(o).has("content-type")&&n.headers.set("Content-Type",new Headers(o).get("content-type")),l(n.headers,o),r&&Blob.prototype.isPrototypeOf(r)&&r.type&&n.headers.set("Content-Type",r.type),n}function h(t,e){return m.test(e)?e:(t||"")+e}function l(t,e){for(var i in e||{})e.hasOwnProperty(i)&&!t.has(i)&&t.set(i,e[i])}function u(t,e){return f(t,e,"request","requestError")}function c(t,e,i){return f(t,e,"response","responseError",i)}function f(t,e,i,n){for(var r=arguments.length,s=Array(r>4?r-4:0),a=4;a<r;a++)s[a-4]=arguments[a];return(e||[]).reduce(function(t,e){var r=e[i],a=e[n];return t.then(r&&function(t){return r.call.apply(r,[e,t].concat(s))}||d,a&&function(t){return a.call.apply(a,[e,t].concat(s))}||g)},Promise.resolve(t))}function d(t){return t}function g(t){throw t}Object.defineProperty(t,"__esModule",{value:!0}),t.json=e;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},v=t.HttpClientConfiguration=function(){function t(){this.baseUrl="",this.defaults={},this.interceptors=[]}return t.prototype.withBaseUrl=function(t){return this.baseUrl=t,this},t.prototype.withDefaults=function(t){return this.defaults=t,this},t.prototype.withInterceptor=function(t){return this.interceptors.push(t),this},t.prototype.useStandardConfiguration=function(){var t={credentials:"same-origin"};return Object.assign(this.defaults,t,this.defaults),this.rejectErrorResponses()},t.prototype.rejectErrorResponses=function(){return this.withInterceptor({response:i})},t}(),m=(t.HttpClient=function(){function t(){if(this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[],"undefined"==typeof fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch.")}return t.prototype.configure=function(t){var e,i=void 0;if("object"===("undefined"==typeof t?"undefined":p(t)))i={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");i=new v;var n=t(i);v.prototype.isPrototypeOf(n)&&(i=n)}var r=i.defaults;if(r&&Headers.prototype.isPrototypeOf(r.headers))throw new Error("Default headers must be a plain object.");return this.baseUrl=i.baseUrl,this.defaults=r,(e=this.interceptors).push.apply(e,i.interceptors||[]),this.isConfigured=!0,this},t.prototype.fetch=function(t){function e(e,i){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,e){var i=this;n.call(this);var r=Promise.resolve().then(function(){return o.call(i,t,e,i.defaults)}),a=u(r,this.interceptors).then(function(t){var e=null;if(Response.prototype.isPrototypeOf(t))e=t;else{if(!Request.prototype.isPrototypeOf(t))throw new Error("An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got ["+t+"]");r=Promise.resolve(t),e=fetch(t)}return r.then(function(t){return c(e,i.interceptors,t)})});return s.call(this,a)}),t}(),/^([a-z][a-z0-9+\-.]*:)?\/\//i)}),define("kramed/kramed",["require","exports","module","./utils","./lex/block","./lex/inline","./parser","./renderer"],function(t,e,i){function n(t,e,i){if(i||"function"==typeof e){i||(i=e,e=null),e=s({},n.defaults,e||{});var r,o,l=e.highlight,u=0;try{r=a.lex(t,e)}catch(t){return i(t)}console.log(r),o=r.length;var c=function(t){if(console.log(t),t)return e.highlight=l,i(t);var n;try{n=h.parse(r,e)}catch(e){t=e}return e.highlight=l,t?i(t):i(null,n)};if(!l||l.length<3)return c();if(delete e.highlight,!o)return c();for(;u<r.length;u++)!function(t){return"code"!==t.type?--o||c():l(t.text,t.lang,function(e,i){return e?c(e):null==i||i===t.text?--o||c():(t.text=i,t.escaped=!0,void(--o||c()))})}(r[u])}else try{return e&&(e=s({},n.defaults,e)),h.parse(a.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/GitbookIO/kramed.",(e||n.defaults).silent)return"<p>An error occured:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}}var r=t("./utils"),s=r.merge,a=t("./lex/block"),o=t("./lex/inline"),h=t("./parser"),l=t("./renderer");n.options=n.setOptions=function(t){return s(n.defaults,t),n},n.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,mathjax:!0,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",headerAutoId:!0,xhtml:!1,renderer:new l},n.Parser=h,n.parser=h.parse,n.Renderer=l,n.Lexer=a,n.lexer=a.lex,n.InlineLexer=o,n.inlineLexer=o.output,n.parse=n,i.exports=n}),define("kramed",["kramed/kramed"],function(t){return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("intl/intl",e):t.IntlPolyfill=e()}(this,function(){"use strict";function t(t){if("function"==typeof Math.log10)return Math.floor(Math.log10(t));var e=Math.round(Math.log(t)*Math.LOG10E);return e-(Number("1e"+e)>t)}function e(t){for(var i in t)(t instanceof e||et.call(t,i))&&it(this,i,{value:t[i],enumerable:!0,writable:!0,configurable:!0})}function i(){it(this,"length",{writable:!0,value:0}),arguments.length&&ot.apply(this,st.call(arguments))}function n(){for(var t=/[.?*+^$[\]\\(){}|-]/g,e=RegExp.lastMatch||"",n=RegExp.multiline?"m":"",r={input:RegExp.input},s=new i,a=!1,o={},h=1;h<=9;h++)a=(o["$"+h]=RegExp["$"+h])||a;if(e=e.replace(t,"\\$&"),a)for(var l=1;l<=9;l++){var u=o["$"+l];u?(u=u.replace(t,"\\$&"),e=e.replace(u,"("+u+")")):e="()"+e,ot.call(s,e.slice(0,e.indexOf("(")+1)),e=e.slice(e.indexOf("(")+1)}return r.exp=new RegExp(ht.call(s,"")+e,n),r}function r(t){if(null===t)throw new TypeError("Cannot convert null or undefined to object");return Object(t)}function s(t){return et.call(t,"__getInternalProperties")?t.__getInternalProperties(ft):rt(null)}function a(t){At=t}function o(t){for(var e=t.length;e--;){var i=t.charAt(e);i>="a"&&i<="z"&&(t=t.slice(0,e)+i.toUpperCase()+t.slice(e+1))}return t}function h(t){return!!Ot.test(t)&&(!Tt.test(t)&&!kt.test(t))}function l(t){var e=void 0,i=void 0;t=t.toLowerCase(),i=t.split("-");for(var n=1,r=i.length;n<r;n++)if(2===i[n].length)i[n]=i[n].toUpperCase();else if(4===i[n].length)i[n]=i[n].charAt(0).toUpperCase()+i[n].slice(1);else if(1===i[n].length&&"x"!==i[n])break;t=ht.call(i,"-"),(e=t.match(Mt))&&e.length>1&&(e.sort(),t=t.replace(RegExp("(?:"+Mt.source+")+","i"),ht.call(e,""))),et.call(Dt.tags,t)&&(t=Dt.tags[t]),i=t.split("-");for(var s=1,a=i.length;s<a;s++)et.call(Dt.subtags,i[s])?i[s]=Dt.subtags[i[s]]:et.call(Dt.extLang,i[s])&&(i[s]=Dt.extLang[i[s]][0],1===s&&Dt.extLang[i[1]][1]===i[0]&&(i=st.call(i,s++),a-=1));return ht.call(i,"-")}function u(){return At}function c(t){var e=String(t),i=o(e);return Lt.test(i)!==!1}function f(t){if(void 0===t)return new i;var e=new i;t="string"==typeof t?[t]:t;for(var n=r(t),s=n.length,a=0;a<s;){var o=String(a),u=o in n;if(u){var c=n[o];if(null===c||"string"!=typeof c&&"object"!==("undefined"==typeof c?"undefined":J.typeof(c)))throw new TypeError("String or Object type expected");var f=String(c);if(!h(f))throw new RangeError("'"+f+"' is not a structurally valid language tag");f=l(f),nt.call(e,f)===-1&&ot.call(e,f)}a++}return e}function d(t,e){for(var i=e;i;){if(nt.call(t,i)>-1)return i;var n=i.lastIndexOf("-");if(n<0)return;n>=2&&"-"===i.charAt(n-2)&&(n-=2),i=i.substring(0,n)}}function g(t,i){for(var n=0,r=i.length,s=void 0,a=void 0,o=void 0;n<r&&!s;)a=i[n],o=String(a).replace(Nt,""),s=d(t,o),n++;var h=new e;if(void 0!==s){if(h["[[locale]]"]=s,String(a)!==String(o)){var l=a.match(Nt)[0],c=a.indexOf("-u-");h["[[extension]]"]=l,h["[[extensionIndex]]"]=c}}else h["[[locale]]"]=u();return h}function p(t,e){return g(t,e)}function v(t,i,n,r,s){if(0===t.length)throw new ReferenceError("No locale data has been provided for this object yet.");
var a=n["[[localeMatcher]]"],o=void 0;o="lookup"===a?g(t,i):p(t,i);var h=o["[[locale]]"],u=void 0,c=void 0;if(et.call(o,"[[extension]]")){var f=o["[[extension]]"],d=String.prototype.split;u=d.call(f,"-"),c=u.length}var v=new e;v["[[dataLocale]]"]=h;for(var m="-u",y=0,b=r.length;y<b;){var x=r[y],_=s[h],w=_[x],C=w[0],S="",O=nt;if(void 0!==u){var T=O.call(u,x);if(T!==-1)if(T+1<c&&u[T+1].length>2){var k=u[T+1],M=O.call(w,k);M!==-1&&(C=k,S="-"+x+"-"+C)}else{var A=O(w,"true");A!==-1&&(C="true")}}if(et.call(n,"[["+x+"]]")){var D=n["[["+x+"]]"];O.call(w,D)!==-1&&D!==C&&(C=D,S="")}v["[["+x+"]]"]=C,m+=S,y++}if(m.length>2){var L=h.indexOf("-x-");if(L===-1)h+=m;else{var N=h.substring(0,L),E=h.substring(L);h=N+m+E}h=l(h)}return v["[[locale]]"]=h,v}function m(t,e){for(var n=e.length,r=new i,s=0;s<n;){var a=e[s],o=String(a).replace(Nt,""),h=d(t,o);void 0!==h&&ot.call(r,a),s++}var l=st.call(r);return l}function y(t,e){return m(t,e)}function b(t,i,n){var s=void 0,a=void 0;if(void 0!==n&&(n=new e(r(n)),s=n.localeMatcher,void 0!==s&&(s=String(s),"lookup"!==s&&"best fit"!==s)))throw new RangeError('matcher should be "lookup" or "best fit"');a=void 0===s||"best fit"===s?y(t,i):m(t,i);for(var o in a)et.call(a,o)&&it(a,o,{writable:!1,configurable:!1,value:a[o]});return it(a,"length",{writable:!1}),a}function x(t,e,i,n,r){var s=t[e];if(void 0!==s){if(s="boolean"===i?Boolean(s):"string"===i?String(s):s,void 0!==n&&nt.call(n,s)===-1)throw new RangeError("'"+s+"' is not an allowed value for `"+e+"`");return s}return r}function _(t,e,i,n,r){var s=t[e];if(void 0!==s){if(s=Number(s),isNaN(s)||s<i||s>n)throw new RangeError("Value is not a number or outside accepted range");return Math.floor(s)}return r}function w(){var t=arguments[0],e=arguments[1];return this&&this!==Et?C(r(this),t,e):new Et.NumberFormat(t,e)}function C(t,a,o){var h=s(t),l=n();if(h["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");it(t,"__getInternalProperties",{value:function(){if(arguments[0]===ft)return h}}),h["[[initializedIntlObject]]"]=!0;var u=f(a);o=void 0===o?{}:r(o);var d=new e,g=x(o,"localeMatcher","string",new i("lookup","best fit"),"best fit");d["[[localeMatcher]]"]=g;var p=ct.NumberFormat["[[localeData]]"],m=v(ct.NumberFormat["[[availableLocales]]"],u,d,ct.NumberFormat["[[relevantExtensionKeys]]"],p);h["[[locale]]"]=m["[[locale]]"],h["[[numberingSystem]]"]=m["[[nu]]"],h["[[dataLocale]]"]=m["[[dataLocale]]"];var y=m["[[dataLocale]]"],b=x(o,"style","string",new i("decimal","percent","currency"),"decimal");h["[[style]]"]=b;var w=x(o,"currency","string");if(void 0!==w&&!c(w))throw new RangeError("'"+w+"' is not a valid currency code");if("currency"===b&&void 0===w)throw new TypeError("Currency code is required when style is currency");var C=void 0;"currency"===b&&(w=w.toUpperCase(),h["[[currency]]"]=w,C=S(w));var T=x(o,"currencyDisplay","string",new i("code","symbol","name"),"symbol");"currency"===b&&(h["[[currencyDisplay]]"]=T);var k=_(o,"minimumIntegerDigits",1,21,1);h["[[minimumIntegerDigits]]"]=k;var M="currency"===b?C:0,A=_(o,"minimumFractionDigits",0,20,M);h["[[minimumFractionDigits]]"]=A;var D="currency"===b?Math.max(A,C):"percent"===b?Math.max(A,0):Math.max(A,3),L=_(o,"maximumFractionDigits",A,20,D);h["[[maximumFractionDigits]]"]=L;var N=o.minimumSignificantDigits,E=o.maximumSignificantDigits;void 0===N&&void 0===E||(N=_(o,"minimumSignificantDigits",1,21,1),E=_(o,"maximumSignificantDigits",N,21,21),h["[[minimumSignificantDigits]]"]=N,h["[[maximumSignificantDigits]]"]=E);var j=x(o,"useGrouping","boolean",void 0,!0);h["[[useGrouping]]"]=j;var I=p[y],P=I.patterns,R=P[b];return h["[[positivePattern]]"]=R.positivePattern,h["[[negativePattern]]"]=R.negativePattern,h["[[boundFormat]]"]=void 0,h["[[initializedNumberFormat]]"]=!0,tt&&(t.format=O.call(t)),l.exp.test(l.input),t}function S(t){return void 0!==jt[t]?jt[t]:2}function O(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedNumberFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.NumberFormat object.");if(void 0===t["[[boundFormat]]"]){var e=function(t){return M(this,Number(t))},i=ut.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}function T(t,e){for(var i=k(t,e),n=[],r=0,s=0;i.length>s;s++){var a=i[s],o={};o.type=a["[[type]]"],o.value=a["[[value]]"],n[r]=o,r+=1}return n}function k(t,e){var n=s(t),r=n["[[dataLocale]]"],a=n["[[numberingSystem]]"],o=ct.NumberFormat["[[localeData]]"][r],h=o.symbols[a]||o.symbols.latn,l=void 0;!isNaN(e)&&e<0?(e=-e,l=n["[[negativePattern]]"]):l=n["[[positivePattern]]"];for(var u=new i,c=l.indexOf("{",0),f=0,d=0,g=l.length;c>-1&&c<g;){if(f=l.indexOf("}",c),f===-1)throw new Error;if(c>d){var p=l.substring(d,c);ot.call(u,{"[[type]]":"literal","[[value]]":p})}var v=l.substring(c+1,f);if("number"===v)if(isNaN(e)){var m=h.nan;ot.call(u,{"[[type]]":"nan","[[value]]":m})}else if(isFinite(e)){"percent"===n["[[style]]"]&&isFinite(e)&&(e*=100);var y=void 0;y=et.call(n,"[[minimumSignificantDigits]]")&&et.call(n,"[[maximumSignificantDigits]]")?A(e,n["[[minimumSignificantDigits]]"],n["[[maximumSignificantDigits]]"]):D(e,n["[[minimumIntegerDigits]]"],n["[[minimumFractionDigits]]"],n["[[maximumFractionDigits]]"]),It[a]?!function(){var t=It[a];y=String(y).replace(/\d/g,function(e){return t[e]})}():y=String(y);var b=void 0,x=void 0,_=y.indexOf(".",0);if(_>0?(b=y.substring(0,_),x=y.substring(_+1,_.length)):(b=y,x=void 0),n["[[useGrouping]]"]===!0){var w=h.group,C=[],S=o.patterns.primaryGroupSize||3,O=o.patterns.secondaryGroupSize||S;if(b.length>S){var T=b.length-S,k=T%O,M=b.slice(0,k);for(M.length&&ot.call(C,M);k<T;)ot.call(C,b.slice(k,k+O)),k+=O;ot.call(C,b.slice(T))}else ot.call(C,b);if(0===C.length)throw new Error;for(;C.length;){var L=lt.call(C);ot.call(u,{"[[type]]":"integer","[[value]]":L}),C.length&&ot.call(u,{"[[type]]":"group","[[value]]":w})}}else ot.call(u,{"[[type]]":"integer","[[value]]":b});if(void 0!==x){var N=h.decimal;ot.call(u,{"[[type]]":"decimal","[[value]]":N}),ot.call(u,{"[[type]]":"fraction","[[value]]":x})}}else{var E=h.infinity;ot.call(u,{"[[type]]":"infinity","[[value]]":E})}else if("plusSign"===v){var j=h.plusSign;ot.call(u,{"[[type]]":"plusSign","[[value]]":j})}else if("minusSign"===v){var I=h.minusSign;ot.call(u,{"[[type]]":"minusSign","[[value]]":I})}else if("percentSign"===v&&"percent"===n["[[style]]"]){var P=h.percentSign;ot.call(u,{"[[type]]":"literal","[[value]]":P})}else if("currency"===v&&"currency"===n["[[style]]"]){var R=n["[[currency]]"],B=void 0;"code"===n["[[currencyDisplay]]"]?B=R:"symbol"===n["[[currencyDisplay]]"]?B=o.currencies[R]||R:"name"===n["[[currencyDisplay]]"]&&(B=R),ot.call(u,{"[[type]]":"currency","[[value]]":B})}else{var F=l.substring(c,f);ot.call(u,{"[[type]]":"literal","[[value]]":F})}d=f+1,c=l.indexOf("{",d)}if(d<g){var z=l.substring(d,g);ot.call(u,{"[[type]]":"literal","[[value]]":z})}return u}function M(t,e){for(var i=k(t,e),n="",r=0;i.length>r;r++){var s=i[r];n+=s["[[value]]"]}return n}function A(e,i,n){var r=n,s=void 0,a=void 0;if(0===e)s=ht.call(Array(r+1),"0"),a=0;else{a=t(Math.abs(e));var o=Math.round(Math.exp(Math.abs(a-r+1)*Math.LN10));s=String(Math.round(a-r+1<0?e*o:e/o))}if(a>=r)return s+ht.call(Array(a-r+1+1),"0");if(a===r-1)return s;if(a>=0?s=s.slice(0,a+1)+"."+s.slice(a+1):a<0&&(s="0."+ht.call(Array(-(a+1)+1),"0")+s),s.indexOf(".")>=0&&n>i){for(var h=n-i;h>0&&"0"===s.charAt(s.length-1);)s=s.slice(0,-1),h--;"."===s.charAt(s.length-1)&&(s=s.slice(0,-1))}return s}function D(t,e,i,n){var r=n,s=Math.pow(10,r)*t,a=0===s?"0":s.toFixed(0),o=void 0,h=(o=a.indexOf("e"))>-1?a.slice(o+1):0;h&&(a=a.slice(0,o).replace(".",""),a+=ht.call(Array(h-(a.length-1)+1),"0"));var l=void 0;if(0!==r){var u=a.length;if(u<=r){var c=ht.call(Array(r+1-u+1),"0");a=c+a,u=r+1}var f=a.substring(0,u-r),d=a.substring(u-r,a.length);a=f+"."+d,l=f.length}else l=a.length;for(var g=n-i;g>0&&"0"===a.slice(-1);)a=a.slice(0,-1),g--;if("."===a.slice(-1)&&(a=a.slice(0,-1)),l<e){var p=ht.call(Array(e-l+1),"0");a=p+a}return a}function L(t){for(var e=0;e<zt.length;e+=1)if(t.hasOwnProperty(zt[e]))return!1;return!0}function N(t){for(var e=0;e<Ft.length;e+=1)if(t.hasOwnProperty(Ft[e]))return!1;return!0}function E(t,e){for(var i={_:{}},n=0;n<Ft.length;n+=1)t[Ft[n]]&&(i[Ft[n]]=t[Ft[n]]),t._[Ft[n]]&&(i._[Ft[n]]=t._[Ft[n]]);for(var r=0;r<zt.length;r+=1)e[zt[r]]&&(i[zt[r]]=e[zt[r]]),e._[zt[r]]&&(i._[zt[r]]=e._[zt[r]]);return i}function j(t){return t.pattern12=t.extendedPattern.replace(/'([^']*)'/g,function(t,e){return e?e:"'"}),t.pattern=t.pattern12.replace("{ampm}","").replace(Rt,""),t}function I(t,e){switch(t.charAt(0)){case"G":return e.era=["short","short","short","long","narrow"][t.length-1],"{era}";case"y":case"Y":case"u":case"U":case"r":return e.year=2===t.length?"2-digit":"numeric","{year}";case"Q":case"q":return e.quarter=["numeric","2-digit","short","long","narrow"][t.length-1],"{quarter}";case"M":case"L":return e.month=["numeric","2-digit","short","long","narrow"][t.length-1],"{month}";case"w":return e.week=2===t.length?"2-digit":"numeric","{weekday}";case"W":return e.week="numeric","{weekday}";case"d":return e.day=2===t.length?"2-digit":"numeric","{day}";case"D":case"F":case"g":return e.day="numeric","{day}";case"E":return e.weekday=["short","short","short","long","narrow","short"][t.length-1],"{weekday}";case"e":return e.weekday=["numeric","2-digit","short","long","narrow","short"][t.length-1],"{weekday}";case"c":return e.weekday=["numeric",void 0,"short","long","narrow","short"][t.length-1],"{weekday}";case"a":case"b":case"B":return e.hour12=!0,"{ampm}";case"h":case"H":return e.hour=2===t.length?"2-digit":"numeric","{hour}";case"k":case"K":return e.hour12=!0,e.hour=2===t.length?"2-digit":"numeric","{hour}";case"m":return e.minute=2===t.length?"2-digit":"numeric","{minute}";case"s":return e.second=2===t.length?"2-digit":"numeric","{second}";case"S":case"A":return e.second="numeric","{second}";case"z":case"Z":case"O":case"v":case"V":case"X":case"x":return e.timeZoneName=t.length<4?"short":"long","{timeZoneName}"}}function P(t,e){if(!Bt.test(e)){var i={originalPattern:e,_:{}};return i.extendedPattern=e.replace(Pt,function(t){return I(t,i._)}),t.replace(Pt,function(t){return I(t,i)}),j(i)}}function R(t){var e=t.availableFormats,i=t.timeFormats,n=t.dateFormats,r=[],s=void 0,a=void 0,o=void 0,h=void 0,l=void 0,u=[],c=[];for(s in e)e.hasOwnProperty(s)&&(a=e[s],o=P(s,a),o&&(r.push(o),L(o)?c.push(o):N(o)&&u.push(o)));for(s in i)i.hasOwnProperty(s)&&(a=i[s],o=P(s,a),o&&(r.push(o),u.push(o)));for(s in n)n.hasOwnProperty(s)&&(a=n[s],o=P(s,a),o&&(r.push(o),c.push(o)));for(h=0;h<u.length;h+=1)for(l=0;l<c.length;l+=1)a="long"===c[l].month?c[l].weekday?t.full:t.long:"short"===c[l].month?t.medium:t.short,o=E(c[l],u[h]),o.originalPattern=a,o.extendedPattern=a.replace("{0}",u[h].extendedPattern).replace("{1}",c[l].extendedPattern).replace(/^[,\s]+|[,\s]+$/gi,""),r.push(j(o));return r}function B(t,e,i,n,r){var s=t[e]&&t[e][i]?t[e][i]:t.gregory[i],a={narrow:["short","long"],short:["long","narrow"],long:["short","narrow"]},o=et.call(s,n)?s[n]:et.call(s,a[n][0])?s[a[n][0]]:s[a[n][1]];return null!==r?o[r]:o}function F(){var t=arguments[0],e=arguments[1];return this&&this!==Et?z(r(this),t,e):new Et.DateTimeFormat(t,e)}function z(t,r,a){var h=s(t),l=n();if(h["[[initializedIntlObject]]"]===!0)throw new TypeError("`this` object has already been initialized as an Intl object");it(t,"__getInternalProperties",{value:function(){if(arguments[0]===ft)return h}}),h["[[initializedIntlObject]]"]=!0;var u=f(r);a=W(a,"any","date");var c=new e,d=x(a,"localeMatcher","string",new i("lookup","best fit"),"best fit");c["[[localeMatcher]]"]=d;var g=ct.DateTimeFormat,p=g["[[localeData]]"],m=v(g["[[availableLocales]]"],u,c,g["[[relevantExtensionKeys]]"],p);h["[[locale]]"]=m["[[locale]]"],h["[[calendar]]"]=m["[[ca]]"],h["[[numberingSystem]]"]=m["[[nu]]"],h["[[dataLocale]]"]=m["[[dataLocale]]"];var y=m["[[dataLocale]]"],b=a.timeZone;if(void 0!==b&&(b=o(b),"UTC"!==b))throw new RangeError("timeZone is not supported.");h["[[timeZone]]"]=b,c=new e;for(var _ in Wt)if(et.call(Wt,_)){var w=x(a,_,"string",Wt[_]);c["[["+_+"]]"]=w}var C=void 0,S=p[y],O=Y(S.formats);if(d=x(a,"formatMatcher","string",new i("basic","best fit"),"best fit"),S.formats=O,"basic"===d)C=G(c,O);else{var T=x(a,"hour12","boolean");c.hour12=void 0===T?S.hour12:T,C=H(c,O)}for(var k in Wt)if(et.call(Wt,k)&&et.call(C,k)){var M=C[k];M=C._&&et.call(C._,k)?C._[k]:M,h["[["+k+"]]"]=M}var A=void 0,D=x(a,"hour12","boolean");if(h["[[hour]]"])if(D=void 0===D?S.hour12:D,h["[[hour12]]"]=D,D===!0){var L=S.hourNo0;h["[[hourNo0]]"]=L,A=C.pattern12}else A=C.pattern;else A=C.pattern;return h["[[pattern]]"]=A,h["[[boundFormat]]"]=void 0,h["[[initializedDateTimeFormat]]"]=!0,tt&&(t.format=V.call(t)),l.exp.test(l.input),t}function Y(t){return"[object Array]"===Object.prototype.toString.call(t)?t:R(t)}function W(t,i,n){if(void 0===t)t=null;else{var s=r(t);t=new e;for(var a in s)t[a]=s[a]}var o=rt;t=o(t);var h=!0;return"date"!==i&&"any"!==i||void 0===t.weekday&&void 0===t.year&&void 0===t.month&&void 0===t.day||(h=!1),"time"!==i&&"any"!==i||void 0===t.hour&&void 0===t.minute&&void 0===t.second||(h=!1),!h||"date"!==n&&"all"!==n||(t.year=t.month=t.day="numeric"),!h||"time"!==n&&"all"!==n||(t.hour=t.minute=t.second="numeric"),t}function G(t,e){for(var i=120,n=20,r=8,s=6,a=6,o=3,h=-(1/0),l=void 0,u=0,c=e.length;u<c;){var f=e[u],d=0;for(var g in Wt)if(et.call(Wt,g)){var p=t["[["+g+"]]"],v=et.call(f,g)?f[g]:void 0;if(void 0===p&&void 0!==v)d-=n;else if(void 0!==p&&void 0===v)d-=i;else{var m=["2-digit","numeric","narrow","short","long"],y=nt.call(m,p),b=nt.call(m,v),x=Math.max(Math.min(b-y,2),-2);2===x?d-=s:1===x?d-=o:x===-1?d-=a:x===-2&&(d-=r)}}d>h&&(h=d,l=f),u++}return l}function H(t,e){for(var i=120,n=20,r=8,s=6,a=6,o=3,h=1,l=-(1/0),u=void 0,c=0,f=e.length;c<f;){var d=e[c],g=0;for(var p in Wt)if(et.call(Wt,p)){var v=t["[["+p+"]]"],m=et.call(d,p)?d[p]:void 0;if(void 0===v&&void 0!==m)g-=n;else if(void 0!==v&&void 0===m)g-=i;else{var y=["2-digit","numeric","narrow","short","long"],b=nt.call(y,v),x=nt.call(y,m),_=Math.max(Math.min(x-b,2),-2);x<=1&&b>=2||x>=2&&b<=1?_>0?g-=s:_<0&&(g-=r):_>1?g-=o:_<-1&&(g-=a)}}d._.hour12!==t.hour12&&(g-=h),g>l&&(l=g,u=d),c++}return u}function V(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for format() is not an initialized Intl.DateTimeFormat object.");if(void 0===t["[[boundFormat]]"]){var e=function(){var t=Number(0===arguments.length?Date.now():arguments[0]);return q(this,t)},i=ut.call(e,this);t["[[boundFormat]]"]=i}return t["[[boundFormat]]"]}function X(){var t=null!==this&&"object"===J.typeof(this)&&s(this);if(!t||!t["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.DateTimeFormat object.");if(void 0===t["[[boundFormatToParts]]"]){var e=function(){var t=Number(0===arguments.length?Date.now():arguments[0]);return Z(this,t)},i=ut.call(e,this);t["[[boundFormatToParts]]"]=i}return t["[[boundFormatToParts]]"]}function U(t,e){if(!isFinite(e))throw new RangeError("Invalid valid date passed to format");var r=t.__getInternalProperties(ft);n();for(var s=r["[[locale]]"],a=new Et.NumberFormat([s],{useGrouping:!1}),o=new Et.NumberFormat([s],{minimumIntegerDigits:2,useGrouping:!1}),h=$(e,r["[[calendar]]"],r["[[timeZone]]"]),l=r["[[pattern]]"],u=new i,c=0,f=l.indexOf("{"),d=0,g=r["[[dataLocale]]"],p=ct.DateTimeFormat["[[localeData]]"][g].calendars,v=r["[[calendar]]"];f!==-1;){var m=void 0;if(d=l.indexOf("}",f),d===-1)throw new Error("Unclosed pattern");f>c&&ot.call(u,{type:"literal",value:l.substring(c,f)});var y=l.substring(f+1,d);if(Wt.hasOwnProperty(y)){var b=r["[["+y+"]]"],x=h["[["+y+"]]"];if("year"===y&&x<=0?x=1-x:"month"===y?x++:"hour"===y&&r["[[hour12]]"]===!0&&(x%=12,0===x&&r["[[hourNo0]]"]===!0&&(x=12)),"numeric"===b)m=M(a,x);else if("2-digit"===b)m=M(o,x),m.length>2&&(m=m.slice(-2));else if(b in Yt)switch(y){case"month":m=B(p,v,"months",b,h["[["+y+"]]"]);break;case"weekday":try{m=B(p,v,"days",b,h["[["+y+"]]"])}catch(t){throw new Error("Could not find weekday data for locale "+s)}break;case"timeZoneName":m="";break;case"era":try{m=B(p,v,"eras",b,h["[["+y+"]]"])}catch(t){throw new Error("Could not find era data for locale "+s)}break;default:m=h["[["+y+"]]"]}ot.call(u,{type:y,value:m})}else if("ampm"===y){var _=h["[[hour]]"];m=B(p,v,"dayPeriods",_>11?"pm":"am",null),ot.call(u,{type:"dayPeriod",value:m})}else ot.call(u,{type:"literal",value:l.substring(f,d+1)});c=d+1,f=l.indexOf("{",c)}return d<l.length-1&&ot.call(u,{type:"literal",value:l.substr(d+1)}),u}function q(t,e){for(var i=U(t,e),n="",r=0;i.length>r;r++){var s=i[r];n+=s.value}return n}function Z(t,e){for(var i=U(t,e),n=[],r=0;i.length>r;r++){var s=i[r];n.push({type:s.type,value:s.value})}return n}function $(t,i,n){var r=new Date(t),s="get"+(n||"");return new e({"[[weekday]]":r[s+"Day"](),"[[era]]":+(r[s+"FullYear"]()>=0),"[[year]]":r[s+"FullYear"](),"[[month]]":r[s+"Month"](),"[[day]]":r[s+"Date"](),"[[hour]]":r[s+"Hours"](),"[[minute]]":r[s+"Minutes"](),"[[second]]":r[s+"Seconds"](),"[[inDST]]":!1})}function K(t,e){if(!t.number)throw new Error("Object passed doesn't contain locale data for Intl.NumberFormat");var i=void 0,n=[e],r=e.split("-");for(r.length>2&&4===r[1].length&&ot.call(n,r[0]+"-"+r[2]);i=lt.call(n);)ot.call(ct.NumberFormat["[[availableLocales]]"],i),ct.NumberFormat["[[localeData]]"][i]=t.number,t.date&&(t.date.nu=t.number.nu,ot.call(ct.DateTimeFormat["[[availableLocales]]"],i),ct.DateTimeFormat["[[localeData]]"][i]=t.date);void 0===At&&a(e)}var J={};J.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};var Q=function(){var t={};try{return Object.defineProperty(t,"a",{}),"a"in t}catch(t){return!1}}(),tt=!Q&&!Object.prototype.__defineGetter__,et=Object.prototype.hasOwnProperty,it=Q?Object.defineProperty:function(t,e,i){"get"in i&&t.__defineGetter__?t.__defineGetter__(e,i.get):(!et.call(t,e)||"value"in i)&&(t[e]=i.value)},nt=Array.prototype.indexOf||function(t){var e=this;if(!e.length)return-1;for(var i=arguments[1]||0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},rt=Object.create||function(t,e){function i(){}var n=void 0;i.prototype=t,n=new i;for(var r in e)et.call(e,r)&&it(n,r,e[r]);return n},st=Array.prototype.slice,at=Array.prototype.concat,ot=Array.prototype.push,ht=Array.prototype.join,lt=Array.prototype.shift,ut=Function.prototype.bind||function(t){var e=this,i=st.call(arguments,1);return 1===e.length?function(){return e.apply(t,at.call(i,st.call(arguments)))}:function(){return e.apply(t,at.call(i,st.call(arguments)))}},ct=rt(null),ft=Math.random();e.prototype=rt(null),i.prototype=rt(null);var dt="[a-z]{3}(?:-[a-z]{3}){0,2}",gt="(?:[a-z]{2,3}(?:-"+dt+")?|[a-z]{4}|[a-z]{5,8})",pt="[a-z]{4}",vt="(?:[a-z]{2}|\\d{3})",mt="(?:[a-z0-9]{5,8}|\\d[a-z0-9]{3})",yt="[0-9a-wy-z]",bt=yt+"(?:-[a-z0-9]{2,8})+",xt="x(?:-[a-z0-9]{1,8})+",_t="(?:en-GB-oed|i-(?:ami|bnn|default|enochian|hak|klingon|lux|mingo|navajo|pwn|tao|tay|tsu)|sgn-(?:BE-FR|BE-NL|CH-DE))",wt="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-(?:guoyu|hakka|min|min-nan|xiang))",Ct="(?:"+_t+"|"+wt+")",St=gt+"(?:-"+pt+")?(?:-"+vt+")?(?:-"+mt+")*(?:-"+bt+")*(?:-"+xt+")?",Ot=RegExp("^(?:"+St+"|"+xt+"|"+Ct+")$","i"),Tt=RegExp("^(?!x).*?-("+mt+")-(?:\\w{4,8}-(?!x-))*\\1\\b","i"),kt=RegExp("^(?!x).*?-("+yt+")-(?:\\w+-(?!x-))*\\1\\b","i"),Mt=RegExp("-"+bt,"ig"),At=void 0,Dt={tags:{"art-lojban":"jbo","i-ami":"ami","i-bnn":"bnn","i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","no-bok":"nb","no-nyn":"nn","sgn-BE-FR":"sfb","sgn-BE-NL":"vgt","sgn-CH-DE":"sgg","zh-guoyu":"cmn","zh-hakka":"hak","zh-min-nan":"nan","zh-xiang":"hsn","sgn-BR":"bzs","sgn-CO":"csn","sgn-DE":"gsg","sgn-DK":"dsl","sgn-ES":"ssp","sgn-FR":"fsl","sgn-GB":"bfi","sgn-GR":"gss","sgn-IE":"isg","sgn-IT":"ise","sgn-JP":"jsl","sgn-MX":"mfs","sgn-NI":"ncs","sgn-NL":"dse","sgn-NO":"nsl","sgn-PT":"psr","sgn-SE":"swl","sgn-US":"ase","sgn-ZA":"sfs","zh-cmn":"cmn","zh-cmn-Hans":"cmn-Hans","zh-cmn-Hant":"cmn-Hant","zh-gan":"gan","zh-wuu":"wuu","zh-yue":"yue"},subtags:{BU:"MM",DD:"DE",FX:"FR",TP:"TL",YD:"YE",ZR:"CD",heploc:"alalc97",in:"id",iw:"he",ji:"yi",jw:"jv",mo:"ro",ayx:"nun",bjd:"drl",ccq:"rki",cjr:"mom",cka:"cmr",cmk:"xch",drh:"khk",drw:"prs",gav:"dev",hrr:"jal",ibi:"opa",kgh:"kml",lcq:"ppr",mst:"mry",myt:"mry",sca:"hle",tie:"ras",tkk:"twm",tlw:"weo",tnf:"prs",ybd:"rki",yma:"lrr"},extLang:{aao:["aao","ar"],abh:["abh","ar"],abv:["abv","ar"],acm:["acm","ar"],acq:["acq","ar"],acw:["acw","ar"],acx:["acx","ar"],acy:["acy","ar"],adf:["adf","ar"],ads:["ads","sgn"],aeb:["aeb","ar"],aec:["aec","ar"],aed:["aed","sgn"],aen:["aen","sgn"],afb:["afb","ar"],afg:["afg","sgn"],ajp:["ajp","ar"],apc:["apc","ar"],apd:["apd","ar"],arb:["arb","ar"],arq:["arq","ar"],ars:["ars","ar"],ary:["ary","ar"],arz:["arz","ar"],ase:["ase","sgn"],asf:["asf","sgn"],asp:["asp","sgn"],asq:["asq","sgn"],asw:["asw","sgn"],auz:["auz","ar"],avl:["avl","ar"],ayh:["ayh","ar"],ayl:["ayl","ar"],ayn:["ayn","ar"],ayp:["ayp","ar"],bbz:["bbz","ar"],bfi:["bfi","sgn"],bfk:["bfk","sgn"],bjn:["bjn","ms"],bog:["bog","sgn"],bqn:["bqn","sgn"],bqy:["bqy","sgn"],btj:["btj","ms"],bve:["bve","ms"],bvl:["bvl","sgn"],bvu:["bvu","ms"],bzs:["bzs","sgn"],cdo:["cdo","zh"],cds:["cds","sgn"],cjy:["cjy","zh"],cmn:["cmn","zh"],coa:["coa","ms"],cpx:["cpx","zh"],csc:["csc","sgn"],csd:["csd","sgn"],cse:["cse","sgn"],csf:["csf","sgn"],csg:["csg","sgn"],csl:["csl","sgn"],csn:["csn","sgn"],csq:["csq","sgn"],csr:["csr","sgn"],czh:["czh","zh"],czo:["czo","zh"],doq:["doq","sgn"],dse:["dse","sgn"],dsl:["dsl","sgn"],dup:["dup","ms"],ecs:["ecs","sgn"],esl:["esl","sgn"],esn:["esn","sgn"],eso:["eso","sgn"],eth:["eth","sgn"],fcs:["fcs","sgn"],fse:["fse","sgn"],fsl:["fsl","sgn"],fss:["fss","sgn"],gan:["gan","zh"],gds:["gds","sgn"],gom:["gom","kok"],gse:["gse","sgn"],gsg:["gsg","sgn"],gsm:["gsm","sgn"],gss:["gss","sgn"],gus:["gus","sgn"],hab:["hab","sgn"],haf:["haf","sgn"],hak:["hak","zh"],hds:["hds","sgn"],hji:["hji","ms"],hks:["hks","sgn"],hos:["hos","sgn"],hps:["hps","sgn"],hsh:["hsh","sgn"],hsl:["hsl","sgn"],hsn:["hsn","zh"],icl:["icl","sgn"],ils:["ils","sgn"],inl:["inl","sgn"],ins:["ins","sgn"],ise:["ise","sgn"],isg:["isg","sgn"],isr:["isr","sgn"],jak:["jak","ms"],jax:["jax","ms"],jcs:["jcs","sgn"],jhs:["jhs","sgn"],jls:["jls","sgn"],jos:["jos","sgn"],jsl:["jsl","sgn"],jus:["jus","sgn"],kgi:["kgi","sgn"],knn:["knn","kok"],kvb:["kvb","ms"],kvk:["kvk","sgn"],kvr:["kvr","ms"],kxd:["kxd","ms"],lbs:["lbs","sgn"],lce:["lce","ms"],lcf:["lcf","ms"],liw:["liw","ms"],lls:["lls","sgn"],lsg:["lsg","sgn"],lsl:["lsl","sgn"],lso:["lso","sgn"],lsp:["lsp","sgn"],lst:["lst","sgn"],lsy:["lsy","sgn"],ltg:["ltg","lv"],lvs:["lvs","lv"],lzh:["lzh","zh"],max:["max","ms"],mdl:["mdl","sgn"],meo:["meo","ms"],mfa:["mfa","ms"],mfb:["mfb","ms"],mfs:["mfs","sgn"],min:["min","ms"],mnp:["mnp","zh"],mqg:["mqg","ms"],mre:["mre","sgn"],msd:["msd","sgn"],msi:["msi","ms"],msr:["msr","sgn"],mui:["mui","ms"],mzc:["mzc","sgn"],mzg:["mzg","sgn"],mzy:["mzy","sgn"],nan:["nan","zh"],nbs:["nbs","sgn"],ncs:["ncs","sgn"],nsi:["nsi","sgn"],nsl:["nsl","sgn"],nsp:["nsp","sgn"],nsr:["nsr","sgn"],nzs:["nzs","sgn"],okl:["okl","sgn"],orn:["orn","ms"],ors:["ors","ms"],pel:["pel","ms"],pga:["pga","ar"],pks:["pks","sgn"],prl:["prl","sgn"],prz:["prz","sgn"],psc:["psc","sgn"],psd:["psd","sgn"],pse:["pse","ms"],psg:["psg","sgn"],psl:["psl","sgn"],pso:["pso","sgn"],psp:["psp","sgn"],psr:["psr","sgn"],pys:["pys","sgn"],rms:["rms","sgn"],rsi:["rsi","sgn"],rsl:["rsl","sgn"],sdl:["sdl","sgn"],sfb:["sfb","sgn"],sfs:["sfs","sgn"],sgg:["sgg","sgn"],sgx:["sgx","sgn"],shu:["shu","ar"],slf:["slf","sgn"],sls:["sls","sgn"],sqk:["sqk","sgn"],sqs:["sqs","sgn"],ssh:["ssh","ar"],ssp:["ssp","sgn"],ssr:["ssr","sgn"],svk:["svk","sgn"],swc:["swc","sw"],swh:["swh","sw"],swl:["swl","sgn"],syy:["syy","sgn"],tmw:["tmw","ms"],tse:["tse","sgn"],tsm:["tsm","sgn"],tsq:["tsq","sgn"],tss:["tss","sgn"],tsy:["tsy","sgn"],tza:["tza","sgn"],ugn:["ugn","sgn"],ugy:["ugy","sgn"],ukl:["ukl","sgn"],uks:["uks","sgn"],urk:["urk","ms"],uzn:["uzn","uz"],uzs:["uzs","uz"],vgt:["vgt","sgn"],vkk:["vkk","ms"],vkt:["vkt","ms"],vsi:["vsi","sgn"],vsl:["vsl","sgn"],vsv:["vsv","sgn"],wuu:["wuu","zh"],xki:["xki","sgn"],xml:["xml","sgn"],xmm:["xmm","ms"],xms:["xms","sgn"],yds:["yds","sgn"],ysl:["ysl","sgn"],yue:["yue","zh"],zib:["zib","sgn"],zlm:["zlm","ms"],zmi:["zmi","ms"],zsl:["zsl","sgn"],zsm:["zsm","ms"]}},Lt=/^[A-Z]{3}$/,Nt=/-u(?:-[0-9a-z]{2,8})+/gi,Et={};Et.getCanonicalLocales=function(t){var e=f(t),i=[];for(var n in e)i.push(e[n]);return i};var jt={BHD:3,BYR:0,XOF:0,BIF:0,XAF:0,CLF:4,CLP:0,KMF:0,DJF:0,XPF:0,GNF:0,ISK:0,IQD:3,JPY:0,JOD:3,KRW:0,KWD:3,LYD:3,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,VUV:0,VND:0};it(Et,"NumberFormat",{configurable:!0,writable:!0,value:w}),it(Et.NumberFormat,"prototype",{writable:!1}),ct.NumberFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["nu"],"[[localeData]]":{}},it(Et.NumberFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:ut.call(function(t){if(!et.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var e=n(),i=arguments[1],r=this["[[availableLocales]]"],s=f(t);return e.exp.test(e.input),b(r,s,i)},ct.NumberFormat)}),it(Et.NumberFormat.prototype,"format",{configurable:!0,get:O}),Et.NumberFormat.prototype.formatToParts=function(t){var e=null!==this&&"object"===J.typeof(this)&&s(this);if(!e||!e["[[initializedNumberFormat]]"])throw new TypeError("`this` value for formatToParts() is not an initialized Intl.NumberFormat object.");var i=Number(t);return T(this,i)};var It={arab:["","","","","","","","","",""],arabext:["","","","","","","","","",""],bali:["","","","","","","","","",""],beng:["","","","","","","","","",""],deva:["","","","","","","","","",""],fullwide:["","","","","","","","","",""],gujr:["","","","","","","","","",""],guru:["","","","","","","","","",""],hanidec:["","","","","","","","","",""],khmr:["","","","","","","","","",""],knda:["","","","","","","","","",""],laoo:["","","","","","","","","",""],latn:["0","1","2","3","4","5","6","7","8","9"],limb:["","","","","","","","","",""],mlym:["","","","","","","","","",""],mong:["","","","","","","","","",""],mymr:["","","","","","","","","",""],orya:["","","","","","","","","",""],tamldec:["","","","","","","","","",""],telu:["","","","","","","","","",""],thai:["","","","","","","","","",""],tibt:["","","","","","","","","",""]};it(Et.NumberFormat.prototype,"resolvedOptions",{configurable:!0,writable:!0,value:function(){var t=void 0,i=new e,n=["locale","numberingSystem","style","currency","currencyDisplay","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","useGrouping"],r=null!==this&&"object"===J.typeof(this)&&s(this);if(!r||!r["[[initializedNumberFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.NumberFormat object.");for(var a=0,o=n.length;a<o;a++)et.call(r,t="[["+n[a]+"]]")&&(i[n[a]]={value:r[t],writable:!0,configurable:!0,enumerable:!0});return rt({},i)}});var Pt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g,Rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Bt=/[rqQASjJgwWIQq]/,Ft=["weekday","era","year","month","day","weekday","quarter"],zt=["hour","minute","second","hour12","timeZoneName"],Yt=rt(null,{narrow:{},short:{},long:{}});it(Et,"DateTimeFormat",{configurable:!0,writable:!0,value:F}),it(F,"prototype",{writable:!1});var Wt={weekday:["narrow","short","long"],era:["narrow","short","long"],year:["2-digit","numeric"],month:["2-digit","numeric","narrow","short","long"],day:["2-digit","numeric"],hour:["2-digit","numeric"],minute:["2-digit","numeric"],second:["2-digit","numeric"],timeZoneName:["short","long"]};ct.DateTimeFormat={"[[availableLocales]]":[],"[[relevantExtensionKeys]]":["ca","nu"],"[[localeData]]":{}},it(Et.DateTimeFormat,"supportedLocalesOf",{configurable:!0,writable:!0,value:ut.call(function(t){if(!et.call(this,"[[availableLocales]]"))throw new TypeError("supportedLocalesOf() is not a constructor");var e=n(),i=arguments[1],r=this["[[availableLocales]]"],s=f(t);return e.exp.test(e.input),b(r,s,i)},ct.NumberFormat)}),it(Et.DateTimeFormat.prototype,"format",{configurable:!0,get:V}),it(Et.DateTimeFormat.prototype,"formatToParts",{configurable:!0,get:X}),it(Et.DateTimeFormat.prototype,"resolvedOptions",{writable:!0,configurable:!0,value:function(){var t=void 0,i=new e,n=["locale","calendar","numberingSystem","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"],r=null!==this&&"object"===J.typeof(this)&&s(this);if(!r||!r["[[initializedDateTimeFormat]]"])throw new TypeError("`this` value for resolvedOptions() is not an initialized Intl.DateTimeFormat object.");for(var a=0,o=n.length;a<o;a++)et.call(r,t="[["+n[a]+"]]")&&(i[n[a]]={value:r[t],writable:!0,configurable:!0,enumerable:!0});return rt({},i)}});var Gt=Et.__localeSensitiveProtos={Number:{},Date:{}};if(Gt.Number.toLocaleString=function(){if("[object Number]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a number for Number.prototype.toLocaleString()");return M(new w(arguments[0],arguments[1]),this)},Gt.Date.toLocaleString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=W(i,"any","all");var n=new F(e,i);return q(n,t)},Gt.Date.toLocaleDateString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleDateString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=W(i,"date","date");var n=new F(e,i);return q(n,t)},Gt.Date.toLocaleTimeString=function(){if("[object Date]"!==Object.prototype.toString.call(this))throw new TypeError("`this` value must be a Date instance for Date.prototype.toLocaleTimeString()");var t=+this;if(isNaN(t))return"Invalid Date";var e=arguments[0],i=arguments[1];i=W(i,"time","time");var n=new F(e,i);return q(n,t)},it(Et,"__applyLocaleSensitivePrototypes",{writable:!0,configurable:!0,value:function(){it(Number.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Gt.Number.toLocaleString}),it(Date.prototype,"toLocaleString",{writable:!0,configurable:!0,value:Gt.Date.toLocaleString});for(var t in Gt.Date)et.call(Gt.Date,t)&&it(Date.prototype,t,{writable:!0,configurable:!0,value:Gt.Date[t]})}}),it(Et,"__addLocaleData",{value:function(t){if(!h(t.locale))throw new Error("Object passed doesn't identify itself with a valid language tag");K(t,t.locale)}}),"undefined"==typeof Intl)try{window.Intl=Et,Et.__applyLocaleSensitivePrototypes()}catch(t){}return Et}),define("highlight.js/index",["require","exports","module","./highlight","./languages/1c","./languages/abnf","./languages/accesslog","./languages/actionscript","./languages/ada","./languages/apache","./languages/applescript","./languages/cpp","./languages/arduino","./languages/armasm","./languages/xml","./languages/asciidoc","./languages/aspectj","./languages/autohotkey","./languages/autoit","./languages/avrasm","./languages/awk","./languages/axapta","./languages/bash","./languages/basic","./languages/bnf","./languages/brainfuck","./languages/cal","./languages/capnproto","./languages/ceylon","./languages/clojure","./languages/clojure-repl","./languages/cmake","./languages/coffeescript","./languages/coq","./languages/cos","./languages/crmsh","./languages/crystal","./languages/cs","./languages/csp","./languages/css","./languages/d","./languages/markdown","./languages/dart","./languages/delphi","./languages/diff","./languages/django","./languages/dns","./languages/dockerfile","./languages/dos","./languages/dsconfig","./languages/dts","./languages/dust","./languages/ebnf","./languages/elixir","./languages/elm","./languages/ruby","./languages/erb","./languages/erlang-repl","./languages/erlang","./languages/excel","./languages/fix","./languages/fortran","./languages/fsharp","./languages/gams","./languages/gauss","./languages/gcode","./languages/gherkin","./languages/glsl","./languages/go","./languages/golo","./languages/gradle","./languages/groovy","./languages/haml","./languages/handlebars","./languages/haskell","./languages/haxe","./languages/hsp","./languages/htmlbars","./languages/http","./languages/inform7","./languages/ini","./languages/irpf90","./languages/java","./languages/javascript","./languages/json","./languages/julia","./languages/kotlin","./languages/lasso","./languages/ldif","./languages/less","./languages/lisp","./languages/livecodeserver","./languages/livescript","./languages/lsl","./languages/lua","./languages/makefile","./languages/mathematica","./languages/matlab","./languages/maxima","./languages/mel","./languages/mercury","./languages/mipsasm","./languages/mizar","./languages/perl","./languages/mojolicious","./languages/monkey","./languages/moonscript","./languages/nginx","./languages/nimrod","./languages/nix","./languages/nsis","./languages/objectivec","./languages/ocaml","./languages/openscad","./languages/oxygene","./languages/parser3","./languages/pf","./languages/php","./languages/pony","./languages/powershell","./languages/processing","./languages/profile","./languages/prolog","./languages/protobuf","./languages/puppet","./languages/purebasic","./languages/python","./languages/q","./languages/qml","./languages/r","./languages/rib","./languages/roboconf","./languages/rsl","./languages/ruleslanguage","./languages/rust","./languages/scala","./languages/scheme","./languages/scilab","./languages/scss","./languages/smali","./languages/smalltalk","./languages/sml","./languages/sqf","./languages/sql","./languages/stan","./languages/stata","./languages/step21","./languages/stylus","./languages/subunit","./languages/swift","./languages/taggerscript","./languages/yaml","./languages/tap","./languages/tcl","./languages/tex","./languages/thrift","./languages/tp","./languages/twig","./languages/typescript","./languages/vala","./languages/vbnet","./languages/vbscript","./languages/vbscript-html","./languages/verilog","./languages/vhdl","./languages/vim","./languages/x86asm","./languages/xl","./languages/xquery","./languages/zephir"],function(t,e,i){
var n=t("./highlight");n.registerLanguage("1c",t("./languages/1c")),n.registerLanguage("abnf",t("./languages/abnf")),n.registerLanguage("accesslog",t("./languages/accesslog")),n.registerLanguage("actionscript",t("./languages/actionscript")),n.registerLanguage("ada",t("./languages/ada")),n.registerLanguage("apache",t("./languages/apache")),n.registerLanguage("applescript",t("./languages/applescript")),n.registerLanguage("cpp",t("./languages/cpp")),n.registerLanguage("arduino",t("./languages/arduino")),n.registerLanguage("armasm",t("./languages/armasm")),n.registerLanguage("xml",t("./languages/xml")),n.registerLanguage("asciidoc",t("./languages/asciidoc")),n.registerLanguage("aspectj",t("./languages/aspectj")),n.registerLanguage("autohotkey",t("./languages/autohotkey")),n.registerLanguage("autoit",t("./languages/autoit")),n.registerLanguage("avrasm",t("./languages/avrasm")),n.registerLanguage("awk",t("./languages/awk")),n.registerLanguage("axapta",t("./languages/axapta")),n.registerLanguage("bash",t("./languages/bash")),n.registerLanguage("basic",t("./languages/basic")),n.registerLanguage("bnf",t("./languages/bnf")),n.registerLanguage("brainfuck",t("./languages/brainfuck")),n.registerLanguage("cal",t("./languages/cal")),n.registerLanguage("capnproto",t("./languages/capnproto")),n.registerLanguage("ceylon",t("./languages/ceylon")),n.registerLanguage("clojure",t("./languages/clojure")),n.registerLanguage("clojure-repl",t("./languages/clojure-repl")),n.registerLanguage("cmake",t("./languages/cmake")),n.registerLanguage("coffeescript",t("./languages/coffeescript")),n.registerLanguage("coq",t("./languages/coq")),n.registerLanguage("cos",t("./languages/cos")),n.registerLanguage("crmsh",t("./languages/crmsh")),n.registerLanguage("crystal",t("./languages/crystal")),n.registerLanguage("cs",t("./languages/cs")),n.registerLanguage("csp",t("./languages/csp")),n.registerLanguage("css",t("./languages/css")),n.registerLanguage("d",t("./languages/d")),n.registerLanguage("markdown",t("./languages/markdown")),n.registerLanguage("dart",t("./languages/dart")),n.registerLanguage("delphi",t("./languages/delphi")),n.registerLanguage("diff",t("./languages/diff")),n.registerLanguage("django",t("./languages/django")),n.registerLanguage("dns",t("./languages/dns")),n.registerLanguage("dockerfile",t("./languages/dockerfile")),n.registerLanguage("dos",t("./languages/dos")),n.registerLanguage("dsconfig",t("./languages/dsconfig")),n.registerLanguage("dts",t("./languages/dts")),n.registerLanguage("dust",t("./languages/dust")),n.registerLanguage("ebnf",t("./languages/ebnf")),n.registerLanguage("elixir",t("./languages/elixir")),n.registerLanguage("elm",t("./languages/elm")),n.registerLanguage("ruby",t("./languages/ruby")),n.registerLanguage("erb",t("./languages/erb")),n.registerLanguage("erlang-repl",t("./languages/erlang-repl")),n.registerLanguage("erlang",t("./languages/erlang")),n.registerLanguage("excel",t("./languages/excel")),n.registerLanguage("fix",t("./languages/fix")),n.registerLanguage("fortran",t("./languages/fortran")),n.registerLanguage("fsharp",t("./languages/fsharp")),n.registerLanguage("gams",t("./languages/gams")),n.registerLanguage("gauss",t("./languages/gauss")),n.registerLanguage("gcode",t("./languages/gcode")),n.registerLanguage("gherkin",t("./languages/gherkin")),n.registerLanguage("glsl",t("./languages/glsl")),n.registerLanguage("go",t("./languages/go")),n.registerLanguage("golo",t("./languages/golo")),n.registerLanguage("gradle",t("./languages/gradle")),n.registerLanguage("groovy",t("./languages/groovy")),n.registerLanguage("haml",t("./languages/haml")),n.registerLanguage("handlebars",t("./languages/handlebars")),n.registerLanguage("haskell",t("./languages/haskell")),n.registerLanguage("haxe",t("./languages/haxe")),n.registerLanguage("hsp",t("./languages/hsp")),n.registerLanguage("htmlbars",t("./languages/htmlbars")),n.registerLanguage("http",t("./languages/http")),n.registerLanguage("inform7",t("./languages/inform7")),n.registerLanguage("ini",t("./languages/ini")),n.registerLanguage("irpf90",t("./languages/irpf90")),n.registerLanguage("java",t("./languages/java")),n.registerLanguage("javascript",t("./languages/javascript")),n.registerLanguage("json",t("./languages/json")),n.registerLanguage("julia",t("./languages/julia")),n.registerLanguage("kotlin",t("./languages/kotlin")),n.registerLanguage("lasso",t("./languages/lasso")),n.registerLanguage("ldif",t("./languages/ldif")),n.registerLanguage("less",t("./languages/less")),n.registerLanguage("lisp",t("./languages/lisp")),n.registerLanguage("livecodeserver",t("./languages/livecodeserver")),n.registerLanguage("livescript",t("./languages/livescript")),n.registerLanguage("lsl",t("./languages/lsl")),n.registerLanguage("lua",t("./languages/lua")),n.registerLanguage("makefile",t("./languages/makefile")),n.registerLanguage("mathematica",t("./languages/mathematica")),n.registerLanguage("matlab",t("./languages/matlab")),n.registerLanguage("maxima",t("./languages/maxima")),n.registerLanguage("mel",t("./languages/mel")),n.registerLanguage("mercury",t("./languages/mercury")),n.registerLanguage("mipsasm",t("./languages/mipsasm")),n.registerLanguage("mizar",t("./languages/mizar")),n.registerLanguage("perl",t("./languages/perl")),n.registerLanguage("mojolicious",t("./languages/mojolicious")),n.registerLanguage("monkey",t("./languages/monkey")),n.registerLanguage("moonscript",t("./languages/moonscript")),n.registerLanguage("nginx",t("./languages/nginx")),n.registerLanguage("nimrod",t("./languages/nimrod")),n.registerLanguage("nix",t("./languages/nix")),n.registerLanguage("nsis",t("./languages/nsis")),n.registerLanguage("objectivec",t("./languages/objectivec")),n.registerLanguage("ocaml",t("./languages/ocaml")),n.registerLanguage("openscad",t("./languages/openscad")),n.registerLanguage("oxygene",t("./languages/oxygene")),n.registerLanguage("parser3",t("./languages/parser3")),n.registerLanguage("pf",t("./languages/pf")),n.registerLanguage("php",t("./languages/php")),n.registerLanguage("pony",t("./languages/pony")),n.registerLanguage("powershell",t("./languages/powershell")),n.registerLanguage("processing",t("./languages/processing")),n.registerLanguage("profile",t("./languages/profile")),n.registerLanguage("prolog",t("./languages/prolog")),n.registerLanguage("protobuf",t("./languages/protobuf")),n.registerLanguage("puppet",t("./languages/puppet")),n.registerLanguage("purebasic",t("./languages/purebasic")),n.registerLanguage("python",t("./languages/python")),n.registerLanguage("q",t("./languages/q")),n.registerLanguage("qml",t("./languages/qml")),n.registerLanguage("r",t("./languages/r")),n.registerLanguage("rib",t("./languages/rib")),n.registerLanguage("roboconf",t("./languages/roboconf")),n.registerLanguage("rsl",t("./languages/rsl")),n.registerLanguage("ruleslanguage",t("./languages/ruleslanguage")),n.registerLanguage("rust",t("./languages/rust")),n.registerLanguage("scala",t("./languages/scala")),n.registerLanguage("scheme",t("./languages/scheme")),n.registerLanguage("scilab",t("./languages/scilab")),n.registerLanguage("scss",t("./languages/scss")),n.registerLanguage("smali",t("./languages/smali")),n.registerLanguage("smalltalk",t("./languages/smalltalk")),n.registerLanguage("sml",t("./languages/sml")),n.registerLanguage("sqf",t("./languages/sqf")),n.registerLanguage("sql",t("./languages/sql")),n.registerLanguage("stan",t("./languages/stan")),n.registerLanguage("stata",t("./languages/stata")),n.registerLanguage("step21",t("./languages/step21")),n.registerLanguage("stylus",t("./languages/stylus")),n.registerLanguage("subunit",t("./languages/subunit")),n.registerLanguage("swift",t("./languages/swift")),n.registerLanguage("taggerscript",t("./languages/taggerscript")),n.registerLanguage("yaml",t("./languages/yaml")),n.registerLanguage("tap",t("./languages/tap")),n.registerLanguage("tcl",t("./languages/tcl")),n.registerLanguage("tex",t("./languages/tex")),n.registerLanguage("thrift",t("./languages/thrift")),n.registerLanguage("tp",t("./languages/tp")),n.registerLanguage("twig",t("./languages/twig")),n.registerLanguage("typescript",t("./languages/typescript")),n.registerLanguage("vala",t("./languages/vala")),n.registerLanguage("vbnet",t("./languages/vbnet")),n.registerLanguage("vbscript",t("./languages/vbscript")),n.registerLanguage("vbscript-html",t("./languages/vbscript-html")),n.registerLanguage("verilog",t("./languages/verilog")),n.registerLanguage("vhdl",t("./languages/vhdl")),n.registerLanguage("vim",t("./languages/vim")),n.registerLanguage("x86asm",t("./languages/x86asm")),n.registerLanguage("xl",t("./languages/xl")),n.registerLanguage("xquery",t("./languages/xquery")),n.registerLanguage("zephir",t("./languages/zephir")),i.exports=n}),define("highlight.js",["highlight.js/index"],function(t){return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i18next-xhr-backend/i18nextXHRBackend",e):t.i18nextXHRBackend=e()}(this,function(){"use strict";function t(t){return r.call(s.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t}function e(t,e,i,n,r){if(n&&"object"===("undefined"==typeof n?"undefined":a(n))){var s="",o=encodeURIComponent;for(var h in n)s+="&"+o(h)+"="+o(n[h]);n=s.slice(1)+(r?"":"&_t="+new Date)}try{var l=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");l.open(n?"POST":"GET",t,1),e.crossDomain||l.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){l.readyState>3&&i&&i(l.responseText,l)},l.send(n)}catch(t){window.console&&console.log(t)}}function i(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:e}}var n=[],r=n.forEach,s=n.slice,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function(){function e(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),this.init(t,i),this.type="backend"}return h(e,[{key:"init",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=e,this.options=t(n,this.options||{},i())}},{key:"readMulti",value:function(t,e,i){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath(t,e));var r=this.services.interpolator.interpolate(n,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(r,i)}},{key:"read",value:function(t,e,i){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath([t],[e]));var r=this.services.interpolator.interpolate(n,{lng:t,ns:e});this.loadUrl(r,i)}},{key:"loadUrl",value:function(t,e){var i=this;this.options.ajax(t,this.options,function(n,r){if(r.status>=500&&r.status<600)return e("failed loading "+t,!0);if(r.status>=400&&r.status<500)return e("failed loading "+t,!1);var s=void 0,a=void 0;try{s=i.options.parse(n,t)}catch(e){a="failed parsing "+t+" to json"}return a?e(a,!1):void e(null,s)})}},{key:"create",value:function(t,e,i,n){var r=this;"string"==typeof t&&(t=[t]);var s={};s[i]=n||"",t.forEach(function(t){var i=r.services.interpolator.interpolate(r.options.addPath,{lng:t,ns:e});r.options.ajax(i,r.options,function(t,e){},s)})}}]),e}();return l.type="backend",l}),define("i18next-xhr-backend",["i18next-xhr-backend/i18nextXHRBackend"],function(t){return t}),define("aurelia-validation/aurelia-validation",["require","exports","./validate-binding-behavior","./validate-trigger","./validation-controller","./validation-controller-factory","./validation-error","./validation-errors-custom-attribute","./validation-renderer-custom-attribute","./validator","./implementation/rules","./implementation/standard-validator","./implementation/validation-messages","./implementation/validation-parser","./implementation/validation-rules","./validator","./implementation/standard-validator","./implementation/validation-parser","./implementation/validation-rules"],function(t,e,i,n,r,s,a,o,h,l,u,c,f,d,g,p,v,m,y){"use strict";function b(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}function x(t,e){var i=t.container.get(m.ValidationParser);y.ValidationRules.initialize(i);var n=new _;e instanceof Function&&e(n),n.apply(t.container),t.globalResources("./validate-binding-behavior","./validation-errors-custom-attribute","./validation-renderer-custom-attribute")}b(i),b(n),b(r),b(s),b(a),b(o),b(h),b(l),b(u),b(c),b(f),b(d),b(g);var _=function(){function t(){this.validatorType=v.StandardValidator}return t.prototype.customValidator=function(t){this.validatorType=t},t.prototype.apply=function(t){var e=t.get(this.validatorType);t.registerInstance(p.Validator,e)},t}();e.AureliaValidationConfiguration=_,e.configure=x}),define("aurelia-validation",["aurelia-validation/aurelia-validation"],function(t){return t}),function(){var t;window.AmCharts?t=window.AmCharts:(t={},window.AmCharts=t,t.themes={},t.maps={},t.inheriting={},t.charts=[],t.onReadyArray=[],t.useUTC=!1,t.updateRate=30,t.uid=0,t.lang={},t.translations={},t.mapTranslations={},t.windows={},t.initHandlers=[]),t.Class=function(e){var i=function(){arguments[0]!==t.inheriting&&(this.events={},this.construct.apply(this,arguments))};e.inherits?(i.prototype=new e.inherits(t.inheriting),i.base=e.inherits.prototype,delete e.inherits):(i.prototype.createEvents=function(){for(var t=0,e=arguments.length;t<e;t++)this.events[arguments[t]]=[]},i.prototype.listenTo=function(t,e,i){this.removeListener(t,e,i),t.events[e].push({handler:i,scope:this})},i.prototype.addListener=function(t,e,i){this.removeListener(this,t,e),this.events[t].push({handler:e,scope:i})},i.prototype.removeListener=function(t,e,i){if(t&&t.events)for(t=t.events[e],e=t.length-1;0<=e;e--)t[e].handler===i&&t.splice(e,1)},i.prototype.fire=function(t,e){for(var i=this.events[t],n=0,r=i.length;n<r;n++){var s=i[n];s.handler.call(s.scope,e)}});for(var n in e)i.prototype[n]=e[n];return i},t.addChart=function(e){t.updateInt||(t.updateInt=setInterval(function(){t.update()},Math.round(1e3/t.updateRate))),t.charts.push(e)},t.removeChart=function(e){for(var i=t.charts,n=i.length-1;0<=n;n--)i[n]==e&&i.splice(n,1);0===i.length&&t.updateInt&&(clearInterval(t.updateInt),t.updateInt=NaN)},t.isModern=!0,t.getIEVersion=function(){var t,e,i=0;return"Microsoft Internet Explorer"==navigator.appName&&(t=navigator.userAgent,e=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!==e.exec(t)&&(i=parseFloat(RegExp.$1))),i},t.applyLang=function(e,i){var n=t.translations;i.dayNames=t.extend({},t.dayNames),i.shortDayNames=t.extend({},t.shortDayNames),i.monthNames=t.extend({},t.monthNames),i.shortMonthNames=t.extend({},t.shortMonthNames),n&&(n=n[e])&&(t.lang=n,n.monthNames&&(i.dayNames=t.extend({},n.dayNames),i.shortDayNames=t.extend({},n.shortDayNames),i.monthNames=t.extend({},n.monthNames),i.shortMonthNames=t.extend({},n.shortMonthNames)))},t.IEversion=t.getIEVersion(),9>t.IEversion&&0<t.IEversion&&(t.isModern=!1,t.isIE=!0),t.dx=0,t.dy=0,(document.addEventListener||window.opera)&&(t.isNN=!0,t.isIE=!1,t.dx=.5,t.dy=.5),document.attachEvent&&(t.isNN=!1,t.isIE=!0,t.isModern||(t.dx=0,t.dy=0)),window.chrome&&(t.chrome=!0),t.handleMouseUp=function(e){for(var i=t.charts,n=0;n<i.length;n++){var r=i[n];r&&r.handleReleaseOutside&&r.handleReleaseOutside(e)}},t.handleMouseMove=function(e){for(var i=t.charts,n=0;n<i.length;n++){var r=i[n];r&&r.handleMouseMove&&r.handleMouseMove(e)}},t.handleWheel=function(e){for(var i=t.charts,n=0;n<i.length;n++){var r=i[n];if(r&&r.mouseIsOver){r.mouseWheelScrollEnabled||r.mouseWheelZoomEnabled?r.handleWheel&&r.handleWheel(e):e.stopPropagation&&e.stopPropagation();break}}},t.resetMouseOver=function(){for(var e=t.charts,i=0;i<e.length;i++){var n=e[i];n&&(n.mouseIsOver=!1)}},t.ready=function(e){t.onReadyArray.push(e)},t.handleLoad=function(){t.isReady=!0;for(var e=t.onReadyArray,i=0;i<e.length;i++){var n=e[i];isNaN(t.processDelay)?n():setTimeout(n,t.processDelay*i)}},t.addInitHandler=function(e,i){t.initHandlers.push({method:e,types:i})},t.callInitHandler=function(e){var i=t.initHandlers;if(t.initHandlers)for(var n=0;n<i.length;n++){var r=i[n];r.types?t.isInArray(r.types,e.type)&&r.method(e):r.method(e)}},t.getUniqueId=function(){return t.uid++,"AmChartsEl-"+t.uid},t.isNN&&(document.addEventListener("mousemove",t.handleMouseMove,!0),document.addEventListener("mouseup",t.handleMouseUp,!0),window.addEventListener("load",t.handleLoad,!0),window.addEventListener("DOMMouseScroll",t.handleWheel,!0),document.addEventListener("mousewheel",t.handleWheel,!0)),t.isIE&&(document.attachEvent("onmousemove",t.handleMouseMove),document.attachEvent("onmouseup",t.handleMouseUp),window.attachEvent("onload",t.handleLoad)),t.clear=function(){var e=t.charts;if(e)for(var i=e.length-1;0<=i;i--)e[i].clear();t.updateInt&&clearInterval(t.updateInt),t.charts=[],t.isNN&&(document.removeEventListener("mousemove",t.handleMouseMove,!0),document.removeEventListener("mouseup",t.handleMouseUp,!0),window.removeEventListener("load",t.handleLoad,!0),window.removeEventListener("DOMMouseScroll",t.handleWheel,!0),document.removeEventListener("mousewheel",t.handleWheel,!0)),t.isIE&&(document.detachEvent("onmousemove",t.handleMouseMove),document.detachEvent("onmouseup",t.handleMouseUp),window.detachEvent("onload",t.handleLoad))},t.makeChart=function(e,i,n){var r=i.type,s=i.theme;t.isString(s)&&(s=t.themes[s],i.theme=s);var a;switch(r){case"serial":a=new t.AmSerialChart(s);break;case"xy":a=new t.AmXYChart(s);break;case"pie":a=new t.AmPieChart(s);break;case"radar":a=new t.AmRadarChart(s);break;case"gauge":a=new t.AmAngularGauge(s);break;case"funnel":a=new t.AmFunnelChart(s);break;case"map":a=new t.AmMap(s);break;case"stock":a=new t.AmStockChart(s);break;case"gantt":a=new t.AmGanttChart(s)}return t.extend(a,i),t.isReady?isNaN(n)?a.write(e):setTimeout(function(){t.realWrite(a,e)},n):t.ready(function(){isNaN(n)?a.write(e):setTimeout(function(){t.realWrite(a,e)},n)}),a},t.realWrite=function(t,e){t.write(e)},t.updateCount=0,t.validateAt=Math.round(t.updateRate/5),t.update=function(){var e=t.charts;t.updateCount++;var i=!1;if(t.updateCount==t.validateAt&&(i=!0,t.updateCount=0),e)for(var n=0;n<e.length;n++)e[n].update&&e[n].update(),i&&e[n].autoResize&&e[n].validateSize&&e[n].validateSize()},t.bezierX=3,t.bezierY=6}(),function(){var t=window.AmCharts;t.toBoolean=function(t,e){if(void 0===t)return e;switch(String(t).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(t)}},t.removeFromArray=function(t,e){var i;if(void 0!==e&&void 0!==t)for(i=t.length-1;0<=i;i--)t[i]==e&&t.splice(i,1)},t.getPath=function(){var t=document.getElementsByTagName("script");if(t)for(var e=0;e<t.length;e++){var i=t[e].src;if(-1!==i.search(/\/(amcharts|ammap)\.js/))return i.replace(/\/(amcharts|ammap)\.js.*/,"/")}},t.normalizeUrl=function(t){return""!==t&&-1===t.search(/\/$/)?t+"/":t},t.isAbsolute=function(t){return 0===t.search(/^http[s]?:|^\//)},t.isInArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.getDecimals=function(t){var e=0;return isNaN(t)||(t=String(t),-1!=t.indexOf("e-")?e=Number(t.split("-")[1]):-1!=t.indexOf(".")&&(e=t.split(".")[1].length)),e},t.wrappedText=function(e,i,n,r,s,a,o,h,l){var u=t.text(e,i,n,r,s,a,o),c="\n";if(t.isModern||(c="<br>"),10<l)return u;if(u){var f=u.getBBox();if(f.width>h){f=Math.ceil(f.width/h),u.remove();for(var u=[],d=0;-1<(d=i.indexOf(" ",d));)u.push(d),d+=1;for(var g,d=0;d<u.length;d+=Math.ceil(u.length/f))g=u[d],i=i.substr(0,g)+c+i.substr(g+1);if(isNaN(g)){if(0===l)for(d=1;d<f;d++)g=Math.round(i.length/f*d),i=i.substr(0,g)+c+i.substr(g);return t.text(e,i,n,r,s,a,o)}return t.wrappedText(e,i,n,r,s,a,o,h,l+1)}return u}},t.getStyle=function(t,e){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(e=e.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),i=t.currentStyle[e]),i},t.removePx=function(t){if(void 0!==t)return Number(t.substring(0,t.length-2))},t.getURL=function(e,i){if(e)if("_self"!=i&&i)if("_top"==i&&window.top)window.top.location.href=e;else if("_parent"==i&&window.parent)window.parent.location.href=e;else if("_blank"==i)window.open(e);else{var n=document.getElementsByName(i)[0];n?n.src=e:(n=t.windows[i])&&n.opener&&!n.opener.closed?n.location.href=e:t.windows[i]=window.open(e)}else window.location.href=e},t.ifArray=function(t){return!!(t&&0<t.length)},t.callMethod=function(t,e){var i;for(i=0;i<e.length;i++){var n=e[i];if(n){n[t]&&n[t]();var r=n.length;if(0<r){var s;for(s=0;s<r;s++){var a=n[s];a&&a[t]&&a[t]()}}}}},t.toNumber=function(t){return"number"==typeof t?t:Number(String(t).replace(/[^0-9\-.]+/g,""))},t.toColor=function(t){if(""!==t&&void 0!==t)if(-1!=t.indexOf(",")){t=t.split(",");var e;for(e=0;e<t.length;e++){var i=t[e].substring(t[e].length-6,t[e].length);t[e]="#"+i}}else t=t.substring(t.length-6,t.length),t="#"+t;return t},t.toCoordinate=function(t,e,i){var n;return void 0!==t&&(t=String(t),i&&i<e&&(e=i),n=Number(t),-1!=t.indexOf("!")&&(n=e-Number(t.substr(1))),-1!=t.indexOf("%")&&(n=e*Number(t.substr(0,t.length-1))/100)),n},t.fitToBounds=function(t,e,i){return t<e&&(t=e),t>i&&(t=i),t},t.isDefined=function(t){return void 0!==t},t.stripNumbers=function(t){return t.replace(/[0-9]+/g,"")},t.roundTo=function(t,e){if(0>e)return t;var i=Math.pow(10,e);return Math.round(t*i)/i},t.toFixed=function(t,e){var i=String(Math.round(t*Math.pow(10,e)));if(0<e){var n=i.length;if(n<e){var r;for(r=0;r<e-n;r++)i="0"+i}return n=i.substring(0,i.length-e),""===n&&(n=0),n+"."+i.substring(i.length-e,i.length)}return String(i)},t.formatDuration=function(e,i,n,r,s,a){var o=t.intervals,h=a.decimalSeparator;if(e>=o[i].contains){var l=e-Math.floor(e/o[i].contains)*o[i].contains;return"ss"==i&&(l=t.formatNumber(l,a),1==l.split(h)[0].length&&(l="0"+l)),("mm"==i||"hh"==i)&&10>l&&(l="0"+l),n=l+""+r[i]+n,e=Math.floor(e/o[i].contains),i=o[i].nextInterval,t.formatDuration(e,i,n,r,s,a)}if("ss"==i&&(e=t.formatNumber(e,a),1==e.split(h)[0].length&&(e="0"+e)),("mm"==i||"hh"==i)&&10>e&&(e="0"+e),n=e+""+r[i]+n,o[s].count>o[i].count)for(e=o[i].count;e<o[s].count;e++)i=o[i].nextInterval,"ss"==i||"mm"==i||"hh"==i?n="00"+r[i]+n:"DD"==i&&(n="0"+r[i]+n);return":"==n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),n},t.formatNumber=function(e,i,n,r,s){e=t.roundTo(e,i.precision),isNaN(n)&&(n=i.precision);var a=i.decimalSeparator;i=i.thousandsSeparator;var o;o=0>e?"-":"",e=Math.abs(e);var h=String(e),l=!1;-1!=h.indexOf("e")&&(l=!0),0<=n&&!l&&(h=t.toFixed(e,n));var u="";if(l)u=h;else{var c,h=h.split("."),l=String(h[0]);for(c=l.length;0<=c;c-=3)u=c!=l.length?0!==c?l.substring(c-3,c)+i+u:l.substring(c-3,c)+u:l.substring(c-3,c);void 0!==h[1]&&(u=u+a+h[1]),void 0!==n&&0<n&&"0"!=u&&(u=t.addZeroes(u,a,n))}return u=o+u,""===o&&!0===r&&0!==e&&(u="+"+u),!0===s&&(u+="%"),u},t.addZeroes=function(e,i,n){return e=e.split(i),void 0===e[1]&&0<n&&(e[1]="0"),e[1].length<n?(e[1]+="0",t.addZeroes(e[0]+i+e[1],i,n)):void 0!==e[1]?e[0]+i+e[1]:e[0]},t.scientificToNormal=function(t){var e;t=String(t).split("e");var i;if("-"==t[1].substr(0,1)){for(e="0.",i=0;i<Math.abs(Number(t[1]))-1;i++)e+="0";e+=t[0].split(".").join("")}else{var n=0;for(e=t[0].split("."),e[1]&&(n=e[1].length),e=t[0].split(".").join(""),i=0;i<Math.abs(Number(t[1]))-n;i++)e+="0"}return e},t.toScientific=function(t,e){if(0===t)return"0";var i=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n=String(n).split(".").join(e);return String(n)+"e"+i},t.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},t.hitTest=function(e,i,n){var r=!1,s=e.x,a=e.x+e.width,o=e.y,h=e.y+e.height,l=t.isInRectangle;return r||(r=l(s,o,i)),r||(r=l(s,h,i)),r||(r=l(a,o,i)),r||(r=l(a,h,i)),r||!0===n||(r=t.hitTest(i,e,!0)),r},t.isInRectangle=function(t,e,i){return t>=i.x-5&&t<=i.x+i.width+5&&e>=i.y-5&&e<=i.y+i.height+5},t.isPercents=function(t){if(-1!=String(t).indexOf("%"))return!0},t.findPosX=function(t){var e=t,i=t.offsetLeft;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetLeft;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollLeft||0}return i},t.findPosY=function(t){var e=t,i=t.offsetTop;if(t.offsetParent){for(;t=t.offsetParent;)i+=t.offsetTop;for(;(e=e.parentNode)&&e!=document.body;)i-=e.scrollTop||0}return i},t.findIfFixed=function(e){if(e.offsetParent)for(;e=e.offsetParent;)if("fixed"==t.getStyle(e,"position"))return!0;return!1},t.findIfAuto=function(e){return!(!e.style||"auto"!=t.getStyle(e,"overflow"))||!!e.parentNode&&t.findIfAuto(e.parentNode)},t.findScrollLeft=function(e,i){return e.scrollLeft&&(i+=e.scrollLeft),e.parentNode?t.findScrollLeft(e.parentNode,i):i},t.findScrollTop=function(e,i){return e.scrollTop&&(i+=e.scrollTop),e.parentNode?t.findScrollTop(e.parentNode,i):i},t.formatValue=function(e,i,n,r,s,a,o,h){if(i){void 0===s&&(s="");var l;for(l=0;l<n.length;l++){var u=n[l],c=i[u];void 0!==c&&(c=a?t.addPrefix(c,h,o,r):t.formatNumber(c,r),e=e.replace(new RegExp("\\[\\["+s+u+"\\]\\]","g"),c))}}return e},t.formatDataContextValue=function(t,e){if(t){var i,n=t.match(/\[\[.*?\]\]/g);for(i=0;i<n.length;i++){var r=n[i],r=r.substr(2,r.length-4);void 0!==e[r]&&(t=t.replace(new RegExp("\\[\\["+r+"\\]\\]","g"),e[r]))}}return t},t.massReplace=function(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];void 0===n&&(n=""),t=t.replace(i,n)}return t},t.cleanFromEmpty=function(t){return t.replace(/\[\[[^\]]*\]\]/g,"")},t.addPrefix=function(e,i,n,r,s){var a,o,h,l=t.formatNumber(e,r),u="";if(0===e)return"0";if(0>e&&(u="-"),e=Math.abs(e),1<e){for(a=i.length-1;-1<a;a--)if(e>=i[a].number&&(o=e/i[a].number,h=Number(r.precision),1>h&&(h=1),n=t.roundTo(o,h),h=t.formatNumber(n,{precision:-1,decimalSeparator:r.decimalSeparator,thousandsSeparator:r.thousandsSeparator}),!s||o==n)){l=u+""+h+i[a].prefix;break}}else for(a=0;a<n.length;a++)if(e<=n[a].number){o=e/n[a].number,h=Math.abs(Math.round(Math.log(o)*Math.LOG10E)),o=t.roundTo(o,h),l=u+""+o+n[a].prefix;break}return l},t.remove=function(t){t&&t.remove()},t.getEffect=function(t){return">"==t&&(t="easeOutSine"),"<"==t&&(t="easeInSine"),"elastic"==t&&(t="easeOutElastic"),t},t.getObjById=function(t,e){var i,n;for(n=0;n<t.length;n++){var r=t[n];r.id==e&&(i=r)}return i},t.applyTheme=function(e,i,n){i||(i=t.theme),i&&i[n]&&t.extend(e,i[n])},t.isString=function(t){return"string"==typeof t},t.extend=function(t,e,i){var n;t||(t={});for(n in e)i?t.hasOwnProperty(n)||(t[n]=e[n]):t[n]=e[n];return t},t.copyProperties=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"events"!=i&&void 0!==t[i]&&"function"!=typeof t[i]&&"cname"!=i&&(e[i]=t[i])},t.processObject=function(e,i,n,r){return!1==e instanceof i&&(e=r?t.extend(new i(n),e):t.extend(e,new i(n),!0)),e},t.fixNewLines=function(t){var e=RegExp("\\n","g");return t&&(t=t.replace(e,"<br />")),t},t.fixBrakes=function(e){if(t.isModern){var i=RegExp("<br>","g");e&&(e=e.replace(i,"\n"))}else e=t.fixNewLines(e);return e},t.deleteObject=function(e,i){if(e&&(void 0!==i&&null!==i||(i=20),0!==i))if("[object Array]"===Object.prototype.toString.call(e))for(var n=0;n<e.length;n++)t.deleteObject(e[n],i-1),e[n]=null;else if(e&&!e.tagName)try{for(n in e)e[n]&&("object"==typeof e[n]&&t.deleteObject(e[n],i-1),"function"!=typeof e[n]&&(e[n]=null))}catch(t){}},t.bounce=function(t,e,i,n,r){return(e/=r)<1/2.75?7.5625*n*e*e+i:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},t.easeInSine=function(t,e,i,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+i},t.easeOutSine=function(t,e,i,n,r){return n*Math.sin(e/r*(Math.PI/2))+i},t.easeOutElastic=function(t,e,i,n,r){t=1.70158;var s=0,a=n;return 0===e?i:1==(e/=r)?i+n:(s||(s=.3*r),a<Math.abs(n)?(a=n,t=s/4):t=s/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*e)*Math.sin(2*(e*r-t)*Math.PI/s)+n+i)},t.fixStepE=function(e){e=e.toExponential(0).split("e");var i=Number(e[1]);return 9==Number(e[0])&&i++,t.generateNumber(1,i)},t.generateNumber=function(t,e){var i,n="";i=0>e?Math.abs(e)-1:Math.abs(e);var r;for(r=0;r<i;r++)n+="0";return 0>e?Number("0."+n+String(t)):Number(String(t)+n)},t.setCN=function(t,e,i,n){if(t.addClassNames&&e&&(e=e.node)&&i){var r=e.getAttribute("class");t=t.classNamePrefix+"-",n&&(t=""),r?e.setAttribute("class",r+" "+t+i):e.setAttribute("class",t+i)}},t.parseDefs=function(e,i){for(var n in e){var r=typeof e[n];if(0<e[n].length&&"object"==r)for(var s=0;s<e[n].length;s++)r=document.createElementNS(t.SVG_NS,n),i.appendChild(r),t.parseDefs(e[n][s],r);else"object"==r?(r=document.createElementNS(t.SVG_NS,n),i.appendChild(r),t.parseDefs(e[n],r)):i.setAttribute(n,e[n])}}}(),function(){var t=window.AmCharts;t.AxisBase=t.Class({construct:function(e){this.createEvents("clickItem","rollOverItem","rollOutItem"),this.viY=this.viX=this.y=this.x=this.dy=this.dx=0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridCount=this.tickLength=5,this.gridAlpha=.15,this.gridThickness=1,this.gridColor="#000000",this.dashLength=0,this.labelFrequency=1,this.showLastLabel=this.showFirstLabel=!0,this.fillColor="#FFFFFF",this.fillAlpha=0,this.labelsEnabled=!0,this.labelRotation=0,this.autoGridCount=!0,this.offset=0,this.guides=[],this.visible=!0,this.counter=0,this.guides=[],this.ignoreAxisWidth=this.inside=!1,this.minHorizontalGap=75,this.minVerticalGap=35,this.titleBold=!0,this.minorGridEnabled=!1,this.minorGridAlpha=.07,this.autoWrap=!1,this.titleAlign="middle",this.labelOffset=0,this.bcn="axis-",this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={fff:"ss",ss:"mm",mm:"hh",hh:"DD",DD:"MM",MM:"YYYY"},t.applyTheme(this,e,"AxisBase")},zoom:function(t,e){this.start=t,this.end=e,this.dataChanged=!0,this.draw()},fixAxisPosition:function(){var t=this.position;"H"==this.orientation?("left"==t&&(t="bottom"),"right"==t&&(t="top")):("bottom"==t&&(t="left"),"top"==t&&(t="right")),this.position=t},draw:function(){var t=this.chart;this.allLabels=[],this.counter=0,this.destroy(),this.fixAxisPosition(),this.labels=[];var e=t.container,i=e.set();t.gridSet.push(i),this.set=i,e=e.set(),t.axesLabelsSet.push(e),this.labelsSet=e,this.axisLine=new this.axisRenderer(this),this.autoGridCount?("V"==this.orientation?(t=this.height/this.minVerticalGap,3>t&&(t=3)):t=this.width/this.minHorizontalGap,this.gridCountR=Math.max(t,1)):this.gridCountR=this.gridCount,this.axisWidth=this.axisLine.axisWidth,this.addTitle()},setOrientation:function(t){this.orientation=t?"H":"V"},addTitle:function(){var e=this.title;if(this.titleLabel=null,e){var i=this.chart,n=this.titleColor;void 0===n&&(n=i.color);var r=this.titleFontSize;isNaN(r)&&(r=i.fontSize+1),e=t.text(i.container,e,n,i.fontFamily,r,this.titleAlign,this.titleBold),
t.setCN(i,e,this.bcn+"title"),this.titleLabel=e}},positionTitle:function(){var e=this.titleLabel;if(e){var i,n,r=this.labelsSet,s={};0<r.length()?s=r.getBBox():(s.x=0,s.y=0,s.width=this.viW,s.height=this.viH,t.VML&&(s.y+=this.y,s.x+=this.x)),r.push(e);var r=s.x,a=s.y;t.VML&&(this.rotate?r-=this.x:a-=this.y);var o=s.width,s=s.height,h=this.viW,l=this.viH,u=0,c=e.getBBox().height/2,f=this.inside,d=this.titleAlign;switch(this.position){case"top":i="left"==d?-1:"right"==d?h:h/2,n=a-10-c;break;case"bottom":i="left"==d?-1:"right"==d?h:h/2,n=a+s+10+c;break;case"left":i=r-10-c,f&&(i-=5),n="left"==d?l+1:"right"==d?-1:l/2,u=-90;break;case"right":i=r+o+10+c-3,f&&(i+=7),n="left"==d?l+2:"right"==d?-2:l/2,u=-90}this.marginsChanged?(e.translate(i,n),this.tx=i,this.ty=n):e.translate(this.tx,this.ty),this.marginsChanged=!1,0!==u&&e.rotate(u)}},pushAxisItem:function(t,e){var i=this,n=t.graphics();0<n.length()&&(e?i.labelsSet.push(n):i.set.push(n)),(n=t.getLabel())&&(this.labelsSet.push(n),n.click(function(e){i.handleMouse(e,t,"clickItem")}).mouseover(function(e){i.handleMouse(e,t,"rollOverItem")}).mouseout(function(e){i.handleMouse(e,t,"rollOutItem")}))},handleMouse:function(t,e,i){this.fire(i,{type:i,value:e.value,serialDataItem:e.serialDataItem,axis:this,target:e.label,chart:this.chart,event:t})},addGuide:function(e){for(var i=this.guides,n=!1,r=i.length,s=0;s<i.length;s++)i[s]==e&&(n=!0,r=s);e=t.processObject(e,t.Guide,this.theme),e.id||(e.id="guideAuto"+r+"_"+(new Date).getTime()),n||i.push(e)},removeGuide:function(t){var e,i=this.guides;for(e=0;e<i.length;e++)i[e]==t&&i.splice(e,1)},handleGuideOver:function(t){clearTimeout(this.chart.hoverInt);var e=t.graphics.getBBox(),i=e.x+e.width/2,e=e.y+e.height/2,n=t.fillColor;void 0===n&&(n=t.lineColor),this.chart.showBalloon(t.balloonText,n,!0,i,e)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(t,e){var i=this;t.mouseover(function(){i.handleGuideOver(e)}),t.touchstart(function(){i.handleGuideOver(e)}),t.mouseout(function(){i.handleGuideOut(e)})},getBBox:function(){var e=this.labelsSet.getBBox();return t.VML||(e={x:e.x+this.x,y:e.y+this.y,width:e.width,height:e.height}),e},destroy:function(){t.remove(this.set),t.remove(this.labelsSet);var e=this.axisLine;e&&t.remove(e.set),t.remove(this.grid0)},chooseMinorFrequency:function(t){for(var e=10;0<e;e--)if(t/e==Math.round(t/e))return t/e},parseDatesDraw:function(){var e,i,n,r,s,a,o,h=this.chart,l=this.showFirstLabel,u=this.showLastLabel,c="",f=t.extractPeriod(this.minPeriod),d=t.getPeriodDuration(f.period,f.count),g=this.firstDayOfWeek,p=this.boldPeriodBeginning;e=this.minorGridEnabled;var v,m,y=this.gridAlpha,b=this.choosePeriod(0),x=b.period,b=b.count,_=t.getPeriodDuration(x,b);_<d&&(x=f.period,b=f.count,_=d),f=x,"WW"==f&&(f="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var w=Math.ceil(this.timeDifference/_)+5,C=n=t.resetDateToMin(new Date(this.startTime-_),x,b,g).getTime();f==x&&1==b&&this.centerLabelOnFullPeriod&&(s=_*this.stepWidth),this.cellWidth=d*this.stepWidth,a=Math.round(n/_),d=-1,a/2==Math.round(a/2)&&(d=-2,n-=_),a=this.firstTime;var S=0;if(e&&1<b&&(v=this.chooseMinorFrequency(b),m=t.getPeriodDuration(x,v)),0<this.gridCountR)for(e=d;e<=w;e++){if(o=a+_*(e+Math.floor((C-a)/_))-S,"DD"==x&&(o+=36e5),o=t.resetDateToMin(new Date(o),x,b,g).getTime(),"MM"==x&&(i=(o-n)/_,1.5<=(o-n)/_&&(o=o-(i-1)*_+t.getPeriodDuration("DD",3),o=t.resetDateToMin(new Date(o),x,1).getTime(),S+=_)),i=(o-this.startTime)*this.stepWidth,i=this.rotate?i+(this.x-this.viX):"date"==this.type?this.axisWidth-i+(this.y-this.viY):i+(this.y-this.viY),c=!1,this.nextPeriod[f]&&(c=this.checkPeriodChange(this.nextPeriod[f],1,o,n,f)),n=!1,c&&this.markPeriodChange?(c=this.dateFormatsObject[this.nextPeriod[f]],this.twoLineMode&&(c=this.dateFormatsObject[f]+"\n"+c,c=t.fixBrakes(c)),n=!0):c=this.dateFormatsObject[f],p||(n=!1),this.currentDateFormat=c,c=t.formatDate(new Date(o),c,h),(e==d&&!l||e==w&&!u)&&(c=" "),this.labelFunction&&(c=this.labelFunction(c,new Date(o),this,x,b,r).toString()),this.boldLabels&&(n=!0),r=new this.axisItemRenderer(this,i,c,!1,s,0,!1,n),this.pushAxisItem(r),r=n=o,!isNaN(v))for(i=1;i<b;i+=v)this.gridAlpha=this.minorGridAlpha,c=o+m*i,c=t.resetDateToMin(new Date(c),x,v,g).getTime(),c=new this.axisItemRenderer(this,(c-this.startTime)*this.stepWidth,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0),this.pushAxisItem(c);this.gridAlpha=y}},choosePeriod:function(e){var i=t.getPeriodDuration(this.periods[e].period,this.periods[e].count),n=Math.ceil(this.timeDifference/i),r=this.periods;return this.timeDifference<i&&0<e?r[e-1]:n<=this.gridCountR?r[e]:e+1<r.length?this.choosePeriod(e+1):r[e]},getStepWidth:function(t){var e;return this.startOnAxis?(e=this.axisWidth/(t-1),1==t&&(e=this.axisWidth)):e=this.axisWidth/t,e},timeZoom:function(t,e){this.startTime=t,this.endTime=e},minDuration:function(){var e=t.extractPeriod(this.minPeriod);return t.getPeriodDuration(e.period,e.count)},checkPeriodChange:function(e,i,n,r,s){n=new Date(n);var a=new Date(r),o=this.firstDayOfWeek;return r=i,"DD"==e&&(i=1),n=t.resetDateToMin(n,e,i,o).getTime(),i=t.resetDateToMin(a,e,i,o).getTime(),!("DD"==e&&"hh"!=s&&n-i<=t.getPeriodDuration(e,r))&&n!=i},generateDFObject:function(){this.dateFormatsObject={};var t;for(t=0;t<this.dateFormats.length;t++){var e=this.dateFormats[t];this.dateFormatsObject[e.period]=e.format}}})}(),function(){var t=window.AmCharts;t.ValueAxis=t.Class({inherits:t.AxisBase,construct:function(e){this.cname="ValueAxis",this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed"),t.ValueAxis.base.construct.call(this,e),this.dataChanged=!0,this.stackType="none",this.position="left",this.unitPosition="right",this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1,this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""},this.scrollbar=!1,this.baseValue=0,this.radarCategoriesEnabled=!0,this.gridType="polygons",this.useScientificNotation=!1,this.axisTitleOffset=10,this.minMaxMultiplier=1,this.logGridLimit=2,this.totalTextOffset=this.treatZeroAs=0,this.minPeriod="ss",t.applyTheme(this,e,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1),this.totals=[],this.data=this.chart.chartData;var e=this.chart;"xy"!=e.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step")),this.recalculateToPercents&&this.recalculate(),this.synchronizationMultiplier&&this.synchronizeWith?(t.isString(this.synchronizeWith)&&(this.synchronizeWith=e.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){t.ValueAxis.base.draw.call(this);var e=this.chart,i=this.set;t.setCN(e,this.set,"value-axis value-axis-"+this.id),t.setCN(e,this.labelsSet,"value-axis value-axis-"+this.id),t.setCN(e,this.axisLine.axisSet,"value-axis value-axis-"+this.id);var n=this.type;if("duration"==n&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),"date"==n&&(this.logarithmic=!1,this.min=this.minRR,this.max=this.maxRR,this.minimumDate&&(this.min=this.minimumDate.getTime()),this.maximumDate&&(this.max=this.maximumDate.getTime())),this.logarithmic){var r=this.treatZeroAs,s=this.getMin(0,this.data.length-1);if(this.minReal<s&&(this.minReal=s),isNaN(this.minReal)&&(this.minReal=s),0<r&&0===s&&(this.minReal=s=r),0>=s||0>=this.minimum)return void this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:e})}this.grid0=null;var a,o,h=e.dx,l=e.dy,r=!1,s=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||1/0==this.min||-(1/0)==this.max)r=!0;else{var u=this.labelFrequency,c=this.showFirstLabel,f=this.showLastLabel,d=1;a=0,this.minCalc=this.min,this.maxCalc=this.max,this.strictMinMax&&(isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum)),isNaN(this.minZoom)||(this.min=this.minZoom),isNaN(this.maxZoom)||(this.max=this.maxZoom);var g,p=Math.round((this.maxCalc-this.minCalc)/this.step)+1;!0===s?(g=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/g,g>this.logGridLimit&&(p=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,a=Math.round(Math.log(this.minReal)*Math.LOG10E),p>this.gridCountR&&(d=Math.ceil(p/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var v=0;1>this.step&&-1<this.step&&(v=t.getDecimals(this.step)),this.integersOnly&&(v=0),v>this.maxDecCount&&(v=this.maxDecCount);var m=this.precision;isNaN(m)||(v=m),this.max=t.roundTo(this.max,this.maxDecCount),this.min=t.roundTo(this.min,this.maxDecCount),o={},o.precision=v,o.decimalSeparator=e.nf.decimalSeparator,o.thousandsSeparator=e.nf.thousandsSeparator,this.numberFormatter=o;var y,b=this.guides,x=b.length;if(0<x){var _=this.fillAlpha;for(o=this.fillAlpha=0;o<x;o++){var w=b[o],C=NaN,S=w.above;isNaN(w.toValue)||(C=this.getCoordinate(w.toValue),y=new this.axisItemRenderer(this,C,"",!0,NaN,NaN,w),this.pushAxisItem(y,S));var O=NaN;isNaN(w.value)||(O=this.getCoordinate(w.value),y=new this.axisItemRenderer(this,O,w.label,!0,NaN,(C-O)/2,w),this.pushAxisItem(y,S)),isNaN(C-O)||(y=new this.guideFillRenderer(this,O,C,w),this.pushAxisItem(y,S),y=y.graphics(),w.graphics=y,w.balloonText&&this.addEventListeners(y,w))}this.fillAlpha=_}for(this.exponential=!1,o=a;o<p;o+=d)b=t.roundTo(this.step*o+this.min,v),-1!=String(b).indexOf("e")&&(this.exponential=!0);this.duration&&(this.maxInterval=t.getMaxInterval(this.max,this.duration));var T,v=this.step,b=this.minorGridAlpha;if(this.minorGridEnabled&&(T=this.getMinorGridStep(v,this.stepWidth*v)),"date"==n)this.generateDFObject(),this.timeDifference=this.max-this.min,this.maxTime=this.lastTime=this.max,this.startTime=this.firstTime=this.min,this.parseDatesDraw();else for(o=a;o<p;o+=d)if(n=v*o+this.minCalc,s&&this.max-this.min>10*this.min&&(n-=this.min),n=t.roundTo(n,this.maxDecCount+1),(!this.integersOnly||Math.round(n)==n)&&(isNaN(m)||Number(t.toFixed(n,m))==n)){if(!0===s&&(0===n&&(n=this.minReal),g>this.logGridLimit&&(n=Math.pow(10,o))),y=this.formatValue(n,!1,o),Math.round(o/u)!=o/u&&(y=void 0),(0===o&&!c||o==p-1&&!f)&&(y=" "),a=this.getCoordinate(n),y=new this.axisItemRenderer(this,a,y,void 0,void 0,void 0,void 0,this.boldLabels),this.pushAxisItem(y),n==this.baseValue&&"radar"!=e.type){var k,M,_=this.viW,w=this.viH;y=this.viX,x=this.viY,"H"==this.orientation?0<=a&&a<=_+1&&(k=[a,a,a+h],M=[w,0,l]):0<=a&&a<=w+1&&(k=[0,_,_+h],M=[a,a,a+l]),k&&(a=t.fitToBounds(2*this.gridAlpha,0,1),a=t.line(e.container,k,M,this.gridColor,a,1,this.dashLength),a.translate(y,x),this.grid0=a,e.axesSet.push(a),a.toBack(),t.setCN(e,a,this.bcn+"zero-grid-"+this.id),t.setCN(e,a,this.bcn+"zero-grid"))}if(!isNaN(T)&&0<b&&o<p-1){for(a=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,y=1;y<v/T;y++)x=this.getCoordinate(n+T*y),x=new this.axisItemRenderer(this,x,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(x);this.gridAlpha=a}}g=this.baseValue,this.min>this.baseValue&&this.max>this.baseValue&&(g=this.min),this.min<this.baseValue&&this.max<this.baseValue&&(g=this.max),s&&g<this.minReal&&(g=this.minReal),this.baseCoord=this.getCoordinate(g),g={type:"axisChanged",target:this,chart:e},g.min=s?this.minReal:this.min,g.max=this.max,this.fire("axisChanged",g),this.axisCreated=!0}s=this.axisLine.set,g=this.labelsSet,this.positionTitle(),"radar"!=e.type?(e=this.viX,T=this.viY,i.translate(e,T),g.translate(e,T)):s.toFront(),!this.visible||r?(i.hide(),s.hide(),g.hide()):(i.show(),s.show(),g.show()),this.axisY=this.y-this.viY,this.axisX=this.x-this.viX},formatValue:function(e,i,n){var r=this.exponential,s=this.logarithmic,a=this.numberFormatter,o=this.chart;return!0===this.logarithmic&&(r=-1!=String(e).indexOf("e")),this.useScientificNotation&&(r=!0),this.usePrefixes&&(r=!1),r?(i=-1==String(e).indexOf("e")?e.toExponential(15):String(e),n=i.split("e"),i=Number(n[0]),n=Number(n[1]),i=t.roundTo(i,14),10==i&&(i=1,n+=1),i=i+"e"+n,0===e&&(i="0"),1==e&&(i="1")):(s&&(r=String(e).split("."),r[1]?(a.precision=r[1].length,0>n&&(a.precision=Math.abs(n)),i&&1<e&&(a.precision=0)):a.precision=-1),i=this.usePrefixes?t.addPrefix(e,o.prefixesOfBigNumbers,o.prefixesOfSmallNumbers,a,!i):t.formatNumber(e,a,a.precision)),this.duration&&(i=t.formatDuration(e,this.duration,"",this.durationUnits,this.maxInterval,a)),"date"==this.type&&(i=t.formatDate(new Date(e),this.currentDateFormat,o)),this.recalculateToPercents?i+="%":(a=this.unit)&&(i="left"==this.unitPosition?a+i:i+a),this.labelFunction&&(i=this.labelFunction(e,i,this).toString()),i},getMinorGridStep:function(t,e){var i=[5,4,2];60>e&&i.shift();for(var n=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r=0;r<i.length;r++){var s=t/i[r],a=Math.floor(Math.log(Math.abs(s))*Math.LOG10E);if(!(0<Math.abs(n-a)))if(1>t){if(a=Math.pow(10,-a)*s,a==Math.round(a))return s}else if(s==Math.round(s))return s}},stackGraphs:function(e){var i=this.stackType;"stacked"==i&&(i="regular"),"line"==i&&(i="none"),"100% stacked"==i&&(i="100%"),this.stackType=i;var n,r,s,a,o,h=[],l=[],u=[],c=[],f=this.chart.graphs,d=this.baseValue,g=!1;if("line"!=e&&"step"!=e&&"smoothedLine"!=e||(g=!0),g&&("regular"==i||"100%"==i))for(o=0;o<f.length;o++)a=f[o],a.hidden||(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable&&(r&&(a.stackGraph=r),r=a));for(r=this.start;r<=this.end;r++){var p=0;for(o=0;o<f.length;o++)if(a=f[o],a.hidden)a.newStack&&(u[r]=NaN,l[r]=NaN);else if(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable)if(s=this.data[r].axes[this.id].graphs[a.id],n=s.values.value,isNaN(n))a.newStack&&(u[r]=NaN,l[r]=NaN);else{var v=t.getDecimals(n);p<v&&(p=v),isNaN(c[r])?c[r]=Math.abs(n):c[r]+=Math.abs(n),c[r]=t.roundTo(c[r],p),v=a.fillToGraph,g&&v&&(v=this.data[r].axes[this.id].graphs[v.id])&&(s.values.open=v.values.value),"regular"==i&&(g&&(isNaN(h[r])?(h[r]=n,s.values.close=n,s.values.open=this.baseValue):(isNaN(n)?s.values.close=h[r]:s.values.close=n+h[r],s.values.open=h[r],h[r]=s.values.close)),"column"==e&&(a.newStack&&(u[r]=NaN,l[r]=NaN),s.values.close=n,0>n?(s.values.close=n,isNaN(l[r])?s.values.open=d:(s.values.close+=l[r],s.values.open=l[r]),l[r]=s.values.close):(s.values.close=n,isNaN(u[r])?s.values.open=d:(s.values.close+=u[r],s.values.open=u[r]),u[r]=s.values.close)))}}for(r=this.start;r<=this.end;r++)for(o=0;o<f.length;o++)a=f[o],a.hidden?a.newStack&&(u[r]=NaN,l[r]=NaN):(s=a.type,a.chart==this.chart&&a.valueAxis==this&&e==s&&a.stackable&&(s=this.data[r].axes[this.id].graphs[a.id],n=s.values.value,isNaN(n)||(h=n/c[r]*100,s.values.percents=h,s.values.total=c[r],a.newStack&&(u[r]=NaN,l[r]=NaN),"100%"==i&&(isNaN(l[r])&&(l[r]=0),isNaN(u[r])&&(u[r]=0),0>h?(s.values.close=t.fitToBounds(h+l[r],-100,100),s.values.open=l[r],l[r]=s.values.close):(s.values.close=t.fitToBounds(h+u[r],-100,100),s.values.open=u[r],u[r]=s.values.close)))))},recalculate:function(){var e,i=this.chart,n=i.graphs;for(e=0;e<n.length;e++){var r=n[e];if(r.valueAxis==this){var s="value";"candlestick"!=r.type&&"ohlc"!=r.type||(s="open");var a,o,h=this.end+2,h=t.fitToBounds(this.end+1,0,this.data.length-1),l=this.start;0<l&&l--;var u;if(o=this.start,r.compareFromStart&&(o=0),!isNaN(i.startTime)&&(u=i.categoryAxis)){var c=u.minDuration(),c=new Date(i.startTime+c/2),f=t.resetDateToMin(new Date(i.startTime),u.minPeriod).getTime();t.resetDateToMin(new Date(c),u.minPeriod).getTime()>f&&o++}for((u=i.recalculateFromDate)&&(u=t.getDate(u,i.dataDateFormat,"fff"),o=i.getClosestIndex(i.chartData,"time",u.getTime(),!0,0,i.chartData.length),h=i.chartData.length-1),u=o;u<=h&&(o=this.data[u].axes[this.id].graphs[r.id],a=o.values[s],isNaN(a));u++);for(this.recBaseValue=a,s=l;s<=h;s++){o=this.data[s].axes[this.id].graphs[r.id],o.percents={};var d,l=o.values;for(d in l)o.percents[d]="percents"!=d?l[d]/a*100-100:l[d]}}}},getMinMax:function(){var e,i=!1,n=this.chart,r=n.graphs;for(e=0;e<r.length;e++){var s=r[e].type;("line"==s||"step"==s||"smoothedLine"==s)&&this.expandMinMax&&(i=!0)}if(i&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==n.type&&(!0!==n.categoryAxis.parseDates||i||this.end<this.data.length-1&&this.end++),i=this.minMaxMultiplier,this.min=this.getMin(this.start,this.end),this.max=this.getMax(),this.minRR=this.min,this.maxRR=this.max,i=(this.max-this.min)*(i-1),this.min-=i,this.max+=i,i=this.guides.length,this.includeGuidesInMinMax&&0<i)for(n=0;n<i;n++)r=this.guides[n],r.toValue<this.min&&(this.min=r.toValue),r.value<this.min&&(this.min=r.value),r.toValue>this.max&&(this.max=r.toValue),r.value>this.max&&(this.max=r.value);isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum),this.minimumDate&&(this.min=this.minimumDate.getTime()),this.maximumDate&&(this.max=this.maximumDate.getTime()),this.min>this.max&&(i=this.max,this.max=this.min,this.min=i),isNaN(this.minTemp)||(this.min=this.minTemp),isNaN(this.maxTemp)||(this.max=this.maxTemp),this.minReal=this.min,this.maxReal=this.max,0===this.min&&0===this.max&&(this.max=9),this.min>this.max&&(this.min=this.max-1),i=this.min,n=this.max,r=this.max-this.min,e=0===r?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(r))*Math.LOG10E))/10,isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/e)*e+e),isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/e)*e-e),0>this.min&&0<=i&&(this.min=0),0<this.max&&0>=n&&(this.max=0),"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100),r=this.max-this.min,e=Math.pow(10,Math.floor(Math.log(Math.abs(r))*Math.LOG10E))/10,this.step=Math.ceil(r/this.gridCountR/e)*e,r=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),r=t.fixStepE(r),e=Math.ceil(this.step/r),5<e&&(e=10),5>=e&&2<e&&(e=5),this.step=Math.ceil(this.step/(r*e))*r*e,1>r?(this.maxDecCount=Math.abs(Math.log(Math.abs(r))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=t.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0,this.min=this.step*Math.floor(this.min/this.step),this.max=this.step*Math.ceil(this.max/this.step),0>this.min&&0<=i&&(this.min=0),0<this.max&&0>=n&&(this.max=0),1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal)),r=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E)),0===this.min&&(this.minReal=r),0===this.min&&1<this.minReal&&(this.minReal=1),0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min),this.logarithmic&&(2<Math.log(n)*Math.LOG10E-Math.log(i)*Math.LOG10E?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(n))*Math.LOG10E))):(n=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,i=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E))/10,n<i&&(this.minReal=this.min=10*i)))},getMin:function(t,e){var i,n;for(n=t;n<=e;n++){var r,s=this.data[n].axes[this.id].graphs;for(r in s)if(s.hasOwnProperty(r)){var a=this.chart.getGraphById(r);if(a.includeInMinMax&&(!a.hidden||this.includeHidden)){isNaN(i)&&(i=1/0),this.foundGraphs=!0,a=s[r].values,this.recalculateToPercents&&(a=s[r].percents);var o;if(this.minMaxField)o=a[this.minMaxField],o<i&&(i=o);else for(var h in a)a.hasOwnProperty(h)&&"percents"!=h&&"total"!=h&&(o=a[h],o<i&&(i=o))}}}return i},getMax:function(){var t,e;for(e=this.start;e<=this.end;e++){var i,n=this.data[e].axes[this.id].graphs;for(i in n)if(n.hasOwnProperty(i)){var r=this.chart.getGraphById(i);if(r.includeInMinMax&&(!r.hidden||this.includeHidden)){isNaN(t)&&(t=-(1/0)),this.foundGraphs=!0,r=n[i].values,this.recalculateToPercents&&(r=n[i].percents);var s;if(this.minMaxField)s=r[this.minMaxField],s>t&&(t=s);else for(var a in r)r.hasOwnProperty(a)&&"percents"!=a&&"total"!=a&&(s=r[a],s>t&&(t=s))}}}return t},dispatchZoomEvent:function(t,e){var i={type:"axisZoomed",startValue:t,endValue:e,target:this,chart:this.chart};this.fire(i.type,i)},zoomOut:function(){var t=this.chart;"xy"!=t.type&&(this.maxZoom=this.minZoom=void 0,t.updateAfterValueZoom())},zoomToValues:function(t,e){var i=this.chart;"xy"==i.type?(e<t&&(i=e,e=t,t=i),t<this.min&&(t=this.min),e>this.max&&(e=this.max),i={type:"axisSelfZoomed"},i.chart=this.chart,i.valueAxis=this,i.multiplier=this.axisWidth/Math.abs(this.getCoordinate(e)-this.getCoordinate(t)),i.startValue=t,i.endValue=e,i.position="V"==this.orientation?this.reversed?this.getCoordinate(t):this.getCoordinate(e):this.reversed?this.getCoordinate(e):this.getCoordinate(t),this.fire(i.type,i)):(this.minZoom=t,this.maxZoom=e,i.updateAfterValueZoom())},coordinateToValue:function(t){if(isNaN(t))return NaN;var e=this.axisWidth,i=this.stepWidth,n=this.reversed,r=this.rotate,s=this.min,a=this.minReal;return!0===this.logarithmic?Math.pow(10,(r?!0===n?(e-t)/i:t/i:!0===n?t/i:(e-t)/i)+Math.log(a)*Math.LOG10E):!0===n?r?s-(t-e)/i:t/i+s:r?t/i+s:s-(t-e)/i},getCoordinate:function(t){if(isNaN(t))return NaN;var e=this.rotate,i=this.reversed,n=this.axisWidth,r=this.stepWidth,s=this.min,a=this.minReal;return!0===this.logarithmic?(0===t&&(t=this.treatZeroAs),t=Math.log(t)*Math.LOG10E-Math.log(a)*Math.LOG10E,e=e?!0===i?n-r*t:r*t:!0===i?r*t:n-r*t):e=!0===i?e?n-r*(t-s):r*(t-s):e?r*(t-s):n-r*(t-s),e=this.rotate?e+(this.x-this.viX):e+(this.y-this.viY),1e7<Math.abs(e)&&(e=1e7*(e/Math.abs(e))),Math.round(e)},synchronizeWithAxis:function(t){this.synchronizeWith=t,this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(){if(this.synchronizeWith){t.isString(this.synchronizeWith)&&(this.synchronizeWith=this.chart.getValueAxisById(this.synchronizeWith));var e=this.synchronizeWith,i=e.min,n=e.max,e=e.step,r=this.synchronizationMultiplier;r&&(this.min=i*r,this.max=n*r,this.step=e*r,i=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),i=Math.abs(Math.log(Math.abs(i))*Math.LOG10E),this.maxDecCount=i=Math.round(i),this.draw())}}})}(),function(){var t=window.AmCharts;t.RecAxis=t.Class({construct:function(e){var i=e.chart,n=e.axisThickness,r=e.axisColor,s=e.axisAlpha,a=e.offset,o=e.dx,h=e.dy,l=e.viX,u=e.viY,c=e.viH,f=e.viW,d=i.container;"H"==e.orientation?(r=t.line(d,[0,f],[0,0],r,s,n),this.axisWidth=e.width,"bottom"==e.position?(h=n/2+a+c+u-1,n=l):(h=-n/2-a+u+h,n=o+l)):(this.axisWidth=e.height,"right"==e.position?(r=t.line(d,[0,0,-o],[0,c,c-h],r,s,n),h=u+h,n=n/2+a+o+f+l-1):(r=t.line(d,[0,0],[0,c],r,s,n),h=u,n=-n/2-a+l)),r.translate(n,h),n=i.container.set(),n.push(r),i.axesSet.push(n),t.setCN(i,r,e.bcn+"line"),this.axisSet=n,this.set=r}})}(),function(){var t=window.AmCharts;t.RecItem=t.Class({construct:function(e,i,n,r,s,a,o,h,l,u,c,f){i=Math.round(i);var d=e.chart;this.value=n,void 0==n&&(n=""),l||(l=0),void 0==r&&(r=!0);var g=d.fontFamily,p=e.fontSize;void 0==p&&(p=d.fontSize);var v=e.color;void 0==v&&(v=d.color),void 0!==c&&(v=c);var m=e.chart.container,y=m.set();this.set=y;var b=e.axisThickness,x=e.axisColor,_=e.axisAlpha,w=e.tickLength,C=e.gridAlpha,S=e.gridThickness,O=e.gridColor,T=e.dashLength,k=e.fillColor,M=e.fillAlpha,A=e.labelsEnabled;c=e.labelRotation;var D,L,N=e.counter,E=e.inside,j=e.labelOffset,I=e.dx,P=e.dy,R=e.orientation,B=e.position,F=e.previousCoord,z=e.viH,Y=e.viW,W=e.offset;o?(void 0!==o.id&&(f=d.classNamePrefix+"-guide-"+o.id),A=!0,isNaN(o.tickLength)||(w=o.tickLength),void 0!=o.lineColor&&(O=o.lineColor),void 0!=o.color&&(v=o.color),isNaN(o.lineAlpha)||(C=o.lineAlpha),isNaN(o.dashLength)||(T=o.dashLength),isNaN(o.lineThickness)||(S=o.lineThickness),!0===o.inside&&(E=!0),isNaN(o.labelRotation)||(c=o.labelRotation),isNaN(o.fontSize)||(p=o.fontSize),o.position&&(B=o.position),void 0!==o.boldLabel&&(h=o.boldLabel),isNaN(o.labelOffset)||(j=o.labelOffset)):""===n&&(w=0),u&&!isNaN(e.minorTickLength)&&(w=e.minorTickLength);var G="start";s&&(G="middle");var H,V,X=c*Math.PI/180,U=0,q=0,Z=0,$=H=0,K=0;"V"==R&&(c=0);var J;A&&""!==n&&(J=e.autoWrap&&0===c?t.wrappedText(m,n,v,g,p,G,h,s,0):t.text(m,n,v,g,p,G,h),G=J.getBBox(),$=G.width,K=G.height),"H"==R?(0<=i&&i<=Y+1&&(0<w&&0<_&&i+l<=Y+1&&(D=t.line(m,[i+l,i+l],[0,w],x,_,S),y.push(D)),0<C&&(L=t.line(m,[i,i+I,i+I],[z,z+P,P],O,C,S,T),y.push(L))),q=0,U=i,o&&90==c&&E&&(U-=p),!1===r?(G="start",q="bottom"==B?E?q+w:q-w:E?q-w:q+w,U+=3,s&&(U+=s/2-3,G="middle"),0<c&&(G="middle")):G="middle",1==N&&0<M&&!o&&!u&&F<Y&&(r=t.fitToBounds(i,0,Y),F=t.fitToBounds(F,0,Y),H=r-F,0<H&&(V=t.rect(m,H,e.height,k,M),V.translate(r-H+I,P),y.push(V))),"bottom"==B?(q+=z+p/2+W,E?(0<c?(q=z-$/2*Math.sin(X)-w-3,U+=$/2*Math.cos(X)-4+2):0>c?(q=z+$*Math.sin(X)-w-3+2,U+=-$*Math.cos(X)-K*Math.sin(X)-4):q-=w+p+3+3,q-=j):(0<c?(q=z+$/2*Math.sin(X)+w+3,U-=$/2*Math.cos(X)):0>c?(q=z+w+3-$/2*Math.sin(X)+2,U+=$/2*Math.cos(X)):q+=w+b+3+3,q+=j)):(q+=P+p/2-W,U+=I,E?(0<c?(q=$/2*Math.sin(X)+w+3,U-=$/2*Math.cos(X)):q+=w+3,q+=j):(0<c?(q=-($/2)*Math.sin(X)-w-6,U+=$/2*Math.cos(X)):q-=w+p+3+b+3,q-=j)),"bottom"==B?H=(E?z-w-1:z+b-1)+W:(Z=I,H=(E?P:P-w-b+1)-W),a&&(U+=a),a=U,0<c&&(a+=$/2*Math.cos(X)),J&&(p=0,E&&(p=$/2*Math.cos(X)),a+p>Y+2||0>a)&&(J.remove(),J=null)):(0<=i&&i<=z+1&&(0<w&&0<_&&i+l<=z+1&&(D=t.line(m,[0,w],[i+l,i+l],x,_,S),y.push(D)),0<C&&(L=t.line(m,[0,I,Y+I],[i,i+P,i+P],O,C,S,T),y.push(L))),G="end",(!0===E&&"left"==B||!1===E&&"right"==B)&&(G="start"),q=i-p/2,1==N&&0<M&&!o&&!u&&(r=t.fitToBounds(i,0,z),F=t.fitToBounds(F,0,z),X=r-F,V=t.polygon(m,[0,e.width,e.width,0],[0,0,X,X],k,M),V.translate(I,r-X+P),y.push(V)),q+=p/2,"right"==B?(U+=I+Y+W,q+=P,E?(a||(q-=p/2+3),U=U-(w+4)-j):(U+=w+4+b,q-=2,U+=j)):E?(U+=w+4-W,a||(q-=p/2+3),o&&(U+=I,q+=P),U+=j):(U+=-w-b-4-2-W,q-=2,U-=j),D&&("right"==B?(Z+=I+W+Y,H+=P,Z=E?Z-b:Z+b):(Z-=W,E||(Z-=w+b))),a&&(q+=a),E=-3,"right"==B&&(E+=P),J&&(q>z+1||q<E)&&(J.remove(),J=null)),D&&(D.translate(Z,H),t.setCN(d,D,e.bcn+"tick"),t.setCN(d,D,f,!0),o&&t.setCN(d,D,"guide")),!1===e.visible&&(D&&D.remove(),J&&(J.remove(),J=null)),J&&(J.attr({"text-anchor":G}),J.translate(U,q),0!==c&&J.rotate(-c,e.chart.backgroundColor),e.allLabels.push(J),this.label=J,t.setCN(d,J,e.bcn+"label"),t.setCN(d,J,f,!0),o&&t.setCN(d,J,"guide")),L&&(t.setCN(d,L,e.bcn+"grid"),t.setCN(d,L,f,!0),o&&t.setCN(d,L,"guide")),V&&(t.setCN(d,V,e.bcn+"fill"),t.setCN(d,V,f,!0)),u?L&&t.setCN(d,L,e.bcn+"grid-minor"):(e.counter=0===N?1:0,e.previousCoord=i),0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}})}(),function(){var t=window.AmCharts;t.RecFill=t.Class({construct:function(e,i,n,r){var s=e.dx,a=e.dy,o=e.orientation,h=0;if(n<i){var l=i;i=n,n=l}var u=r.fillAlpha;isNaN(u)&&(u=0);var l=e.chart.container,c=r.fillColor;"V"==o?(i=t.fitToBounds(i,0,e.viH),n=t.fitToBounds(n,0,e.viH)):(i=t.fitToBounds(i,0,e.viW),n=t.fitToBounds(n,0,e.viW)),n-=i,isNaN(n)&&(n=4,h=2,u=0),0>n&&"object"==typeof c&&(c=c.join(",").split(",").reverse()),"V"==o?(o=t.rect(l,e.viW,n,c,u),o.translate(s,i-h+a)):(o=t.rect(l,n,e.viH,c,u),o.translate(i-h+s,a)),t.setCN(e.chart,o,"guide-fill"),r.id&&t.setCN(e.chart,o,"guide-fill-"+r.id),this.set=l.set([o])},graphics:function(){return this.set},getLabel:function(){}})}(),function(){var t=window.AmCharts;t.AmChart=t.Class({construct:function(e){this.theme=e,this.classNamePrefix="amcharts",this.addClassNames=!1,this.version="3.14.5",t.addChart(this),this.createEvents("dataUpdated","init","rendered","drawn","failed","resized"),this.height=this.width="100%",this.dataChanged=!0,this.chartCreated=!1,this.previousWidth=this.previousHeight=0,this.backgroundColor="#FFFFFF",this.borderAlpha=this.backgroundAlpha=0,this.color=this.borderColor="#000000",this.fontFamily="Verdana",this.fontSize=11,this.usePrefixes=!1,this.addCodeCredits=this.autoResize=!0,this.precision=-1,this.percentPrecision=2,this.decimalSeparator=".",this.thousandsSeparator=",",this.labels=[],this.allLabels=[],this.titles=[],this.marginRight=this.marginLeft=this.autoMarginOffset=0,this.timeOuts=[],this.creditsPosition="top-left";var i=document.createElement("div"),n=i.style;n.overflow="hidden",n.position="relative",n.textAlign="left",this.chartDiv=i,i=document.createElement("div"),n=i.style,n.overflow="hidden",n.position="relative",n.textAlign="left",this.legendDiv=i,this.titleHeight=0,this.hideBalloonTime=150,this.handDrawScatter=2,this.handDrawThickness=1,this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}],this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:""},{number:.001,prefix:"m"}],this.panEventsEnabled=!0,this.product="amcharts",this.animations=[],this.balloon=new t.AmBalloon(this.theme),this.balloon.chart=this,t.applyTheme(this,e,"AmChart")},drawChart:function(){this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.brr()},drawBackground:function(){t.remove(this.background);var e=this.container,i=this.backgroundColor,n=this.backgroundAlpha,r=this.set;t.isModern||0!==n||(n=.001);var s=this.updateWidth();this.realWidth=s;var a=this.updateHeight();this.realHeight=a,i=t.polygon(e,[0,s-1,s-1,0],[0,0,a-1,a-1],i,n,1,this.borderColor,this.borderAlpha),t.setCN(this,i,"bg"),this.background=i,r.push(i),(i=this.backgroundImage)&&(e=e.image(i,0,0,s,a),t.setCN(this,i,"bg-image"),this.bgImg=e,r.push(e))},drawTitles:function(){var e=this.titles;if(t.ifArray(e)){var i,n=20;for(i=0;i<e.length;i++){var r=e[i],r=t.processObject(r,t.Title,this.theme);if(!1!==r.enabled){var s=r.color;void 0===s&&(s=this.color);var a=r.size;isNaN(a)&&(a=this.fontSize+2),isNaN(r.alpha);var o=this.marginLeft,s=t.text(this.container,r.text,s,this.fontFamily,a);s.translate(o+(this.realWidth-this.marginRight-o)/2,n),s.node.style.pointerEvents="none",t.setCN(this,s,"title"),r.id&&t.setCN(this,s,"title-"+r.id),o=!0,void 0!==r.bold&&(o=r.bold),o&&s.attr({"font-weight":"bold"}),s.attr({opacity:r.alpha}),n+=a+6,this.freeLabelsSet.push(s)}}}},write:function(e){if(e="object"!=typeof e?document.getElementById(e):e){for(;e.firstChild;)e.removeChild(e.firstChild);this.div=e,e.style.overflow="hidden",e.style.textAlign="left";var i=this.chartDiv,n=this.legendDiv,r=this.legend,s=n.style,a=i.style;this.measure(),this.previousHeight=this.divRealHeight,this.previousWidth=this.divRealWidth;var o,h=document.createElement("div");o=h.style,o.position="relative",this.containerDiv=h,h.className=this.classNamePrefix+"-main-div",i.className=this.classNamePrefix+"-chart-div",e.appendChild(h);var l=this.exportConfig;if(l&&t.AmExport&&!this.AmExport&&(this.AmExport=new t.AmExport(this,l)),this.amExport&&t.AmExport&&(this.AmExport=t.extend(this.amExport,new t.AmExport(this),!0)),this.AmExport&&this.AmExport.init&&this.AmExport.init(),r)if(r=this.addLegend(r,r.divId),r.enabled)switch(r.position){case"bottom":h.appendChild(i),h.appendChild(n);break;case"top":h.appendChild(n),h.appendChild(i);break;case"absolute":o.width=e.style.width,o.height=e.style.height,s.position="absolute",a.position="absolute",void 0!==r.left&&(s.left=r.left+"px"),void 0!==r.right&&(s.right=r.right+"px"),void 0!==r.top&&(s.top=r.top+"px"),void 0!==r.bottom&&(s.bottom=r.bottom+"px"),r.marginLeft=0,r.marginRight=0,h.appendChild(i),h.appendChild(n);break;case"right":o.width=e.style.width,o.height=e.style.height,s.position="relative",a.position="absolute",h.appendChild(i),h.appendChild(n);break;case"left":o.width=e.style.width,o.height=e.style.height,s.position="absolute",a.position="relative",h.appendChild(i),h.appendChild(n);break;case"outside":h.appendChild(i)}else h.appendChild(i);else h.appendChild(i);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0),this.initChart()}},createLabelsSet:function(){t.remove(this.labelsSet),this.labelsSet=this.container.set(),this.freeLabelsSet.push(this.labelsSet)},initChart:function(){window.AmCharts_path&&(this.path=window.AmCharts_path),
void 0===this.path&&(this.path=t.getPath()),void 0===this.path&&(this.path="amcharts/"),this.path=t.normalizeUrl(this.path),void 0===this.pathToImages&&(this.pathToImages=this.path+"images/"),this.initHC||(t.callInitHandler(this),this.initHC=!0),this.renderFix(),t.applyLang(this.language,this);var e=this.numberFormatter;e&&(isNaN(e.precision)||(this.precision=e.precision),void 0!==e.thousandsSeparator&&(this.thousandsSeparator=e.thousandsSeparator),void 0!==e.decimalSeparator&&(this.decimalSeparator=e.decimalSeparator)),(e=this.percentFormatter)&&!isNaN(e.precision)&&(this.percentPrecision=e.precision),this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.divIsFixed=t.findIfFixed(this.chartDiv),this.destroy(),e=0,document.attachEvent&&!window.opera&&(e=1),this.dmouseX=this.dmouseY=0;var i=document.getElementsByTagName("html")[0];i&&window.getComputedStyle&&(i=window.getComputedStyle(i,null))&&(this.dmouseY=t.removePx(i.getPropertyValue("margin-top")),this.dmouseX=t.removePx(i.getPropertyValue("margin-left"))),this.mouseMode=e,(e=this.container)?(e.container.innerHTML="",e.width=this.realWidth,e.height=this.realHeight,e.addDefs(this),this.chartDiv.appendChild(e.container)):e=new t.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this),e.chart=this,t.VML||t.SVG?(e.handDrawn=this.handDrawn,e.handDrawScatter=this.handDrawScatter,e.handDrawThickness=this.handDrawThickness,this.container=e,this.set&&this.set.remove(),this.set=e.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=e.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=e.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=e.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=e.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=e.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=e.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=e.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=e.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=e.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=e.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=e.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=e.set(),this.freeLabelsSet=e.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=e.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zbSet&&(this.zbSet.remove(),this.zbSet=null),this.zoomButtonSet=e.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=e.set()):this.fire("failed",{type:"failed",chart:this})},premeasure:function(){var t=this.div;if(t){var e=t.offsetWidth,i=t.offsetHeight;t.clientHeight&&(e=t.clientWidth,i=t.clientHeight),e==this.mw&&i==this.mh||(this.mw=e,this.mh=i,this.measure())}},measure:function(){var e=this.div;if(e){var i=this.chartDiv,n=e.offsetWidth,r=e.offsetHeight,s=this.container;e.clientHeight&&(n=e.clientWidth,r=e.clientHeight);var a=t.removePx(t.getStyle(e,"padding-left")),o=t.removePx(t.getStyle(e,"padding-right")),h=t.removePx(t.getStyle(e,"padding-top")),l=t.removePx(t.getStyle(e,"padding-bottom"));isNaN(a)||(n-=a),isNaN(o)||(n-=o),isNaN(h)||(r-=h),isNaN(l)||(r-=l),a=e.style,e=a.width,a=a.height,-1!=e.indexOf("px")&&(n=t.removePx(e)),-1!=a.indexOf("px")&&(r=t.removePx(a)),r=Math.round(r),n=Math.round(n),e=Math.round(t.toCoordinate(this.width,n)),a=Math.round(t.toCoordinate(this.height,r)),(n!=this.previousWidth||r!=this.previousHeight)&&0<e&&0<a&&(i.style.width=e+"px",i.style.height=a+"px",s&&s.setSize(e,a),this.balloon=t.processObject(this.balloon,t.AmBalloon,this.theme),this.balloon.setBounds(2,2,e-2,a)),this.balloon.chart=this,this.realWidth=e,this.realHeight=a,this.divRealWidth=n,this.divRealHeight=r}},destroy:function(){this.chartDiv.innerHTML="",this.clearTimeOuts(),this.legend&&this.legend.destroy()},clearTimeOuts:function(){var t=this.timeOuts;if(t){var e;for(e=0;e<t.length;e++)clearTimeout(t[e])}this.timeOuts=[]},clear:function(e){if(t.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]),this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null,this.clearTimeOuts(),this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv)),e||t.removeChart(this),e=this.div)for(;e.firstChild;)e.removeChild(e.firstChild);this.legend&&this.legend.destroy()},setMouseCursor:function(e){"auto"==e&&t.isNN&&(e="default"),this.chartDiv.style.cursor=e,this.legendDiv.style.cursor=e},redrawLabels:function(){this.labels=[];var t=this.allLabels;this.createLabelsSet();var e;for(e=0;e<t.length;e++)this.drawLabel(t[e])},drawLabel:function(e){if(this.container&&!1!==e.enabled){e=t.processObject(e,t.Label,this.theme);var i=e.y,n=e.text,r=e.align,s=e.size,a=e.color,o=e.rotation,h=e.alpha,l=e.bold,u=t.toCoordinate(e.x,this.realWidth),i=t.toCoordinate(i,this.realHeight);u||(u=0),i||(i=0),void 0===a&&(a=this.color),isNaN(s)&&(s=this.fontSize),r||(r="start"),"left"==r&&(r="start"),"right"==r&&(r="end"),"center"==r&&(r="middle",o?i=this.realHeight-i+i/2:u=this.realWidth/2-u),void 0===h&&(h=1),void 0===o&&(o=0),i+=s/2,n=t.text(this.container,n,a,this.fontFamily,s,r,l,h),n.translate(u,i),t.setCN(this,n,"label"),e.id&&t.setCN(this,n,"label-"+e.id),0!==o&&n.rotate(o),e.url?(n.setAttr("cursor","pointer"),n.click(function(){t.getURL(e.url)})):n.node.style.pointerEvents="none",this.labelsSet.push(n),this.labels.push(n)}},addLabel:function(t,e,i,n,r,s,a,o,h,l){t={x:t,y:e,text:i,align:n,size:r,color:s,alpha:o,rotation:a,bold:h,url:l,enabled:!0},this.container&&this.drawLabel(t),this.allLabels.push(t)},clearLabels:function(){var t,e=this.labels;for(t=e.length-1;0<=t;t--)e[t].remove();this.labels=[],this.allLabels=[]},updateHeight:function(){var t=this.divRealHeight,e=this.legend;if(e){var i=this.legendDiv.offsetHeight,e=e.position;"top"!=e&&"bottom"!=e||(t-=i,(0>t||isNaN(t))&&(t=0),this.chartDiv.style.height=t+"px")}return t},updateWidth:function(){var t=this.divRealWidth,e=this.divRealHeight,i=this.legend;if(i){var n=this.legendDiv,r=n.offsetWidth;isNaN(i.width)||(r=i.width),i.ieW&&(r=i.ieW);var s=n.offsetHeight,n=n.style,a=this.chartDiv.style,i=i.position;"right"!=i&&"left"!=i||(t-=r,(0>t||isNaN(t))&&(t=0),a.width=t+"px","left"==i?(a.left=r+"px",n.left="0px"):(a.left="0px",n.left=t+"px"),e>s&&(n.top=(e-s)/2+"px"))}return t},getTitleHeight:function(){var t=0,e=this.titles,i=!0;if(0<e.length){var n,t=20;for(n=0;n<e.length;n++){var r=e[n];!1!==r.enabled&&(i=!1,r=r.size,isNaN(r)&&(r=this.fontSize+2),t+=r+6)}i&&(t=0)}return t},addTitle:function(t,e,i,n,r){return isNaN(e)&&(e=this.fontSize+2),t={text:t,size:e,color:i,alpha:n,bold:r,enabled:!0},this.titles.push(t),t},handleWheel:function(t){var e=0;t||(t=window.event),t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e&&this.handleWheelReal(e,t.shiftKey),t.preventDefault&&t.preventDefault()},handleWheelReal:function(){},addListeners:function(){var t=this,e=t.chartDiv;document.addEventListener?(t.panEventsEnabled&&(e.style.msTouchAction="none"),"ontouchstart"in document.documentElement&&(e.addEventListener("touchstart",function(e){t.handleTouchMove.call(t,e),t.handleTouchStart.call(t,e)},!0),e.addEventListener("touchmove",function(e){t.handleTouchMove.call(t,e)},!0),e.addEventListener("touchend",function(e){t.handleTouchEnd.call(t,e)},!0)),e.addEventListener("mousedown",function(e){t.mouseIsOver=!0,t.handleMouseMove.call(t,e),t.handleMouseDown.call(t,e)},!0),e.addEventListener("mouseover",function(e){t.handleMouseOver.call(t,e)},!0),e.addEventListener("mouseout",function(e){t.handleMouseOut.call(t,e)},!0)):(e.attachEvent("onmousedown",function(e){t.handleMouseDown.call(t,e)}),e.attachEvent("onmouseover",function(e){t.handleMouseOver.call(t,e)}),e.attachEvent("onmouseout",function(e){t.handleMouseOut.call(t,e)}))},dispDUpd:function(){if(!this.skipEvents){var t;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,t="dataUpdated",this.fire(t,{type:t,chart:this})),this.chartCreated||(t="init",this.fire(t,{type:t,chart:this})),this.chartRendered||(t="rendered",this.fire(t,{type:t,chart:this}),this.chartRendered=!0),t="drawn",this.fire(t,{type:t,chart:this})}this.skipEvents=!1},validateSize:function(){var t=this;if(t.premeasure(),t.divRealWidth!=t.previousWidth||t.divRealHeight!=t.previousHeight){var e=t.legend;if(0<t.realWidth&&0<t.realHeight){if(t.sizeChanged=!0,e){t.legendInitTO&&clearTimeout(t.legendInitTO);var i=setTimeout(function(){e.invalidateSize()},10);t.timeOuts.push(i),t.legendInitTO=i}"xy"!=t.type?t.marginsUpdated=!1:(t.marginsUpdated=!0,t.selfZoom=!0),clearTimeout(t.initTO),i=setTimeout(function(){t.initChart()},10),t.timeOuts.push(i),t.initTO=i}t.fire("resized",{type:"resized",chart:t}),t.renderFix(),e&&e.renderFix&&e.renderFix(),t.previousHeight=t.divRealHeight,t.previousWidth=t.divRealWidth}},invalidateSize:function(){this.previousHeight=this.previousWidth=NaN,this.invalidateSizeReal()},invalidateSizeReal:function(){var t=this;t.marginsUpdated=!1,clearTimeout(t.validateTO);var e=setTimeout(function(){t.validateSize()},5);t.timeOuts.push(e),t.validateTO=e},validateData:function(t){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated=!1,this.initChart(t))},validateNow:function(t,e){this.initTO&&clearTimeout(this.initTO),t&&(this.dataChanged=!0),this.skipEvents=e,this.chartRendered=!1,this.write(this.div)},showItem:function(t){t.hidden=!1,this.initChart()},hideItem:function(t){t.hidden=!0,this.initChart()},hideBalloon:function(){var t=this;clearTimeout(t.hoverInt),clearTimeout(t.balloonTO),t.hoverInt=setTimeout(function(){t.hideBalloonReal.call(t)},t.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var t=this.balloon;t&&t.hide()},showBalloon:function(t,e,i,n,r){var s=this;clearTimeout(s.balloonTO),clearTimeout(s.hoverInt),s.balloonTO=setTimeout(function(){s.showBalloonReal.call(s,t,e,i,n,r)},1)},showBalloonReal:function(t,e,i,n,r){this.handleMouseMove();var s=this.balloon;s.enabled&&(s.followCursor(!1),s.changeColor(e),!i||s.fixedPosition?(s.setPosition(n,r),s.followCursor(!1)):s.followCursor(!0),t&&s.showBalloon(t))},handleTouchMove:function(e){this.hideBalloon();var i=this.chartDiv;e.touches&&(e=e.touches.item(0),this.mouseX=e.pageX-t.findPosX(i),this.mouseY=e.pageY-t.findPosY(i))},handleMouseOver:function(){this.outTO&&clearTimeout(this.outTO),t.resetMouseOver(),this.mouseIsOver=!0},handleMouseOut:function(){var t=this;t.outTO&&clearTimeout(t.outTO),t.outTO=setTimeout(function(){t.handleMouseOutReal()},10)},handleMouseOutReal:function(){t.resetMouseOver(),this.mouseIsOver=!1},handleMouseMove:function(e){if(this.mouseIsOver){var i=this.chartDiv;e||(e=window.event);var n,r;if(e){switch(this.posX=t.findPosX(i),this.posY=t.findPosY(i),this.mouseMode){case 1:if(n=e.clientX-this.posX,r=e.clientY-this.posY,!this.divIsFixed){var s,a,o,h,i=document.body;i&&(s=i.scrollLeft,o=i.scrollTop),(i=document.documentElement)&&(a=i.scrollLeft,h=i.scrollTop),s=Math.max(s,a),o=Math.max(o,h),n+=s,r+=o}break;case 0:this.divIsFixed?(n=e.clientX-this.posX,r=e.clientY-this.posY):(n=e.pageX-this.posX,r=e.pageY-this.posY)}e.touches&&(e=e.touches.item(0),n=e.pageX-this.posX,r=e.pageY-this.posY),this.mouseX=n-this.dmouseX,this.mouseY=r-this.dmouseY}}},handleTouchStart:function(t){this.handleMouseDown(t)},handleTouchEnd:function(e){t.resetMouseOver(),this.handleReleaseOutside(e)},handleReleaseOutside:function(){},handleMouseDown:function(e){t.resetMouseOver(),this.mouseIsOver=!0,e&&e.preventDefault&&(this.panEventsEnabled?e.preventDefault():e.touches||e.preventDefault())},addLegend:function(e,i){e=t.processObject(e,t.AmLegend,this.theme),e.divId=i,e.ieW=0;var n;return n="object"!=typeof i&&i?document.getElementById(i):i,this.legend=e,e.chart=this,n?(e.div=n,e.position="outside",e.autoMargins=!1):e.div=this.legendDiv,n=this.handleLegendEvent,this.listenTo(e,"showItem",n),this.listenTo(e,"hideItem",n),this.listenTo(e,"clickMarker",n),this.listenTo(e,"rollOverItem",n),this.listenTo(e,"rollOutItem",n),this.listenTo(e,"rollOverMarker",n),this.listenTo(e,"rollOutMarker",n),this.listenTo(e,"clickLabel",n),e},removeLegend:function(){this.legend=void 0,this.legendDiv.innerHTML=""},handleResize:function(){(t.isPercents(this.width)||t.isPercents(this.height))&&this.invalidateSizeReal(),this.renderFix()},renderFix:function(){if(!t.VML){var e=this.container;e&&e.renderFix()}},getSVG:function(){if(t.hasSVG)return this.container},animate:function(e,i,n,r,s,a,o){return e["an_"+i]&&t.removeFromArray(this.animations,e["an_"+i]),n={obj:e,frame:0,attribute:i,from:n,to:r,time:s,effect:a,suffix:o},e["an_"+i]=n,this.animations.push(n),n},setLegendData:function(t){var e=this.legend;e&&e.setData(t)},stopAnim:function(e){t.removeFromArray(this.animations,e)},updateAnimations:function(){var e;if(this.container&&this.container.update(),this.animations)for(e=this.animations.length-1;0<=e;e--){var i=this.animations[e],n=1e3*i.time/t.updateRate,r=i.frame+1,s=i.obj,a=i.attribute;if(r<=n){i.frame++;var o=Number(i.from),h=Number(i.to)-o,n=t[i.effect](0,r,o,h,n);0===h?(this.animations.splice(e,1),s.node.style[a]=Number(i.to)+i.suffix):s.node.style[a]=n+i.suffix}else s.node.style[a]=Number(i.to)+i.suffix,this.animations.splice(e,1)}},update:function(){this.updateAnimations()},inIframe:function(){try{return window.self!==window.top}catch(t){return!0}},brr:function(){var t,e=window.location.hostname.split(".");if(2<=e.length&&(t=e[e.length-2]+"."+e[e.length-1]),this.amLink&&(e=this.amLink.parentNode)&&e.removeChild(this.amLink),e=this.creditsPosition,"amcharts.com"!=t||!0===this.inIframe()){var i=t=0,n=this.realWidth,r=this.realHeight,s=this.type;"serial"!=s&&"xy"!=s&&"gantt"!=s||(t=this.marginLeftReal,i=this.marginTopReal,n=t+this.plotAreaWidth,r=i+this.plotAreaHeight);var a="http://www.amcharts.com/javascript-charts/",o="JavaScript charts",h="JS chart by amCharts";"ammap"==this.product&&(a="http://www.ammap.com/javascript-maps/",o="Interactive JavaScript maps",h="JS map by amCharts"),s=document.createElement("a"),h=document.createTextNode(h),s.setAttribute("href",a),s.setAttribute("title",o),s.appendChild(h),this.chartDiv.appendChild(s),this.amLink=s,a=s.style,a.position="absolute",a.textDecoration="none",a.color=this.color,a.fontFamily=this.fontFamily,a.fontSize=this.fontSize+"px",a.opacity=.7,a.display="block";var o=s.offsetWidth,s=s.offsetHeight,h=5+t,l=i+5;"bottom-left"==e&&(h=5+t,l=r-s-3),"bottom-right"==e&&(h=n-o-5,l=r-s-3),"top-right"==e&&(h=n-o-5,l=i+5),a.left=h+"px",a.top=l+"px"}}}),t.Slice=t.Class({construct:function(){}}),t.SerialDataItem=t.Class({construct:function(){}}),t.GraphDataItem=t.Class({construct:function(){}}),t.Guide=t.Class({construct:function(e){this.cname="Guide",t.applyTheme(this,e,this.cname)}}),t.Title=t.Class({construct:function(e){this.cname="Title",t.applyTheme(this,e,this.cname)}}),t.Label=t.Class({construct:function(e){this.cname="Label",t.applyTheme(this,e,this.cname)}})}(),function(){var t=window.AmCharts;t.AmGraph=t.Class({construct:function(e){this.cname="AmGraph",this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.type="line",this.stackable=!0,this.columnCount=1,this.columnIndex=0,this.centerCustomBullets=this.showBalloon=!0,this.maxBulletSize=50,this.minBulletSize=4,this.balloonText="[[value]]",this.hidden=this.scrollbar=this.animationPlayed=!1,this.pointPosition="middle",this.depthCount=1,this.includeInMinMax=!0,this.negativeBase=0,this.visibleInLegend=!0,this.showAllValueLabels=!1,this.showBulletsAt=this.showBalloonAt="close",this.lineThickness=1,this.dashLength=0,this.connect=!0,this.lineAlpha=1,this.bullet="none",this.bulletBorderThickness=2,this.bulletBorderAlpha=0,this.bulletAlpha=1,this.bulletSize=8,this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0,this.cursorBulletAlpha=1,this.gradientOrientation="vertical",this.dy=this.dx=0,this.periodValue="",this.clustered=!0,this.periodSpan=1,this.y=this.x=0,this.switchable=!0,this.tcc=this.minDistance=1,this.labelRotation=0,this.labelAnchor="auto",this.labelOffset=3,this.bcn="graph-",this.dateFormat="MMM DD, YYYY",t.applyTheme(this,e,this.cname)},draw:function(){var e=this.chart,i=e.type;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:e.decimalSeparator,thousandsSeparator:e.thousandsSeparator});var n=e.container;this.container=n,this.destroy();var r=n.set(),s=n.set();this.behindColumns?(e.graphsBehindSet.push(r),e.bulletBehindSet.push(s)):(e.graphsSet.push(r),e.bulletSet.push(s));var a=this.bulletAxis;if(t.isString(a)&&(this.bulletAxis=e.getValueAxisById(a)),this.bulletSet=s,!this.scrollbar){var a=e.marginLeftReal,o=e.marginTopReal;r.translate(a,o),s.translate(a,o)}n=n.set(),t.remove(this.columnsSet),r.push(n),this.set=r,t.setCN(e,r,"graph-"+this.type),t.setCN(e,r,"graph-"+this.id),t.setCN(e,s,"graph-"+this.type),t.setCN(e,s,"graph-"+this.id),this.columnsSet=n,this.columnsArray=[],this.ownColumns=[],this.allBullets=[],this.animationArray=[],r=this.labelPosition,r||(s=this.valueAxis.stackType,r="top","column"==this.type&&(e.rotate&&(r="right"),"100%"==s||"regular"==s)&&(r="middle"),this.labelPosition=r),t.ifArray(this.data)&&(e=!1,"xy"==i?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(e=!0):this.valueAxis.axisCreated&&(e=!0),!this.hidden&&e&&this.createGraph())},createGraph:function(){var t=this,e=t.chart;if(t.startAlpha=e.startAlpha,t.seqAn=e.sequencedAnimation,t.baseCoord=t.valueAxis.baseCoord,void 0===t.fillAlphas&&(t.fillAlphas=0),t.bulletColorR=t.bulletColor,void 0===t.bulletColorR&&(t.bulletColorR=t.lineColorR,t.bulletColorNegative=t.negativeLineColor),void 0===t.bulletAlpha&&(t.bulletAlpha=t.lineAlpha),e=e.type,"gantt"==e&&(e="serial"),clearTimeout(t.playedTO),!isNaN(t.valueAxis.min)&&!isNaN(t.valueAxis.max)){switch(e){case"serial":t.categoryAxis&&(t.createSerialGraph(),"candlestick"==t.type&&1>t.valueAxis.minMaxMultiplier&&t.positiveClip(t.set));break;case"radar":t.createRadarGraph();break;case"xy":t.createXYGraph(),t.positiveClip(t.set)}t.playedTO=setTimeout(function(){t.setAnimationPlayed.call(t)},500*t.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var t=[],e=[],i=this.xAxis,n=this.yAxis;this.pmh=n.viH+1,this.pmw=i.viW+1,this.pmy=this.pmx=0;var r;for(r=this.start;r<=this.end;r++){var s=this.data[r].axes[i.id].graphs[this.id],a=s.values,o=a.x,h=a.y,a=i.getCoordinate(o),l=n.getCoordinate(h);!isNaN(o)&&!isNaN(h)&&(t.push(a),e.push(l),s.x=a,s.y=l,o=this.createBullet(s,a,l,r),h=this.labelText)&&(s=this.createLabel(s,a,l,h),this.positionLabel(a,l,s,o),this.allBullets.push(s))}this.drawLineGraph(t,e),this.launchAnimation()},createRadarGraph:function(){var t,e,i,n=this.valueAxis.stackType,r=[],s=[];for(i=this.start;i<=this.end;i++){var a,o=this.data[i].axes[this.valueAxis.id].graphs[this.id];if(a="none"==n||"3d"==n?o.values.value:o.values.close,isNaN(a))this.drawLineGraph(r,s),r=[],s=[];else{var h=this.y-(this.valueAxis.getCoordinate(a)-this.height),l=180-360/(this.end-this.start+1)*i;a=h*Math.sin(l/180*Math.PI),h*=Math.cos(l/180*Math.PI),r.push(a),s.push(h);var l=this.createBullet(o,a,h,i),u=this.labelText;u&&(o=this.createLabel(o,a,h,u),this.positionLabel(a,h,o,l),this.allBullets.push(o)),isNaN(t)&&(t=a),isNaN(e)&&(e=h)}}r.push(t),s.push(e),this.drawLineGraph(r,s),this.launchAnimation()},positionLabel:function(t,e,i,n){var r="middle",s=!1,a=this.labelPosition,o=i.getBBox();if(n){var h=n.graphDataItem,l=this.chart.rotate,u=h.isNegative,c=this.chart;switch(e-=o.height/4/2,a){case"top":a=l?"top":u?"bottom":"top";break;case"right":a=l&&u?"left":"right";break;case"bottom":a=l?"bottom":u?"top":"bottom";break;case"left":a=l&&u?"right":"left"}var f=h.columnGraphics,d=0,g=0;f&&(d=f.x,g=f.y);var p=this.labelOffset;switch(a){case"top":e-=n.size/2+o.height/2+p;break;case"right":r="start",t+=n.size/2+p;break;case"bottom":e+=n.size/2+o.height/2+p;break;case"left":r="end",t-=n.size/2+p;break;case"inside":"column"==this.type&&(s=!0,l?u?(r="end",t=d-3-p):(r="start",t=d+3+p):e=u?g+7+p:g-10-p);break;case"middle":"column"==this.type&&(s=!0,l?t-=(t-d)/2+p-3:e-=(e-g)/2+p-3)}return"auto"!=this.labelAnchor&&(r=this.labelAnchor),i.attr({"text-anchor":r}),this.labelRotation&&i.rotate(this.labelRotation),i.translate(t,e),o=i.getBBox(),!this.showAllValueLabels&&f&&s&&(o.height>h.columnHeight||o.width>h.columnWidth)&&(i.remove(),i=!1),!i||"serial"!=c.type&&"gantt"!=c.type||(l?(0>e||e>this.height)&&(i.remove(),i=!1):(0>t||t>this.width)&&(i.remove(),i=!1)),i}},getGradRotation:function(){var t=270;return"horizontal"==this.gradientOrientation&&(t=0),this.gradientRotation=t},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var e=this.chart,i=this.id,n=this.index,r=this.data,s=this.chart.container,a=this.valueAxis,o=this.type,h=this.columnWidthReal,l=this.showBulletsAt;isNaN(this.columnWidth)||(h=this.columnWidth),isNaN(h)&&(h=.8);var u,c,f,d,g,p=this.useNegativeColorIfDown,v=this.width,m=this.height,y=this.y,b=this.rotate,x=this.columnCount,_=t.toCoordinate(this.cornerRadiusTop,h/2),w=this.connect,C=[],S=[],O=this.chart.graphs.length,T=this.dx/this.tcc,k=this.dy/this.tcc,M=a.stackType,A=this.start,D=this.end,L=this.scrollbar,N="graph-column-";L&&(N="scrollbar-graph-column-");var E,j=this.categoryAxis,I=this.baseCoord,P=this.negativeBase,R=this.columnIndex,B=this.lineThickness,F=this.lineAlpha,z=this.lineColorR,Y=this.dashLength,W=this.set,G=this.getGradRotation(),H=this.chart.columnSpacing,V=j.cellWidth,X=(V*h-x)/x;H>X&&(H=X);var U,q,Z,$,K,J,Q,tt=m+1,et=v+1,it=0,nt=0,rt=this.fillColorsR,st=this.negativeFillColors,at=this.negativeLineColor,ot=this.fillAlphas,ht=this.negativeFillAlphas;"object"==typeof ot&&(ot=ot[0]),"object"==typeof ht&&(ht=ht[0]);var lt=a.getCoordinate(a.min);if(a.logarithmic&&(lt=a.getCoordinate(a.minReal)),this.minCoord=lt,this.resetBullet&&(this.bullet="none"),!(L||"line"!=o&&"smoothedLine"!=o&&"step"!=o||(1==r.length&&"step"!=o&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!st&&void 0==at||p))){var ut=P;ut>a.max&&(ut=a.max),ut<a.min&&(ut=a.min),a.logarithmic&&(ut=a.minReal);var ct=a.getCoordinate(ut),ft=a.getCoordinate(a.max);b?(tt=m,et=Math.abs(ft-ct)+1,$=m,K=Math.abs(lt-ct)+1,Q=nt=0,a.reversed?(it=0,J=ct):(it=ct,J=0)):(et=v,tt=Math.abs(ft-ct)+1,K=v,$=Math.abs(lt-ct)+1,J=it=0,a.reversed?(Q=y,nt=ct):Q=ct+1)}var dt=Math.round;this.pmx=dt(it),this.pmy=dt(nt),this.pmh=dt(tt),this.pmw=dt(et),this.nmx=dt(J),this.nmy=dt(Q),this.nmh=dt($),this.nmw=dt(K),t.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),this.clustered||(x=1),h="column"==o?(V*h-H*(x-1))/x:V*h,1>h&&(h=1);var gt=this.fixedColumnWidth;isNaN(gt)||(h=gt);var pt;if("line"==o||"step"==o||"smoothedLine"==o){if(0<A){for(pt=A-1;-1<pt;pt--)if(U=r[pt],q=U.axes[a.id].graphs[i],Z=q.values.value,!isNaN(Z)){A=pt;break}if(this.lineColorField)for(pt=A;-1<pt;pt--)if(U=r[pt],q=U.axes[a.id].graphs[i],q.lineColor){this.bulletColorSwitched=this.lineColorSwitched=q.lineColor;break}if(this.fillColorsField)for(pt=A;-1<pt;pt--)if(U=r[pt],q=U.axes[a.id].graphs[i],q.fillColors){this.fillColorsSwitched=q.fillColors;break}if(this.dashLengthField)for(pt=A;-1<pt;pt--)if(U=r[pt],q=U.axes[a.id].graphs[i],!isNaN(q.dashLength)){this.dashLengthSwitched=q.dashLength;break}}if(D<r.length-1)for(pt=D+1;pt<r.length;pt++)if(U=r[pt],q=U.axes[a.id].graphs[i],Z=q.values.value,!isNaN(Z)){D=pt;break}}D<r.length-1&&D++;var vt=[],mt=[],yt=!1;"line"!=o&&"step"!=o&&"smoothedLine"!=o||(this.stackable&&"regular"==M||"100%"==M||this.fillToGraph)&&(yt=!0);var bt=this.noStepRisers,xt=-1e3,_t=-1e3,wt=this.minDistance,Ct=!0,St=!1;for(pt=A;pt<=D;pt++){U=r[pt],q=U.axes[a.id].graphs[i],q.index=pt;var Ot,Tt=NaN;if(p&&void 0==this.openField)for(var kt=pt+1;kt<r.length&&(!r[kt]||!(Ot=r[pt+1].axes[a.id].graphs[i])||!Ot.values||(Tt=Ot.values.value,isNaN(Tt)));kt++);var Mt,At,Dt,Lt,Nt,Et,jt=NaN,It=NaN,Pt=NaN,Rt=NaN,Bt=NaN,Ft=NaN,zt=NaN,Yt=NaN,Wt=NaN,Gt=NaN,Ht=NaN,Vt=NaN,Xt=NaN,Ut=NaN,qt=NaN,Zt=NaN,$t=NaN,Kt=void 0,Jt=rt,Qt=ot,te=z,ee=this.proCandlesticks,ie=this.topRadius,ne=this.pattern;void 0!=q.pattern&&(ne=q.pattern),isNaN(q.alpha)||(Qt=q.alpha),isNaN(q.dashLength)||(Y=q.dashLength);var re=q.values;if(a.recalculateToPercents&&(re=q.percents),re){if(Ut=this.stackable&&"none"!=M&&"3d"!=M?re.close:re.value,"candlestick"!=o&&"ohlc"!=o||(Ut=re.close,Zt=re.low,zt=a.getCoordinate(Zt),qt=re.high,Wt=a.getCoordinate(qt)),$t=re.open,Pt=a.getCoordinate(Ut),isNaN($t)||(Bt=a.getCoordinate($t),p&&(Tt=$t,$t=Bt=NaN)),p&&(void 0==this.openField?Ot&&(Ot.isNegative=Tt<Ut,isNaN(Tt)&&(q.isNegative=!Ct)):q.isNegative=Tt>Ut),!L)switch(this.showBalloonAt){case"close":q.y=Pt;break;case"open":q.y=Bt;break;case"high":q.y=Wt;break;case"low":q.y=zt}var jt=U.x[j.id],se=this.periodSpan-1,ae=Math.floor(V/2)+Math.floor(se*V/2),oe=ae,he=0;if("left"==this.stepDirection&&(he=(2*V+se*V)/2,jt-=he),"center"==this.stepDirection&&(he=V/2,jt-=he),"start"==this.pointPosition&&(jt-=V/2+Math.floor(se*V/2),ae=0,oe=Math.floor(V)+Math.floor(se*V)),"end"==this.pointPosition&&(jt+=V/2+Math.floor(se*V/2),ae=Math.floor(V)+Math.floor(se*V),oe=0),bt){var le=this.columnWidth;isNaN(le)||(ae*=le,oe*=le)}L||(q.x=jt),-1e5>jt&&(jt=-1e5),jt>v+1e5&&(jt=v+1e5),b?(It=Pt,Rt=Bt,Bt=Pt=jt,isNaN($t)&&!this.fillToGraph&&(Rt=I),Ft=zt,Yt=Wt):(Rt=It=jt,isNaN($t)&&!this.fillToGraph&&(Bt=I)),(!ee&&Ut<$t||ee&&Ut<E)&&(q.isNegative=!0,st&&(Jt=st),ht&&(Qt=ht),void 0!=at&&(te=at)),St=!1,isNaN(Ut)||(p?Ut>Tt?(Ct&&(St=!0),Ct=!1):(Ct||(St=!0),Ct=!0):q.isNegative=Ut<P,E=Ut);var ue=!1;switch(L&&e.chartScrollbar.ignoreCustomColors&&(ue=!0),ue||(void 0!=q.color&&(Jt=q.color),q.fillColors&&(Jt=q.fillColors)),o){case"line":isNaN(Ut)?w||(this.drawLineGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[]):((Math.abs(It-xt)>=wt||Math.abs(Pt-_t)>=wt)&&(C.push(It),S.push(Pt),xt=It,_t=Pt),Gt=It,Ht=Pt,Vt=It,Xt=Pt,!yt||isNaN(Bt)||isNaN(Rt)||(vt.push(Rt),mt.push(Bt)),!St&&void 0==q.lineColor&&void 0==q.fillColors&&isNaN(q.dashLength)||(this.drawLineGraph(C,S,vt,mt),C=[It],S=[Pt],vt=[],mt=[],!yt||isNaN(Bt)||isNaN(Rt)||(vt.push(Rt),mt.push(Bt)),p?Ct?(this.lineColorSwitched=z,this.fillColorsSwitched=rt):(this.lineColorSwitched=at,this.fillColorsSwitched=st):(this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors),this.dashLengthSwitched=q.dashLength),q.gap&&(this.drawLineGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[]));break;case"smoothedLine":isNaN(Ut)?w||(this.drawSmoothedGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[]):((Math.abs(It-xt)>=wt||Math.abs(Pt-_t)>=wt)&&(C.push(It),S.push(Pt),xt=It,_t=Pt),Gt=It,Ht=Pt,Vt=It,Xt=Pt,!yt||isNaN(Bt)||isNaN(Rt)||(vt.push(Rt),mt.push(Bt)),void 0==q.lineColor&&void 0==q.fillColors&&isNaN(q.dashLength)||(this.drawSmoothedGraph(C,S,vt,mt),C=[It],S=[Pt],vt=[],mt=[],!yt||isNaN(Bt)||isNaN(Rt)||(vt.push(Rt),mt.push(Bt)),this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors,this.dashLengthSwitched=q.dashLength),q.gap&&(this.drawSmoothedGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[]));break;case"step":if(isNaN(Ut))w||((1>=this.periodSpan||1<this.periodSpan&&It-u>ae+oe)&&(u=c=NaN),this.drawLineGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[]);else{if(b?(isNaN(u)||(C.push(u),S.push(Pt-ae)),S.push(Pt-ae),C.push(It),S.push(Pt+oe),C.push(It),!yt||isNaN(Bt)||isNaN(Rt)||(isNaN(f)||(vt.push(f),mt.push(Bt-ae)),vt.push(Rt),mt.push(Bt-ae),vt.push(Rt),mt.push(Bt+oe))):(isNaN(c)||(S.push(c),C.push(It-ae)),C.push(It-ae),S.push(Pt),C.push(It+oe),S.push(Pt),!yt||isNaN(Bt)||isNaN(Rt)||(isNaN(d)||(vt.push(Rt-ae),mt.push(d)),vt.push(Rt-ae),mt.push(Bt),vt.push(Rt+oe),mt.push(Bt))),u=It,c=Pt,f=Rt,d=Bt,Gt=It,Ht=Pt,Vt=It,Xt=Pt,St||void 0!=q.lineColor||void 0!=q.fillColors||!isNaN(q.dashLength)){var ce=C[C.length-2],fe=S[S.length-2];C.pop(),S.pop(),this.drawLineGraph(C,S,vt,mt),C=[ce],S=[fe],b?(S.push(Pt+oe),C.push(It)):(C.push(It+oe),S.push(Pt)),vt=[],mt=[],this.lineColorSwitched=q.lineColor,this.fillColorsSwitched=q.fillColors,this.dashLengthSwitched=q.dashLength,p&&(Ct?(this.lineColorSwitched=z,this.fillColorsSwitched=rt):(this.lineColorSwitched=at,this.fillColorsSwitched=st))}(bt||q.gap)&&(u=c=NaN,this.drawLineGraph(C,S,vt,mt),C=[],S=[],vt=[],mt=[])}break;case"column":if(Nt=te,void 0!=q.lineColor&&(Nt=q.lineColor),!isNaN(Ut)){p||(q.isNegative=Ut<P),q.isNegative&&(st&&(Jt=st),void 0!=at&&(Nt=at));var de=a.min,ge=a.max;if(!(Ut<de&&$t<de||Ut>ge&&$t>ge)){var pe;if(b){"3d"==M?(At=Pt-(x/2-this.depthCount+1)*(h+H)+H/2+k*R,Mt=Rt+T*R,pe=R):(At=Math.floor(Pt-(x/2-R)*(h+H)+H/2),Mt=Rt,pe=0),Dt=h,Gt=It,Ht=At+h/2,isNaN(Rt)||Rt>It&&!q.isNegative&&(Gt=Rt),Vt=It,Xt=At+h/2,At+Dt>m+pe*k&&(Dt=m-At+pe*k),At<pe*k&&(Dt+=At,At=pe*k),Lt=It-Rt;var ve=Mt;Mt=t.fitToBounds(Mt,0,v),Lt+=ve-Mt,Lt=t.fitToBounds(Lt,-Mt,v-Mt+T*R),At<m&&0<Dt&&(Kt=new t.Cuboid(s,Lt,Dt,T-e.d3x,k-e.d3y,Jt,Qt,B,Nt,F,G,_,b,Y,ne,ie,N),q.columnWidth=Math.abs(Lt),q.columnHeight=Math.abs(Dt))}else{"3d"==M?(Mt=It-(x/2-this.depthCount+1)*(h+H)+H/2+T*R,At=Bt+k*R,pe=R):(Mt=It-(x/2-R)*(h+H)+H/2,At=Bt,pe=0),Dt=h,Gt=Mt+h/2,Ht=Pt,isNaN(Bt)||Bt<Pt&&!q.isNegative&&(Ht=Bt),Vt=Mt+h/2,Xt=Pt,Mt+Dt>v+pe*T&&(Dt=v-Mt+pe*T),Mt<pe*T&&(Dt+=Mt-pe*T,Mt=pe*T),Lt=Pt-Bt;var me=At;At=t.fitToBounds(At,this.dy,m),Lt+=me-At,Lt=t.fitToBounds(Lt,-At+k*R,m-At),Mt<v+R*T&&0<Dt&&(this.showOnAxis&&(At-=k/2),Kt=new t.Cuboid(s,Dt,Lt,T-e.d3x,k-e.d3y,Jt,Qt,B,Nt,this.lineAlpha,G,_,b,Y,ne,ie,N),q.columnHeight=Math.abs(Lt),q.columnWidth=Math.abs(Dt))}}Kt&&(Et=Kt.set,t.setCN(e,Kt.set,"graph-"+this.type),t.setCN(e,Kt.set,"graph-"+this.id),q.className&&t.setCN(e,Kt.set,q.className,!0),q.columnGraphics=Et,Et.translate(Mt,At),this.columnsSet.push(Et),(q.url||this.showHandOnHover)&&Et.setAttr("cursor","pointer"),!L)&&("none"==M&&(g=b?(this.end+1-pt)*O-n:O*pt+n),"3d"==M&&(b?(g=(this.end+1-pt)*O-n-1e3*this.depthCount,Gt+=T*this.columnIndex,Vt+=T*this.columnIndex,q.y+=T*this.columnIndex):(g=(O-n)*(pt+1)+1e3*this.depthCount,Ht+=k*this.columnIndex,Xt+=k*this.columnIndex,q.y+=k*this.columnIndex)),"regular"!=M&&"100%"!=M||(g=b?0<re.value?(this.end+1-pt)*O+n:(this.end+1-pt)*O-n:0<re.value?O*pt+n:O*pt-n),this.columnsArray.push({column:Kt,depth:g}),q.x=b?At+Dt/2:Mt+Dt/2,this.ownColumns.push(Kt),this.animateColumns(Kt,pt,It,Rt,Pt,Bt),this.addListeners(Et,q))}break;case"candlestick":if(!isNaN($t)&&!isNaN(Ut)){var ye,be;if(Nt=te,void 0!=q.lineColor&&(Nt=q.lineColor),b){if(At=Pt-h/2,Mt=Rt,Dt=h,At+Dt>m&&(Dt=m-At),0>At&&(Dt+=At,At=0),At<m&&0<Dt){var xe,_e;Ut>$t?(xe=[It,Yt],_e=[Rt,Ft]):(xe=[Rt,Yt],_e=[It,Ft]),!isNaN(Yt)&&!isNaN(Ft)&&Pt<m&&0<Pt&&(ye=t.line(s,xe,[Pt,Pt],Nt,F,B),be=t.line(s,_e,[Pt,Pt],Nt,F,B)),Lt=It-Rt,Kt=new t.Cuboid(s,Lt,Dt,T,k,Jt,ot,B,Nt,F,G,_,b,Y,ne,ie,N)}}else if(Mt=It-h/2,At=Bt+B/2,Dt=h,Mt+Dt>v&&(Dt=v-Mt),0>Mt&&(Dt+=Mt,Mt=0),Lt=Pt-Bt,Mt<v&&0<Dt){ee&&Ut>=$t&&(Qt=0);var we,Ce,Kt=new t.Cuboid(s,Dt,Lt,T,k,Jt,Qt,B,Nt,F,G,_,b,Y,ne,ie,N);Ut>$t?(we=[Pt,Wt],Ce=[Bt,zt]):(we=[Bt,Wt],Ce=[Pt,zt]),!isNaN(Wt)&&!isNaN(zt)&&It<v&&0<It&&(ye=t.line(s,[It,It],we,Nt,F,B),be=t.line(s,[It,It],Ce,Nt,F,B),t.setCN(e,ye,this.bcn+"line-high"),q.className&&t.setCN(e,ye,q.className,!0),t.setCN(e,be,this.bcn+"line-low"),q.className&&t.setCN(e,be,q.className,!0))}Kt&&(Et=Kt.set,q.columnGraphics=Et,W.push(Et),Et.translate(Mt,At-B/2),(q.url||this.showHandOnHover)&&Et.setAttr("cursor","pointer"),ye&&(W.push(ye),W.push(be)),Gt=It,Ht=Pt,b?(Xt=Pt,Vt=It,"open"==l&&(Vt=Rt),"high"==l&&(Vt=Yt),"low"==l&&(Vt=Ft)):(Xt=Pt,"open"==l&&(Xt=Bt),"high"==l&&(Xt=Wt),"low"==l&&(Xt=zt),Vt=It),L||(q.x=b?At+Dt/2:Mt+Dt/2,this.animateColumns(Kt,pt,It,Rt,Pt,Bt),this.addListeners(Et,q)))}break;case"ohlc":if(!(isNaN($t)||isNaN(qt)||isNaN(Zt)||isNaN(Ut))){var Se=s.set();W.push(Se),Ut<$t&&(q.isNegative=!0,void 0!=at&&(te=at));
var Oe,Te,ke;if(b){var Me=Pt-h/2,Me=t.fitToBounds(Me,0,m),Ae=t.fitToBounds(Pt,0,m),De=Pt+h/2,De=t.fitToBounds(De,0,m);Te=t.line(s,[Rt,Rt],[Me,Ae],te,F,B,Y),0<Pt&&Pt<m&&(Oe=t.line(s,[Ft,Yt],[Pt,Pt],te,F,B,Y)),ke=t.line(s,[It,It],[Ae,De],te,F,B,Y),Xt=Pt,Vt=It,"open"==l&&(Vt=Rt),"high"==l&&(Vt=Yt),"low"==l&&(Vt=Ft)}else{var Le=It-h/2,Le=t.fitToBounds(Le,0,v),Ne=t.fitToBounds(It,0,v),Ee=It+h/2,Ee=t.fitToBounds(Ee,0,v);Te=t.line(s,[Le,Ne],[Bt,Bt],te,F,B,Y),0<It&&It<v&&(Oe=t.line(s,[It,It],[zt,Wt],te,F,B,Y)),ke=t.line(s,[Ne,Ee],[Pt,Pt],te,F,B,Y),Xt=Pt,"open"==l&&(Xt=Bt),"high"==l&&(Xt=Wt),"low"==l&&(Xt=zt),Vt=It}W.push(Te),W.push(Oe),W.push(ke),t.setCN(e,Te,this.bcn+"stroke-open"),t.setCN(e,ke,this.bcn+"stroke-close"),t.setCN(e,Oe,this.bcn+"stroke"),q.className&&t.setCN(e,Se,q.className,!0),Gt=It,Ht=Pt}}if(!L&&!isNaN(Ut)){var je=this.hideBulletsCount;if(this.end-this.start<=je||0===je){var Ie=this.createBullet(q,Vt,Xt,pt),Pe=this.labelText;if(Pe&&Ie){var Re=this.createLabel(q,Vt,Xt,Pe);(Re=this.positionLabel(Gt,Ht,Re,Ie,Dt,Lt))&&this.allBullets.push(Re)}if("regular"==M||"100%"==M){var Be=a.totalText;if(Be){var Fe=this.createLabel(q,0,0,Be,a.totalTextColor);this.allBullets.push(Fe);var ze,Ye,We=Fe.getBBox(),Ge=We.width,He=We.height,Ve=a.totalTextOffset,Xe=a.totals[pt];Xe&&Xe.remove();var Ue=0;"column"!=o&&(Ue=this.bulletSize),b?(Ye=Pt,ze=0>Ut?It-Ge/2-2-Ue-Ve:It+Ge/2+3+Ue+Ve):(ze=It,Ye=0>Ut?Pt+He/2+Ue+Ve:Pt-He/2-3-Ue-Ve),Fe.translate(ze,Ye),a.totals[pt]=Fe,b?(0>Ye||Ye>m)&&Fe.remove():(0>ze||ze>v)&&Fe.remove()}}}}}}"line"!=o&&"step"!=o&&"smoothedLine"!=o||("smoothedLine"==o?this.drawSmoothedGraph(C,S,vt,mt):this.drawLineGraph(C,S,vt,mt),L||this.launchAnimation()),this.bulletsHidden&&this.hideBullets(),this.customBulletsHidden&&this.hideCustomBullets()},animateColumns:function(t,e){var i=this,n=i.chart.startDuration;0<n&&!i.animationPlayed&&(i.seqAn?(t.set.hide(),i.animationArray.push(t),n=setTimeout(function(){i.animate.call(i)},n/(i.end-i.start+1)*(e-i.start)*1e3),i.timeOuts.push(n)):i.animate(t))},createLabel:function(e,i,n,r,s){var a=this.chart,o=e.labelColor;o||(o=this.color),o||(o=a.color),s&&(o=s),s=this.fontSize,void 0===s&&(this.fontSize=s=a.fontSize);var h=this.labelFunction;return r=a.formatString(r,e),r=t.cleanFromEmpty(r),h&&(r=h(e,r)),e=t.text(this.container,r,o,a.fontFamily,s),e.node.style.pointerEvents="none",e.translate(i,n),this.bulletSet.push(e),e},positiveClip:function(t){t.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(t){t.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(e,i,n,r){var s=this;if(1<e.length){var a=s.set,o=s.chart,h=s.container,l=h.set(),u=h.set();a.push(u),a.push(l);var c=s.lineAlpha,f=s.lineThickness,a=s.fillAlphas,d=s.lineColorR,g=s.negativeLineAlpha;isNaN(g)&&(g=c);var p=s.lineColorSwitched;p&&(d=p);var p=s.fillColorsR,v=s.fillColorsSwitched;v&&(p=v);var m=s.dashLength;(v=s.dashLengthSwitched)&&(m=v);var v=s.negativeLineColor,y=s.negativeFillColors,b=s.negativeFillAlphas,x=s.baseCoord;0!==s.negativeBase&&(x=s.valueAxis.getCoordinate(s.negativeBase),x>s.height&&(x=s.height),0>x&&(x=0)),c=t.line(h,e,i,d,c,f,m,!1,!0),t.setCN(o,c,s.bcn+"stroke"),l.push(c),l.click(function(t){s.handleGraphEvent(t,"clickGraph")}).mouseover(function(t){s.handleGraphEvent(t,"rollOverGraph")}).mouseout(function(t){s.handleGraphEvent(t,"rollOutGraph")}),void 0===v||s.useNegativeColorIfDown||(f=t.line(h,e,i,v,g,f,m,!1,!0),t.setCN(o,f,s.bcn+"stroke"),t.setCN(o,f,s.bcn+"stroke-negative"),u.push(f)),(0<a||0<b)&&(f=e.join(";").split(";"),g=i.join(";").split(";"),c=o.type,"serial"==c?0<n.length?(n.reverse(),r.reverse(),f=e.concat(n),g=i.concat(r)):s.rotate?(g.push(g[g.length-1]),f.push(x),g.push(g[0]),f.push(x),g.push(g[0]),f.push(f[0])):(f.push(f[f.length-1]),g.push(x),f.push(f[0]),g.push(x),f.push(e[0]),g.push(g[0])):"xy"==c&&(i=s.fillToAxis)&&(t.isString(i)&&(i=o.getValueAxisById(i)),"H"==i.orientation?(x="top"==i.position?0:i.viH,f.push(f[f.length-1]),g.push(x),f.push(f[0]),g.push(x),f.push(e[0]),g.push(g[0])):(x="left"==i.position?0:i.viW,g.push(g[g.length-1]),f.push(x),g.push(g[0]),f.push(x),g.push(g[0]),f.push(f[0]))),e=s.gradientRotation,0<a&&(i=t.polygon(h,f,g,p,a,1,"#000",0,e),i.pattern(s.pattern,NaN,o.path),t.setCN(o,i,s.bcn+"fill"),l.push(i)),(y||void 0!==v)&&(isNaN(b)&&(b=a),y||(y=v),h=t.polygon(h,f,g,y,b,1,"#000",0,e),t.setCN(o,h,s.bcn+"fill"),t.setCN(o,h,s.bcn+"fill-negative"),h.pattern(s.pattern,NaN,o.path),u.push(h),u.click(function(t){s.handleGraphEvent(t,"clickGraph")}).mouseover(function(t){s.handleGraphEvent(t,"rollOverGraph")}).mouseout(function(t){s.handleGraphEvent(t,"rollOutGraph")}))),s.applyMask(u,l)}},applyMask:function(t,e){var i=t.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(e),0<i&&this.negativeClip(t))},drawSmoothedGraph:function(e,i,n,r){if(1<e.length){var s=this.set,a=this.chart,o=this.container,h=o.set(),l=o.set();s.push(l),s.push(h);var u=this.lineAlpha,c=this.lineThickness,s=this.dashLength,f=this.fillAlphas,d=this.lineColorR,g=this.fillColorsR,p=this.negativeLineColor,v=this.negativeFillColors,m=this.negativeFillAlphas,y=this.baseCoord,b=this.lineColorSwitched;b&&(d=b),(b=this.fillColorsSwitched)&&(g=b),b=this.negativeLineAlpha,isNaN(b)&&(b=u),u=new t.Bezier(o,e,i,d,u,c,g,0,s),t.setCN(a,u,this.bcn+"stroke"),h.push(u.path),void 0!==p&&(c=new t.Bezier(o,e,i,p,b,c,g,0,s),t.setCN(a,c,this.bcn+"stroke"),t.setCN(a,c,this.bcn+"stroke-negative"),l.push(c.path)),0<f&&(u=e.join(";").split(";"),d=i.join(";").split(";"),c="",0<n.length?(n.push("M"),r.push("M"),n.reverse(),r.reverse(),u=e.concat(n),d=i.concat(r)):(this.rotate?(c+=" L"+y+","+i[i.length-1],c+=" L"+y+","+i[0]):(c+=" L"+e[e.length-1]+","+y,c+=" L"+e[0]+","+y),c+=" L"+e[0]+","+i[0]),n=new t.Bezier(o,u,d,NaN,0,0,g,f,s,c),t.setCN(a,n,this.bcn+"fill"),n.path.pattern(this.pattern,NaN,a.path),h.push(n.path),v||void 0!==p)&&(m||(m=f),v||(v=p),e=new t.Bezier(o,e,i,NaN,0,0,v,m,s,c),e.path.pattern(this.pattern,NaN,a.path),t.setCN(a,e,this.bcn+"fill"),t.setCN(a,e,this.bcn+"fill-negative"),l.push(e.path)),this.applyMask(l,h)}},launchAnimation:function(){var e=this,i=e.chart.startDuration;if(0<i&&!e.animationPlayed){var n=e.set,r=e.bulletSet;t.VML||(n.attr({opacity:e.startAlpha}),r.attr({opacity:e.startAlpha})),n.hide(),r.hide(),e.seqAn?(i=setTimeout(function(){e.animateGraphs.call(e)},e.index*i*1e3),e.timeOuts.push(i)):e.animateGraphs()}},animateGraphs:function(){var t=this.chart,e=this.set,i=this.bulletSet,n=this.x,r=this.y;e.show(),i.show();var s=t.startDuration,t=t.startEffect;e&&(this.rotate?(e.translate(-1e3,r),i.translate(-1e3,r)):(e.translate(n,-1e3),i.translate(n,-1e3)),e.animate({opacity:1,translate:n+","+r},s,t),i.animate({opacity:1,translate:n+","+r},s,t))},animate:function(e){var i=this.chart,n=this.animationArray;!e&&0<n.length&&(e=n[0],n.shift()),n=t[t.getEffect(i.startEffect)],i=i.startDuration,e&&(this.rotate?e.animateWidth(i,n):e.animateHeight(i,n),e.set.show())},legendKeyColor:function(){var t=this.legendColor,e=this.lineAlpha;return void 0===t&&(t=this.lineColorR,0===e&&(e=this.fillColorsR)&&(t="object"==typeof e?e[0]:e)),t},legendKeyAlpha:function(){var t=this.legendAlpha;return void 0===t&&(t=this.lineAlpha,this.fillAlphas>t&&(t=this.fillAlphas),0===t&&(t=this.bulletAlpha),0===t&&(t=1)),t},createBullet:function(e,i,n){if(!isNaN(i)&&!isNaN(n)){var r=this.chart,s=this.container,a=this.bulletOffset,o=this.bulletSize;isNaN(e.bulletSize)||(o=e.bulletSize);var h=e.values.value,l=this.maxValue,u=this.minValue,c=this.maxBulletSize,f=this.minBulletSize;isNaN(l)||(isNaN(h)||(o=(h-u)/(l-u)*(c-f)+f),u==l&&(o=c)),l=o,this.bulletAxis&&(o=e.values.error,isNaN(o)||(h=o),o=this.bulletAxis.stepWidth*h),o<this.minBulletSize&&(o=this.minBulletSize),this.rotate?i=e.isNegative?i-a:i+a:n=e.isNegative?n+a:n-a;var d,f=this.bulletColorR;e.lineColor&&(this.bulletColorSwitched=e.lineColor),this.bulletColorSwitched&&(f=this.bulletColorSwitched),e.isNegative&&void 0!==this.bulletColorNegative&&(f=this.bulletColorNegative),void 0!==e.color&&(f=e.color);var g;"xy"==r.type&&this.valueField&&(g=this.pattern,e.pattern&&(g=e.pattern)),a=this.bullet,e.bullet&&(a=e.bullet);var h=this.bulletBorderThickness,u=this.bulletBorderColorR,c=this.bulletBorderAlpha,p=this.bulletAlpha;u||(u=f),this.useLineColorForBulletBorder&&(u=this.lineColorR);var v=e.alpha;return isNaN(v)||(p=v),("none"!=this.bullet||e.bullet)&&(d=t.bullet(s,a,o,f,p,h,u,c,l,0,g,r.path)),(this.customBullet||e.customBullet)&&(g=this.customBullet,e.customBullet&&(g=e.customBullet),g&&(d&&d.remove(),"function"==typeof g?(d=new g,d.chart=r,e.bulletConfig&&(d.availableSpace=n,d.graph=this,d.graphDataItem=e,d.bulletY=n,e.bulletConfig.minCoord=this.minCoord-n,d.bulletConfig=e.bulletConfig),d.write(s),d=d.set):(d=s.set(),s=s.image(g,0,0,o,o),d.push(s),this.centerCustomBullets&&s.translate(-o/2,-o/2)))),d&&((e.url||this.showHandOnHover)&&d.setAttr("cursor","pointer"),"serial"!=r.type&&"gantt"!=r.type||(-.5>i-0||i-0>this.width||n<-o/2||n-0>this.height)&&(d.remove(),d=null),d&&(this.bulletSet.push(d),d.translate(i,n),this.addListeners(d,e),this.allBullets.push(d)),e.bx=i,e.by=n,t.setCN(r,d,this.bcn+"bullet"),e.className&&t.setCN(r,d,e.className,!0)),d?(d.size=o||0,e.bulletGraphics=d):d={size:0},d.graphDataItem=e,d}},showBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!1,t=0;t<e.length;t++)e[t].show()},hideBullets:function(){var t,e=this.allBullets;for(this.bulletsHidden=!0,t=0;t<e.length;t++)e[t].hide()},showCustomBullets:function(){var t,e=this.allBullets;for(this.customBulletsHidden=!1,t=0;t<e.length;t++)e[t].graphDataItem.customBullet&&e[t].show()},hideCustomBullets:function(){var t,e=this.allBullets;for(this.customBulletsHidden=!0,t=0;t<e.length;t++)e[t].graphDataItem.customBullet&&e[t].hide()},addListeners:function(t,e){var i=this;t.mouseover(function(t){i.handleRollOver(e,t)}).mouseout(function(t){i.handleRollOut(e,t)}).touchend(function(t){i.handleRollOver(e,t),i.chart.panEventsEnabled&&i.handleClick(e,t)}).touchstart(function(t){i.handleRollOver(e,t)}).click(function(t){i.handleClick(e,t)}).dblclick(function(t){i.handleDoubleClick(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},handleRollOver:function(e,i){if(e){var n=this.chart,r={type:"rollOverGraphItem",item:e,index:e.index,graph:this,target:this,chart:this.chart,event:i};if(this.fire("rollOverGraphItem",r),n.fire("rollOverGraphItem",r),clearTimeout(n.hoverInt),r=this.showBalloon,!n.chartCursor||"serial"!=n.type&&"gantt"!=n.type||(r=!1,!n.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(r=!0)),r){var r=n.formatString(this.balloonText,e,!0),s=this.balloonFunction;s&&(r=s(e,e.graph)),r=t.cleanFromEmpty(r),s=n.getBalloonColor(this,e),n.balloon.showBullet=!1,n.balloon.pointerOrientation="V";var a=e.x,o=e.y;n.rotate&&(a=e.y,o=e.x),""!==r?n.showBalloon(r,s,!0,a+n.marginLeftReal,o+n.marginTopReal):this.chart.hideBalloonReal()}else this.chart.hideBalloonReal()}this.handleGraphEvent(i,"rollOverGraph")},handleRollOut:function(t,e){if(this.chart.hideBalloon(),t){var i={type:"rollOutGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rollOutGraphItem",i),this.chart.fire("rollOutGraphItem",i)}this.handleGraphEvent(e,"rollOutGraph")},handleClick:function(e,i){if(e){var n={type:"clickGraphItem",item:e,index:e.index,graph:this,target:this,chart:this.chart,event:i};this.fire("clickGraphItem",n),this.chart.fire("clickGraphItem",n),t.getURL(e.url,this.urlTarget)}this.handleGraphEvent(i,"clickGraph")},handleGraphEvent:function(t,e){var i={type:e,graph:this,target:this,chart:this.chart,event:t};this.fire(e,i),this.chart.fire(e,i)},handleRightClick:function(t,e){if(t){var i={type:"rightClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("rightClickGraphItem",i),this.chart.fire("rightClickGraphItem",i)}},handleDoubleClick:function(t,e){if(t){var i={type:"doubleClickGraphItem",item:t,index:t.index,graph:this,target:this,chart:this.chart,event:e};this.fire("doubleClickGraphItem",i),this.chart.fire("doubleClickGraphItem",i)}},zoom:function(t,e){this.start=t,this.end=e,this.draw()},changeOpacity:function(t){var e=this.set;if(e&&e.setAttr("opacity",t),e=this.ownColumns){var i;for(i=0;i<e.length;i++){var n=e[i].set;n&&n.setAttr("opacity",t)}}(e=this.bulletSet)&&e.setAttr("opacity",t)},destroy:function(){t.remove(this.set),t.remove(this.bulletSet);var e=this.timeOuts;if(e){var i;for(i=0;i<e.length;i++)clearTimeout(e[i])}this.timeOuts=[]}})}(),function(){var t=window.AmCharts;t.ChartCursor=t.Class({construct:function(e){this.cname="ChartCursor",this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved"),this.enabled=!0,this.cursorAlpha=1,this.selectionAlpha=.2,this.cursorColor="#CC0000",this.categoryBalloonAlpha=1,this.color="#FFFFFF",this.type="cursor",this.zoomed=!1,this.zoomable=!0,this.pan=!1,this.categoryBalloonDateFormat="MMM DD, YYYY",this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0,this.rolledOver=!1,this.cursorPosition="middle",this.bulletsEnabled=this.skipZoomDispatch=!1,this.bulletSize=8,this.selectWithoutZooming=this.oneBalloonOnly=!1,this.graphBulletSize=1.7,this.animationDuration=.3,this.zooming=!1,this.adjustment=0,this.avoidBalloonOverlapping=!0,this.leaveCursor=!1,t.applyTheme(this,e,this.cname)},draw:function(){this.destroy();var e=this.chart,i=e.container;this.rotate=e.rotate,this.container=i,i=i.set(),i.translate(this.x,this.y),this.set=i,e.cursorSet.push(i),i=new t.AmBalloon,i.className="category",i.chart=e,this.categoryBalloon=i,t.copyProperties(e.balloon,i),i.cornerRadius=0,i.shadowAlpha=0,i.borderThickness=1,i.borderAlpha=1,i.showBullet=!1;var n=this.categoryBalloonColor;if(void 0===n&&(n=this.cursorColor),i.fillColor=n,i.balloonColor=n,i.fillAlpha=this.categoryBalloonAlpha,i.borderColor=n,i.color=this.color,n=this.valueLineAxis,t.isString(n)&&(n=e.getValueAxisById(n)),n||(n=e.valueAxes[0]),this.valueLineAxis=n,this.valueLineBalloonEnabled&&(this.vaBalloon=n=new t.AmBalloon,t.copyProperties(i,n),n.animationDuration=0,this.rotate||(n.pointerOrientation="H")),this.rotate&&(i.pointerOrientation="H"),this.extraWidth=0,this.prevX=[],this.prevY=[],this.prevTX=[],this.prevTY=[],this.valueBalloonsEnabled)for(i=0;i<e.graphs.length;i++)n=new t.AmBalloon,n.className=e.graphs[i].id,n.chart=e,t.copyProperties(e.balloon,n),e.graphs[i].valueBalloon=n;"cursor"==this.type?this.createCursor():this.createCrosshair()},updateData:function(){var t=this.chart;this.data=t.chartData,this.firstTime=t.firstTime,this.lastTime=t.lastTime},createCursor:function(){var e,i,n,r,s=this.chart,a=this.cursorAlpha,o=s.categoryAxis,h=this.categoryBalloon;n=s.dx,r=s.dy;var l=this.width,u=this.height,c=s.rotate;h.pointerWidth=o.tickLength,c?(e=[0,l,l+n],i=[0,0,r],n=[n,0,0],r=[r,0,u]):(e=[n,0,0],i=[r,0,u],n=[0,l,l+n],r=[0,0,r]),e=t.line(this.container,e,i,this.cursorColor,a,1),t.setCN(s,e,"cursor-line"),this.line=e,e.node.style.pointerEvents="none",(i=this.fullRectSet)?(i.push(e),i.translate(this.x,this.y)):this.set.push(e),this.valueLineEnabled&&(e=this.valueLineAlpha,isNaN(e)||(a=e),a=t.line(this.container,n,r,this.cursorColor,a,1),a.node.style.pointerEvents="none",t.setCN(s,a,"cursor-value-line"),this.vLine=a,this.set.push(a)),this.setBalloonBounds(h,o,c),(s=this.vaBalloon)&&this.setBalloonBounds(s,this.valueLineAxis,!c),this.hideCursor()},createCrosshair:function(){var e=this.cursorAlpha,i=this.container,n=t.line(i,[0,0],[0,this.height],this.cursorColor,e,1),e=t.line(i,[0,this.width],[0,0],this.cursorColor,e,1);t.setCN(this.chart,n,"cursor-line"),t.setCN(this.chart,e,"cursor-line"),this.set.push(n),this.set.push(e),this.vLine=n,this.hLine=e,this.hideCursor()},update:function(){var t=this.chart;if(t.mouseIsOver){var e=t.mouseX-this.x,i=t.mouseY-this.y;-.5<e&&e<this.width+1&&0<i&&i<this.height?(this.drawing?this.rolledOver||t.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||t.setMouseCursor("move")),this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(e,i),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(t,e){var i=this.vLine,n=this.vaBalloon;if((i||n)&&!this.panning&&!this.drawing){i&&i.show();var r,s=this.valueLineAxis,a=this.rotate;if(a?(i&&i.translate(t,0),s&&(r=s.coordinateToValue(t)),i=t):(i&&i.translate(0,e),s&&(r=s.coordinateToValue(e)),i=e-1),n&&!isNaN(r)&&this.prevLineValue!=r){var o=s.formatValue(r,!0);this.setBalloonPosition(n,s,i,!a),n.showBalloon(o)}this.prevLineValue=r}},getMousePosition:function(){var t,e=this.width,i=this.height;return t=this.chart,this.rotate?(t=t.mouseY-this.y,0>t&&(t=0),t>i&&(t=i)):(t=t.mouseX-this.x-1,0>t&&(t=0),t>e&&(t=e)),t},updateCrosshair:function(){var e=this.chart,i=e.mouseX-this.x,n=e.mouseY-this.y,r=this.vLine,s=this.hLine,i=t.fitToBounds(i,0,this.width),n=t.fitToBounds(n,0,this.height);r&&0<this.cursorAlpha&&(r.show(),s.show(),r.translate(i,0),s.translate(0,n)),this.zooming&&(e.hideXScrollbar&&(i=NaN),e.hideYScrollbar&&(n=NaN),this.updateSelectionSize(i,n)),this.fireMoved(),e.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var t=this.chart,e={type:"moved",target:this};e.chart=t,e.zooming=this.zooming,e.x=t.mouseX-this.x,e.y=t.mouseY-this.y,this.fire("moved",e)},updateSelectionSize:function(e,i){t.remove(this.selection);var n=this.selectionPosX,r=this.selectionPosY,s=0,a=0,o=this.width,h=this.height;isNaN(e)||(n>e&&(s=e,o=n-e),n<e&&(s=n,o=e-n),n==e&&(s=e,o=0),o+=this.extraWidth,s-=this.extraWidth/2),isNaN(i)||(r>i&&(a=i,h=r-i),r<i&&(a=r,h=i-r),r==i&&(a=i,h=0),h+=this.extraWidth,a-=this.extraWidth/2),0<o&&0<h&&(n=t.rect(this.container,o,h,this.cursorColor,this.selectionAlpha),t.setCN(this.chart,n,"cursor-selection"),n.translate(s+this.x,a+this.y),this.selection=n)},arrangeBalloons:function(){var t=this.valueBalloons,e=this.x,i=this.y,n=this.height+i;t.sort(this.compareY);var r;for(r=0;r<t.length;r++){var s=t[r].balloon;s.setBounds(e,i,e+this.width,n),s.prevX=this.prevX[r],s.prevY=this.prevY[r],s.prevTX=this.prevTX[r],s.prevTY=this.prevTY[r],s.draw(),n=s.yPos-3}this.arrangeBalloons2()},compareY:function(t,e){return t.yy<e.yy?1:-1},arrangeBalloons2:function(){var t=this.valueBalloons;t.reverse();var e,i,n,r=this.x,s=t.length;for(n=0;n<s;n++){var a=t[n].balloon;e=a.bottom;var o=a.bottom-a.yPos,h=s-n-1;0<n&&e-o<i+3&&(a.setBounds(r,i+3,r+this.width,i+o+3),a.prevX=this.prevX[h],a.prevY=this.prevY[h],a.prevTX=this.prevTX[h],a.prevTY=this.prevTY[h],a.draw()),a.set&&a.set.show(),this.prevX[h]=a.prevX,this.prevY[h]=a.prevY,this.prevTX[h]=a.prevTX,this.prevTY[h]=a.prevTY,i=a.bottom}},showBullets:function(){t.remove(this.allBullets);var e=this.container,i=e.set();this.set.push(i),this.set.show(),this.allBullets=i;var n,i=this.chart.graphs;for(n=0;n<i.length;n++){var r=i[n];if(!r.hidden&&r.balloonText){var s=this.data[this.index].axes[r.valueAxis.id].graphs[r.id],a=s.y;if(!isNaN(a)){var o,h;o=s.x,this.rotate?(h=a,a=o):h=o,r=t.circle(e,this.bulletSize/2,this.chart.getBalloonColor(r,s,!0),r.cursorBulletAlpha),r.translate(h,a),this.allBullets.push(r)}}}},destroy:function(){this.clear(),t.remove(this.selection),this.selection=null;var e=this.categoryBalloon;e&&e.destroy(),(e=this.vaBalloon)&&e.destroy(),this.destroyValueBalloons(),t.remove(this.set)},clear:function(){},destroyValueBalloons:function(){var t=this.valueBalloons;if(t){var e;for(e=0;e<t.length;e++)t[e].balloon.hide()}},zoom:function(e,i,n,r){var s=this.chart;this.destroyValueBalloons(),this.zooming=!1;var a;if(this.rotate?this.selectionPosY=a=s.mouseY:this.selectionPosX=a=s.mouseX,this.start=e,this.end=i,this.startTime=n,this.endTime=r,this.zoomed=!0,r=s.categoryAxis,a=this.rotate,i=this.width,n=this.height,e=r.stepWidth,this.fullWidth){var o=1;r.parseDates&&!r.equalSpacing&&(o=r.minDuration()),a?this.extraWidth=n=e*o:(this.extraWidth=i=e*o,this.categoryBalloon.minWidth=i),this.line&&this.line.remove(),this.line=t.rect(this.container,i,n,this.cursorColor,this.cursorAlpha,0),this.line.node.style.pointerEvents="none",t.setCN(s,this.line,"cursor-fill"),this.fullRectSet&&this.fullRectSet.push(this.line)}this.stepWidth=e,this.tempVal=this.valueBalloonsEnabled,this.valueBalloonsEnabled=!1,this.setPosition(),this.valueBalloonsEnabled=this.tempVal,this.hideCursor()},hideObj:function(t){t&&t.hide()},hideCursor:function(e){void 0===e&&(e=!0),this.leaveCursor||(this.hideObj(this.set),this.hideObj(this.categoryBalloon),this.hideObj(this.line),this.hideObj(this.vLine),this.hideObj(this.hLine),this.hideObj(this.vaBalloon),this.hideObj(this.allBullets),this.destroyValueBalloons(),this.selectWithoutZooming||t.remove(this.selection),this.previousIndex=NaN,e&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this}),this.drawing||this.chart.setMouseCursor("auto"),this.normalizeBulletSize())},setPosition:function(e,i,n){void 0===i&&(i=!0),"cursor"==this.type?(this.tempPosition=NaN,t.ifArray(this.data)&&(isNaN(e)&&(e=this.getMousePosition()),(e!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(e)&&("mouse"==this.cursorPosition&&(this.tempPosition=e),isNaN(n)&&(n=this.chart.categoryAxis.xToIndex(e)),n!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(n,i),this.zoomed=!1),this.previousMousePosition=e)):this.updateCrosshair()},normalizeBulletSize:function(){var t=this.resizedBullets;if(t)for(var e=0;e<t.length;e++){var i=t[e],n=i.bulletGraphics;n&&(n.translate(i.bx,i.by,1),i=i.graph,isNaN(this.graphBulletAlpha)||(n.setAttr("fill-opacity",i.bulletAlpha),n.setAttr("stroke-opacity",i.bulletBorderAlpha)))}},updateCursor:function(e,i){var n=this.chart,r=this.fullWidth,s=n.mouseX-this.x,a=n.mouseY-this.y;if(this.drawingNow&&(t.remove(this.drawingLine),this.drawingLine=t.line(this.container,[this.x+this.drawStartX,this.x+s],[this.y+this.drawStartY,this.y+a],this.cursorColor,1,1)),this.enabled){void 0===i&&(i=!0),this.index=e+=this.adjustment;var o=n.categoryAxis,h=n.dx,l=n.dy,u=this.x+1,c=this.y+1,f=this.width,d=this.height,g=this.data[e];if(this.fireMoved(),g){var p=g.x[o.id],v=n.rotate,m=this.stepWidth,y=this.categoryBalloon,b=this.firstTime,x=this.lastTime,_=this.cursorPosition,w=this.zooming,C=this.panning,S=n.graphs;if(n.mouseIsOver||w||C||this.forceShow)if(this.forceShow=!1,C){var h=this.panClickPos,n=this.panClickEndTime,w=this.panClickStartTime,O=this.panClickEnd,u=this.panClickStart,s=(v?h-a:h-s)/m;o.parseDates&&!o.equalSpacing||(s=Math.round(s)),0!==s&&(h={type:"zoomed",target:this},h.chart=this.chart,o.parseDates&&!o.equalSpacing?(n+s>x&&(s=x-n),w+s<b&&(s=b-w),h.start=Math.round(w+s),h.end=Math.round(n+s),this.fire(h.type,h)):O+s>=this.data.length||0>u+s||(h.start=u+s,h.end=O+s,this.fire(h.type,h)))}else{if("start"==_?p-=o.cellWidth/2:"mouse"==_&&(n.mouseIsOver?p=v?a-2:s-2:isNaN(this.tempPosition)||(p=this.tempPosition-2)),v){if(0>p){if(!w)return void this.hideCursor();p=0}if(p>d+1){if(!w)return void this.hideCursor();p=d+1}}else{if(0>p){if(!w)return void this.hideCursor();p=0}if(p>f){if(!w)return void this.hideCursor();p=f}}if(b=this.line,0<this.cursorAlpha&&(v?(x=0,m=p+l,r&&(m-=o.cellWidth/2)):(x=p,m=0,r&&(x-=o.cellWidth/2)),_=this.animationDuration,0<_&&!this.zooming?isNaN(this.previousX)?b.translate(x,m):(b.translate(this.previousX,this.previousY),b.animate({translate:x+","+m},_,"easeOutSine")):b.translate(x,m),this.previousX=x,this.previousY=m,b.show()),this.linePos=v?p+l:p,w&&(r&&b.hide(),v?this.updateSelectionSize(NaN,p):this.updateSelectionSize(p,NaN)),m=!0,w&&(m=!1),this.categoryBalloonEnabled&&m?(this.setBalloonPosition(y,o,p,v),(b=this.categoryBalloonFunction)?y.showBalloon(b(g.category)):o.parseDates?(o=t.formatDate(g.category,this.categoryBalloonDateFormat,n),-1!=o.indexOf("fff")&&(o=t.formatMilliseconds(o,g.category)),y.showBalloon(o)):y.showBalloon(t.fixNewLines(g.category))):y.hide(),S&&this.bulletsEnabled&&this.showBullets(),this.oneBalloonOnly){for(p=1/0,o=0;o<S.length;o++)y=S[o],y.showBalloon&&!y.hidden&&y.balloonText&&(b=g.axes[y.valueAxis.id].graphs[y.id],x=b.y,isNaN(x)||(v?Math.abs(s-x)<p&&(p=Math.abs(s-x),O=y):Math.abs(a-x)<p&&(p=Math.abs(a-x),O=y)));this.mostCloseGraph&&(O=this.mostCloseGraph)}if((e!=this.previousIndex||O!=this.previousMostCloseGraph)&&(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],S&&this.valueBalloonsEnabled&&m&&n.balloon.enabled)){for(this.valueBalloons=p=[],o=0;o<S.length;o++)if(y=S[o],x=NaN,(!this.oneBalloonOnly||y==O)&&y.showBalloon&&!y.hidden&&y.balloonText&&("step"==y.type&&"left"==y.stepDirection&&(g=this.data[e+1]),g)){if((b=g.axes[y.valueAxis.id].graphs[y.id])&&(x=b.y),this.showNextAvailable&&isNaN(x)&&e+1<this.data.length)for(m=e+1;m<this.data.length&&(!(r=this.data[m])||(b=r.axes[y.valueAxis.id].graphs[y.id],x=b.y,isNaN(x)));m++);isNaN(x)||(r=b.x,l=!0,v?(m=x,(0>r||r>d)&&(l=!1)):(m=r,r=x,(0>m||m>f+h+1)&&(l=!1)),l&&(l=this.graphBulletSize,_=this.graphBulletAlpha,1==l&&isNaN(_)||!t.isModern||!(C=b.bulletGraphics)||(C.translate(b.bx,b.by,l),this.resizedBullets.push(b),isNaN(_)||(C.setAttr("fill-opacity",_),C.setAttr("stroke-opacity",_))),l=y.valueBalloon,_=n.getBalloonColor(y,b),l.setBounds(u,c,u+f,c+d),l.pointerOrientation="H",C=this.balloonPointerOrientation,"vertical"==C&&(l.pointerOrientation="V"),"horizontal"==C&&(l.pointerOrientation="H"),l.changeColor(_),void 0!==y.balloonAlpha&&(l.fillAlpha=y.balloonAlpha),void 0!==y.balloonTextColor&&(l.color=y.balloonTextColor),l.setPosition(m+u,r+c),m=n.formatString(y.balloonText,b,!0),(r=y.balloonFunction)&&(m=r(b,y).toString()),""!==m&&(v?l.showBalloon(m):(l.text=m,l.show=!0),p.push({yy:x,balloon:l})),!v&&l.set&&(l.set.hide(),y=l.textDiv)&&(y.style.visibility="hidden")))}this.avoidBalloonOverlapping&&this.arrangeBalloons()}i?(h={type:"changed"},h.index=e,h.chart=this.chart,h.zooming=w,h.mostCloseGraph=O,h.position=v?a:s,h.target=this,n.fire("changed",h),this.fire("changed",h),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,n.updateLegendValues(e)),this.previousIndex=e,this.previousMostCloseGraph=O}}}else this.hideCursor()},setBalloonPosition:function(t,e,i,n){var r=e.position,s=e.inside;e=e.axisThickness;var a=this.chart,o=a.dx,a=a.dy,h=this.x,l=this.y,u=this.width,c=this.height;n?(s&&("right"==r?t.setBounds(h,l+a,h+u+o,l+i+a):t.setBounds(h,l+a,h+u+o,l+i)),"right"==r?s?t.setPosition(h+u+o,l+i+a):t.setPosition(h+u+o+e,l+i+a):s?t.setPosition(h,l+i):t.setPosition(h-e,l+i)):"top"==r?s?t.setPosition(h+i+o,l+a):t.setPosition(h+i+o,l+a-e+1):s?t.setPosition(h+i,l+c):t.setPosition(h+i,l+c+e-1)},setBalloonBounds:function(t,e,i){var n=e.position,r=e.inside,s=e.axisThickness,a=e.tickLength,o=this.chart,h=o.dx,o=o.dy,l=this.x,u=this.y,c=this.width,f=this.height;i?(r&&(t.pointerWidth=0),"right"==n?r?t.setBounds(l,u+o,l+c+h,u+f+o):t.setBounds(l+c+h+s,u+o,l+c+1e3,u+f+o):r?t.setBounds(l,u,c+l,f+u):t.setBounds(-1e3,-1e3,l-a-s,u+f+15)):(t.maxWidth=c,e.parseDates&&(a=0,t.pointerWidth=0),"top"==n?r?t.setBounds(l+h,u+o,c+h+l,f+u):t.setBounds(l+h,-1e3,c+h+l,u+o-a-s):r?t.setBounds(l,u,c+l,f+u-a):t.setBounds(l,u+f+a+s-1,l+c,u+f+a+s))},enableDrawing:function(t){this.enabled=!t,this.hideCursor(),this.rolledOver=!1,this.drawing=t},isZooming:function(t){t&&t!=this.zooming&&this.handleMouseDown("fake"),t||t==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var t={type:"changed",index:void 0,target:this};t.chart=this.chart,this.fire("changed",t),this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var e,i=this.chart,n=this.data;if(i){var r=i.mouseX-this.x,s=i.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1,t.remove(this.drawingLine),e=this.drawStartX;var a=this.drawStartY;(2<Math.abs(e-r)||2<Math.abs(a-s))&&(e={type:"draw",target:this,chart:i,initialX:e,initialY:a,finalX:r,finalY:s},this.fire(e.type,e))}if(this.enabled&&0<n.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){if(e=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"},e.target=this,e.chart=i,"cursor"==this.type)this.rotate?this.selectionPosY=s:this.selectionPosX=s=r,4>Math.abs(s-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(e.end=this.fromIndex,e.start=this.index):(e.end=this.index,e.start=this.fromIndex),s=i.categoryAxis,s.parseDates&&!s.equalSpacing&&(n[e.start]&&(e.start=n[e.start].time),n[e.end]&&(e.end=i.getEndTime(n[e.end].time))),this.skipZoomDispatch||this.fire(e.type,e));else{var o=this.initialMouseX,h=this.initialMouseY;3>Math.abs(r-o)&&3>Math.abs(s-h)||(n=Math.min(o,r),a=Math.min(h,s),r=Math.abs(o-r),s=Math.abs(h-s),i.hideXScrollbar&&(n=0,r=this.width),i.hideYScrollbar&&(a=0,s=this.height),e.selectionHeight=s,e.selectionWidth=r,e.selectionY=a,e.selectionX=n,this.skipZoomDispatch||this.fire(e.type,e))}this.selectWithoutZooming||t.remove(this.selection)}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(t){var e=this.chart.categoryAxis;t=e.parseDates?e.dateToCoordinate(t):e.categoryToCoordinate(t),this.previousMousePosition=NaN,this.forceShow=!0,this.setPosition(t,!1)},clearSelection:function(){t.remove(this.selection)},handleMouseDown:function(e){if(this.zoomable||this.pan||this.drawing){var i=this.rotate,n=this.chart,r=n.mouseX-this.x,s=n.mouseY-this.y;(0<r&&r<this.width&&0<s&&s<this.height||"fake"==e)&&(this.setPosition(),this.selectWithoutZooming&&t.remove(this.selection),this.drawing?(this.drawStartY=s,this.drawStartX=r,this.drawingNow=!0):this.pan?(this.zoomable=!1,n.setMouseCursor("move"),this.panning=!0,this.panClickPos=i?s:r,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,i?(this.initialMouse=s,this.selectionPosY=this.linePos):(this.initialMouse=r,this.selectionPosX=this.linePos)):(this.initialMouseX=r,this.initialMouseY=s,this.selectionPosX=r,this.selectionPosY=s),this.zooming=!0))}}})}(),function(){var t=window.AmCharts;t.SimpleChartScrollbar=t.Class({construct:function(e){this.createEvents("zoomed"),this.backgroundColor="#D4D4D4",this.backgroundAlpha=1,this.selectedBackgroundColor="#EFEFEF",this.scrollDuration=this.selectedBackgroundAlpha=1,this.resizeEnabled=!0,this.hideResizeGrips=!1,this.scrollbarHeight=20,this.updateOnReleaseOnly=!1,9>document.documentMode&&(this.updateOnReleaseOnly=!0),this.dragIconHeight=this.dragIconWidth=35,this.dragIcon="dragIconRoundBig",t.applyTheme(this,e,"SimpleChartScrollbar")},draw:function(){var e=this;if(e.destroy(),e.enabled){var i=e.chart.container,n=e.rotate,r=e.chart,s=i.set();e.set=s,r.scrollbarsSet.push(s);var a,o;if(n?(a=e.scrollbarHeight,o=r.plotAreaHeight):(o=e.scrollbarHeight,a=r.plotAreaWidth),e.width=a,(e.height=o)&&a){var h=t.rect(i,a,o,e.backgroundColor,e.backgroundAlpha,1,e.backgroundColor,e.backgroundAlpha);t.setCN(r,h,"scrollbar-bg"),e.bg=h,s.push(h),h=t.rect(i,a,o,"#000",.005),s.push(h),e.invisibleBg=h,h.click(function(){e.handleBgClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}).touchend(function(){e.handleBgClick()}),h=t.rect(i,a,o,e.selectedBackgroundColor,e.selectedBackgroundAlpha),t.setCN(r,h,"scrollbar-bg-selected"),e.selectedBG=h,s.push(h),a=t.rect(i,a,o,"#000",.005),e.dragger=a,s.push(a),a.mousedown(function(t){e.handleDragStart(t)}).mouseup(function(){e.handleDragStop()}).mouseover(function(){e.handleDraggerOver()}).mouseout(function(){e.handleMouseOut()}).touchstart(function(t){e.handleDragStart(t)}).touchend(function(){e.handleDragStop()}),a=r.pathToImages,n?(h=a+e.dragIcon+"H.png",a=e.dragIconWidth,n=e.dragIconHeight):(h=a+e.dragIcon+".png",n=e.dragIconWidth,a=e.dragIconHeight),o=i.image(h,0,0,n,a),t.setCN(r,o,"scrollbar-grip-left"),h=i.image(h,0,0,n,a),t.setCN(r,h,"scrollbar-grip-right");var l=10,u=20;r.panEventsEnabled&&(l=25,u=e.scrollbarHeight);var c=t.rect(i,l,u,"#000",.005),f=t.rect(i,l,u,"#000",.005);
f.translate(-(l-n)/2,-(u-a)/2),c.translate(-(l-n)/2,-(u-a)/2),n=i.set([o,f]),i=i.set([h,c]),e.iconLeft=n,s.push(e.iconLeft),e.iconRight=i,s.push(i),n.mousedown(function(){e.leftDragStart()}).mouseup(function(){e.leftDragStop()}).mouseover(function(){e.iconRollOver()}).mouseout(function(){e.iconRollOut()}).touchstart(function(){e.leftDragStart()}).touchend(function(){e.leftDragStop()}),i.mousedown(function(){e.rightDragStart()}).mouseup(function(){e.rightDragStop()}).mouseover(function(){e.iconRollOver()}).mouseout(function(){e.iconRollOut()}).touchstart(function(){e.rightDragStart()}).touchend(function(){e.rightDragStop()}),t.ifArray(r.chartData)?s.show():s.hide(),e.hideDragIcons(),e.clipDragger(!1)}s.translate(e.x,e.y),s.node.style.msTouchAction="none"}},updateScrollbarSize:function(t,e){t=Math.round(t),e=Math.round(e);var i,n,r,s,a=this.dragger;this.rotate?(i=0,n=t,r=this.width+1,s=e-t,a.setAttr("height",e-t),a.setAttr("y",n)):(i=t,n=0,r=e-t,s=this.height+1,a.setAttr("width",e-t),a.setAttr("x",i)),this.clipAndUpdate(i,n,r,s)},update:function(){var t,e,i,n=!1,r=this.x,s=this.y,a=this.dragger,o=this.getDBox();if(o){e=o.x+r,i=o.y+s;var h=o.width,o=o.height,l=this.rotate,u=this.chart,c=this.width,f=this.height,d=u.mouseX,g=u.mouseY;t=this.initialMouse,this.forceClip&&this.clipDragger(!0),u.mouseIsOver&&(this.dragging&&(u=this.initialCoord,l?(t=u+(g-t),0>t&&(t=0),u=f-o,t>u&&(t=u),a.setAttr("y",t)):(t=u+(d-t),0>t&&(t=0),u=c-h,t>u&&(t=u),a.setAttr("x",t)),this.clipDragger(!0)),this.resizingRight&&(l?(t=g-i,t+i>f+s&&(t=f-i+s),0>t?(this.resizingRight=!1,n=this.resizingLeft=!0):(0===t&&(t=.1),a.setAttr("height",t))):(t=d-e,t+e>c+r&&(t=c-e+r),0>t?(this.resizingRight=!1,n=this.resizingLeft=!0):(0===t&&(t=.1),a.setAttr("width",t))),this.clipDragger(!0)),this.resizingLeft&&(l?(e=i,i=g,i<s&&(i=s),i>f+s&&(i=f+s),t=!0===n?e-i:o+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,a.setAttr("y",e+o-s)):(0===t&&(t=.1),a.setAttr("y",i-s),a.setAttr("height",t))):(i=d,i<r&&(i=r),i>c+r&&(i=c+r),t=!0===n?e-i:h+e-i,0>t?(this.resizingRight=!0,this.resizingLeft=!1,a.setAttr("x",e+h-r)):(0===t&&(t=.1),a.setAttr("x",i-r),a.setAttr("width",t))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(t){var e=this.getDBox();if(e){var i=e.x,n=e.y,r=e.width,e=e.height,s=!1;this.rotate?(i=0,r=this.width+1,(this.clipY!=n||this.clipH!=e)&&(s=!0)):(n=0,e=this.height+1,(this.clipX!=i||this.clipW!=r)&&(s=!0)),s&&(this.clipAndUpdate(i,n,r,e),t&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(t,e,i,n){this.clipX=t,this.clipY=e,this.clipW=i,this.clipH=n,this.selectedBG.clipRect(t,e,i,n),this.updateDragIconPositions(),this.maskGraphs(t,e,i,n)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t=this.chart;t.hideBalloon();var e=this.getDBox(),i=e.x,n=e.y,r=e.width,e=e.height;this.rotate?(i=n,r=this.height/e):r=this.width/r,t={type:"zoomed",position:i,chart:t,target:this,multiplier:r},this.fire(t.type,t)}},updateDragIconPositions:function(){var t,e,i=this.getDBox(),n=i.x,r=i.y,s=this.iconLeft,a=this.iconRight,o=this.scrollbarHeight;this.rotate?(t=this.dragIconWidth,e=this.dragIconHeight,s.translate((o-e)/2,r-t/2),a.translate((o-e)/2,r+i.height-t/2)):(t=this.dragIconHeight,e=this.dragIconWidth,s.translate(n-e/2,(o-t)/2),a.translate(n-e/2+i.width,(o-t)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||(!this.hideResizeGrips&&this.resizeEnabled||(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(t,e){this.enabled&&(this.dragger.stop(),this.multiplier=t,this.position=e,this.updateScrollbarSize(e,this.rotate?e+this.height/t:e+this.width/t),this.clipDragger())},destroy:function(){this.clear(),t.remove(this.set),t.remove(this.iconRight),t.remove(this.iconLeft)},clear:function(){},handleDragStart:function(){if(this.enabled){var t=this.chart;this.dragger.stop(),this.removeCursors(),this.dragging=!0;var e=this.getDBox();this.rotate?(this.initialCoord=e.y,this.initialMouse=t.mouseY):(this.initialCoord=e.x,this.initialMouse=t.mouseX)}},handleDragStop:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent()),this.dragging=!1,this.mouseIsOver&&this.removeCursors(),this.update()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop(),this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},rightDragStart:function(){this.dragger.stop(),this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.rotate?this.chart.setMouseCursor("n-resize"):this.chart.setMouseCursor("e-resize"),this.handleMouseOver()},getDBox:function(){if(this.dragger)return this.dragger.getBBox()},handleBgClick:function(){var e=this;if(!e.resizingRight&&!e.resizingLeft){e.zooming=!0;var i,n,r=e.scrollDuration,s=e.dragger;i=e.getDBox();var a=i.height,o=i.width;n=e.chart;var h=e.y,l=e.x,u=e.rotate;u?(i="y",n=n.mouseY-a/2-h,n=t.fitToBounds(n,0,e.height-a)):(i="x",n=n.mouseX-o/2-l,n=t.fitToBounds(n,0,e.width-o)),e.updateOnReleaseOnly?(e.skipEvent=!1,s.setAttr(i,n),e.dispatchScrollbarEvent(),e.clipDragger()):(n=Math.round(n),u?s.animate({y:n},r,">"):s.animate({x:n},r,">"),e.forceClip=!0,clearTimeout(e.forceTO),e.forceTO=setTimeout(function(){e.stopForceClip.call(e)},5e3*r))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.update(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.update())},handleMouseOver:function(){this.mouseIsOver=!0,this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1,this.hideDragIcons()}})}(),function(){var t=window.AmCharts;t.ChartScrollbar=t.Class({inherits:t.SimpleChartScrollbar,construct:function(e){this.cname="ChartScrollbar",t.ChartScrollbar.base.construct.call(this,e),this.enabled=!0,this.graphLineColor="#BBBBBB",this.graphLineAlpha=0,this.graphFillColor="#BBBBBB",this.graphFillAlpha=1,this.selectedGraphLineColor="#888888",this.selectedGraphLineAlpha=0,this.selectedGraphFillColor="#888888",this.selectedGraphFillAlpha=1,this.gridCount=0,this.gridColor="#FFFFFF",this.gridAlpha=.7,this.skipEvent=this.autoGridCount=!1,this.color="#FFFFFF",this.scrollbarCreated=!1,this.offset=0,this.oppositeAxis=!0,t.applyTheme(this,e,this.cname)},init:function(){var e=this.categoryAxis,i=this.chart;if(e||(this.categoryAxis=e=new t.CategoryAxis),e.chart=i,e.id="scrollbar",e.dateFormats=i.categoryAxis.dateFormats,e.markPeriodChange=i.categoryAxis.markPeriodChange,e.boldPeriodBeginning=i.categoryAxis.boldPeriodBeginning,e.axisItemRenderer=t.RecItem,e.axisRenderer=t.RecAxis,e.guideFillRenderer=t.RecFill,e.inside=!0,e.fontSize=this.fontSize,e.tickLength=0,e.axisAlpha=0,t.isString(this.graph)&&(this.graph=t.getObjById(i.graphs,this.graph)),e=this.graph){var n=this.valueAxis;n||(this.valueAxis=n=new t.ValueAxis,n.visible=!1,n.scrollbar=!0,n.axisItemRenderer=t.RecItem,n.axisRenderer=t.RecAxis,n.guideFillRenderer=t.RecFill,n.labelsEnabled=!1,n.chart=i),i=this.unselectedGraph,i||(i=new t.AmGraph,i.scrollbar=!0,this.unselectedGraph=i,i.negativeBase=e.negativeBase,i.noStepRisers=e.noStepRisers),i=this.selectedGraph,i||(i=new t.AmGraph,i.scrollbar=!0,this.selectedGraph=i,i.negativeBase=e.negativeBase,i.noStepRisers=e.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var e=this;if(t.ChartScrollbar.base.draw.call(e),e.enabled){e.scrollbarCreated||e.init();var i=e.chart,n=i.chartData,r=e.categoryAxis,s=e.rotate,a=e.x,o=e.y,h=e.width,l=e.height,u=i.categoryAxis,c=e.set;if(r.setOrientation(!s),r.parseDates=u.parseDates,r.rotate=s,r.equalSpacing=u.equalSpacing,r.minPeriod=u.minPeriod,r.startOnAxis=u.startOnAxis,r.viW=h,r.viH=l,r.width=h,r.height=l,r.gridCount=e.gridCount,r.gridColor=e.gridColor,r.gridAlpha=e.gridAlpha,r.color=e.color,r.tickLength=0,r.axisAlpha=0,r.autoGridCount=e.autoGridCount,r.parseDates&&!r.equalSpacing&&r.timeZoom(i.firstTime,i.lastTime),r.zoom(0,n.length-1),u=e.graph){var f=e.valueAxis,d=u.valueAxis;f.id=d.id,f.rotate=s,f.setOrientation(s),f.width=h,f.height=l,f.viW=h,f.viH=l,f.dataProvider=n,f.reversed=d.reversed,f.logarithmic=d.logarithmic,f.gridAlpha=0,f.axisAlpha=0,c.push(f.set),s?(f.y=o,f.x=0):(f.x=a,f.y=0);var g,a=1/0,o=-(1/0);for(g=0;g<n.length;g++){var p,v=n[g].axes[d.id].graphs[u.id].values;for(p in v)if(v.hasOwnProperty(p)&&"percents"!=p&&"total"!=p){var m=v[p];m<a&&(a=m),m>o&&(o=m)}}1/0!=a&&(f.minimum=a),-(1/0)!=o&&(f.maximum=o+.1*(o-a)),a==o&&(--f.minimum,f.maximum+=1),void 0!==e.minimum&&(f.minimum=e.minimum),void 0!==e.maximum&&(f.maximum=e.maximum),f.zoom(0,n.length-1),p=e.unselectedGraph,p.id=u.id,p.bcn="scrollbar-graph-",p.rotate=s,p.chart=i,p.data=n,p.valueAxis=f,p.chart=u.chart,p.categoryAxis=e.categoryAxis,p.periodSpan=u.periodSpan,p.valueField=u.valueField,p.openField=u.openField,p.closeField=u.closeField,p.highField=u.highField,p.lowField=u.lowField,p.lineAlpha=e.graphLineAlpha,p.lineColorR=e.graphLineColor,p.fillAlphas=e.graphFillAlpha,p.fillColorsR=e.graphFillColor,p.connect=u.connect,p.hidden=u.hidden,p.width=h,p.height=l,p.pointPosition=u.pointPosition,p.stepDirection=u.stepDirection,p.periodSpan=u.periodSpan,d=e.selectedGraph,d.id=u.id,d.bcn=p.bcn+"selected-",d.rotate=s,d.chart=i,d.data=n,d.valueAxis=f,d.chart=u.chart,d.categoryAxis=r,d.periodSpan=u.periodSpan,d.valueField=u.valueField,d.openField=u.openField,d.closeField=u.closeField,d.highField=u.highField,d.lowField=u.lowField,d.lineAlpha=e.selectedGraphLineAlpha,d.lineColorR=e.selectedGraphLineColor,d.fillAlphas=e.selectedGraphFillAlpha,d.fillColorsR=e.selectedGraphFillColor,d.connect=u.connect,d.hidden=u.hidden,d.width=h,d.height=l,d.pointPosition=u.pointPosition,d.stepDirection=u.stepDirection,d.periodSpan=u.periodSpan,i=e.graphType,i||(i=u.type),p.type=i,d.type=i,n=n.length-1,p.zoom(0,n),d.zoom(0,n),d.set.click(function(){e.handleBackgroundClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}),p.set.click(function(){e.handleBackgroundClick()}).mouseover(function(){e.handleMouseOver()}).mouseout(function(){e.handleMouseOut()}),c.push(p.set),c.push(d.set)}c.push(r.set),c.push(r.labelsSet),e.bg.toBack(),e.invisibleBg.toFront(),e.dragger.toFront(),e.iconLeft.toFront(),e.iconRight.toFront()}},timeZoom:function(e,i,n){this.startTime=e,this.endTime=i,this.timeDifference=i-e,this.skipEvent=!t.toBoolean(n),this.zoomScrollbar(),this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(t,e){this.start=t,this.end=e,this.skipEvent=!0,this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var t,e,i=this.chart.chartData,n=this.dragger.getBBox();t=n.x;var r=n.y,s=n.width,n=n.height,a=this.chart;this.rotate?(t=r,e=n):e=s,s={type:"zoomed",target:this},s.chart=a;var o=this.categoryAxis,h=this.stepWidth,r=a.minSelectedTime,n=!1;o.parseDates&&!o.equalSpacing?(i=a.lastTime,a=a.firstTime,o=Math.round(t/h)+a,t=this.dragging?o+this.timeDifference:Math.round((t+e)/h)+a,o>t&&(o=t),0<r&&t-o<r&&(t=Math.round(o+(t-o)/2),n=Math.round(r/2),o=t-n,t+=n,n=!0),t>i&&(t=i),t-r<o&&(o=t-r),o<a&&(o=a),o+r>t&&(t=o+r),(o!=this.startTime||t!=this.endTime)&&(this.startTime=o,this.endTime=t,s.start=o,s.end=t,s.startDate=new Date(o),s.endDate=new Date(t),this.fire(s.type,s))):(o.startOnAxis||(t+=h/2),e-=this.stepWidth/2,r=o.xToIndex(t),t=o.xToIndex(t+e),(r!=this.start||this.end!=t)&&(o.startOnAxis&&(this.resizingRight&&r==t&&t++,this.resizingLeft&&r==t&&(0<r?r--:t=1)),this.start=r,this.end=this.dragging?this.start+this.difference:t,s.start=this.start,s.end=this.end,o.parseDates&&(i[this.start]&&(s.startDate=new Date(i[this.start].time)),i[this.end]&&(s.endDate=new Date(i[this.end].time))),this.fire(s.type,s))),n&&this.zoomScrollbar()}},zoomScrollbar:function(){var t,e;t=this.chart;var i=t.chartData,n=this.categoryAxis;n.parseDates&&!n.equalSpacing?(i=n.stepWidth,n=t.firstTime,t=i*(this.startTime-n),e=i*(this.endTime-n)):(t=i[this.start].x[n.id],e=i[this.end].x[n.id],i=n.stepWidth,n.startOnAxis||(n=i/2,t-=n,e+=n)),this.stepWidth=i,this.updateScrollbarSize(t,e)},maskGraphs:function(t,e,i,n){var r=this.selectedGraph;r&&r.set.clipRect(t,e,i,n)},handleDragStart:function(){t.ChartScrollbar.base.handleDragStart.call(this),this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){t.ChartScrollbar.base.handleBackgroundClick.call(this),this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}})}(),function(){var t=window.AmCharts;t.AmBalloon=t.Class({construct:function(e){this.cname="AmBalloon",this.enabled=!0,this.fillColor="#FFFFFF",this.fillAlpha=.8,this.borderThickness=2,this.borderColor="#FFFFFF",this.borderAlpha=1,this.cornerRadius=0,this.maxWidth=220,this.horizontalPadding=8,this.verticalPadding=4,this.pointerWidth=6,this.pointerOrientation="V",this.color="#000000",this.adjustBorderColor=!0,this.show=this.follow=this.showBullet=!1,this.bulletSize=3,this.shadowAlpha=.4,this.shadowColor="#000000",this.fadeOutDuration=this.animationDuration=.3,this.fixedPosition=!1,this.offsetY=6,this.offsetX=1,this.textAlign="center",this.disableMouseEvents=!0,this.deltaSignX=this.deltaSignY=1,t.isModern||(this.offsetY*=1.5),t.applyTheme(this,e,this.cname)},draw:function(){var e=this.pointToX,i=this.pointToY,n=this.chart;if(t.VML&&(this.fadeOutDuration=0),this.xAnim&&n.stopAnim(this.xAnim),this.yAnim&&n.stopAnim(this.yAnim),!isNaN(e)){var r=this.follow,s=n.container,a=this.set;if(t.remove(a),this.removeDiv(),a=s.set(),a.node.style.pointerEvents="none",this.set=a,n.balloonsSet.push(a),this.show){var o=this.l,h=this.t,l=this.r,u=this.b,c=this.balloonColor,f=this.fillColor,d=this.borderColor,g=f;void 0!=c&&(this.adjustBorderColor?g=d=c:f=c);var p=this.horizontalPadding,v=this.verticalPadding,m=this.pointerWidth,y=this.pointerOrientation,b=this.cornerRadius,x=n.fontFamily,_=this.fontSize;void 0==_&&(_=n.fontSize);var c=document.createElement("div"),w=n.classNamePrefix;c.className=w+"-balloon-div",this.className&&(c.className=c.className+" "+w+"-balloon-div-"+this.className),w=c.style,this.disableMouseEvents&&(w.pointerEvents="none"),w.position="absolute";var C=this.minWidth,S="";isNaN(C)||(S="min-width:"+(C-2*p)+"px; "),c.innerHTML="<div style='text-align:"+this.textAlign+"; "+S+"max-width:"+this.maxWidth+"px; font-size:"+_+"px; color:"+this.color+"; font-family:"+x+"'>"+this.text+"</div>",n.chartDiv.appendChild(c),this.textDiv=c,_=c.offsetWidth,x=c.offsetHeight,c.clientHeight&&(_=c.clientWidth,x=c.clientHeight),x+=2*v,S=_+2*p,!isNaN(C)&&S<C&&(S=C),window.opera&&(x+=2);var O=!1,_=this.offsetY;n.handDrawn&&(_+=n.handDrawScatter+2),"H"!=y?(C=e-S/2,i<h+x+10&&"down"!=y?(O=!0,r&&(i+=_),_=i+m,this.deltaSignY=-1):(r&&(i-=_),_=i-x-m,this.deltaSignY=1)):(2*m>x&&(m=x/2),_=i-x/2,e<o+(l-o)/2?(C=e+m,this.deltaSignX=-1):(C=e-S-m,this.deltaSignX=1)),_+x>=u&&(_=u-x),_<h&&(_=h),C<o&&(C=o),C+S>l&&(C=l-S);var T,h=_+v,u=C+p,v=this.shadowAlpha,k=this.shadowColor,p=this.borderThickness,M=this.bulletSize;0<b||0===m?(0<v&&(e=t.rect(s,S,x,f,0,p+1,k,v,this.cornerRadius),t.isModern?e.translate(1,1):e.translate(4,4),a.push(e)),f=t.rect(s,S,x,f,this.fillAlpha,p,d,this.borderAlpha,this.cornerRadius),this.showBullet&&(T=t.circle(s,M,g,this.fillAlpha),a.push(T))):(g=[],b=[],"H"!=y?(o=e-C,o>S-m&&(o=S-m),o<m&&(o=m),g=[0,o-m,e-C,o+m,S,S,0,0],b=O?[0,0,i-_,0,0,x,x,0]:[x,x,i-_,x,x,0,0,x]):(g=i-_,g>x-m&&(g=x-m),g<m&&(g=m),b=[0,g-m,i-_,g+m,x,x,0,0],g=e<o+(l-o)/2?[0,0,C<e?0:e-C,0,0,S,S,0]:[S,S,C+S>e?S:e-C,S,S,0,0,S]),0<v&&(e=t.polygon(s,g,b,f,0,p,k,v),e.translate(1,1),a.push(e)),f=t.polygon(s,g,b,f,this.fillAlpha,p,d,this.borderAlpha)),this.bg=f,a.push(f),f.toFront(),t.setCN(n,f,"balloon-bg"),this.className&&t.setCN(n,f,"balloon-bg-"+this.className),s=1*this.deltaSignX,w.left=u+"px",w.top=h+"px",a.translate(C-s,_),f=f.getBBox(),this.bottom=_+x+1,this.yPos=f.y+_,T&&T.translate(this.pointToX-C+s,i-_),i=this.animationDuration,0<this.animationDuration&&!r&&!isNaN(this.prevX)&&(a.translate(this.prevX,this.prevY),a.animate({translate:C-s+","+_},i,"easeOutSine"),c&&(w.left=this.prevTX+"px",w.top=this.prevTY+"px",this.xAnim=n.animate({node:c},"left",this.prevTX,u,i,"easeOutSine","px"),this.yAnim=n.animate({node:c},"top",this.prevTY,h,i,"easeOutSine","px"))),this.prevX=C-s,this.prevY=_,this.prevTX=u,this.prevTY=h}}},followMouse:function(){if(this.follow&&this.show){var t=this.chart.mouseX-this.offsetX*this.deltaSignX,e=this.chart.mouseY;if(this.pointToX=t,this.pointToY=e,t!=this.previousX||e!=this.previousY)if(this.previousX=t,this.previousY=e,0===this.cornerRadius)this.draw();else{var i=this.set;if(i){var n=i.getBBox(),t=t-n.width/2,r=e-n.height-10;t<this.l&&(t=this.l),t>this.r-n.width&&(t=this.r-n.width),r<this.t&&(r=e+10),i.translate(t,r),e=this.textDiv.style,e.left=t+this.horizontalPadding+"px",e.top=r+this.verticalPadding+"px"}}}},changeColor:function(t){this.balloonColor=t},setBounds:function(t,e,i,n){this.l=t,this.t=e,this.r=i,this.b=n,this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(t){this.text=t,this.show=!0,this.destroyTO&&clearTimeout(this.destroyTO),t=this.chart,this.fadeAnim1&&t.stopAnim(this.fadeAnim1),this.fadeAnim2&&t.stopAnim(this.fadeAnim2),this.draw()},hide:function(t){var e=this;isNaN(t)&&(t=e.fadeOutDuration);var i=e.chart;if(0<t){e.destroyTO&&clearTimeout(e.destroyTO),e.destroyTO=setTimeout(function(){e.destroy.call(e)},1e3*t),e.follow=!1,e.show=!1;var n=e.set;n&&(n.setAttr("opacity",e.fillAlpha),e.fadeAnim1=n.animate({opacity:0},t,"easeInSine")),e.textDiv&&(e.fadeAnim2=i.animate({node:e.textDiv},"opacity",1,0,t,"easeInSine",""))}else e.show=!1,e.follow=!1,e.destroy()},setPosition:function(t,e,i){this.pointToX=t,this.pointToY=e,i&&(t==this.previousX&&e==this.previousY||this.draw()),this.previousX=t,this.previousY=e},followCursor:function(t){var e=this;(e.follow=t)?(e.pShowBullet=e.showBullet,e.showBullet=!1):void 0!==e.pShowBullet&&(e.showBullet=e.pShowBullet),clearInterval(e.interval);var i=e.chart.mouseX,n=e.chart.mouseY;!isNaN(i)&&t&&(e.pointToX=i-e.offsetX*e.deltaSignX,e.pointToY=n,e.followMouse(),e.interval=setInterval(function(){e.followMouse.call(e)},40))},removeDiv:function(){if(this.textDiv){var t=this.textDiv.parentNode;t&&t.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval),t.remove(this.set),this.removeDiv(),this.set=null}})}(),function(){var t=window.AmCharts;t.AmCoordinateChart=t.Class({inherits:t.AmChart,construct:function(e){t.AmCoordinateChart.base.construct.call(this,e),this.theme=e,this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.startAlpha=1,this.startDuration=0,this.startEffect="elastic",this.sequencedAnimation=!0,this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.balloonDateFormat="MMM DD, YYYY",this.valueAxes=[],this.graphs=[],this.guides=[],this.gridAboveGraphs=!1,t.applyTheme(this,e,"AmCoordinateChart")},initChart:function(){t.AmCoordinateChart.base.initChart.call(this);var e=this.categoryAxis;e&&(this.categoryAxis=t.processObject(e,t.CategoryAxis,this.theme)),this.processValueAxes(),this.createValueAxes(),this.processGraphs(),this.processGuides(),t.VML&&(this.startAlpha=1),this.setLegendData(this.graphs),this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var e=new t.ValueAxis;this.addValueAxis(e)}},parseData:function(){this.processValueAxes(),this.processGraphs()},parseSerialData:function(e){var i,n=this.graphs,r={},s=this.seriesIdField;if(s||(s=this.categoryField),this.chartData=[],e){var a,o,h,l,u=!1,c=this.categoryAxis;c&&(u=c.parseDates,o=c.forceShowField,l=c.classNameField,h=c.labelColorField,a=c.categoryFunction);var f,d,g,p={};u&&(i=t.extractPeriod(c.minPeriod),f=i.period,d=i.count,g=t.getPeriodDuration(f,d));var v={};this.lookupTable=v;var m,y=this.dataDateFormat,b={};for(m=0;m<e.length;m++){var x={},_=e[m];if(i=_[this.categoryField],x.dataContext=_,x.category=a?a(i,_,c):String(i),o&&(x.forceShow=_[o]),l&&(x.className=_[l]),h&&(x.labelColor=_[h]),v[_[s]]=x,!u||(c.categoryFunction?i=c.categoryFunction(i,_,c):(!y||i instanceof Date||(i=i.toString()+" |"),i=t.getDate(i,y,c.minPeriod)),i=t.resetDateToMin(i,f,d,c.firstDayOfWeek),x.category=i,x.time=i.getTime(),!isNaN(x.time))){var w=this.valueAxes;x.axes={},x.x={};var C;for(C=0;C<w.length;C++){var S=w[C].id;x.axes[S]={},x.axes[S].graphs={};var O;for(O=0;O<n.length;O++){i=n[O];var T=i.id,k=1.1;isNaN(i.gapPeriod)||(k=i.gapPeriod);var M=i.periodValue;if(i.valueAxis.id==S){x.axes[S].graphs[T]={};var A={};A.index=m;var D=_;i.dataProvider&&(D=r),A.values=this.processValues(D,i,M),!i.connect&&b&&b[T]&&x.time-p[T]>=g*k&&(b[T].gap=!0),this.processFields(i,A,D),A.category=x.category,A.serialDataItem=x,A.graph=i,x.axes[S].graphs[T]=A,p[T]=x.time,b[T]=A}}}this.chartData[m]=x}}}for(e=0;e<n.length;e++)i=n[e],i.dataProvider&&this.parseGraphData(i)},processValues:function(e,i,n){var r,s={},a=!1;"candlestick"!=i.type&&"ohlc"!=i.type||""===n||(a=!0);for(var o="value error open close low high".split(" "),h=0;h<o.length;h++){var l=o[h];"value"!=l&&"error"!=l&&a&&(n=l.charAt(0).toUpperCase()+l.slice(1));var u=e[i[l+"Field"]+n];r=Number(u),isNaN(r)||(s[l]=r),"date"==i.valueAxis.type&&void 0!==u&&(r=t.getDate(u,i.chart.dataDateFormat),s[l]=r.getTime())}return s},parseGraphData:function(t){var e=t.dataProvider,i=t.seriesIdField;i||(i=this.seriesIdField),i||(i=this.categoryField);var n;for(n=0;n<e.length;n++){var r=e[n],s=this.lookupTable[String(r[i])],a=t.valueAxis.id;s&&(a=s.axes[a].graphs[t.id],a.serialDataItem=s,a.values=this.processValues(r,t,t.periodValue),this.processFields(t,a,r))}},addValueAxis:function(t){t.chart=this,this.valueAxes.push(t),this.validateData()},removeValueAxesAndGraphs:function(){var t,e=this.valueAxes;for(t=e.length-1;-1<t;t--)this.removeValueAxis(e[t])},removeValueAxis:function(t){var e,i=this.graphs;for(e=i.length-1;0<=e;e--){var n=i[e];n&&n.valueAxis==t&&this.removeGraph(n)}for(i=this.valueAxes,e=i.length-1;0<=e;e--)i[e]==t&&i.splice(e,1);this.validateData()},addGraph:function(t){this.graphs.push(t),this.chooseGraphColor(t,this.graphs.length-1),this.validateData()},removeGraph:function(t){var e,i=this.graphs;for(e=i.length-1;0<=e;e--)i[e]==t&&(i.splice(e,1),t.destroy());this.validateData()},processValueAxes:function(){var e,i=this.valueAxes;for(e=0;e<i.length;e++){var n=i[e],n=t.processObject(n,t.ValueAxis,this.theme);i[e]=n,n.chart=this,n.id||(n.id="valueAxisAuto"+e+"_"+(new Date).getTime()),void 0===n.usePrefixes&&(n.usePrefixes=this.usePrefixes)}},processGuides:function(){var e=this.guides,i=this.categoryAxis;if(e)for(var n=0;n<e.length;n++){var r=e[n];(void 0!==r.category||void 0!==r.date)&&i&&i.addGuide(r),r.id||(r.id="guideAuto"+n+"_"+(new Date).getTime());var s=r.valueAxis;s?(t.isString(s)&&(s=this.getValueAxisById(s)),s?s.addGuide(r):this.valueAxes[0].addGuide(r)):isNaN(r.value)||this.valueAxes[0].addGuide(r)}},processGraphs:function(){var e,i=this.graphs;for(e=0;e<i.length;e++){var n=i[e],n=t.processObject(n,t.AmGraph,this.theme);i[e]=n,this.chooseGraphColor(n,e),n.chart=this,t.isString(n.valueAxis)&&(n.valueAxis=this.getValueAxisById(n.valueAxis)),n.valueAxis||(n.valueAxis=this.valueAxes[0]),n.id||(n.id="graphAuto"+e+"_"+(new Date).getTime())}},formatString:function(e,i,n){var r=i.graph,s=r.valueAxis;return s.duration&&i.values.value&&(s=t.formatDuration(i.values.value,s.duration,"",s.durationUnits,s.maxInterval,s.numberFormatter),e=e.split("[[value]]").join(s)),e=t.massReplace(e,{"[[title]]":r.title,"[[description]]":i.description}),e=n?t.fixNewLines(e):t.fixBrakes(e),e=t.cleanFromEmpty(e)},getBalloonColor:function(t,e,i){var n=t.lineColor,r=t.balloonColor;return i&&(r=n),i=t.fillColorsR,"object"==typeof i?n=i[0]:void 0!==i&&(n=i),e.isNegative&&(i=t.negativeLineColor,t=t.negativeFillColors,"object"==typeof t?i=t[0]:void 0!==t&&(i=t),void 0!==i&&(n=i)),void 0!==e.color&&(n=e.color),void 0===r&&(r=n),r},getGraphById:function(e){return t.getObjById(this.graphs,e)},getValueAxisById:function(e){return t.getObjById(this.valueAxes,e)},processFields:function(e,i,n){if(e.itemColors){var r=e.itemColors,s=i.index;i.color=s<r.length?r[s]:t.randomColor()}for(r="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern gap className".split(" "),s=0;s<r.length;s++){var a=r[s],o=e[a+"Field"];o&&(o=n[o],t.isDefined(o)&&(i[a]=o))}i.dataContext=n},chooseGraphColor:function(e,i){if(e.lineColor)e.lineColorR=e.lineColor;else{var n;n=this.colors.length>i?this.colors[i]:t.randomColor(),e.lineColorR=n}e.fillColorsR=e.fillColors?e.fillColors:e.lineColorR,e.bulletBorderColorR=e.bulletBorderColor?e.bulletBorderColor:e.useLineColorForBulletBorder?e.lineColorR:e.bulletColor,e.bulletColorR=e.bulletColor?e.bulletColor:e.lineColorR,(n=this.patterns)&&(e.pattern=n[i])},handleLegendEvent:function(t){var e=t.type;if(t=t.dataItem,!this.legend.data&&t){var i=t.hidden,n=t.showBalloon;switch(e){case"clickMarker":this.textClickEnabled&&(n?this.hideGraphsBalloon(t):this.showGraphsBalloon(t));break;case"clickLabel":n?this.hideGraphsBalloon(t):this.showGraphsBalloon(t);break;case"rollOverItem":i||this.highlightGraph(t);break;case"rollOutItem":i||this.unhighlightGraph();break;case"hideItem":this.hideGraph(t);break;case"showItem":this.showGraph(t)}}},highlightGraph:function(t){var e,i=this.graphs,n=.2;if(this.legend&&(n=this.legend.rollOverGraphAlpha),1!=n)for(e=0;e<i.length;e++){var r=i[e];r!=t&&r.changeOpacity(n)}},unhighlightGraph:function(){var t;if(this.legend&&(t=this.legend.rollOverGraphAlpha),1!=t){t=this.graphs;var e;for(e=0;e<t.length;e++)t[e].changeOpacity(1)}},showGraph:function(t){t.switchable&&(t.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(t){t.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),t.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(t){t.showBalloon=!1,this.updateLegend()},showGraphsBalloon:function(t){t.showBalloon=!0,this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var t=this.graphs;if(t){var e;for(e=0;e<t.length;e++)t[e].animationPlayed=!1}},animateAgain:function(){this.resetAnimation(),this.validateNow()}})}(),function(){var t=window.AmCharts;t.AmSlicedChart=t.Class({inherits:t.AmChart,construct:function(e){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),t.AmSlicedChart.base.construct.call(this,e),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,t.applyTheme(this,e,"AmSlicedChart")},initChart:function(){t.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(t){var e=t.type,i=t.dataItem,n=this.legend;if(!n.data&&i){var r=i.hidden;switch(t=t.event,e){case"clickMarker":r||n.switchable||this.clickSlice(i,t);break;case"clickLabel":r||this.clickSlice(i,t,!1);break;case"rollOverItem":r||this.rollOverSlice(i,!1,t);break;case"rollOutItem":r||this.rollOutSlice(i,t);break;case"hideItem":this.hideSlice(i,t);break;case"showItem":this.showSlice(i,t)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var t=this.legend;t&&t.invalidateSize()},addEventListeners:function(t,e){var i=this;t.mouseover(function(t){i.rollOverSlice(e,!0,t)}).mouseout(function(t){i.rollOutSlice(e,t)}).touchend(function(t){i.rollOverSlice(e,t),i.panEventsEnabled&&i.clickSlice(e,t)}).touchstart(function(t){i.rollOverSlice(e,t)}).click(function(t){i.clickSlice(e,t)}).contextmenu(function(t){i.handleRightClick(e,t)})},formatString:function(e,i,n){e=t.formatValue(e,i,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers);var r=this.pf.precision;return isNaN(this.tempPrec)||(this.pf.precision=this.tempPrec),e=t.formatValue(e,i,["percents"],this.pf),e=t.massReplace(e,{"[[title]]":i.title,"[[description]]":i.description}),this.pf.precision=r,-1!=e.indexOf("[[")&&(e=t.formatDataContextValue(e,i.dataContext)),e=n?t.fixNewLines(e):t.fixBrakes(e),e=t.cleanFromEmpty(e)},startSlices:function(){var t;for(t=0;t<this.chartData.length;t++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(t):this.startSlice(this.chartData[t])},setStartTO:function(t){var e=this;t=setTimeout(function(){e.startSequenced.call(e)},e.startDuration/e.chartData.length*500*t),e.timeOuts.push(t)},pullSlices:function(t){var e,i=this.chartData;for(e=0;e<i.length;e++){var n=i[e];n.pulled&&this.pullSlice(n,1,t)}},startSequenced:function(){var t,e=this.chartData;for(t=0;t<e.length;t++)if(!e[t].started){this.startSlice(this.chartData[t]);break}},startSlice:function(t){t.started=!0;var e=t.wedge,i=this.startDuration;e&&0<i&&(0<t.alpha&&e.show(),e.translate(t.startX,t.startY),e.animate({opacity:1,translate:"0,0"},i,this.startEffect))},showLabels:function(){var t,e=this.chartData;for(t=0;t<e.length;t++){var i=e[t];if(0<i.alpha){var n=i.label;n&&n.show(),(i=i.tick)&&i.show()}}},showSlice:function(t){isNaN(t)?t.hidden=!1:this.chartData[t].hidden=!1,this.invalidateVisibility()},hideSlice:function(t){isNaN(t)?t.hidden=!0:this.chartData[t].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(e,i,n){if(isNaN(e)||(e=this.chartData[e]),clearTimeout(this.hoverInt),!e.hidden){this.pullOnHover&&this.pullSlice(e,1),1>this.hoverAlpha&&e.wedge&&e.wedge.attr({opacity:this.hoverAlpha});var r=e.balloonX,s=e.balloonY;e.pulled&&(r+=e.pullX,s+=e.pullY);var a=this.formatString(this.balloonText,e,!0),o=this.balloonFunction;o&&(a=o(e,a)),o=t.adjustLuminosity(e.color,-.15),a?this.showBalloon(a,o,i,r,s):this.hideBalloon(),0===e.value&&this.hideBalloon(),e={type:"rollOverSlice",dataItem:e,chart:this,event:n},this.fire(e.type,e)}},rollOutSlice:function(t,e){isNaN(t)||(t=this.chartData[t]),t.wedge&&t.wedge.attr({opacity:1}),this.hideBalloon();var i={type:"rollOutSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},clickSlice:function(e,i,n){isNaN(e)||(e=this.chartData[e]),e.pulled?this.pullSlice(e,0):this.pullSlice(e,1),t.getURL(e.url,this.urlTarget),n||(e={type:"clickSlice",dataItem:e,chart:this,event:i},this.fire(e.type,e))},handleRightClick:function(t,e){isNaN(t)||(t=this.chartData[t]);var i={
type:"rightClickSlice",dataItem:t,chart:this,event:e};this.fire(i.type,i)},drawTicks:function(){var e,i=this.chartData;for(e=0;e<i.length;e++){var n=i[e];if(n.label){var r=n.ty,r=t.line(this.container,[n.tx0,n.tx,n.tx2],[n.ty0,r,r],this.labelTickColor,this.labelTickAlpha);t.setCN(this,r,this.type+"-tick"),t.setCN(this,r,n.className,!0),n.tick=r,n.wedge.push(r)}}},initialStart:function(){var t=this,e=t.startDuration,i=setTimeout(function(){t.showLabels.call(t)},1e3*e);t.timeOuts.push(i),t.chartCreated?t.pullSlices(!0):(t.startSlices(),0<e?(e=setTimeout(function(){t.pullSlices.call(t)},1200*e),t.timeOuts.push(e)):t.pullSlices(!0))},pullSlice:function(t,e,i){var n=this.pullOutDuration;!0===i&&(n=0),(i=t.wedge)&&(0<n?i.animate({translate:e*t.pullX+","+e*t.pullY},n,this.pullOutEffect):i.translate(e*t.pullX,e*t.pullY)),1==e?(t.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(t.index),t={type:"pullOutSlice",dataItem:t,chart:this}):(t.pulled=!1,t={type:"pullInSlice",dataItem:t,chart:this}),this.fire(t.type,t)},pullInAll:function(t){var e,i=this.chartData;for(e=0;e<this.chartData.length;e++)e!=t&&i[e].pulled&&this.pullSlice(i[e],0)},pullOutAll:function(){var t,e=this.chartData;for(t=0;t<e.length;t++)e[t].pulled||this.pullSlice(e[t],1)},parseData:function(){var e=[];this.chartData=e;var i=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==i){var n,r,s,a=i.length,o=0;for(n=0;n<a;n++){r={};var h=i[n];r.dataContext=h,r.value=Number(h[this.valueField]),(s=h[this.titleField])||(s=""),r.title=s,r.pulled=t.toBoolean(h[this.pulledField],!1),(s=h[this.descriptionField])||(s=""),r.description=s,r.labelRadius=Number(h[this.labelRadiusField]),r.switchable=!0,r.className=h[this.classNameField],r.url=h[this.urlField],s=h[this.patternField],!s&&this.patterns&&(s=this.patterns[n]),r.pattern=s,r.visibleInLegend=t.toBoolean(h[this.visibleInLegendField],!0),s=h[this.alphaField],r.alpha=void 0!==s?Number(s):this.alpha,s=h[this.colorField],void 0!==s&&(r.color=s),r.labelColor=t.toColor(h[this.labelColorField]),o+=r.value,r.hidden=!1,e[n]=r}for(n=i=0;n<a;n++)r=e[n],r.percents=r.value/o*100,r.percents<this.groupPercent&&i++;for(1<i&&(this.groupValue=0,this.removeSmallSlices(),e.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/o*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,className:this.groupedClassName,dataContext:{}})),a=this.baseColor,a||(a=this.pieBaseColor),o=this.brightnessStep,o||(o=this.pieBrightnessStep),n=0;n<e.length;n++)a?s=t.adjustLuminosity(a,n*o/100):(s=this.colors[n],void 0===s&&(s=t.randomColor())),void 0===e[n].color&&(e[n].color=s);this.recalculatePercents()}},recalculatePercents:function(){var t,e,i=this.chartData,n=0;for(t=0;t<i.length;t++)e=i[t],!e.hidden&&0<e.value&&(n+=e.value);for(t=0;t<i.length;t++)e=this.chartData[t],e.percents=!e.hidden&&0<e.value?100*e.value/n:0},removeSmallSlices:function(){var t,e=this.chartData;for(t=e.length-1;0<=t;t--)e[t].percents<this.groupPercent&&(this.groupValue+=e[t].value,e.splice(t,1))},animateAgain:function(){var t=this;t.startSlices();for(var e=0;e<t.chartData.length;e++){var i=t.chartData[e];i.started=!1;var n=i.wedge;n&&n.translate(i.startX,i.startY)}e=t.startDuration,0<e?(e=setTimeout(function(){t.pullSlices.call(t)},1200*e),t.timeOuts.push(e)):t.pullSlices()},measureMaxLabel:function(){var e,i=this.chartData,n=0;for(e=0;e<i.length;e++){var r=i[e],s=this.formatString(this.labelText,r),a=this.labelFunction;a&&(s=a(r,s)),r=t.text(this.container,s,this.color,this.fontFamily,this.fontSize),s=r.getBBox().width,s>n&&(n=s),r.remove()}return n}})}(),function(){var t=window.AmCharts;t.AmRectangularChart=t.Class({inherits:t.AmCoordinateChart,construct:function(e){t.AmRectangularChart.base.construct.call(this,e),this.theme=e,this.createEvents("zoomed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0,this.heightMultiplier=this.widthMultiplier=1,this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.zoomOutButtonImageSize=19,this.zoomOutButtonImage="lens.png",this.zoomOutText="Show all",this.zoomOutButtonColor="#e5e5e5",this.zoomOutButtonAlpha=0,this.zoomOutButtonRollOverAlpha=1,this.zoomOutButtonPadding=8,this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10,t.applyTheme(this,e,"AmRectangularChart")},initChart:function(){t.AmRectangularChart.base.initChart.call(this),this.updateDxy();var e=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),e=!1),this.processScrollbars(),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),e&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){if(t.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),t.ifArray(this.chartData)){var e=this.chartCursor;e&&e.draw()}},resetMargins:function(){var t,e={};if("xy"==this.type){var i=this.xAxes,n=this.yAxes;for(t=0;t<i.length;t++){var r=i[t];r.ignoreAxisWidth||(r.setOrientation(!0),r.fixAxisPosition(),e[r.position]=!0)}for(t=0;t<n.length;t++)i=n[t],i.ignoreAxisWidth||(i.setOrientation(!1),i.fixAxisPosition(),e[i.position]=!0)}else{for(n=this.valueAxes,t=0;t<n.length;t++)i=n[t],i.ignoreAxisWidth||(i.setOrientation(this.rotate),i.fixAxisPosition(),e[i.position]=!0);(t=this.categoryAxis)&&!t.ignoreAxisWidth&&(t.setOrientation(!this.rotate),t.fixAxisPosition(),t.fixAxisPosition(),e[t.position]=!0)}e.left&&(this.marginLeft=0),e.right&&(this.marginRight=0),e.top&&(this.marginTop=0),e.bottom&&(this.marginBottom=0),this.fixMargins=e},measureMargins:function(){var t,e=this.valueAxes,i=this.autoMarginOffset,n=this.fixMargins,r=this.realWidth,s=this.realHeight,a=i,o=i,h=r;t=s;var l;for(l=0;l<e.length;l++)e[l].handleSynchronization(),t=this.getAxisBounds(e[l],a,h,o,t),a=Math.round(t.l),h=Math.round(t.r),o=Math.round(t.t),t=Math.round(t.b);(e=this.categoryAxis)&&(t=this.getAxisBounds(e,a,h,o,t),a=Math.round(t.l),h=Math.round(t.r),o=Math.round(t.t),t=Math.round(t.b)),n.left&&a<i&&(this.marginLeft=Math.round(-a+i)),n.right&&h>=r-i&&(this.marginRight=Math.round(h-r+i)),n.top&&o<i+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-o+i+this.titleHeight)),n.bottom&&t>s-i&&(this.marginBottom=Math.round(this.marginBottom+t-s+i)),this.initChart()},getAxisBounds:function(t,e,i,n,r){if(!t.ignoreAxisWidth){var s=t.labelsSet,a=t.tickLength;if(t.inside&&(a=0),s)switch(s=t.getBBox(),t.position){case"top":t=s.y,n>t&&(n=t);break;case"bottom":t=s.y+s.height,r<t&&(r=t);break;case"right":t=s.x+s.width+a+3,i<t&&(i=t);break;case"left":t=s.x-a,e>t&&(e=t)}}return{l:e,t:n,r:i,b:r}},drawZoomOutButton:function(){var e=this;if(!e.zbSet){var i=e.container.set();e.zoomButtonSet.push(i);var n=e.color,r=e.fontSize,s=e.zoomOutButtonImageSize,a=e.zoomOutButtonImage,o=t.lang.zoomOutText||e.zoomOutText,h=e.zoomOutButtonColor,l=e.zoomOutButtonAlpha,u=e.zoomOutButtonFontSize,c=e.zoomOutButtonPadding;isNaN(u)||(r=u),(u=e.zoomOutButtonFontColor)&&(n=u);var f,u=e.zoomOutButton;u&&(u.fontSize&&(r=u.fontSize),u.color&&(n=u.color),u.backgroundColor&&(h=u.backgroundColor),isNaN(u.backgroundAlpha)||(e.zoomOutButtonRollOverAlpha=u.backgroundAlpha));var d=u=0;for(void 0!==e.pathToImages&&a&&(f=e.container.image(e.pathToImages+a,0,0,s,s),t.setCN(e,f,"zoom-out-image"),i.push(f),f=f.getBBox(),u=f.width+5),void 0!==o&&(n=t.text(e.container,o,n,e.fontFamily,r,"start"),t.setCN(e,n,"zoom-out-label"),r=n.getBBox(),d=f?f.height/2-3:r.height/2,n.translate(u,d),i.push(n)),f=i.getBBox(),n=1,t.isModern||(n=0),h=t.rect(e.container,f.width+2*c+5,f.height+2*c-2,h,1,1,h,n),h.setAttr("opacity",l),h.translate(-c,-c),t.setCN(e,h,"zoom-out-bg"),i.push(h),h.toBack(),e.zbBG=h,f=h.getBBox(),i.translate(e.marginLeftReal+e.plotAreaWidth-f.width+c,e.marginTopReal+c),i.hide(),i.mouseover(function(){e.rollOverZB()}).mouseout(function(){e.rollOutZB()}).click(function(){e.clickZB()}).touchstart(function(){e.rollOverZB()}).touchend(function(){e.rollOutZB(),e.clickZB()}),l=0;l<i.length;l++)i[l].attr({cursor:"pointer"});e.zbSet=i}},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0,this.zoom()},drawPlotArea:function(){var e=this.dx,i=this.dy,n=this.marginLeftReal,r=this.marginTopReal,s=this.plotAreaWidth-1,a=this.plotAreaHeight-1,o=this.plotAreaFillColors,h=this.plotAreaFillAlphas,l=this.plotAreaBorderColor,u=this.plotAreaBorderAlpha;"object"==typeof h&&(h=h[0]),o=t.polygon(this.container,[0,s,s,0,0],[0,0,a,a,0],o,h,1,l,u,this.plotAreaGradientAngle),t.setCN(this,o,"plot-area"),o.translate(n+e,r+i),this.set.push(o),0!==e&&0!==i&&(o=this.plotAreaFillColors,"object"==typeof o&&(o=o[0]),o=t.adjustLuminosity(o,-.15),s=t.polygon(this.container,[0,e,s+e,s,0],[0,i,i,0,0],o,h,1,l,u),t.setCN(this,s,"plot-area-bottom"),s.translate(n,r+a),this.set.push(s),e=t.polygon(this.container,[0,0,e,e,0],[0,a,a+i,i,0],o,h,1,l,u),t.setCN(this,e,"plot-area-left"),e.translate(n,r),this.set.push(e)),(n=this.bbset)&&this.scrollbarOnly&&n.remove()},updatePlotArea:function(){var t=this.updateWidth(),e=this.updateHeight(),i=this.container;this.realWidth=t,this.realWidth=e,i&&this.container.setSize(t,e),t=t-this.marginLeftReal-this.marginRightReal-this.dx,e=e-this.marginTopReal-this.marginBottomReal,1>t&&(t=1),1>e&&(e=1),this.plotAreaWidth=Math.round(t),this.plotAreaHeight=Math.round(e)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var t=this.getTitleHeight();this.titleHeight=t,this.marginTopReal=this.marginTop-this.dy,this.fixMargins&&!this.fixMargins.top&&(this.marginTopReal+=t),this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var e,i=this.valueAxes,n=this.marginLeftReal,r=this.marginTopReal,s=this.plotAreaHeight,a=this.plotAreaWidth;for(e=0;e<i.length;e++){var o=i[e];o.axisRenderer=t.RecAxis,o.guideFillRenderer=t.RecFill,o.axisItemRenderer=t.RecItem,o.dx=this.dx,o.dy=this.dy,o.viW=a-1,o.viH=s-1,o.marginsChanged=!0,o.viX=n,o.viY=r,this.updateObjectSize(o)}},updateObjectSize:function(t){t.width=(this.plotAreaWidth-1)*this.widthMultiplier,t.height=(this.plotAreaHeight-1)*this.heightMultiplier,t.x=this.marginLeftReal+this.horizontalPosition,t.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var t,e=this.graphs;for(t=0;t<e.length;t++){var i=e[t];i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.width=this.plotAreaWidth*this.widthMultiplier,i.height=this.plotAreaHeight*this.heightMultiplier,i.index=t,i.dx=this.dx,i.dy=this.dy,i.rotate=this.rotate}},updateChartCursor:function(){var e=this.chartCursor;e&&(e=t.processObject(e,t.ChartCursor,this.theme),this.addChartCursor(e),e.x=this.marginLeftReal,e.y=this.marginTopReal,e.width=this.plotAreaWidth-1,e.height=this.plotAreaHeight-1,e.chart=this)},processScrollbars:function(){var e=this.chartScrollbar;e&&(e=t.processObject(e,t.ChartScrollbar,this.theme),this.addChartScrollbar(e))},updateScrollbars:function(){},addChartCursor:function(e){t.callMethod("destroy",[this.chartCursor]),e&&(this.listenTo(e,"changed",this.handleCursorChange),this.listenTo(e,"zoomed",this.handleCursorZoom)),this.chartCursor=e},removeChartCursor:function(){t.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var t,e=this.trendLines;for(t=0;t<e.length;t++){var i=e[t];i.valueAxis.recalculateToPercents?i.set&&i.set.hide():(i.x=this.marginLeftReal+this.horizontalPosition,i.y=this.marginTopReal+this.verticalPosition,i.draw())}},addTrendLine:function(t){this.trendLines.push(t)},removeTrendLine:function(t){var e,i=this.trendLines;for(e=i.length-1;0<=e;e--)i[e]==t&&i.splice(e,1)},adjustMargins:function(t,e){var i=t.position,n=t.scrollbarHeight+t.offset;t.enabled&&("top"==i?e?this.marginLeftReal+=n:this.marginTopReal+=n:e?this.marginRightReal+=n:this.marginBottomReal+=n)},getScrollbarPosition:function(t,e,i){var n="bottom",r="top";t.oppositeAxis||(r=n,n="top"),t.position=e?"bottom"==i||"left"==i?n:r:"top"==i||"right"==i?n:r},updateChartScrollbar:function(t,e){if(t){t.rotate=e;var i=this.marginTopReal,n=this.marginLeftReal,r=t.scrollbarHeight,s=this.dx,a=this.dy,o=t.offset;"top"==t.position?e?(t.y=i,t.x=n-r-o):(t.y=i-r+a-o,t.x=n+s):e?(t.y=i+a,t.x=n+this.plotAreaWidth+s+o):(t.y=i+this.plotAreaHeight+o,t.x=this.marginLeftReal)}},showZB:function(t){var e=this.zbSet;t&&(e=this.zoomOutText,""!==e&&e&&this.drawZoomOutButton()),(e=this.zbSet)&&(this.zoomButtonSet.push(e),t?e.show():e.hide(),this.rollOutZB())},handleReleaseOutside:function(e){t.AmRectangularChart.base.handleReleaseOutside.call(this,e),(e=this.chartCursor)&&e.handleReleaseOutside&&e.handleReleaseOutside()},handleMouseDown:function(e){t.AmRectangularChart.base.handleMouseDown.call(this,e);var i=this.chartCursor;i&&i.handleMouseDown(e)},handleCursorChange:function(){},update:function(){t.AmRectangularChart.base.update.call(this),this.chartCursor&&this.chartCursor.update&&this.chartCursor.update()}})}(),function(){var t=window.AmCharts;t.TrendLine=t.Class({construct:function(e){this.cname="TrendLine",this.createEvents("click"),this.isProtected=!1,this.dashLength=0,this.lineColor="#00CC00",this.lineThickness=this.lineAlpha=1,t.applyTheme(this,e,this.cname)},draw:function(){var e=this;e.destroy();var i,n,r,s,a=e.chart,o=a.container,h=e.categoryAxis,l=e.initialDate,u=e.initialCategory,c=e.finalDate,f=e.finalCategory,d=e.valueAxis,g=e.valueAxisX,p=e.initialXValue,v=e.finalXValue,m=e.initialValue,y=e.finalValue,b=d.recalculateToPercents,x=a.dataDateFormat;h&&(l&&(l=t.getDate(l,x,"fff"),e.initialDate=l,i=h.dateToCoordinate(l)),u&&(i=h.categoryToCoordinate(u)),c&&(c=t.getDate(c,x,"fff"),e.finalDate=c,n=h.dateToCoordinate(c)),f&&(n=h.categoryToCoordinate(f))),g&&!b&&(isNaN(p)||(i=g.getCoordinate(p)),isNaN(v)||(n=g.getCoordinate(v))),d&&!b&&(isNaN(m)||(r=d.getCoordinate(m)),isNaN(y)||(s=d.getCoordinate(y))),isNaN(i)||isNaN(n)||isNaN(r)||isNaN(r)||(a.rotate?(h=[r,s],n=[i,n]):(h=[i,n],n=[r,s]),r=e.lineColor,i=t.line(o,h,n,r,e.lineAlpha,e.lineThickness,e.dashLength),s=h,l=n,f=h[1]-h[0],d=n[1]-n[0],0===f&&(f=.01),0===d&&(d=.01),u=f/Math.abs(f),c=d/Math.abs(d),d=f*d/Math.abs(f*d)*Math.sqrt(Math.pow(f,2)+Math.pow(d,2)),f=Math.asin(f/d),d=90*Math.PI/180-f,f=Math.abs(5*Math.cos(d)),d=Math.abs(5*Math.sin(d)),s.push(h[1]-u*d,h[0]-u*d),l.push(n[1]+c*f,n[0]+c*f),h=t.polygon(o,s,l,r,.005,0),o=o.set([h,i]),o.translate(a.marginLeftReal,a.marginTopReal),a.trendLinesSet.push(o),t.setCN(a,i,"trend-line"),t.setCN(a,i,"trend-line-"+e.id),e.line=i,e.set=o,h.mouseup(function(){e.handleLineClick()}).mouseover(function(){e.handleLineOver()}).mouseout(function(){e.handleLineOut()}),h.touchend&&h.touchend(function(){e.handleLineClick()}),o.clipRect(0,0,a.plotAreaWidth,a.plotAreaHeight))},handleLineClick:function(){var t={type:"click",trendLine:this,chart:this.chart};this.fire(t.type,t)},handleLineOver:function(){var t=this.rollOverColor;void 0!==t&&this.line.attr({stroke:t})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){t.remove(this.set)}})}(),function(){var t=window.AmCharts;t.circle=function(e,i,n,r,s,a,o,h,l){return 0>=i&&(i=.001),void 0!=s&&0!==s||(s=.01),void 0===a&&(a="#000000"),void 0===o&&(o=0),r={fill:n,stroke:a,"fill-opacity":r,"stroke-width":s,"stroke-opacity":o},e=isNaN(l)?e.circle(0,0,i).attr(r):e.ellipse(0,0,i,l).attr(r),h&&e.gradient("radialGradient",[n,t.adjustLuminosity(n,-.6)]),e},t.text=function(e,i,n,r,s,a,o,h){return a||(a="middle"),"right"==a&&(a="end"),"left"==a&&(a="start"),isNaN(h)&&(h=1),void 0!==i&&(i=String(i),t.isIE&&!t.isModern&&(i=i.replace("&amp;","&"),i=i.replace("&","&amp;"))),n={fill:n,"font-family":r,"font-size":s,opacity:h},!0===o&&(n["font-weight"]="bold"),n["text-anchor"]=a,e.text(i,n)},t.polygon=function(e,i,n,r,s,a,o,h,l,u,c){isNaN(a)&&(a=.01),isNaN(h)&&(h=s);var f=r,d=!1;for("object"==typeof f&&1<f.length&&(d=!0,f=f[0]),void 0===o&&(o=f),s={fill:f,stroke:o,"fill-opacity":s,"stroke-width":a,"stroke-opacity":h},void 0!==c&&0<c&&(s["stroke-dasharray"]=c),c=t.dx,a=t.dy,e.handDrawn&&(n=t.makeHD(i,n,e.handDrawScatter),i=n[0],n=n[1]),o=Math.round,u&&(o=t.doNothing),u="M"+(o(i[0])+c)+","+(o(n[0])+a),h=1;h<i.length;h++)u+=" L"+(o(i[h])+c)+","+(o(n[h])+a);return e=e.path(u+" Z").attr(s),d&&e.gradient("linearGradient",r,l),e},t.rect=function(e,i,n,r,s,a,o,h,l,u,c){if(isNaN(i)||isNaN(n))return e.set();isNaN(a)&&(a=0),void 0===l&&(l=0),void 0===u&&(u=270),isNaN(s)&&(s=0);var f=r,d=!1;"object"==typeof f&&(f=f[0],d=!0),void 0===o&&(o=f),void 0===h&&(h=s),i=Math.round(i),n=Math.round(n);var g=0,p=0;return 0>i&&(i=Math.abs(i),g=-i),0>n&&(n=Math.abs(n),p=-n),g+=t.dx,p+=t.dy,s={fill:f,stroke:o,"fill-opacity":s,"stroke-opacity":h},void 0!==c&&0<c&&(s["stroke-dasharray"]=c),e=e.rect(g,p,i,n,l,a).attr(s),d&&e.gradient("linearGradient",r,u),e},t.bullet=function(e,i,n,r,s,a,o,h,l,u,c,f){var d;switch("circle"==i&&(i="round"),i){case"round":d=t.circle(e,n/2,r,s,a,o,h);break;case"square":d=t.polygon(e,[-n/2,n/2,n/2,-n/2],[n/2,n/2,-n/2,-n/2],r,s,a,o,h,u-180);break;case"rectangle":d=t.polygon(e,[-n,n,n,-n],[n/2,n/2,-n/2,-n/2],r,s,a,o,h,u-180);break;case"diamond":d=t.polygon(e,[-n/2,0,n/2,0],[0,-n/2,0,n/2],r,s,a,o,h);break;case"triangleUp":d=t.triangle(e,n,0,r,s,a,o,h);break;case"triangleDown":d=t.triangle(e,n,180,r,s,a,o,h);break;case"triangleLeft":d=t.triangle(e,n,270,r,s,a,o,h);break;case"triangleRight":d=t.triangle(e,n,90,r,s,a,o,h);break;case"bubble":d=t.circle(e,n/2,r,s,a,o,h,!0);break;case"line":d=t.line(e,[-n/2,n/2],[0,0],r,s,a,o,h);break;case"yError":d=e.set(),d.push(t.line(e,[0,0],[-n/2,n/2],r,s,a)),d.push(t.line(e,[-l,l],[-n/2,-n/2],r,s,a)),d.push(t.line(e,[-l,l],[n/2,n/2],r,s,a));break;case"xError":d=e.set(),d.push(t.line(e,[-n/2,n/2],[0,0],r,s,a)),d.push(t.line(e,[-n/2,-n/2],[-l,l],r,s,a)),d.push(t.line(e,[n/2,n/2],[-l,l],r,s,a))}return d&&d.pattern(c,NaN,f),d},t.triangle=function(t,e,i,n,r,s,a,o){void 0!==s&&0!==s||(s=1),void 0===a&&(a="#000"),void 0===o&&(o=0),n={fill:n,stroke:a,"fill-opacity":r,"stroke-width":s,"stroke-opacity":o},e/=2;var h;return 0===i&&(h=" M"+-e+","+e+" L0,"+-e+" L"+e+","+e+" Z"),180==i&&(h=" M"+-e+","+-e+" L0,"+e+" L"+e+","+-e+" Z"),90==i&&(h=" M"+-e+","+-e+" L"+e+",0 L"+-e+","+e+" Z"),270==i&&(h=" M"+-e+",0 L"+e+","+e+" L"+e+","+-e+" Z"),t.path(h).attr(n)},t.line=function(e,i,n,r,s,a,o,h,l,u,c){if(e.handDrawn&&!c)return t.handDrawnLine(e,i,n,r,s,a,o,h,l,u,c);for(a={fill:"none","stroke-width":a},void 0!==o&&0<o&&(a["stroke-dasharray"]=o),isNaN(s)||(a["stroke-opacity"]=s),r&&(a.stroke=r),r=Math.round,u&&(r=t.doNothing),u=t.dx,s=t.dy,o="M"+(r(i[0])+u)+","+(r(n[0])+s),h=1;h<i.length;h++)o+=" L"+(r(i[h])+u)+","+(r(n[h])+s);return t.VML?e.path(o,void 0,!0).attr(a):(l&&(o+=" M0,0 L0,0"),e.path(o).attr(a))},t.makeHD=function(t,e,i){for(var n=[],r=[],s=1;s<t.length;s++)for(var a=Number(t[s-1]),o=Number(e[s-1]),h=Number(t[s]),l=Number(e[s]),u=Math.sqrt(Math.pow(h-a,2)+Math.pow(l-o,2)),u=Math.round(u/50)+1,h=(h-a)/u,l=(l-o)/u,c=0;c<=u;c++){var f=a+c*h+Math.random()*i,d=o+c*l+Math.random()*i;n.push(f),r.push(d)}return[n,r]},t.handDrawnLine=function(e,i,n,r,s,a,o,h,l,u){var c,f=e.set();for(c=1;c<i.length;c++)for(var d=[i[c-1],i[c]],g=[n[c-1],n[c]],g=t.makeHD(d,g,e.handDrawScatter),d=g[0],g=g[1],p=1;p<d.length;p++)f.push(t.line(e,[d[p-1],d[p]],[g[p-1],g[p]],r,s,a+Math.random()*e.handDrawThickness-e.handDrawThickness/2,o,h,l,u,!0));return f},t.doNothing=function(t){return t},t.wedge=function(e,i,n,r,s,a,o,h,l,u,c,f,d){var g=Math.round;a=g(a),o=g(o),h=g(h);var p=g(o/a*h),v=t.VML,m=359.5+a/100;359.94<m&&(m=359.94),s>=m&&(s=m);var y=1/180*Math.PI,m=i+Math.sin(r*y)*h,b=n-Math.cos(r*y)*p,x=i+Math.sin(r*y)*a,_=n-Math.cos(r*y)*o,w=i+Math.sin((r+s)*y)*a,C=n-Math.cos((r+s)*y)*o,S=i+Math.sin((r+s)*y)*h,y=n-Math.cos((r+s)*y)*p,O={fill:t.adjustLuminosity(u.fill,-.2),"stroke-opacity":0,"fill-opacity":u["fill-opacity"]},T=0;180<Math.abs(s)&&(T=1),r=e.set();var k;v&&(m=g(10*m),x=g(10*x),w=g(10*w),S=g(10*S),b=g(10*b),_=g(10*_),C=g(10*C),y=g(10*y),i=g(10*i),l=g(10*l),n=g(10*n),a*=10,o*=10,h*=10,p*=10,1>Math.abs(s)&&1>=Math.abs(w-x)&&1>=Math.abs(C-_)&&(k=!0)),s="";var M;if(f&&(O["fill-opacity"]=0,O["stroke-opacity"]=u["stroke-opacity"]/2,O.stroke=u.stroke),0<l&&(M=" M"+m+","+(b+l)+" L"+x+","+(_+l),v?(k||(M+=" A"+(i-a)+","+(l+n-o)+","+(i+a)+","+(l+n+o)+","+x+","+(_+l)+","+w+","+(C+l)),M+=" L"+S+","+(y+l),0<h&&(k||(M+=" B"+(i-h)+","+(l+n-p)+","+(i+h)+","+(l+n+p)+","+S+","+(l+y)+","+m+","+(l+b)))):(M+=" A"+a+","+o+",0,"+T+",1,"+w+","+(C+l)+" L"+S+","+(y+l),0<h&&(M+=" A"+h+","+p+",0,"+T+",0,"+m+","+(b+l))),M=e.path(M+" Z",void 0,void 0,"1000,1000").attr(O),r.push(M),M=e.path(" M"+m+","+b+" L"+m+","+(b+l)+" L"+x+","+(_+l)+" L"+x+","+_+" L"+m+","+b+" Z",void 0,void 0,"1000,1000").attr(O),l=e.path(" M"+w+","+C+" L"+w+","+(C+l)+" L"+S+","+(y+l)+" L"+S+","+y+" L"+w+","+C+" Z",void 0,void 0,"1000,1000").attr(O),r.push(M),r.push(l)),v?(k||(s=" A"+g(i-a)+","+g(n-o)+","+g(i+a)+","+g(n+o)+","+g(x)+","+g(_)+","+g(w)+","+g(C)),a=" M"+g(m)+","+g(b)+" L"+g(x)+","+g(_)+s+" L"+g(S)+","+g(y)):a=" M"+m+","+b+" L"+x+","+_+(" A"+a+","+o+",0,"+T+",1,"+w+","+C)+" L"+S+","+y,0<h&&(v?k||(a+=" B"+(i-h)+","+(n-p)+","+(i+h)+","+(n+p)+","+S+","+y+","+m+","+b):a+=" A"+h+","+p+",0,"+T+",0,"+m+","+b),e.handDrawn&&(i=t.line(e,[m,x],[b,_],u.stroke,u.thickness*Math.random()*e.handDrawThickness,u["stroke-opacity"]),r.push(i)),e=e.path(a+" Z",void 0,void 0,"1000,1000").attr(u),c){for(i=[],n=0;n<c.length;n++)i.push(t.adjustLuminosity(u.fill,c[n]));0<i.length&&e.gradient("linearGradient",i)}return e.pattern(f,NaN,d),r.wedge=e,r.push(e),r},t.adjustLuminosity=function(t,e){t=String(t).replace(/[^0-9a-f]/gi,""),6>t.length&&(t=String(t[0])+String(t[0])+String(t[1])+String(t[1])+String(t[2])+String(t[2])),e=e||0;var i,n,r="#";for(n=0;3>n;n++)i=parseInt(t.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*e),255)).toString(16),r+=("00"+i).substr(i.length);return r}}(),function(){var t=window.AmCharts;t.Bezier=t.Class({construct:function(e,i,n,r,s,a,o,h,l,u){for("object"==typeof o&&(o=o[0]),"object"==typeof h&&(h=h[0]),0===h&&(o="none"),a={fill:o,"fill-opacity":h,"stroke-width":a},void 0!==l&&0<l&&(a["stroke-dasharray"]=l),isNaN(s)||(a["stroke-opacity"]=s),r&&(a.stroke=r),r="M"+Math.round(i[0])+","+Math.round(n[0]),s=[],l=0;l<i.length;l++)s.push({x:Number(i[l]),y:Number(n[l])});1<s.length&&(i=this.interpolate(s),r+=this.drawBeziers(i)),u?r+=u:t.VML||(r+="M0,0 L0,0"),this.path=e.path(r).attr(a),this.node=this.path.node},interpolate:function(e){var i=[];i.push({x:e[0].x,y:e[0].y});var n=e[1].x-e[0].x,r=e[1].y-e[0].y,s=t.bezierX,a=t.bezierY;i.push({x:e[0].x+n/s,y:e[0].y+r/a});var o;for(o=1;o<e.length-1;o++){var h=e[o-1],l=e[o],r=e[o+1];isNaN(r.x)&&(r=l),isNaN(l.x)&&(l=h),isNaN(h.x)&&(h=l),n=r.x-l.x,r=r.y-h.y,h=l.x-h.x,h>n&&(h=n),i.push({x:l.x-h/s,y:l.y-r/a}),i.push({x:l.x,y:l.y}),i.push({x:l.x+h/s,y:l.y+r/a})}return r=e[e.length-1].y-e[e.length-2].y,n=e[e.length-1].x-e[e.length-2].x,i.push({x:e[e.length-1].x-n/s,y:e[e.length-1].y-r/a}),i.push({x:e[e.length-1].x,y:e[e.length-1].y}),i},drawBeziers:function(t){var e,i="";for(e=0;e<(t.length-1)/3;e++)i+=this.drawBezierMidpoint(t[3*e],t[3*e+1],t[3*e+2],t[3*e+3]);return i},drawBezierMidpoint:function(t,e,i,n){var r=Math.round,s=this.getPointOnSegment(t,e,.75),a=this.getPointOnSegment(n,i,.75),o=(n.x-t.x)/16,h=(n.y-t.y)/16,l=this.getPointOnSegment(t,e,.375);return t=this.getPointOnSegment(s,a,.375),t.x-=o,t.y-=h,e=this.getPointOnSegment(a,s,.375),e.x+=o,e.y+=h,i=this.getPointOnSegment(n,i,.375),o=this.getMiddle(l,t),s=this.getMiddle(s,a),a=this.getMiddle(e,i),l=" Q"+r(l.x)+","+r(l.y)+","+r(o.x)+","+r(o.y),l+=" Q"+r(t.x)+","+r(t.y)+","+r(s.x)+","+r(s.y),l+=" Q"+r(e.x)+","+r(e.y)+","+r(a.x)+","+r(a.y),l+=" Q"+r(i.x)+","+r(i.y)+","+r(n.x)+","+r(n.y)},getMiddle:function(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}},getPointOnSegment:function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}}})}(),function(){var t=window.AmCharts;t.AmDraw=t.Class({construct:function(e,i,n,r){t.SVG_NS="http://www.w3.org/2000/svg",t.SVG_XLINK="http://www.w3.org/1999/xlink",t.hasSVG=!!document.createElementNS&&!!document.createElementNS(t.SVG_NS,"svg").createSVGRect,1>i&&(i=10),1>n&&(n=10),this.div=e,this.width=i,this.height=n,this.rBin=document.createElement("div"),t.hasSVG?(t.SVG=!0,i=this.createSvgElement("svg"),e.appendChild(i),this.container=i,this.addDefs(r),this.R=new t.SVGRenderer(this)):t.isIE&&t.VMLRenderer&&(t.VML=!0,t.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(i=document.createStyleSheet(),i.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),t.vmlStyleSheet=i):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=e,this.R=new t.VMLRenderer(this,r),this.R.disableSelection(e))},createSvgElement:function(e){return document.createElementNS(t.SVG_NS,e)},circle:function(e,i,n,r){var s=new t.AmDObject("circle",this);return s.attr({r:n,cx:e,cy:i}),this.addToContainer(s.node,r),s},ellipse:function(e,i,n,r,s){var a=new t.AmDObject("ellipse",this);return a.attr({rx:n,ry:r,cx:e,cy:i}),this.addToContainer(a.node,s),a},setSize:function(t,e){0<t&&0<e&&(this.container.style.width=t+"px",this.container.style.height=e+"px")},rect:function(e,i,n,r,s,a,o){var h=new t.AmDObject("rect",this);return t.VML&&(s=Math.round(100*s/Math.min(n,r)),n+=2*a,r+=2*a,h.bw=a,h.node.style.marginLeft=-a,h.node.style.marginTop=-a),1>n&&(n=1),1>r&&(r=1),h.attr({x:e,y:i,width:n,height:r,rx:s,ry:s,"stroke-width":a}),this.addToContainer(h.node,o),h},image:function(e,i,n,r,s,a){var o=new t.AmDObject("image",this);return o.attr({x:i,y:n,width:r,height:s}),this.R.path(o,e),this.addToContainer(o.node,a),o},addToContainer:function(t,e){e||(e=this.container),e.appendChild(t)},text:function(t,e,i){return this.R.text(t,e,i)},path:function(e,i,n,r){var s=new t.AmDObject("path",this);return r||(r="100,100"),s.attr({cs:r}),n?s.attr({dd:e}):s.attr({d:e}),this.addToContainer(s.node,i),s},set:function(t){return this.R.set(t)},remove:function(t){if(t){var e=this.rBin;e.appendChild(t),e.innerHTML=""}},renderFix:function(){var t,e=this.container,i=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(i){t=e.createSVGMatrix()}e=1-t.e%1,t=1-t.f%1,.5<e&&--e,.5<t&&--t,e&&(i.left=e+"px"),t&&(i.top=t+"px")},update:function(){this.R.update()},addDefs:function(e){if(t.hasSVG){var i=this.createSvgElement("desc"),n=this.container;n.setAttribute("version","1.1"),n.style.position="absolute",this.setSize(this.width,this.height),t.rtl&&(n.setAttribute("direction","rtl"),n.style.left="auto",n.style.right="0px"),e.addCodeCredits&&i.appendChild(document.createTextNode("JavaScript chart by amCharts "+e.version)),n.appendChild(i),e.defs&&(i=this.createSvgElement("defs"),n.appendChild(i),t.parseDefs(e.defs,i),this.defs=i)}}})}(),function(){var t=window.AmCharts;t.AmDObject=t.Class({construct:function(t,e){this.D=e,this.R=e.R,this.node=this.R.create(this,t),this.y=this.x=0,this.scale=1},attr:function(t){return this.R.attr(this,t),this},getAttr:function(t){return this.node.getAttribute(t)},setAttr:function(t,e){return this.R.setAttr(this,t,e),this},clipRect:function(t,e,i,n){this.R.clipRect(this,t,e,i,n)},translate:function(t,e,i,n){n||(t=Math.round(t),e=Math.round(e)),this.R.move(this,t,e,i),this.x=t,this.y=e,this.scale=i,this.angle&&this.rotate(this.angle)},rotate:function(t,e){this.R.rotate(this,t,e),this.angle=t},animate:function(e,i,n){for(var r in e)if(e.hasOwnProperty(r)){var s=r,a=e[r];n=t.getEffect(n),this.R.animate(this,s,a,i,n)}},push:function(t){if(t){var e=this.node;e.appendChild(t.node);var i=t.clipPath;i&&e.appendChild(i),(t=t.grad)&&e.appendChild(t)}},text:function(t){this.R.setText(this,t)},remove:function(){this.R.remove(this)},clear:function(){var t=this.node;if(t.hasChildNodes())for(;1<=t.childNodes.length;)t.removeChild(t.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;e&&e.appendChild(t)}},toPrevious:function(){var t=this.node;t&&this.prevNextNode&&(t=t.parentNode)&&t.insertBefore(this.prevNextNode,null)},toBack:function(){var t=this.node;if(t){this.prevNextNode=t.nextSibling;var e=t.parentNode;if(e){var i=e.firstChild;i&&e.insertBefore(t,i)}}},mouseover:function(t){return this.R.addListener(this,"mouseover",t),this},mouseout:function(t){return this.R.addListener(this,"mouseout",t),this},click:function(t){return this.R.addListener(this,"click",t),this},dblclick:function(t){return this.R.addListener(this,"dblclick",t),this},mousedown:function(t){return this.R.addListener(this,"mousedown",t),this},mouseup:function(t){return this.R.addListener(this,"mouseup",t),this},touchstart:function(t){return this.R.addListener(this,"touchstart",t),this},touchend:function(t){return this.R.addListener(this,"touchend",t),this},contextmenu:function(t){return this.node.addEventListener?this.node.addEventListener("contextmenu",t,!0):this.R.addListener(this,"contextmenu",t),this},stop:function(){t.removeFromArray(this.R.animations,this.an_x),t.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(t,e,i){this.R.gradient(this,t,e,i)},pattern:function(t,e,i){t&&this.R.pattern(this,t,e,i)}})}(),function(){var t=window.AmCharts;t.VMLRenderer=t.Class({construct:function(t,e){this.chart=e,this.D=t,this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"},this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(t,e){var i;if("group"==e)i=document.createElement("div"),t.type="div";else if("text"==e)i=document.createElement("div"),t.type="text";else if("image"==e)i=document.createElement("img"),t.type="image";else{t.type="shape",t.shapeType=this.cNames[e],i=document.createElement("amvml:"+this.cNames[e]);var n=document.createElement("amvml:stroke");i.appendChild(n),t.stroke=n;var r=document.createElement("amvml:fill");i.appendChild(r),t.fill=r,r.className="amvml",n.className="amvml",i.className="amvml"}return i.style.position="absolute",i.style.top=0,i.style.left=0,i},path:function(t,e){t.node.setAttribute("src",e)},setAttr:function(e,i,n){if(void 0!==n){var r;8===document.documentMode&&(r=!0);var s=e.node,a=e.type,o=s.style;"r"==i&&(o.width=2*n,o.height=2*n),"oval"==e.shapeType&&("rx"==i&&(o.width=2*n),"ry"==i&&(o.height=2*n)),"roundrect"==e.shapeType&&("width"!=i&&"height"!=i||--n),"cursor"==i&&(o.cursor=n),"cx"==i&&(o.left=n-t.removePx(o.width)/2),"cy"==i&&(o.top=n-t.removePx(o.height)/2);var h=this.styleMap[i];if(void 0!==h&&(o[h]=n),"text"==a&&("text-anchor"==i&&(e.anchor=n,h=s.clientWidth,"end"==n&&(o.marginLeft=-h+"px"),"middle"==n&&(o.marginLeft=-(h/2)+"px",o.textAlign="center"),"start"==n&&(o.marginLeft="0px")),"fill"==i&&(o.color=n),"font-weight"==i&&(o.fontWeight=n)),o=e.children)for(h=0;h<o.length;h++)o[h].setAttr(i,n);"shape"==a&&("cs"==i&&(s.style.width="100px",s.style.height="100px",s.setAttribute("coordsize",n)),"d"==i&&s.setAttribute("path",this.svgPathToVml(n)),"dd"==i&&s.setAttribute("path",n),a=e.stroke,e=e.fill,"stroke"==i&&(r?a.color=n:a.setAttribute("color",n)),
"stroke-width"==i&&(r?a.weight=n:a.setAttribute("weight",n)),"stroke-opacity"==i&&(r?a.opacity=n:a.setAttribute("opacity",n)),"stroke-dasharray"==i&&(o="solid",0<n&&3>n&&(o="dot"),3<=n&&6>=n&&(o="dash"),6<n&&(o="longdash"),r?a.dashstyle=o:a.setAttribute("dashstyle",o)),"fill-opacity"!=i&&"opacity"!=i||(0===n?r?e.on=!1:e.setAttribute("on",!1):r?e.opacity=n:e.setAttribute("opacity",n)),"fill"==i&&(r?e.color=n:e.setAttribute("color",n)),"rx"==i&&(r?s.arcSize=n+"%":s.setAttribute("arcsize",n+"%")))}},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},text:function(e,i,n){var r=new t.AmDObject("text",this.D),s=r.node;return s.style.whiteSpace="pre",s.innerHTML=e,this.D.addToContainer(s,n),this.attr(r,i),r},getBBox:function(t){return this.getBox(t.node)},getBox:function(t){var e,i=t.offsetLeft,n=t.offsetTop,r=t.offsetWidth,s=t.offsetHeight;if(t.hasChildNodes()){var a,o,h;for(h=0;h<t.childNodes.length;h++){e=this.getBox(t.childNodes[h]);var l=e.x;isNaN(l)||(isNaN(a)?a=l:l<a&&(a=l));var u=e.y;isNaN(u)||(isNaN(o)?o=u:u<o&&(o=u)),l=e.width+l,isNaN(l)||(r=Math.max(r,l)),e=e.height+u,isNaN(e)||(s=Math.max(s,e))}0>a&&(i+=a),0>o&&(n+=o)}return{x:i,y:n,width:r,height:s}},setText:function(t,e){var i=t.node;i&&(i.innerHTML=e),this.setAttr(t,"text-anchor",t.anchor)},addListener:function(t,e,i){t.node["on"+e]=i},move:function(e,i,n){var r=e.node,s=r.style;"text"==e.type&&(n-=t.removePx(s.fontSize)/2-1),"oval"==e.shapeType&&(i-=t.removePx(s.width)/2,n-=t.removePx(s.height)/2),e=e.bw,isNaN(e)||(i-=e,n-=e),isNaN(i)||isNaN(n)||(r.style.left=i+"px",r.style.top=n+"px")},svgPathToVml:function(t){var e=t.split(" ");t="";var i,n,r=Math.round;for(n=0;n<e.length;n++){var s=e[n],a=s.substring(0,1),s=s.substring(1),o=s.split(","),h=r(o[0])+","+r(o[1]);if("M"==a&&(t+=" m "+h),"L"==a&&(t+=" l "+h),"Z"==a&&(t+=" x e"),"Q"==a){var l=i.length,u=i[l-1],c=o[0],f=o[1],h=o[2],d=o[3];i=r(i[l-2]/3+2/3*c),u=r(u/3+2/3*f),c=r(2/3*c+h/3),f=r(2/3*f+d/3),t+=" c "+i+","+u+","+c+","+f+","+h+","+d}"A"==a&&(t+=" wa "+s),"B"==a&&(t+=" at "+s),i=o}return t},animate:function(t,e,i,n,r){var s=t.node,a=this.chart;if("translate"==e){e=i.split(","),i=e[1];var o=s.offsetTop;a.animate(t,"left",s.offsetLeft,e[0],n,r,"px"),a.animate(t,"top",o,i,n,r,"px")}},clipRect:function(t,e,i,n,r){t=t.node,0===e&&0===i?(t.style.width=n+"px",t.style.height=r+"px",t.style.overflow="hidden"):t.style.clip="rect("+i+"px "+(e+n)+"px "+(i+r)+"px "+e+"px)"},rotate:function(e,i,n){if(0!==Number(i)){var r=e.node;e=r.style,n||(n=this.getBGColor(r.parentNode)),e.backgroundColor=n,e.paddingLeft=1,n=i*Math.PI/180;var s=Math.cos(n),a=Math.sin(n),o=t.removePx(e.left),h=t.removePx(e.top),l=r.offsetWidth,r=r.offsetHeight;i/=Math.abs(i),e.left=o+l/2-l/2*Math.cos(n)-i*r/2*Math.sin(n)+3,e.top=h-i*l/2*Math.sin(n)+i*r/2*Math.sin(n),e.cssText=e.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+s+"', M12='"+-a+"', M21='"+a+"', M22='"+s+"', sizingmethod='auto expand');"}},getBGColor:function(t){var e="#FFFFFF";if(t.style){var i=t.style.backgroundColor;""!==i?e=i:t.parentNode&&(e=this.getBGColor(t.parentNode))}return e},set:function(e){var i=new t.AmDObject("group",this.D);if(this.D.container.appendChild(i.node),e){var n;for(n=0;n<e.length;n++)i.push(e[n])}return i},gradient:function(t,e,i,n){var r="";"radialGradient"==e&&(e="gradientradial",i.reverse()),"linearGradient"==e&&(e="gradient");var s;for(s=0;s<i.length;s++){var a=Math.round(100*s/(i.length-1)),r=r+(a+"% "+i[s]);s<i.length-1&&(r+=",")}t=t.fill,90==n?n=0:270==n?n=180:180==n?n=90:0===n&&(n=270),8===document.documentMode?(t.type=e,t.angle=n):(t.setAttribute("type",e),t.setAttribute("angle",n)),r&&(t.colors.value=r)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),this.D.remove(t.node)},disableSelection:function(t){void 0!==typeof t.onselectstart&&(t.onselectstart=function(){return!1}),t.style.cursor="default"},pattern:function(e,i,n,r){n=e.node,e=e.fill;var s="none";i.color&&(s=i.color),n.fillColor=s,i=i.url,t.isAbsolute(i)||(i=r+i),8===document.documentMode?(e.type="tile",e.src=i):(e.setAttribute("type","tile"),e.setAttribute("src",i))},update:function(){}})}(),function(){var t=window.AmCharts;t.SVGRenderer=t.Class({construct:function(t){this.D=t,this.animations=[]},create:function(e,i){return document.createElementNS(t.SVG_NS,i)},attr:function(t,e){for(var i in e)e.hasOwnProperty(i)&&this.setAttr(t,i,e[i])},setAttr:function(t,e,i){void 0!==i&&t.node.setAttribute(e,i)},animate:function(e,i,n,r,s){var a=e.node;e["an_"+i]&&t.removeFromArray(this.animations,e["an_"+i]),"translate"==i?(a=(a=a.getAttribute("transform"))?String(a).substring(10,a.length-1):"0,0",a=a.split(", ").join(" "),a=a.split(" ").join(","),0===a&&(a="0,0")):a=Number(a.getAttribute(i)),n={obj:e,frame:0,attribute:i,from:a,to:n,time:r,effect:s},this.animations.push(n),e["an_"+i]=n},update:function(){var e,i=this.animations;for(e=i.length-1;0<=e;e--){var n,r,s,a=i[e],o=1e3*a.time/t.updateRate,h=a.frame+1,l=a.obj,u=a.attribute;h<=o?(a.frame++,"translate"==u?(n=a.from.split(","),u=Number(n[0]),n=Number(n[1]),isNaN(n)&&(n=0),r=a.to.split(","),s=Number(r[0]),r=Number(r[1]),s=0===s-u?s:Math.round(t[a.effect](0,h,u,s-u,o)),a=0===r-n?r:Math.round(t[a.effect](0,h,n,r-n,o)),u="transform",a="translate("+s+","+a+")"):(r=Number(a.from),n=Number(a.to),s=n-r,a=t[a.effect](0,h,r,s,o),isNaN(a)&&(a=n),0===s&&this.animations.splice(e,1)),this.setAttr(l,u,a)):("translate"==u?(r=a.to.split(","),s=Number(r[0]),r=Number(r[1]),l.translate(s,r)):(n=Number(a.to),this.setAttr(l,u,n)),this.animations.splice(e,1))}},getBBox:function(t){if(t=t.node)try{return t.getBBox()}catch(t){}return{width:0,height:0,x:0,y:0}},path:function(e,i){e.node.setAttributeNS(t.SVG_XLINK,"xlink:href",i)},clipRect:function(e,i,n,r,s){var a=e.node,o=e.clipPath;o&&this.D.remove(o);var h=a.parentNode;h&&(a=document.createElementNS(t.SVG_NS,"clipPath"),o=t.getUniqueId(),a.setAttribute("id",o),this.D.rect(i,n,r,s,0,0,a),h.appendChild(a),i="#",t.baseHref&&!t.isIE&&(i=this.removeTarget(window.location.href)+i),this.setAttr(e,"clip-path","url("+i+o+")"),this.clipPathC++,e.clipPath=a)},text:function(e,i,n){var r=new t.AmDObject("text",this.D);e=String(e).split("\n");var s,a=i["font-size"];for(s=0;s<e.length;s++){var o=this.create(null,"tspan");o.appendChild(document.createTextNode(e[s])),o.setAttribute("y",(a+2)*s+Math.round(a/2)),o.setAttribute("x",0),o.style.fontSize=a+"px",r.node.appendChild(o)}return r.node.setAttribute("y",Math.round(a/2)),this.attr(r,i),this.D.addToContainer(r.node,n),r},setText:function(t,e){var i=t.node;i&&(i.removeChild(i.firstChild),i.appendChild(document.createTextNode(e)))},move:function(t,e,i,n){isNaN(e)&&(e=0),isNaN(i)&&(i=0),e="translate("+e+","+i+")",n&&(e=e+" scale("+n+")"),this.setAttr(t,"transform",e)},rotate:function(t,e){var i=t.node.getAttribute("transform"),n="rotate("+e+")";i&&(n=i+" "+n),this.setAttr(t,"transform",n)},set:function(e){var i=new t.AmDObject("g",this.D);if(this.D.container.appendChild(i.node),e){var n;for(n=0;n<e.length;n++)i.push(e[n])}return i},addListener:function(t,e,i){t.node["on"+e]=i},gradient:function(e,i,n,r){var s=e.node,a=e.grad;if(a&&this.D.remove(a),i=document.createElementNS(t.SVG_NS,i),a=t.getUniqueId(),i.setAttribute("id",a),!isNaN(r)){var o=0,h=0,l=0,u=0;90==r?l=100:270==r?u=100:180==r?o=100:0===r&&(h=100),i.setAttribute("x1",o+"%"),i.setAttribute("x2",h+"%"),i.setAttribute("y1",l+"%"),i.setAttribute("y2",u+"%")}for(r=0;r<n.length;r++)o=document.createElementNS(t.SVG_NS,"stop"),h=100*r/(n.length-1),0===r&&(h=0),o.setAttribute("offset",h+"%"),o.setAttribute("stop-color",n[r]),i.appendChild(o);s.parentNode.appendChild(i),n="#",t.baseHref&&!t.isIE&&(n=this.removeTarget(window.location.href)+n),s.setAttribute("fill","url("+n+a+")"),e.grad=i},removeTarget:function(t){return t.split("#")[0]},pattern:function(e,i,n,r){var s=e.node;isNaN(n)&&(n=1);var a=e.patternNode;a&&this.D.remove(a);var a=document.createElementNS(t.SVG_NS,"pattern"),o=t.getUniqueId(),h=i;i.url&&(h=i.url),t.isAbsolute(h)||(h=r+h),r=Number(i.width),isNaN(r)&&(r=4);var l=Number(i.height);isNaN(l)&&(l=4),r/=n,l/=n,n=i.x,isNaN(n)&&(n=0);var u=-Math.random()*Number(i.randomX);isNaN(u)||(n=u),u=i.y,isNaN(u)&&(u=0);var c=-Math.random()*Number(i.randomY);isNaN(c)||(u=c),a.setAttribute("id",o),a.setAttribute("width",r),a.setAttribute("height",l),a.setAttribute("patternUnits","userSpaceOnUse"),a.setAttribute("xlink:href",h),i.color&&(c=document.createElementNS(t.SVG_NS,"rect"),c.setAttributeNS(null,"height",r),c.setAttributeNS(null,"width",l),c.setAttributeNS(null,"fill",i.color),a.appendChild(c)),this.D.image(h,0,0,r,l,a).translate(n,u),h="#",t.baseHref&&!t.isIE&&(h=this.removeTarget(window.location.href)+h),s.setAttribute("fill","url("+h+o+")"),e.patternNode=a,s.parentNode.appendChild(a)},remove:function(t){t.clipPath&&this.D.remove(t.clipPath),t.grad&&this.D.remove(t.grad),t.patternNode&&this.D.remove(t.patternNode),this.D.remove(t.node)}})}(),AmCharts.AmDSet=AmCharts.Class({construct:function(t){this.create("g")},attr:function(t){this.R.attr(this.node,t)},move:function(t,e){this.R.move(this.node,t,e)}}),function(){var t=window.AmCharts;t.AmLegend=t.Class({construct:function(e){this.enabled=!0,this.cname="AmLegend",this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel"),this.position="bottom",this.borderColor=this.color="#000000",this.borderAlpha=0,this.markerLabelGap=5,this.verticalGap=10,this.align="left",this.horizontalGap=0,this.spacing=10,this.markerDisabledColor="#AAB3B3",this.markerType="square",this.markerSize=16,this.markerBorderThickness=this.markerBorderAlpha=1,this.marginBottom=this.marginTop=0,this.marginLeft=this.marginRight=20,this.autoMargins=!0,this.valueWidth=50,this.switchable=!0,this.switchType="x",this.switchColor="#FFFFFF",this.rollOverColor="#CC0000",this.reversedOrder=!1,this.labelText="[[title]]",this.valueText="[[value]]",this.useMarkerColorForLabels=!1,this.rollOverGraphAlpha=1,this.textClickEnabled=!1,this.equalWidths=!0,this.dateFormat="DD-MM-YYYY",this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.useGraphSettings=!1,this.showEntries=!0,t.applyTheme(this,e,this.cname)},setData:function(t){this.legendData=t,this.invalidateSize()},invalidateSize:function(){this.destroy(),this.entries=[],this.valueLabels=[];var e=this.legendData;this.enabled&&(t.ifArray(e)||t.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var e=this.chart,i=this.position,n=this.width,r=e.divRealWidth,s=e.divRealHeight,a=this.div,o=this.legendData;if(this.data&&(o=this.data),isNaN(this.fontSize)&&(this.fontSize=e.fontSize),"right"==i||"left"==i)this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=e.marginRight,this.marginLeft=e.marginLeft;var h=e.autoMarginOffset;"bottom"==i?(this.marginBottom=h,this.marginTop=0):(this.marginTop=h,this.marginBottom=0)}if(n=void 0!==n?t.toCoordinate(n,r):e.realWidth,"outside"==i?(n=a.offsetWidth,s=a.offsetHeight,a.clientHeight&&(n=a.clientWidth,s=a.clientHeight)):(isNaN(n)||(a.style.width=n+"px"),a.className="amChartsLegend "+e.classNamePrefix+"-legend-div"),this.divWidth=n,(i=this.container)?(i.container.innerHTML="",a.appendChild(i.container),i.width=n,i.height=s,i.addDefs(e)):i=new t.AmDraw(a,n,s,e),this.container=i,this.lx=0,this.ly=8,s=this.markerSize,s>this.fontSize&&(this.ly=s/2-1),0<s&&(this.lx+=s+this.markerLabelGap),this.titleWidth=0,(s=this.title)&&(s=t.text(this.container,s,this.color,e.fontFamily,this.fontSize,"start",!0),t.setCN(e,s,"legend-title"),s.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),e=s.getBBox(),this.titleWidth=e.width+15,this.titleHeight=e.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(e=0;e<o.length;e++)this.createEntry(o[e]);for(e=this.index=0;e<o.length;e++)this.createValue(o[e])}this.arrangeEntries(),this.updateValues()},arrangeEntries:function(){var e=this.position,i=this.marginLeft+this.titleWidth,n=this.marginRight,r=this.marginTop,s=this.marginBottom,a=this.horizontalGap,o=this.div,h=this.divWidth,l=this.maxColumns,u=this.verticalGap,c=this.spacing,f=h-n-i,d=0,g=0,p=this.container;this.set&&this.set.remove();var v=p.set();this.set=v;var m=p.set();v.push(m);var y,b,x=this.entries;for(b=0;b<x.length;b++){y=x[b].getBBox();var _=y.width;_>d&&(d=_),y=y.height,y>g&&(g=y)}var _=g=0,w=a,C=0,S=0;for(b=0;b<x.length;b++){var O=x[b];this.reversedOrder&&(O=x[x.length-b-1]),y=O.getBBox();var T;this.equalWidths?T=a+_*(d+c+this.markerLabelGap):(T=w,w=w+y.width+a+c),y.height>S&&(S=y.height),T+y.width>f&&0<b&&0!==_&&(g++,_=0,T=a,w=T+y.width+a+c,C=C+S+u,S=0),O.translate(T,C),_++,!isNaN(l)&&_>=l&&(_=0,g++,C=C+S+u,w=a,S=0),m.push(O)}y=m.getBBox(),l=y.height+2*u-1,"left"==e||"right"==e?(c=y.width+2*a,h=c+i+n,o.style.width=h+"px",this.ieW=h):c=h-i-n-1,n=t.polygon(this.container,[0,c,c,0],[0,0,l,l],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),t.setCN(this.chart,n,"legend-bg"),v.push(n),v.translate(i,r),n.toBack(),i=a,"top"!=e&&"bottom"!=e&&"absolute"!=e&&"outside"!=e||("center"==this.align?i=a+(c-y.width)/2:"right"==this.align&&(i=a+c-y.width)),m.translate(i,u+1),this.titleHeight>l&&(l=this.titleHeight),e=l+r+s+1,0>e&&(e=0),e>this.chart.divRealHeight&&(o.style.top="0px"),o.style.height=Math.round(e)+"px",p.setSize(this.divWidth,e)},createEntry:function(e){if(!1!==e.visibleInLegend){var i=this.chart,n=e.markerType;e.legendEntryWidth=this.markerSize,n||(n=this.markerType);var r=e.color,s=e.alpha;e.legendKeyColor&&(r=e.legendKeyColor()),e.legendKeyAlpha&&(s=e.legendKeyAlpha());var a;!0===e.hidden&&(a=r=this.markerDisabledColor);var o=e.pattern,h=e.customMarker;h||(h=this.customMarker);var l=this.container,u=this.markerSize,c=0,f=0,d=u/2;if(this.useGraphSettings){if(n=e.type,this.switchType=void 0,"line"==n||"step"==n||"smoothedLine"==n||"ohlc"==n)o=l.set(),e.hidden||(r=e.lineColorR,a=e.bulletBorderColorR),c=t.line(l,[0,2*u],[u/2,u/2],r,e.lineAlpha,e.lineThickness,e.dashLength),t.setCN(i,c,"graph-stroke"),o.push(c),e.bullet&&(e.hidden||(r=e.bulletColorR),c=t.bullet(l,e.bullet,e.bulletSize,r,e.bulletAlpha,e.bulletBorderThickness,a,e.bulletBorderAlpha))&&(t.setCN(i,c,"graph-bullet"),c.translate(u+1,u/2),o.push(c)),d=0,c=u,f=u/3;else{var g;e.getGradRotation&&(g=e.getGradRotation()),c=e.fillColorsR,!0===e.hidden&&(c=r),(o=this.createMarker("rectangle",c,e.fillAlphas,e.lineThickness,r,e.lineAlpha,g,o))&&(d=u,o.translate(d,u/2)),c=u}t.setCN(i,o,"graph-"+n),t.setCN(i,o,"graph-"+e.id)}else h?o=l.image(h,0,0,u,u):(o=this.createMarker(n,r,s,void 0,void 0,void 0,void 0,o))&&o.translate(u/2,u/2);t.setCN(i,o,"legend-marker"),this.addListeners(o,e),l=l.set([o]),this.switchable&&e.switchable&&l.setAttr("cursor","pointer"),void 0!==e.id&&t.setCN(i,l,"legend-item-"+e.id),t.setCN(i,l,e.className,!0),(a=this.switchType)&&"none"!=a&&0<u&&("x"==a?(n=this.createX(),n.translate(u/2,u/2)):n=this.createV(),n.dItem=e,!0!==e.hidden?"x"==a?n.hide():n.show():"x"!=a&&n.hide(),this.switchable||n.hide(),this.addListeners(n,e),e.legendSwitch=n,l.push(n),t.setCN(i,n,"legend-switch")),a=this.color,e.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(a=this.selectedColor),this.useMarkerColorForLabels&&(a=r),!0===e.hidden&&(a=this.markerDisabledColor),r=t.massReplace(this.labelText,{"[[title]]":e.title}),n=this.fontSize,o&&(u<=n&&o.translate(d,u/2+this.ly-n/2+(n+2-u)/2-f),e.legendEntryWidth=o.getBBox().width);var p;r&&(r=t.fixBrakes(r),e.legendTextReal=r,p=this.labelWidth,p=isNaN(p)?t.text(this.container,r,a,i.fontFamily,n,"start"):t.wrappedText(this.container,r,a,i.fontFamily,n,"start",!1,p,0),t.setCN(i,p,"legend-label"),p.translate(this.lx+c,this.ly),l.push(p),i=p.getBBox().width,this.maxLabelWidth<i&&(this.maxLabelWidth=i)),this.entries[this.index]=l,e.legendEntry=this.entries[this.index],e.legendLabel=p,this.index++}},addListeners:function(t,e){var i=this;t&&t.mouseover(function(t){i.rollOverMarker(e,t)}).mouseout(function(t){i.rollOutMarker(e,t)}).click(function(t){i.clickMarker(e,t)})},rollOverMarker:function(t,e){this.switchable&&this.dispatch("rollOverMarker",t,e),this.dispatch("rollOverItem",t,e)},rollOutMarker:function(t,e){this.switchable&&this.dispatch("rollOutMarker",t,e),this.dispatch("rollOutItem",t,e)},clickMarker:function(t,e){this.switchable&&(!0===t.hidden?this.dispatch("showItem",t,e):this.dispatch("hideItem",t,e)),this.dispatch("clickMarker",t,e)},rollOverLabel:function(t,e){t.hidden||(this.textClickEnabled&&t.legendLabel&&t.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",t,e))},rollOutLabel:function(t,e){if(!t.hidden){if(this.textClickEnabled&&t.legendLabel){var i=this.color;void 0!==this.selectedColor&&t.showBalloon&&(i=this.selectedColor),this.useMarkerColorForLabels&&(i=t.lineColor,void 0===i&&(i=t.color)),t.legendLabel.attr({fill:i})}this.dispatch("rollOutItem",t,e)}},clickLabel:function(t,e){this.textClickEnabled?t.hidden||this.dispatch("clickLabel",t,e):this.switchable&&(!0===t.hidden?this.dispatch("showItem",t,e):this.dispatch("hideItem",t,e))},dispatch:function(t,e,i){this.fire(t,{type:t,dataItem:e,target:this,event:i,chart:this.chart})},createValue:function(e){var i=this,n=i.fontSize,r=i.chart;if(!1!==e.visibleInLegend){var s=i.maxLabelWidth;i.forceWidth&&(s=i.labelWidth),i.equalWidths||(i.valueAlign="left"),"left"==i.valueAlign&&(s=e.legendEntry.getBBox().width);var a=s;if(i.valueText&&0<i.valueWidth){var o=i.color;i.useMarkerColorForValues&&(o=e.color,e.legendKeyColor&&(o=e.legendKeyColor())),!0===e.hidden&&(o=i.markerDisabledColor);var h=i.valueText,s=s+i.lx+i.markerLabelGap+i.valueWidth,l="end";"left"==i.valueAlign&&(s-=i.valueWidth,l="start"),o=t.text(i.container,h,o,i.chart.fontFamily,n,l),t.setCN(r,o,"legend-value"),o.translate(s,i.ly),i.entries[i.index].push(o),a+=i.valueWidth+2*i.markerLabelGap,o.dItem=e,i.valueLabels.push(o)}i.index++,r=i.markerSize,r<n+7&&(r=n+7,t.VML&&(r+=3)),n=i.container.rect(e.legendEntryWidth,0,a,r,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":.005}),n.dItem=e,i.entries[i.index-1].push(n),n.mouseover(function(t){i.rollOverLabel(e,t)}).mouseout(function(t){i.rollOutLabel(e,t)}).click(function(t){i.clickLabel(e,t)})}},createV:function(){var e=this.markerSize;return t.polygon(this.container,[e/5,e/2,e-e/5,e/2],[e/3,e-e/5,e/5,e/1.7],this.switchColor)},createX:function(){var e=(this.markerSize-4)/2,i={stroke:this.switchColor,"stroke-width":3},n=this.container,r=t.line(n,[-e,e],[-e,e]).attr(i),e=t.line(n,[-e,e],[e,-e]).attr(i);return this.container.set([r,e])},createMarker:function(e,i,n,r,s,a,o,h){var l=this.markerSize,u=this.container;return s||(s=this.markerBorderColor),s||(s=i),isNaN(r)&&(r=this.markerBorderThickness),isNaN(a)&&(a=this.markerBorderAlpha),t.bullet(u,e,l,i,n,r,s,a,l,o,h,this.chart.path)},validateNow:function(){this.invalidateSize()},updateValues:function(){var t,e=this.valueLabels,i=this.chart,n=this.data;for(t=0;t<e.length;t++){var r=e[t],s=r.dItem,a=" ";if(n)s.value?r.text(s.value):r.text("");else{var o;if(void 0!==s.type){o=s.currentDataItem;var h=this.periodValueText;s.legendPeriodValueText&&(h=s.legendPeriodValueText),o?(a=this.valueText,s.legendValueText&&(a=s.legendValueText),a=i.formatString(a,o)):h&&(a=i.formatPeriodString(h,s))}else a=i.formatString(this.valueText,s);(h=this.valueFunction)&&(o&&(s=o),a=h(s,a)),r.text(a)}}},renderFix:function(){if(!t.VML){var e=this.container;e&&e.renderFix()}},destroy:function(){this.div.innerHTML="",t.remove(this.set)}})}(),function(){var t=window.AmCharts;t.formatMilliseconds=function(t,e){if(-1!=t.indexOf("fff")){var i=e.getMilliseconds(),n=String(i);10>i&&(n="00"+i),10<=i&&100>i&&(n="0"+i),t=t.replace(/fff/g,n)}return t},t.extractPeriod=function(e){var i=t.stripNumbers(e),n=1;return i!=e&&(n=Number(e.slice(0,e.indexOf(i)))),{period:i,count:n}},t.getDate=function(e,i,n){return e instanceof Date?t.newDate(e,n):i&&isNaN(e)?t.stringToDate(e,i):new Date(e)},t.newDate=function(e,i){return i&&"fff"!=i?new Date(e):t.useUTC?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()):new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},t.resetDateToMin=function(e,i,n,r){void 0===r&&(r=1);var s,a,o,h,l,u,c;switch(t.useUTC?(s=e.getUTCFullYear(),a=e.getUTCMonth(),o=e.getUTCDate(),h=e.getUTCHours(),l=e.getUTCMinutes(),u=e.getUTCSeconds(),c=e.getUTCMilliseconds(),e=e.getUTCDay()):(s=e.getFullYear(),a=e.getMonth(),o=e.getDate(),h=e.getHours(),l=e.getMinutes(),u=e.getSeconds(),c=e.getMilliseconds(),e=e.getDay()),i){case"YYYY":s=Math.floor(s/n)*n,a=0,o=1,c=u=l=h=0;break;case"MM":a=Math.floor(a/n)*n,o=1,c=u=l=h=0;break;case"WW":o=e>=r?o-e+r:o-(7+e)+r,c=u=l=h=0;break;case"DD":c=u=l=h=0;break;case"hh":h=Math.floor(h/n)*n,c=u=l=0;break;case"mm":l=Math.floor(l/n)*n,c=u=0;break;case"ss":u=Math.floor(u/n)*n,c=0;break;case"fff":c=Math.floor(c/n)*n}return t.useUTC?(e=new Date,e.setUTCFullYear(s,a,o),e.setUTCHours(h,l,u,c)):e=new Date(s,a,o,h,l,u,c),e},t.getPeriodDuration=function(t,e){void 0===e&&(e=1);var i;switch(t){case"YYYY":i=316224e5;break;case"MM":i=26784e5;break;case"WW":i=6048e5;break;case"DD":i=864e5;break;case"hh":i=36e5;break;case"mm":i=6e4;break;case"ss":i=1e3;break;case"fff":i=1}return i*e},t.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:1/0,count:3}},t.getMaxInterval=function(e,i){var n=t.intervals;return e>=n[i].contains?(e=Math.round(e/n[i].contains),i=n[i].nextInterval,t.getMaxInterval(e,i)):"ss"==i?n[i].nextInterval:i},t.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),t.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" "),t.monthNames="January February March April May June July August September October November December".split(" "),t.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),t.getWeekNumber=function(t){t=new Date(t),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+1)/7)},t.stringToDate=function(e,i){var n={},r=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],s=!0,a=i.indexOf("AA");-1!=a&&(e.substr(a,2),"pm"==e.toLowerCase&&(s=!1));var o,h,l,a=i;for(l=0;l<r.length;l++)h=r[l].period,n[h]=0,"date"==h&&(n[h]=1);for(l=0;l<r.length;l++)if(o=r[l].pattern,h=r[l].period,-1!=i.indexOf(o)){var u=t.getFromDateString(o,e,a);i=i.replace(o,""),"KK"!=o&&"K"!=o&&"LL"!=o&&"L"!=o||s||(u+=12),n[h]=u}return t.useUTC?(r=new Date,r.setUTCFullYear(n.year,n.month,n.date),r.setUTCHours(n.hours,n.minutes,n.seconds,n.milliseconds)):r=new Date(n.year,n.month,n.date,n.hours,n.minutes,n.seconds,n.milliseconds),r},t.getFromDateString=function(t,e,i){if(void 0!==e)return i=i.indexOf(t),e=String(e),e=e.substr(i,t.length),"0"==e.charAt(0)&&(e=e.substr(1,e.length-1)),e=Number(e),isNaN(e)&&(e=0),-1!=t.indexOf("M")&&e--,e},t.formatDate=function(e,i,n){n||(n=t);var r,s,a,o,h,l,u,c=t.getWeekNumber(e);t.useUTC?(r=e.getUTCFullYear(),s=e.getUTCMonth(),a=e.getUTCDate(),o=e.getUTCDay(),h=e.getUTCHours(),l=e.getUTCMinutes(),u=e.getUTCSeconds(),e=e.getUTCMilliseconds()):(r=e.getFullYear(),s=e.getMonth(),a=e.getDate(),o=e.getDay(),h=e.getHours(),l=e.getMinutes(),u=e.getSeconds(),e=e.getMilliseconds());var f=String(r).substr(2,2),d=s+1;9>s&&(d="0"+d);var g="0"+o;i=i.replace(/W/g,c),c=h,24==c&&(c=0);var p=c;10>p&&(p="0"+p),i=i.replace(/JJ/g,p),i=i.replace(/J/g,c),p=h,0===p&&(p=24,-1!=i.indexOf("H")&&a--),c=a,10>a&&(c="0"+a);var v=p;return 10>v&&(v="0"+v),i=i.replace(/HH/g,v),i=i.replace(/H/g,p),p=h,11<p&&(p-=12),v=p,10>v&&(v="0"+v),i=i.replace(/KK/g,v),i=i.replace(/K/g,p),p=h,0===p&&(p=12),12<p&&(p-=12),v=p,10>v&&(v="0"+v),i=i.replace(/LL/g,v),i=i.replace(/L/g,p),p=l,10>p&&(p="0"+p),i=i.replace(/NN/g,p),i=i.replace(/N/g,l),l=u,10>l&&(l="0"+l),i=i.replace(/SS/g,l),i=i.replace(/S/g,u),u=e,10>u&&(u="00"+u),100>u&&(u="0"+u),l=e,10>l&&(l="00"+l),i=i.replace(/QQQ/g,u),i=i.replace(/QQ/g,l),i=i.replace(/Q/g,e),i=12>h?i.replace(/A/g,"am"):i.replace(/A/g,"pm"),i=i.replace(/YYYY/g,"@IIII@"),i=i.replace(/YY/g,"@II@"),i=i.replace(/MMMM/g,"@XXXX@"),i=i.replace(/MMM/g,"@XXX@"),i=i.replace(/MM/g,"@XX@"),i=i.replace(/M/g,"@X@"),i=i.replace(/DD/g,"@RR@"),i=i.replace(/D/g,"@R@"),i=i.replace(/EEEE/g,"@PPPP@"),i=i.replace(/EEE/g,"@PPP@"),i=i.replace(/EE/g,"@PP@"),i=i.replace(/E/g,"@P@"),i=i.replace(/@IIII@/g,r),i=i.replace(/@II@/g,f),i=i.replace(/@XXXX@/g,n.monthNames[s]),i=i.replace(/@XXX@/g,n.shortMonthNames[s]),i=i.replace(/@XX@/g,d),i=i.replace(/@X@/g,s+1),i=i.replace(/@RR@/g,c),i=i.replace(/@R@/g,a),i=i.replace(/@PPPP@/g,n.dayNames[o]),i=i.replace(/@PPP@/g,n.shortDayNames[o]),i=i.replace(/@PP@/g,g),i=i.replace(/@P@/g,o)},t.changeDate=function(e,i,n,r,s){if(t.useUTC)return t.changeUTCDate(e,i,n,r,s);var a=-1;switch(void 0===r&&(r=!0),void 0===s&&(s=!1),!0===r&&(a=1),i){case"YYYY":e.setFullYear(e.getFullYear()+n*a),r||s||e.setDate(e.getDate()+1);break;case"MM":i=e.getMonth(),e.setMonth(e.getMonth()+n*a),e.getMonth()>i+n*a&&e.setDate(e.getDate()-1),r||s||e.setDate(e.getDate()+1);break;case"DD":e.setDate(e.getDate()+n*a);break;case"WW":e.setDate(e.getDate()+n*a*7);break;case"hh":e.setHours(e.getHours()+n*a);break;case"mm":e.setMinutes(e.getMinutes()+n*a);break;case"ss":e.setSeconds(e.getSeconds()+n*a);break;case"fff":e.setMilliseconds(e.getMilliseconds()+n*a)}return e},t.changeUTCDate=function(t,e,i,n,r){var s=-1;switch(void 0===n&&(n=!0),void 0===r&&(r=!1),!0===n&&(s=1),e){case"YYYY":t.setUTCFullYear(t.getUTCFullYear()+i*s),n||r||t.setUTCDate(t.getUTCDate()+1);break;case"MM":e=t.getUTCMonth(),t.setUTCMonth(t.getUTCMonth()+i*s),t.getUTCMonth()>e+i*s&&t.setUTCDate(t.getUTCDate()-1),n||r||t.setUTCDate(t.getUTCDate()+1);break;case"DD":t.setUTCDate(t.getUTCDate()+i*s);break;case"WW":t.setUTCDate(t.getUTCDate()+i*s*7);break;case"hh":t.setUTCHours(t.getUTCHours()+i*s);break;case"mm":t.setUTCMinutes(t.getUTCMinutes()+i*s);break;case"ss":t.setUTCSeconds(t.getUTCSeconds()+i*s);break;case"fff":t.setUTCMilliseconds(t.getUTCMilliseconds()+i*s)}return t}}(),define("amcharts/amcharts",[],function(){}),define("amcharts",["amcharts/amcharts"],function(t){return t}),define("aurelia-ui-virtualization/aurelia-ui-virtualization",["exports","./virtual-repeat","./infinite-scroll-next"],function(t,e,i){"use strict";function n(t){t.globalResources("./virtual-repeat","./infinite-scroll-next")}Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteScrollNext=t.VirtualRepeat=void 0,t.configure=n,t.VirtualRepeat=e.VirtualRepeat,t.InfiniteScrollNext=i.InfiniteScrollNext}),define("aurelia-ui-virtualization",["aurelia-ui-virtualization/aurelia-ui-virtualization"],function(t){return t}),define("aurelia-ui-virtualization/virtual-repeat",["exports","aurelia-dependency-injection","aurelia-binding","aurelia-templating","aurelia-templating-resources","aurelia-pal","./utilities","./dom-helper","./virtual-repeat-strategy-locator","./template-strategy"],function(t,e,i,n,r,s,a,o,h,l){"use strict";function u(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e,i,n,r){var s={};return Object.keys(n).forEach(function(t){s[t]=n[t]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,e,s),s=null),s}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualRepeat=void 0;var g,p,v,m,y,b;t.VirtualRepeat=(g=(0,n.customAttribute)("virtual-repeat"),p=(0,e.inject)(s.DOM.Element,n.BoundViewFactory,n.TargetInstruction,n.ViewSlot,n.ViewResources,i.ObserverLocator,h.VirtualRepeatStrategyLocator,l.TemplateStrategyLocator,o.DomHelper),g(v=(0,n.templateController)(v=p((m=function(t){function e(e,i,n,s,a,o,h,l,f){var d=c(this,t.call(this,{local:"item",viewsRequireLifecycle:(0,r.viewsRequireLifecycle)(i)}));return d._first=0,d._previousFirst=0,d._viewsLength=0,d._lastRebind=0,d._topBufferHeight=0,d._bottomBufferHeight=0,d._bufferSize=5,d._scrollingDown=!1,d._scrollingUp=!1,d._switchedDirection=!1,d._isAttached=!1,d._ticking=!1,d._fixedHeightContainer=!1,d._hasCalculatedSizes=!1,d._isAtTop=!0,d._calledGetMore=!1,u(d,"items",y,d),u(d,"local",b,d),d.element=e,d.viewFactory=i,d.instruction=n,d.viewSlot=s,d.lookupFunctions=a.lookupFunctions,d.observerLocator=o,d.strategyLocator=h,d.templateStrategyLocator=l,d.sourceExpression=(0,r.getItemsSourceExpression)(d.instruction,"virtual-repeat.for"),d.isOneTime=(0,r.isOneTime)(d.sourceExpression),d.domHelper=f,d}return f(e,t),e.prototype.attached=function(){var t=this;this._isAttached=!0;var e=this.element;this._itemsLength=this.items.length,this.templateStrategy=this.templateStrategyLocator.getStrategy(e),this.scrollContainer=this.templateStrategy.getScrollContainer(e),this.topBuffer=this.templateStrategy.createTopBufferElement(e),this.bottomBuffer=this.templateStrategy.createBottomBufferElement(e),this.itemsChanged(),this.scrollListener=function(){return t._onScroll()},this.calcDistanceToTopInterval=setInterval(function(){var e=t.distanceToTop;t.distanceToTop=t.domHelper.getElementDistanceToTopOfDocument(t.topBuffer),t.distanceToTop+=t.topBufferDistance,e!==t.distanceToTop&&t._handleScroll()},500),this.distanceToTop=this.domHelper.getElementDistanceToTopOfDocument(this.templateStrategy.getFirstElement(this.topBuffer)),this.topBufferDistance=this.templateStrategy.getTopBufferDistance(this.topBuffer),this.domHelper.hasOverflowScroll(this.scrollContainer)?(this._fixedHeightContainer=!0,this.scrollContainer.addEventListener("scroll",this.scrollListener)):document.addEventListener("scroll",this.scrollListener)},e.prototype.bind=function(t,e){this.scope={bindingContext:t,overrideContext:e}},e.prototype.call=function(t,e){this[t](this.items,e)},e.prototype.detached=function(){this.scrollContainer.removeEventListener("scroll",this.scrollListener),this._first=0,this._previousFirst=0,this._viewsLength=0,this._lastRebind=0,this._topBufferHeight=0,this._bottomBufferHeight=0,this._scrollingDown=!1,this._scrollingUp=!1,this._switchedDirection=!1,this._isAttached=!1,this._ticking=!1,this._hasCalculatedSizes=!1,this.templateStrategy.removeBufferElements(this.element,this.topBuffer,this.bottomBuffer),this.isLastIndex=!1,this.scrollContainer=null,this.scrollContainerHeight=null,this.distanceToTop=null,this.removeAllViews(!0),this.scrollHandler&&this.scrollHandler.dispose(),this._unsubscribeCollection(),clearInterval(this.calcDistanceToTopInterval),this._sizeInterval&&clearInterval(this._sizeInterval);
},e.prototype.itemsChanged=function(){if(this._unsubscribeCollection(),this.scope){var t=this.items;this.strategy=this.strategyLocator.getStrategy(t),t.length>0&&0===this.viewCount()&&this.strategy.createFirstItem(this),this._calcInitialHeights(t.length),this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.strategy.instanceChanged(this,t,this._viewsLength)}},e.prototype.unbind=function(){this.scope=null,this.items=null,this._itemsLength=null},e.prototype.handleCollectionMutated=function(t,e){this._handlingMutations=!0,this._itemsLength=t.length,this.strategy.instanceMutated(this,t,e)},e.prototype.handleInnerCollectionMutated=function(t,e){var i=this;if(!this.ignoreMutation){this.ignoreMutation=!0;var n=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask(function(){return i.ignoreMutation=!1}),n===this.items?this.itemsChanged():this.items=n}},e.prototype._onScroll=function(){var t=this;this._ticking||this._handlingMutations||(requestAnimationFrame(function(){return t._handleScroll()}),this._ticking=!0),this._handlingMutations&&(this._handlingMutations=!1)},e.prototype._handleScroll=function(){if(this._isAttached){var t=this.itemHeight,e=this._fixedHeightContainer?this.scrollContainer.scrollTop:pageYOffset-this.distanceToTop;if(this._first=Math.floor(e/t),this._first=this._first<0?0:this._first,this._first>this.items.length-this.elementsInView&&(this._first=this.items.length-this.elementsInView),this._checkScrolling(),this._scrollingDown){var i=this._first-this._lastRebind;this._switchedDirection&&(i=this._isAtTop?this._first:this._bufferSize-(this._lastRebind-this._first)),this._isAtTop=!1,this._lastRebind=this._first;var n=this._moveViews(i),r=n<i?this._bottomBufferHeight:t*n;i>0&&this._getMore(),this._switchedDirection=!1,this._topBufferHeight=this._topBufferHeight+r,this._bottomBufferHeight=this._bottomBufferHeight-r,this._bottomBufferHeight>=0&&this._adjustBufferHeights()}else if(this._scrollingUp){var s=this._lastRebind-this._first,a=void 0===this.isLastIndex;this._switchedDirection&&(s=this.isLastIndex?this.items.length-this._first-this.elementsInView:this._bufferSize-(this._first-this._lastRebind)),this.isLastIndex=!1,this._lastRebind=this._first;var o=this._moveViews(s);this.movedViewsCount=o;var h=o<s?this._topBufferHeight:t*o;if(s>0){var l=!!(0===this.movedViewsCount&&a&&this._first<=0);this._getMore(l)}this._switchedDirection=!1,this._topBufferHeight=this._topBufferHeight-h,this._bottomBufferHeight=this._bottomBufferHeight+h,this._topBufferHeight>=0&&this._adjustBufferHeights()}this._previousFirst=this._first,this._ticking=!1}},e.prototype._getMore=function(t){var e=this;if((this.isLastIndex||0===this._first||t)&&!this._calledGetMore){var i=function(){e._calledGetMore=!0;var t=e.view(0)&&e.view(0).firstChild&&e.view(0).firstChild.au&&e.view(0).firstChild.au["infinite-scroll-next"]?e.view(0).firstChild.au["infinite-scroll-next"].instruction.attributes["infinite-scroll-next"]:void 0,i=e._first,n=0===e._bottomBufferHeight,r=e._isAtTop,s={topIndex:i,isAtBottom:n,isAtTop:r};if(e.scope.overrideContext.$scrollContext=s,void 0===t)return null;if("string"!=typeof t){if(t.sourceExpression)return e._calledGetMore=!1,t.sourceExpression.evaluate(e.scope);throw new Error("'infinite-scroll-next' must be a function or evaluate to one")}var a=e.view(0).firstChild.getAttribute("infinite-scroll-next"),o=e.scope.overrideContext.bindingContext[a];if("function"!=typeof o)throw new Error("'infinite-scroll-next' must be a function or evaluate to one");var h=o.call(e.scope.overrideContext.bindingContext,i,n,r);return h instanceof Promise?h.then(function(){e._calledGetMore=!1}):(e._calledGetMore=!1,null)};this.observerLocator.taskQueue.queueMicroTask(i)}},e.prototype._checkScrolling=function(){this._first>this._previousFirst&&(this._bottomBufferHeight>0||!this.isLastIndex)?(this._scrollingDown?this._switchedDirection=!1:(this._scrollingDown=!0,this._scrollingUp=!1,this._switchedDirection=!0),this._isScrolling=!0):this._first<this._previousFirst&&(this._topBufferHeight>=0||!this._isAtTop)?(this._scrollingUp?this._switchedDirection=!1:(this._scrollingDown=!1,this._scrollingUp=!0,this._switchedDirection=!0),this._isScrolling=!0):this._isScrolling=!1},e.prototype._adjustBufferHeights=function(){this.topBuffer.style.height=this._topBufferHeight+"px",this.bottomBuffer.style.height=this._bottomBufferHeight+"px"},e.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},e.prototype._moveViews=function(t){for(var e=this,i=this._scrollingDown?function(t,e){return t+e}:function(t,e){return t-e},n=function(){return e._scrollingDown?e.isLastIndex:e._isAtTop},r=this.viewCount(),s=this._scrollingDown?0:r-1,o=this.items,h=this._scrollingDown?this._getIndexOfLastView()+1:this._getIndexOfFirstView()-1,l=0,u=t-2*r;l<t&&!n();){var c=this.view(s),f=i(h,l);this.isLastIndex=f>=o.length-1,this._isAtTop=f<=0,n()&&r>=o.length||(l>u&&(0,a.rebindAndMoveView)(this,c,f,this._scrollingDown),l++)}return t-(t-l)},e.prototype._getIndexOfLastView=function(){var t=this.view(this.viewCount()-1);return t?t.overrideContext.$index:-1},e.prototype._getLastViewItem=function(){var t=this.viewSlot.children;if(t.length){var e=t[t.length-1].bindingContext[this.local];return e}},e.prototype._getIndexOfFirstView=function(){return this.view(0)?this.view(0).overrideContext.$index:-1},e.prototype._calcInitialHeights=function(t){var e=this;if(!(this._viewsLength>0&&this._itemsLength===t||t<=0)){this._hasCalculatedSizes=!0,this._itemsLength=t;var i=this.view(0).lastChild;if(this.itemHeight=(0,a.calcOuterHeight)(i),this.itemHeight<=0)return void(this._sizeInterval=setInterval(function(){var t=(0,a.calcOuterHeight)(i);t>0&&(clearInterval(e._sizeInterval),e.itemsChanged())},500));this.scrollContainerHeight=this._fixedHeightContainer?this._calcScrollHeight(this.scrollContainer):document.documentElement.clientHeight,this.elementsInView=Math.ceil(this.scrollContainerHeight/this.itemHeight)+1,this._viewsLength=2*this.elementsInView+this._bufferSize,this._bottomBufferHeight=this.itemHeight*t-this.itemHeight*this._viewsLength,this._bottomBufferHeight<0&&(this._bottomBufferHeight=0),this.bottomBuffer.style.height=this._bottomBufferHeight+"px",this._topBufferHeight=0,this.topBuffer.style.height=this._topBufferHeight+"px",this.scrollContainer.scrollTop=0,this._first=0}},e.prototype._calcScrollHeight=function(t){var e=void 0;return e=t.getBoundingClientRect().height,e-=(0,a.getStyleValue)(t,"borderTopWidth"),e-=(0,a.getStyleValue)(t,"borderBottomWidth")},e.prototype._observeInnerCollection=function(){var t=this._getInnerCollection(),e=this.strategyLocator.getStrategy(t);return!!e&&(this.collectionObserver=e.getCollectionObserver(this.observerLocator,t),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},e.prototype._getInnerCollection=function(){var t=(0,r.unwrapExpression)(this.sourceExpression);return t?t.evaluate(this.scope,null):null},e.prototype._observeCollection=function(){var t=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,t),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},e.prototype.viewCount=function(){return this.viewSlot.children.length},e.prototype.views=function(){return this.viewSlot.children},e.prototype.view=function(t){return this.viewSlot.children[t]},e.prototype.addView=function(t,e){var i=this.viewFactory.create();i.bind(t,e),this.viewSlot.add(i)},e.prototype.insertView=function(t,e,i){var n=this.viewFactory.create();n.bind(e,i),this.viewSlot.insert(t,n)},e.prototype.removeAllViews=function(t,e){return this.viewSlot.removeAll(t,e)},e.prototype.removeView=function(t,e,i){return this.viewSlot.removeAt(t,e,i)},e.prototype.updateBindings=function(t){for(var e=t.bindings.length;e--;)(0,r.updateOneTimeBinding)(t.bindings[e]);for(e=t.controllers.length;e--;)for(var i=t.controllers[e].boundProperties.length;i--;){var n=t.controllers[e].boundProperties[i].binding;(0,r.updateOneTimeBinding)(n)}},e}(r.AbstractRepeater),y=d(m.prototype,"items",[n.bindable],{enumerable:!0,initializer:null}),b=d(m.prototype,"local",[n.bindable],{enumerable:!0,initializer:null}),v=m))||v)||v)||v)}),define("aurelia-ui-virtualization/utilities",["exports","aurelia-templating-resources","aurelia-templating"],function(t,e,i){"use strict";function n(t){var e=void 0;return e=t.getBoundingClientRect().height,e+=o(t,"marginTop"),e+=o(t,"marginBottom")}function r(t,e){var i=e.parentElement||e.parentNode;i.insertBefore(t.lastChild,e)}function s(t,i){var n=t.viewSlot.children,r=n.length,s=t.items.length;i>0&&(i-=1);for(var a=t._topBufferHeight/t.itemHeight;i<r;++i)(0,e.updateOverrideContext)(n[i].overrideContext,i+a,s)}function a(t,i,n,r){var s=t.items,a=t.viewSlot;(0,e.updateOverrideContext)(i.overrideContext,n,s.length),i.bindingContext[t.local]=s[n],r?(a.children.push(a.children.shift()),t.templateStrategy.moveViewLast(i,t.bottomBuffer)):(a.children.unshift(a.children.splice(-1,1)[0]),t.templateStrategy.moveViewFirst(i,t.topBuffer))}function o(t,e){var i=void 0,n=void 0;return i=t.currentStyle||window.getComputedStyle(t),n=parseInt(i[e],10),Number.isNaN(n)?0:n}function h(t){return document.documentElement.clientHeight-t.getBoundingClientRect().bottom}function l(t){return t.getBoundingClientRect().top}Object.defineProperty(t,"__esModule",{value:!0}),t.calcOuterHeight=n,t.insertBeforeNode=r,t.updateVirtualOverrideContexts=s,t.rebindAndMoveView=a,t.getStyleValue=o,t.getElementDistanceToBottomViewPort=h,t.getElementDistanceToTopViewPort=l}),define("aurelia-ui-virtualization/dom-helper",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DomHelper=function(){function t(){}return t.prototype.getElementDistanceToTopOfDocument=function(t){var e=t.getBoundingClientRect(),i=document.documentElement,n=window.pageYOffset,r=i.clientTop,s=e.top+n-r;return Math.round(s)},t.prototype.hasOverflowScroll=function(t){var e=t.style;return"scroll"===e.overflowY||"scroll"===e.overflow||"auto"===e.overflowY||"auto"===e.overflow},t}()}),define("aurelia-ui-virtualization/virtual-repeat-strategy-locator",["exports","aurelia-templating-resources","./array-virtual-repeat-strategy"],function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualRepeatStrategyLocator=void 0;t.VirtualRepeatStrategyLocator=function(t){function e(){var e=n(this,t.call(this));return e.matchers=[],e.strategies=[],e.addStrategy(function(t){return t instanceof Array},new i.ArrayVirtualRepeatStrategy),e}return r(e,t),e}(e.RepeatStrategyLocator)}),define("aurelia-ui-virtualization/array-virtual-repeat-strategy",["exports","aurelia-templating-resources","./utilities"],function(t,e,i){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayVirtualRepeatStrategy=void 0;t.ArrayVirtualRepeatStrategy=function(t){function s(){return n(this,t.apply(this,arguments))}return r(s,t),s.prototype.createFirstItem=function(t){var i=(0,e.createFullOverrideContext)(t,t.items[0],0,1);t.addView(i.bindingContext,i)},s.prototype.instanceChanged=function(t,e){this._inPlaceProcessItems(t,e)},s.prototype._standardProcessInstanceChanged=function(t,i){for(var n=1,r=t._viewsLength;n<r;++n){var s=(0,e.createFullOverrideContext)(t,i[n],n,r);t.addView(s.bindingContext,s)}},s.prototype._inPlaceProcessItems=function(t,i){for(var n=i.length,r=t.viewCount(),s=t._getIndexOfFirstView();r>n;)r--,t.removeView(r,!0);for(var a=t.local,o=0;o<r;o++){var h=t.view(o),l=o===n-1,u=0!==o&&!l;h.bindingContext[a]===i[o+s]&&h.overrideContext.$middle===u&&h.overrideContext.$last===l||(h.bindingContext[a]=i[o+s],h.overrideContext.$middle=u,h.overrideContext.$last=l,t.updateBindings(h))}for(var c=Math.min(t._viewsLength,i.length),f=r;f<c;f++){var d=(0,e.createFullOverrideContext)(t,i[f],f,n);t.addView(d.bindingContext,d)}},s.prototype.instanceMutated=function(t,e,i){this._standardProcessInstanceMutated(t,e,i)},s.prototype._standardProcessInstanceMutated=function(t,e,i){var n=this;if(t.__queuedSplices){for(var r=0,s=i.length;r<s;++r){var a=i[r],o=a.index,h=a.removed,l=a.addedCount;mergeSplice(t.__queuedSplices,o,h,l)}return void(t.__array=e.slice(0))}var u=this._runSplices(t,e.slice(0),i);u instanceof Promise&&!function(){var e=t.__queuedSplices=[],i=function i(){if(!e.length)return delete t.__queuedSplices,void delete t.__array;var r=n._runSplices(t,t.__array,e)||Promise.resolve();r.then(i)};u.then(i)}()},s.prototype._runSplices=function(t,n,r){for(var s=this,a=0,o=[],h=!0,l=0;l<r.length;l++){var u=r[l];if(u.removed.length!==u.addedCount){h=!1;break}}if(h){for(var c=0;c<r.length;c++)for(var f=r[c],d=f.index;d<f.index+f.addedCount;d++)if(!this._isIndexBeforeViewSlot(t,t.viewSlot,d)&&!this._isIndexAfterViewSlot(t,t.viewSlot,d)){var g=this._getViewIndex(t,t.viewSlot,d),p=(0,e.createFullOverrideContext)(t,n[d],d,n.length);t.removeView(g,!0,!0),t.insertView(g,p.bindingContext,p)}}else{for(var v=0,m=r.length;v<m;++v){for(var y=r[v],b=y.removed,x=b.length,_=0,w=x;_<w;++_){var C=this._removeViewAt(t,y.index+a+o.length,!0,_,x);C instanceof Promise&&o.push(C)}a-=y.addedCount}if(o.length>0)return Promise.all(o).then(function(){s._handleAddedSplices(t,n,r),(0,i.updateVirtualOverrideContexts)(t,0)});this._handleAddedSplices(t,n,r),(0,i.updateVirtualOverrideContexts)(t,0)}},s.prototype._removeViewAt=function(t,n,r,s,a){var o=void 0,h=void 0,l=t.viewSlot,u=t.viewCount(),c=void 0,f=a>u;if(t._viewsLength<=s)return t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight,void t._adjustBufferHeights();if(this._isIndexBeforeViewSlot(t,l,n)||this._isIndexAfterViewSlot(t,l,n))this._isIndexBeforeViewSlot(t,l,n)?t._bottomBufferHeight>0?(t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight,(0,i.rebindAndMoveView)(t,t.view(0),t.view(0).overrideContext.$index,!0)):t._topBufferHeight=t._topBufferHeight-t.itemHeight:this._isIndexAfterViewSlot(t,l,n)&&(t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight);else{var d=this._getViewIndex(t,l,n);if(o=t.removeView(d,r),t.items.length>u){var g=void 0;if(t._bottomBufferHeight>t.itemHeight){if(c=u,f)g=s;else{var p=t._getLastViewItem();g=t.items.indexOf(p)+1}t._bottomBufferHeight=t._bottomBufferHeight-t.itemHeight}else t._topBufferHeight>0&&(c=0,g=t._getIndexOfFirstView()-1,t._topBufferHeight=t._topBufferHeight-t.itemHeight);var v=t.items[g];if(v){var m=(0,e.createFullOverrideContext)(t,v,g,t.items.length);h=t.viewFactory.create(),h.bind(m.bindingContext,m)}}}o instanceof Promise?o.then(function(){t.viewSlot.insert(c,h),t._adjustBufferHeights()}):h&&t.viewSlot.insert(c,h),t._adjustBufferHeights()},s.prototype._isIndexBeforeViewSlot=function(t,e,i){var n=this._getViewIndex(t,e,i);return n<0},s.prototype._isIndexAfterViewSlot=function(t,e,i){var n=this._getViewIndex(t,e,i);return n>t._viewsLength-1},s.prototype._getViewIndex=function(t,e,i){if(0===t.viewCount())return-1;var n=t._topBufferHeight/t.itemHeight;return i-n},s.prototype._handleAddedSplices=function(t,n,r){for(var s=n.length,a=t.viewSlot,o=0,h=r.length;o<h;++o)for(var l=r[o],u=l.index,c=l.index+l.addedCount;u<c;++u){var f=(0,i.getElementDistanceToBottomViewPort)(t.templateStrategy.getLastElement(t.bottomBuffer))>0;if(0===t.viewCount()||!this._isIndexBeforeViewSlot(t,a,u)&&!this._isIndexAfterViewSlot(t,a,u)||f){var d=(0,e.createFullOverrideContext)(t,n[u],u,s);t.insertView(u,d.bindingContext,d),t._hasCalculatedSizes?t.viewCount()>t._viewsLength&&(f?(t.removeView(0,!0,!0),t._topBufferHeight=t._topBufferHeight+t.itemHeight,t._adjustBufferHeights()):(t.removeView(t.viewCount()-1,!0,!0),t._bottomBufferHeight=t._bottomBufferHeight+t.itemHeight)):t._calcInitialHeights(1)}else this._isIndexBeforeViewSlot(t,a,u)?t._topBufferHeight=t._topBufferHeight+t.itemHeight:this._isIndexAfterViewSlot(t,a,u)&&(t._bottomBufferHeight=t._bottomBufferHeight+t.itemHeight,t.isLastIndex=!1)}t._adjustBufferHeights()},s}(e.ArrayRepeatStrategy)}),define("aurelia-ui-virtualization/template-strategy",["exports","aurelia-dependency-injection","aurelia-pal","aurelia-templating","./utilities","./dom-helper"],function(t,e,i,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultTemplateStrategy=t.TableStrategy=t.TemplateStrategyLocator=void 0;var a,o,h,l,u=(t.TemplateStrategyLocator=(a=(0,e.inject)(e.Container),a(o=function(){function t(t){this.container=t}return t.prototype.getStrategy=function(t){return t.parentNode&&"tbody"===t.parentNode.localName?this.container.get(u):this.container.get(c)},t}())||o),t.TableStrategy=(h=(0,e.inject)(s.DomHelper),h(l=function(){function t(t){this.tableCssReset="    display: block;    width: auto;    height: auto;    margin: 0;    padding: 0;    border: none;    border-collapse: inherit;    border-spacing: 0;    background-color: transparent;    -webkit-border-horizontal-spacing: 0;    -webkit-border-vertical-spacing: 0;",this.domHelper=t}return t.prototype.getScrollContainer=function(t){return t.parentNode},t.prototype.moveViewFirst=function(t,e){var n=this._getTbodyElement(e.nextSibling),s=n.firstChild,a=i.DOM.nextElementSibling(s);(0,r.insertBeforeNode)(t,a)},t.prototype.moveViewLast=function(t,e){var i=this.getLastElement(e).nextSibling,n=8===i.nodeType&&"anchor"===i.data?i:i;(0,r.insertBeforeNode)(t,n)},t.prototype.createTopBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",n=i.DOM.createElement(e),r=t.parentNode.parentNode;return r.parentNode.insertBefore(n,r),n.innerHTML="&nbsp;",n},t.prototype.createBottomBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",n=i.DOM.createElement(e),r=t.parentNode.parentNode;return r.parentNode.insertBefore(n,r.nextSibling),n},t.prototype.removeBufferElements=function(t,e,i){e.parentNode.removeChild(e),i.parentNode.removeChild(i)},t.prototype.getFirstElement=function(t){var e=this._getTbodyElement(i.DOM.nextElementSibling(t)),n=e.firstChild;return i.DOM.nextElementSibling(n)},t.prototype.getLastElement=function(t){var e=this._getTbodyElement(t.previousSibling),i=e.children;return i[i.length-1]},t.prototype.getTopBufferDistance=function(t){var e=this._getTbodyElement(t.nextSibling);return this.domHelper.getElementDistanceToTopOfDocument(e)-this.domHelper.getElementDistanceToTopOfDocument(t)},t.prototype._getTbodyElement=function(t){for(var e=void 0,i=t.children,n=0,r=i.length;n<r;++n)if("tbody"===i[n].localName){e=i[n];break}return e},t}())||l)),c=t.DefaultTemplateStrategy=function(){function t(){}return t.prototype.getScrollContainer=function(t){return t.parentNode},t.prototype.moveViewFirst=function(t,e){(0,r.insertBeforeNode)(t,i.DOM.nextElementSibling(e))},t.prototype.moveViewLast=function(t,e){var i=e.previousSibling,n=8===i.nodeType&&"anchor"===i.data?i:e;(0,r.insertBeforeNode)(t,n)},t.prototype.createTopBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",n=i.DOM.createElement(e);return t.parentNode.insertBefore(n,t),n},t.prototype.createBottomBufferElement=function(t){var e="ul"===t.parentNode.localName?"li":"div",n=i.DOM.createElement(e);return t.parentNode.insertBefore(n,t.nextSibling),n},t.prototype.removeBufferElements=function(t,e,i){t.parentNode.removeChild(e),t.parentNode.removeChild(i)},t.prototype.getFirstElement=function(t){return i.DOM.nextElementSibling(t)},t.prototype.getLastElement=function(t){return t.previousElementSibling},t.prototype.getTopBufferDistance=function(t){return 0},t}()}),define("aurelia-ui-virtualization/infinite-scroll-next",["exports","aurelia-templating"],function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteScrollNext=void 0;var i,n;t.InfiniteScrollNext=(i=(0,e.customAttribute)("infinite-scroll-next"),i(n=function(){function t(){}return t.prototype.attached=function(){},t.prototype.bind=function(t,e){this.scope={bindingContext:t,overrideContext:e}},t}())||n)}),define("sigma-ui-framework/sigma-ui-framework",["require","exports","./utils/ui-constants","./utils/ui-utils","./utils/ui-validation","aurelia-validation","./utils/ui-event","./utils/ui-constants","./utils/ui-formatters","./utils/ui-application","./utils/ui-model","./utils/ui-dialog","./utils/ui-tree-models","./utils/ui-http-service","./utils/ui-validation","./utils/ui-utils","lodash","moment","numeral","kramed","./scripts/phonelib","./scripts/fileTypes","./scripts/countries","./scripts/currencies"],function(t,e,i,n,r,s,a,o,h,l,u,c,f,d,g,p){"use strict";function v(t,e){t.container.registerHandler("ui-validator",function(t){return t.get(r.UIValidationRenderer)}),t.globalResources("./core/ui-viewport"),t.globalResources("./core/ui-page"),t.globalResources("./core/ui-grid"),t.globalResources("./components/ui-menu"),t.globalResources("./components/ui-form"),t.globalResources("./components/ui-ribbon"),t.globalResources("./components/ui-panel"),t.globalResources("./components/ui-login"),t.globalResources("./components/ui-tree"),t.globalResources("./components/ui-datagrid"),t.globalResources("./components/ui-tab-panel"),t.globalResources("./inputs/ui-button"),t.globalResources("./inputs/ui-switch"),t.globalResources("./inputs/ui-option"),t.globalResources("./inputs/ui-display"),t.globalResources("./inputs/ui-input"),t.globalResources("./inputs/ui-file"),t.globalResources("./inputs/ui-phone"),t.globalResources("./inputs/ui-markdown"),t.globalResources("./inputs/ui-textarea"),t.globalResources("./inputs/ui-input-dual"),t.globalResources("./inputs/ui-combo"),t.globalResources("./inputs/ui-tags"),t.globalResources("./inputs/ui-language"),t.globalResources("./inputs/ui-date"),t.globalResources("./inputs/ui-date-view"),t.globalResources("./inputs/ui-reorder"),t.globalResources("./inputs/ui-list"),t.globalResources("./utils/ui-converters"),n.kramed.setOptions({gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(t){return hljs?(hljs.configure({useBR:!0,tabReplace:"    "}),hljs.highlightAuto(t).value):t}}),s.ValidationRules.customRule("phone",function(t,e){return null===t||void 0===t||PhoneLib.isValid(t)},"${$displayName } is not a valid phone number."),s.ValidationRules.customRule("integer",function(t,e,i,n){return null===t||void 0===t||Number.isInteger(t)&&t>=(i||Number.MIN_VALUE)&&t<=(n||Number.MAX_VALUE)},'${$displayName} must be an integer value between ${$config.min || "MIN_VALUE"} and ${$config.max || "MAX_VALUE"}.',function(t,e){return{min:t,max:e}}),s.ValidationRules.customRule("decimal",function(t,e,i,n){return null===t||void 0===t||0===Math.floor(t%1)&&t>=(i||Number.MIN_VALUE)&&t<=(n||Number.MAX_VALUE)},'${$displayName} must be a decimal value between ${$config.min || "MIN_VALUE"} and ${$config.max || "MAX_VALUE"}.',function(t,e){return{min:t,max:e}}),s.ValidationRules.customRule("language",function(t,e,i,n){if(!(n&&n.clearErrors&&n.addError))throw new Error("Language validation must have reference to ui-language");var r=[];return n.clearErrors(),_.forEach(t,function(t,e){r.push(i.validator.validateObject(t).then(function(t){return t.length>0&&n.addError(e),t.length>0?e:""}))}),Promise.all(r).then(function(t){return 0==t.join("").length})},"Some language entries contain invalid values");var a={title:function(t){return i.UIConstants.App.Title=t,a},version:function(t){return i.UIConstants.App.Version=t,a},appKey:function(t){return i.UIConstants.App.Key=t,a},apiUrl:function(t){return i.UIConstants.Http.BaseUrl=t,a},apiHeaders:function(t){return i.UIConstants.Http.Headers=t,a},addAuthHeader:function(t){return i.UIConstants.Http.AuthorizationHeader=t,a},loadCharts:function(){return t.globalResources("./components/ui-chart"),n.UIChartStatic.init(),a},languages:function(t){return i.UIConstants.Languages=t,a}};void 0!==e&&"function"==typeof e&&e(a)}e.configure=v,e.UIEvent=a.UIEvent,e.UIConstants=o.UIConstants,e.UIFormat=h.UIFormat,e.UIApplication=l.UIApplication,e.AuthInterceptor=l.AuthInterceptor,e.UIModel=u.UIModel,e.UIDialogService=c.UIDialogService,e.UIDialog=c.UIDialog,e.UITreeModel=f.UITreeModel,e.UITreeOptions=f.UITreeOptions,e.UIHttpService=d.UIHttpService,e.UIValidationRenderer=g.UIValidationRenderer,e.UIUtils=p.UIUtils,e.UIChartStatic=p.UIChartStatic,e._=p._,e.moment=p.moment,e.numeral=p.numeral,e.kramed=p.kramed}),define("sigma-ui-framework",["sigma-ui-framework/sigma-ui-framework"],function(t){return t}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("i18next/i18next",e):t.i18next=e()}(this,function(){"use strict";function t(t){return null==t?"":""+t}function e(t,e,i){t.forEach(function(t){e[t]&&(i[t]=e[t])})}function i(t,e,i){function n(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var r="string"!=typeof e?[].concat(e):e.split(".");r.length>1;){if(!t)return{};var s=n(r.shift());!t[s]&&i&&(t[s]=new i),t=t[s]}return t?{obj:t,k:n(r.shift())}:{}}function n(t,e,n){var r=i(t,e,Object),s=r.obj,a=r.k;s[a]=n}function r(t,e,n,r){var s=i(t,e,Object),a=s.obj,o=s.k;a[o]=a[o]||[],r&&(a[o]=a[o].concat(n)),r||a[o].push(n)}function s(t,e){var n=i(t,e),r=n.obj,s=n.k;if(r)return r[s]}function a(t,e,i){for(var n in e)n in t?"string"==typeof t[n]||t[n]instanceof String||"string"==typeof e[n]||e[n]instanceof String?i&&(t[n]=e[n]):a(t[n],e[n],i):t[n]=e[n];return t}function o(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function h(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,function(t){return A[t]}):t}function l(t){return t.interpolation={unescapeSuffix:"HTML"},t.interpolation.prefix=t.interpolationPrefix||"__",t.interpolation.suffix=t.interpolationSuffix||"__",t.interpolation.escapeValue=t.escapeInterpolation||!1,t.interpolation.nestingPrefix=t.reusePrefix||"$t(",t.interpolation.nestingSuffix=t.reuseSuffix||")",t}function u(t){return t.resStore&&(t.resources=t.resStore),t.ns&&t.ns.defaultNs?(t.defaultNS=t.ns.defaultNs,t.ns=t.ns.namespaces):t.defaultNS=t.ns||"translation",t.fallbackToDefaultNS&&t.defaultNS&&(t.fallbackNS=t.defaultNS),t.saveMissing=t.sendMissing,t.saveMissingTo=t.sendMissingTo||"current",t.returnNull=!t.fallbackOnNull,t.returnEmptyString=!t.fallbackOnEmpty,t.returnObjects=t.returnObjectTrees,t.joinArrays="\n",t.returnedObjectHandler=t.objectTreeKeyHandler,t.parseMissingKeyHandler=t.parseMissingKey,t.appendNamespaceToMissingKey=!0,t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,"sprintf"===t.shortcutFunction&&(t.overloadTranslationOptionHandler=function(t){for(var e=[],i=1;i<t.length;i++)e.push(t[i]);return{postProcess:"sprintf",sprintf:e}}),t.whitelist=t.lngWhitelist,t.preload=t.preload,"current"===t.load&&(t.load="currentOnly"),"unspecific"===t.load&&(t.load="languageOnly"),t.backend=t.backend||{},t.backend.loadPath=t.resGetPath||"locales/__lng__/__ns__.json",t.backend.addPath=t.resPostPath||"locales/add/__lng__/__ns__",t.backend.allowMultiLoading=t.dynamicLoad,t.cache=t.cache||{},t.cache.prefix="res_",t.cache.expirationTime=6048e5,t.cache.enabled=!!t.useLocalStorage,t=l(t),t.defaultVariables&&(t.interpolation.defaultVariables=t.defaultVariables),t}function c(t){return t=l(t),t.joinArrays="\n",t}function f(t){return(t.interpolationPrefix||t.interpolationSuffix||t.escapeInterpolation)&&(t=l(t)),t.nsSeparator=t.nsseparator,t.keySeparator=t.keyseparator,t.returnObjects=t.returnObjectTrees,t}function d(t){t.lng=function(){return k.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup."),t.services.languageUtils.toResolveHierarchy(t.language)[0]},t.preload=function(e,i){k.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()"),t.loadLanguages(e,i)},t.setLng=function(e,i,n){return k.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace."),"function"==typeof i&&(n=i,i={}),i||(i={}),i.fixLng===!0&&n?n(null,t.getFixedT(e)):void t.changeLanguage(e,n)},t.addPostProcessor=function(e,i){k.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })"),t.use({type:"postProcessor",name:e,process:i})}}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}function p(){var t={};return j.forEach(function(e){e.lngs.forEach(function(i){return t[i]={numbers:e.nr,plurals:I[e.fc]}})}),t}function v(t,e){for(var i=t.indexOf(e);i!==-1;)t.splice(i,1),i=t.indexOf(e)}function m(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:!1,saveMissingTo:"fallback",missingKeyHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,overloadTranslationOptionHandler:function(t){return{defaultValue:t[1]}},interpolation:{escapeValue:!0,format:function(t,e,i){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:void 0}}}function y(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&t.whitelist.push("cimode"),t}var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},x=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},w=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},C=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},S=function(){function t(t,e){var i=[],n=!0,r=!1,s=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),O={type:"logger",log:function(t){
this._output("log",t)},warn:function(t){this._output("warn",t)},error:function(t){this._output("error",t)},_output:function(t,e){console&&console[t]&&console[t].apply(console,Array.prototype.slice.call(e))}},T=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.subs=[],this.init(e,i)}return t.prototype.init=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.prefix=e.prefix||"i18next:",this.logger=t||O,this.options=e,this.debug=e.debug!==!1},t.prototype.setDebug=function(t){this.debug=t,this.subs.forEach(function(e){e.setDebug(t)})},t.prototype.log=function(){this.forward(arguments,"log","",!0)},t.prototype.warn=function(){this.forward(arguments,"warn","",!0)},t.prototype.error=function(){this.forward(arguments,"error","")},t.prototype.deprecate=function(){this.forward(arguments,"warn","WARNING DEPRECATED: ",!0)},t.prototype.forward=function(t,e,i,n){n&&!this.debug||("string"==typeof t[0]&&(t[0]=i+this.prefix+" "+t[0]),this.logger[e](t))},t.prototype.create=function(e){var i=new t(this.logger,_({prefix:this.prefix+":"+e+":"},this.options));return this.subs.push(i),i},t}(),k=new T,M=function(){function t(){x(this,t),this.observers={}}return t.prototype.on=function(t,e){var i=this;t.split(" ").forEach(function(t){i.observers[t]=i.observers[t]||[],i.observers[t].push(e)})},t.prototype.off=function(t,e){var i=this;this.observers[t]&&this.observers[t].forEach(function(){if(e){var n=i.observers[t].indexOf(e);n>-1&&i.observers[t].splice(n,1)}else delete i.observers[t]})},t.prototype.emit=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.observers[t]&&this.observers[t].forEach(function(t){t.apply(void 0,i)}),this.observers["*"]&&this.observers["*"].forEach(function(e){var n;e.apply(e,(n=[t]).concat.apply(n,i))})},t}(),A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},D=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{ns:["translation"],defaultNS:"translation"}:arguments[1];x(this,e);var r=C(this,t.call(this));return r.data=i,r.options=n,r}return w(e,t),e.prototype.addNamespaces=function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)},e.prototype.removeNamespaces=function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)},e.prototype.getResource=function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],r=n.keySeparator||this.options.keySeparator;void 0===r&&(r=".");var a=[t,e];return i&&"string"!=typeof i&&(a=a.concat(i)),i&&"string"==typeof i&&(a=a.concat(r?i.split(r):i)),t.indexOf(".")>-1&&(a=t.split(".")),s(this.data,a)},e.prototype.addResource=function(t,e,i,r){var s=arguments.length<=4||void 0===arguments[4]?{silent:!1}:arguments[4],a=this.options.keySeparator;void 0===a&&(a=".");var o=[t,e];i&&(o=o.concat(a?i.split(a):i)),t.indexOf(".")>-1&&(o=t.split("."),r=e,e=o[1]),this.addNamespaces(e),n(this.data,o,r),s.silent||this.emit("added",t,e,i,r)},e.prototype.addResources=function(t,e,i){for(var n in i)"string"==typeof i[n]&&this.addResource(t,e,n,i[n],{silent:!0});this.emit("added",t,e,i)},e.prototype.addResourceBundle=function(t,e,i,r,o){var h=[t,e];t.indexOf(".")>-1&&(h=t.split("."),r=i,i=e,e=h[1]),this.addNamespaces(e);var l=s(this.data,h)||{};r?a(l,i,o):l=_({},l,i),n(this.data,h,l),this.emit("added",t,e,i)},e.prototype.removeResourceBundle=function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)},e.prototype.hasResourceBundle=function(t,e){return void 0!==this.getResource(t,e)},e.prototype.getResourceBundle=function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?_({},this.getResource(t,e)):this.getResource(t,e)},e.prototype.toJSON=function(){return this.data},e}(M),L={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,i,n,r){var s=this;return t.forEach(function(t){s.processors[t]&&(e=s.processors[t].process(e,i,n,r))}),e}},N=function(t){function i(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,i);var s=C(this,t.call(this));return e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],n,s),s.options=r,s.logger=k.create("translator"),s}return w(i,t),i.prototype.changeLanguage=function(t){t&&(this.language=t)},i.prototype.exists=function(t){var e=arguments.length<=1||void 0===arguments[1]?{interpolation:{}}:arguments[1];return"v1"===this.options.compatibilityAPI&&(e=f(e)),void 0!==this.resolve(t,e)},i.prototype.extractFromKey=function(t,e){var i=e.nsSeparator||this.options.nsSeparator;void 0===i&&(i=":");var n=e.ns||this.options.defaultNS;if(i&&t.indexOf(i)>-1){var r=t.split(i);n=r[0],t=r[1]}return"string"==typeof n&&(n=[n]),{key:t,namespaces:n}},i.prototype.translate=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("object"!==("undefined"==typeof e?"undefined":b(e))?e=this.options.overloadTranslationOptionHandler(arguments):"v1"===this.options.compatibilityAPI&&(e=f(e)),void 0===t||null===t||""===t)return"";"number"==typeof t&&(t=String(t)),"string"==typeof t&&(t=[t]);var i=e.lng||this.language;if(i&&"cimode"===i.toLowerCase())return t[t.length-1];var n=e.keySeparator||this.options.keySeparator||".",r=this.extractFromKey(t[t.length-1],e),s=r.key,a=r.namespaces,o=a[a.length-1],h=this.resolve(t,e),l=Object.prototype.toString.apply(h),u=["[object Number]","[object Function]","[object RegExp]"],c=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays;if(h&&"string"!=typeof h&&u.indexOf(l)<0&&(!c||"[object Array]"!==l)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(s,h,e):"key '"+s+" ("+this.language+")' returned an object instead of string.";var d="[object Array]"===l?[]:{};for(var g in h)d[g]=this.translate(""+s+n+g,_({joinArrays:!1,ns:a},e));h=d}else if(c&&"[object Array]"===l)h=h.join(c),h&&(h=this.extendTranslation(h,s,e));else{var p=!1,v=!1;if(this.isValidLookup(h)||void 0===e.defaultValue||(p=!0,h=e.defaultValue),this.isValidLookup(h)||(v=!0,h=s),v||p){this.logger.log("missingKey",i,o,s,h);var m=[];if("fallback"===this.options.saveMissingTo&&this.options.fallbackLng&&this.options.fallbackLng[0])for(var y=0;y<this.options.fallbackLng.length;y++)m.push(this.options.fallbackLng[y]);else"all"===this.options.saveMissingTo?m=this.languageUtils.toResolveHierarchy(e.lng||this.language):m.push(e.lng||this.language);this.options.saveMissing&&(this.options.missingKeyHandler?this.options.missingKeyHandler(m,o,s,h):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(m,o,s,h)),this.emit("missingKey",m,o,s,h)}h=this.extendTranslation(h,s,e),v&&h===s&&this.options.appendNamespaceToMissingKey&&(h=o+":"+s),v&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h},i.prototype.extendTranslation=function(t,e,i){var n=this;i.interpolation&&this.interpolator.init(i);var r=i.replace&&"string"!=typeof i.replace?i.replace:i;this.options.interpolation.defaultVariables&&(r=_({},this.options.interpolation.defaultVariables,r)),t=this.interpolator.interpolate(t,r,this.language),t=this.interpolator.nest(t,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.translate.apply(n,e)},i),i.interpolation&&this.interpolator.reset();var s=i.postProcess||this.options.postProcess,a="string"==typeof s?[s]:s;return void 0!==t&&a&&a.length&&i.applyPostProcessor!==!1&&(t=L.handle(a,t,e,i,this)),t},i.prototype.resolve=function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=void 0;return"string"==typeof t&&(t=[t]),t.forEach(function(t){if(!e.isValidLookup(n)){var r=e.extractFromKey(t,i),s=r.key,a=r.namespaces;e.options.fallbackNS&&(a=a.concat(e.options.fallbackNS));var o=void 0!==i.count&&"string"!=typeof i.count,h=void 0!==i.context&&"string"==typeof i.context&&""!==i.context,l=i.lngs?i.lngs:e.languageUtils.toResolveHierarchy(i.lng||e.language);a.forEach(function(t){e.isValidLookup(n)||l.forEach(function(r){if(!e.isValidLookup(n)){var a=s,l=[a],u=void 0;o&&(u=e.pluralResolver.getSuffix(r,i.count)),o&&h&&l.push(a+u),h&&l.push(a+=""+e.options.contextSeparator+i.context),o&&l.push(a+=u);for(var c=void 0;c=l.pop();)e.isValidLookup(n)||(n=e.getResource(r,t,c,i))}})})}}),n},i.prototype.isValidLookup=function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)},i.prototype.getResource=function(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return this.resourceStore.getResource(t,e,i,n)},i}(M),E=function(){function t(e){x(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=k.create("languageUtils")}return t.prototype.getLanguagePartFromCode=function(t){if(t.indexOf("-")<0)return t;var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"],i=t.split("-");return this.formatLanguageCode(e.indexOf(t)>-1?i[1].toLowerCase():i[0])},t.prototype.formatLanguageCode=function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(t){return t.toLowerCase()}):2===i.length?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=g(i[1].toLowerCase()))):3===i.length&&(i[0]=i[0].toLowerCase(),2===i[1].length&&(i[1]=i[1].toUpperCase()),"sgn"!==i[0]&&2===i[2].length&&(i[2]=i[2].toUpperCase()),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=g(i[1].toLowerCase())),e.indexOf(i[2].toLowerCase())>-1&&(i[2]=g(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t},t.prototype.isWhitelisted=function(t,e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist&&!e)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1},t.prototype.toResolveHierarchy=function(t,e){var i=this;e=e||this.options.fallbackLng||[],"string"==typeof e&&(e=[e]);var n=[],r=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];i.isWhitelisted(t,e)?n.push(t):i.logger.warn("rejecting non-whitelisted language code: "+t)};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t),!0),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):"string"==typeof t&&r(this.formatLanguageCode(t)),e.forEach(function(t){n.indexOf(t)<0&&r(i.formatLanguageCode(t))}),n},t}(),j=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}],I={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)}},P=function(){function t(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];x(this,t),this.languageUtils=e,this.options=i,this.logger=k.create("pluralResolver"),this.rules=p()}return t.prototype.addRule=function(t,e){this.rules[t]=e},t.prototype.getRule=function(t){return this.rules[this.languageUtils.getLanguagePartFromCode(t)]},t.prototype.needsPlural=function(t){var e=this.getRule(t);return!(e&&e.numbers.length<=1)},t.prototype.getSuffix=function(t,e){var i=this,n=this.getRule(t);if(!n)return this.logger.warn("no plural rule found for: "+t),"";var r=function(){if(1===n.numbers.length)return{v:""};var t=n.noAbs?n.plurals(e):n.plurals(Math.abs(e)),r=n.numbers[t];2===n.numbers.length&&1===n.numbers[0]&&(2===r?r="plural":1===r&&(r=""));var s=function(){return i.options.prepend&&r.toString()?i.options.prepend+r.toString():r.toString()};return"v1"===i.options.compatibilityJSON?1===r?{v:""}:"number"==typeof r?{v:"_plural_"+r.toString()}:{v:s()}:"v2"===i.options.compatibilityJSON||2===n.numbers.length&&1===n.numbers[0]?{v:s()}:2===n.numbers.length&&1===n.numbers[0]?{v:s()}:{v:i.options.prepend&&t.toString()?i.options.prepend+t.toString():t.toString()}}();return"object"===("undefined"==typeof r?"undefined":b(r))?r.v:void 0},t}(),R=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];x(this,e),this.logger=k.create("interpolator"),this.init(t,!0)}return e.prototype.init=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];e&&(this.options=t,this.format=t.interpolation&&t.interpolation.format||function(t){return t}),t.interpolation||(t.interpolation={escapeValue:!0});var i=t.interpolation;this.escapeValue=i.escapeValue,this.prefix=i.prefix?o(i.prefix):i.prefixEscaped||"{{",this.suffix=i.suffix?o(i.suffix):i.suffixEscaped||"}}",this.formatSeparator=i.formatSeparator?o(i.formatSeparator):i.formatSeparator||",",this.unescapePrefix=i.unescapeSuffix?"":i.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":i.unescapeSuffix||"",this.nestingPrefix=i.nestingPrefix?o(i.nestingPrefix):i.nestingPrefixEscaped||o("$t("),this.nestingSuffix=i.nestingSuffix?o(i.nestingSuffix):i.nestingSuffixEscaped||o(")");var n=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(n,"g");var r=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(r,"g");var s=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(s,"g")},e.prototype.reset=function(){this.options&&this.init(this.options)},e.prototype.interpolate=function(e,i,n){function r(t){return t.replace(/\$/g,"$$$$")}for(var a=this,o=void 0,l=void 0,u=function(t){if(t.indexOf(a.formatSeparator)<0)return s(i,t);var e=t.split(a.formatSeparator),r=e.shift().trim(),o=e.join(a.formatSeparator).trim();return a.format(s(i,r),o,n)};o=this.regexpUnescape.exec(e);){var c=u(o[1].trim());e=e.replace(o[0],c),this.regexpUnescape.lastIndex=0}for(;o=this.regexp.exec(e);)l=u(o[1].trim()),"string"!=typeof l&&(l=t(l)),l||(this.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+e),l=""),l=r(this.escapeValue?h(l):l),e=e.replace(o[0],l),this.regexp.lastIndex=0;return e},e.prototype.nest=function(e,i){function n(t){return t.replace(/\$/g,"$$$$")}function r(t){if(t.indexOf(",")<0)return t;var e=t.split(",");t=e.shift();var i=e.join(",");i=this.interpolate(i,l);try{l=JSON.parse(i)}catch(e){this.logger.error("failed parsing options string in nesting for key "+t,e)}return t}var s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=void 0,o=void 0,l=JSON.parse(JSON.stringify(s));for(l.applyPostProcessor=!1;a=this.nestingRegexp.exec(e);)o=i(r.call(this,a[1].trim()),l),"string"!=typeof o&&(o=t(o)),o||(this.logger.warn("missed to pass in variable "+a[1]+" for interpolating "+e),o=""),o=n(this.escapeValue?h(o):o),e=e.replace(a[0],o),this.regexp.lastIndex=0;return e},e}(),B=function(t){function e(i,n,r){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=C(this,t.call(this));return a.backend=i,a.store=n,a.services=r,a.options=s,a.logger=k.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(r,s.backend,s),a}return w(e,t),e.prototype.queueLoad=function(t,e,i){var n=this,r=[],s=[],a=[],o=[];return t.forEach(function(t){var i=!0;e.forEach(function(e){var a=t+"|"+e;n.store.hasResourceBundle(t,e)?n.state[a]=2:n.state[a]<0||(1===n.state[a]?s.indexOf(a)<0&&s.push(a):(n.state[a]=1,i=!1,s.indexOf(a)<0&&s.push(a),r.indexOf(a)<0&&r.push(a),o.indexOf(e)<0&&o.push(e)))}),i||a.push(t)}),(r.length||s.length)&&this.queue.push({pending:s,loaded:{},errors:[],callback:i}),{toLoad:r,pending:s,toLoadLanguages:a,toLoadNamespaces:o}},e.prototype.loaded=function(t,e,i){var n=this,s=t.split("|"),a=S(s,2),o=a[0],h=a[1];e&&this.emit("failedLoading",o,h,e),i&&this.store.addResourceBundle(o,h,i),this.state[t]=e?-1:2,this.queue.forEach(function(i){r(i.loaded,[o],h),v(i.pending,t),e&&i.errors.push(e),0!==i.pending.length||i.done||(i.errors.length?i.callback(i.errors):i.callback(),n.emit("loaded",i.loaded),i.done=!0)}),this.queue=this.queue.filter(function(t){return!t.done})},e.prototype.read=function(t,e,i,n,r,s){var a=this;return n||(n=0),r||(r=250),t.length?void this.backend[i](t,e,function(o,h){return o&&h&&n<5?void setTimeout(function(){a.read.call(a,t,e,i,++n,2*r,s)},r):void s(o,h)}):s(null,{})},e.prototype.load=function(t,e,i){var n=this;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();var r=_({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var a=this.queueLoad(t,e,i);return a.toLoad.length?void(r.allowMultiLoading&&this.backend.readMulti?this.read(a.toLoadLanguages,a.toLoadNamespaces,"readMulti",null,null,function(t,e){t&&n.logger.warn("loading namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading failed",t),!t&&e&&n.logger.log("loaded namespaces "+a.toLoadNamespaces.join(", ")+" for languages "+a.toLoadLanguages.join(", ")+" via multiloading",e),a.toLoad.forEach(function(i){var r=i.split("|"),a=S(r,2),o=a[0],h=a[1],l=s(e,[o,h]);if(l)n.loaded(i,t,l);else{var u="loading namespace "+h+" for language "+o+" via multiloading failed";n.loaded(i,u),n.logger.error(u)}})}):!function(){var t=function(t){var e=this,i=t.split("|"),n=S(i,2),r=n[0],s=n[1];this.read(r,s,"read",null,null,function(i,n){i&&e.logger.warn("loading namespace "+s+" for language "+r+" failed",i),!i&&n&&e.logger.log("loaded namespace "+s+" for language "+r,n),e.loaded(t,i,n)})};a.toLoad.forEach(function(e){t.call(n,e)})}()):void(a.pending.length||i())},e.prototype.reload=function(t,e){var i=this;this.backend||this.logger.warn("No backend was added via i18next.use. Will not load resources.");var n=_({},this.backend.options,this.options.backend);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),n.allowMultiLoading&&this.backend.readMulti?this.read(t,e,"readMulti",null,null,function(n,r){n&&i.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading failed",n),!n&&r&&i.logger.log("reloaded namespaces "+e.join(", ")+" for languages "+t.join(", ")+" via multiloading",r),t.forEach(function(t){e.forEach(function(e){var a=s(r,[t,e]);if(a)i.loaded(t+"|"+e,n,a);else{var o="reloading namespace "+e+" for language "+t+" via multiloading failed";i.loaded(t+"|"+e,o),i.logger.error(o)}})})}):!function(){var n=function(t){var e=this,i=t.split("|"),n=S(i,2),r=n[0],s=n[1];this.read(r,s,"read",null,null,function(i,n){i&&e.logger.warn("reloading namespace "+s+" for language "+r+" failed",i),!i&&n&&e.logger.log("reloaded namespace "+s+" for language "+r,n),e.loaded(t,i,n)})};t.forEach(function(t){e.forEach(function(e){n.call(i,t+"|"+e)})})}()},e.prototype.saveMissing=function(t,e,i,n){this.backend&&this.backend.create&&this.backend.create(t,e,i,n),t&&t[0]&&this.store.addResource(t[0],e,i,n)},e}(M),F=function(t){function e(i,n,r){var s=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];x(this,e);var a=C(this,t.call(this));return a.cache=i,a.store=n,a.services=r,a.options=s,a.logger=k.create("cacheConnector"),a.cache&&a.cache.init&&a.cache.init(r,s.cache,s),a}return w(e,t),e.prototype.load=function(t,e,i){var n=this;if(!this.cache)return i&&i();var r=_({},this.cache.options,this.options.cache);"string"==typeof t&&(t=this.services.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]),r.enabled?this.cache.load(t,function(e,r){if(e&&n.logger.error("loading languages "+t.join(", ")+" from cache failed",e),r)for(var s in r)for(var a in r[s])if("i18nStamp"!==a){var o=r[s][a];o&&n.store.addResourceBundle(s,a,o)}i&&i()}):i&&i()},e.prototype.save=function(){this.cache&&this.options.cache&&this.options.cache.enabled&&this.cache.save(this.store.data)},e}(M),z=function(t){function e(){var i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1];x(this,e);var r=C(this,t.call(this));return r.options=y(i),r.services={},r.logger=k,r.modules={},n&&!r.isInitialized&&r.init(i,n),r}return w(e,t),e.prototype.init=function(t,e){function i(t){if(t)return"function"==typeof t?new t:t}var n=this;if("function"==typeof t&&(e=t,t={}),t||(t={}),"v1"===t.compatibilityAPI?this.options=_({},m(),y(u(t)),{}):"v1"===t.compatibilityJSON?this.options=_({},m(),y(c(t)),{}):this.options=_({},m(),this.options,y(t)),e||(e=function(){}),!this.options.isClone){this.modules.logger?k.init(i(this.modules.logger),this.options):k.init(null,this.options);var r=new E(this.options);this.store=new D(this.options.resources,this.options);var s=this.services;s.logger=k,s.resourceStore=this.store,s.resourceStore.on("added removed",function(t,e){s.cacheConnector.save()}),s.languageUtils=r,s.pluralResolver=new P(r,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON}),s.interpolator=new R(this.options),s.backendConnector=new B(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n.emit.apply(n,[t].concat(i))}),s.backendConnector.on("loaded",function(t){s.cacheConnector.save()}),s.cacheConnector=new F(i(this.modules.cache),s.resourceStore,s,this.options),s.cacheConnector.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n.emit.apply(n,[t].concat(i))}),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.translator=new N(this.services,this.options),this.translator.on("*",function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];n.emit.apply(n,[t].concat(i))})}var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];a.forEach(function(t){n[t]=function(){return this.store[t].apply(this.store,arguments)}}),"v1"===this.options.compatibilityAPI&&d(this);var o=function(){n.changeLanguage(n.options.lng,function(t,i){n.emit("initialized",n.options),n.logger.log("initialized",n.options),e(t,i)})};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),this},e.prototype.loadResources=function(t){var e=this;if(t||(t=function(){}),this.options.resources)t(null);else{var i=function(){if(e.language&&"cimode"===e.language.toLowerCase())return{v:t()};var i=[],n=function(t){var n=e.services.languageUtils.toResolveHierarchy(t);n.forEach(function(t){i.indexOf(t)<0&&i.push(t)})};n(e.language),e.options.preload&&e.options.preload.forEach(function(t){n(t)}),e.services.cacheConnector.load(i,e.options.ns,function(){e.services.backendConnector.load(i,e.options.ns,t)})}();if("object"===("undefined"==typeof i?"undefined":b(i)))return i.v}},e.prototype.reloadResources=function(t,e){t||(t=this.languages),e||(e=this.options.ns),this.services.backendConnector.reload(t,e)},e.prototype.use=function(t){return"backend"===t.type&&(this.modules.backend=t),"cache"===t.type&&(this.modules.cache=t),("logger"===t.type||t.log&&t.warn&&t.warn)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"postProcessor"===t.type&&L.addPostProcessor(t),this},e.prototype.changeLanguage=function(t,e){var i=this,n=function(n){t&&(i.emit("languageChanged",t),i.logger.log("languageChanged",t)),e&&e(n,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.t.apply(i,e)})};!t&&this.services.languageDetector&&(t=this.services.languageDetector.detect()),t&&(this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.translator.changeLanguage(t),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage(t)),this.loadResources(function(t){n(t)})},e.prototype.getFixedT=function(t,e){var i=this,n=function t(e,n){return n=n||{},n.lng=n.lng||t.lng,n.ns=n.ns||t.ns,i.t(e,n)};return n.lng=t,n.ns=e,n},e.prototype.t=function(){return this.translator&&this.translator.translate.apply(this.translator,arguments)},e.prototype.exists=function(){return this.translator&&this.translator.exists.apply(this.translator,arguments)},e.prototype.setDefaultNamespace=function(t){this.options.defaultNS=t},e.prototype.loadNamespaces=function(t,e){var i=this;return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach(function(t){i.options.ns.indexOf(t)<0&&i.options.ns.push(t)}),void this.loadResources(e)):e&&e()},e.prototype.loadLanguages=function(t,e){"string"==typeof t&&(t=[t]);var i=this.options.preload||[],n=t.filter(function(t){return i.indexOf(t)<0});return n.length?(this.options.preload=i.concat(n),void this.loadResources(e)):e()},e.prototype.dir=function(t){t||(t=this.language);var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return e.indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"},e.prototype.createInstance=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments[1];return new e(t,i)},e.prototype.cloneInstance=function(){var t=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments[1],r=new e(_({},i,this.options,{isClone:!0}),n),s=["store","translator","services","language"];return s.forEach(function(e){r[e]=t[e]}),r},e}(M),Y=new z;return Y}),define("i18next",["i18next/i18next"],function(t){return t}),define("aurelia-i18n/aurelia-i18n",["exports","aurelia-logging","aurelia-event-aggregator","aurelia-templating","aurelia-loader","aurelia-templating-resources","./i18n","./relativeTime","./df","./nf","./rt","./t","./base-i18n"],function(t,e,i,n,r,s,a,o,h,l,u,c,f){"use strict";function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function g(t,e){var r=new a.I18N(t.container.get(i.EventAggregator),t.container.get(s.BindingSignaler));t.container.registerInstance(a.I18N,r);var o=e(r);return t.postTask(function(){var e=t.container.get(n.ViewResources),i=e.getAttribute("t"),s=e.getAttribute("t-params"),a=r.i18next.options.attributes;a||(a=["t","i18n"]),a.forEach(function(t){return e.registerAttribute(t,i,"t")}),a.forEach(function(t){return e.registerAttribute(t+"-params",s,"t-params")})}),o}function p(t,e){if(void 0===e||"function"!=typeof e){var i="You need to provide a callback method to properly configure the library";throw i}if(t.globalResources("./t"),t.globalResources("./nf"),t.globalResources("./df"),t.globalResources("./rt"),void 0===window.Intl){var n=function(){var i=v.getLogger("i18n");i.warn("Intl API is not available. Trying to load the polyfill.");var n=t.container.get(r.Loader),s="Failed to normalize {module} while loading the Intl polyfill.";return{v:n.normalize("aurelia-i18n").then(function(r){return n.normalize("intl",r).then(function(r){return n.loadModule(r).then(function(i){return window.Intl=i,g(t,e)},function(){return i.warn("Failed to load the Intl polyfill.")})},function(){return i.warn(s.replace("{module}","intl"))})},function(){return i.warn(s.replace("{module}","aurelia-i18n"))})}}();if("object"===("undefined"==typeof n?"undefined":m(n)))return n.v}return Promise.resolve(g(t,e))}Object.defineProperty(t,"__esModule",{value:!0}),t.EventAggregator=t.BaseI18N=t.TParamsCustomAttribute=t.TCustomAttribute=t.TBindingBehavior=t.TValueConverter=t.RtValueConverter=t.NfValueConverter=t.DfValueConverter=t.RelativeTime=t.I18N=t.configure=void 0;var v=d(e),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.configure=p,t.I18N=a.I18N,t.RelativeTime=o.RelativeTime,t.DfValueConverter=h.DfValueConverter,t.NfValueConverter=l.NfValueConverter,t.RtValueConverter=u.RtValueConverter,t.TValueConverter=c.TValueConverter,t.TBindingBehavior=c.TBindingBehavior,t.TCustomAttribute=c.TCustomAttribute,t.TParamsCustomAttribute=c.TParamsCustomAttribute,t.BaseI18N=f.BaseI18N,t.EventAggregator=i.EventAggregator}),define("aurelia-i18n",["aurelia-i18n/aurelia-i18n"],function(t){return t});